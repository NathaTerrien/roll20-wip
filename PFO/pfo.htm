<input type="checkbox" class="npc_toggle" name="attr_npc" value="1" style="display: none;" />
<div class="statblock"><!-- NPC SHEET -->
    <div class="head-info">
        <input checked="checked" class="options-flag" name="attr_options-flag-npc" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
        <div class="myrow"><!-- Display Name and CR -->
            <div class="blacklabel" style="width: 100%;text-align:left;">
                <div class="blackbgrd" style="margin-left:14px;margin-right:6px;">
                    <span class="big only" name="attr_character_name"></span>
                </div>
                <div class="blackbgrd">
                    <input type="hidden" name="attr_npc_fromcompendium" class="fromcompendium" value="" />
                    <button class="myrol" type="compendium" name="attr_npc_fromcompendium" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                </div>
                <div class="blackbgrd" style="float:right;clear:both;margin-right:6px;">
                    <span class="big only" data-i18n="cr-u">CR</span>
                    <span class="big only" name="attr_npc_cr" title="@{npc_cr}"></span>
                </div>
            </div>
        </div> <!-- END Display name and CR -->
        <div class="options"> <!-- NPC OPTIONS BASE DROP -->
            <div class="compendium-drop-target"><!-- NPC OPTIONS BASE DROP -->
                <input type="hidden" name="attr_npc_fromcompendium" accept="uniqueName" />
                <div class="spacer"></div>
                <div class="myrow">
                    <span class="lbl" data-i18n="name">Name</span>
                    <input type="text" name="attr_character_name" accept="Name" class="underlined" spellcheck="false" title="@{character_name}" />
                    <span class="lbl margindent" data-i18n="cr-u">CR</span>
                    <input type="text" name="attr_npc_cr" accept="CR" class="underlined small" spellcheck="false" title="@{npc_cr}" />
                    <span class="lbl margindent" data-i18n="xp-u">XP</span>
                    <input type="text" name="attr_xp" accept="XP" class="underlined medium" title="@{attr_xp}" />
                </div>
                <div class="myrow">
                    <span class="lbl" data-i18n="race-class-and-level">Race, Class, Level</span>
                    <input type="text" name="attr_class" accept="Monster Class" class="underlined type" spellcheck="false" title="@{class}" />
                </div>
                <div class="myrow">
                    <span class="lbl" data-i18n="alignment">Alignment</span>
                    <input type="text" name="attr_npc_alignment" accept="Alignment" class="underlined small upper" spellcheck="false" title="@{npc_alignment}" />
                    <span class="lbl margindent" data-i18n="size">Size</span>
                    <input type="hidden" name="attr_compendium_npc_size" accept="Size" />
                    <select class="size underlined" name="attr_size" title="@{size}">
                        <option value="fine" data-i18n="fine">Fine</option>
                        <option value="diminutive" data-i18n="diminutive">Diminutive</option>
                        <option value="tiny" data-i18n="tiny">Tiny</option>
                        <option value="small" data-i18n="small">Small</option>
                        <option value="medium" data-i18n="medium" selected="selected">Medium</option>
                        <option value="large" data-i18n="large">Large</option>
                        <option value="huge" data-i18n="huge">Huge</option>
                        <option value="gargantuan" data-i18n="gargantuan">Gargantuan</option>
                        <option value="colossal" data-i18n="colossal">Colossal</option>
                    </select>
                    <span class="lbl margindent" data-i18n="type">Type</span>
                    <input type="text" name="attr_npc_type" accept="Creature Type" class="underlined type" title="@{npc_type}" />
                </div>
                <div class="myrow">
                    <span class="lbl" data-i18n="initiative">Initiative</span>
                    <input type="number" name="attr_initiative" class="nospin underlined sml" value="0" title="@{initiative}" />
                    <span class="lbl margindent" data-i18n="senses">Senses</span>
                    <input type="text" name="attr_senses" accept="Senses" class="underlined senses" spellcheck="false" title="@{senses}" />
                    <span class="lbl margindent" data-i18n="perception">Perception</span>
                    <input type="number" name="attr_perception" class="nospin underlined sml" value="0" title="@{perception}" />
                </div>
                <div class="myrow">
                    <span class="lbl" data-i18n="aura">Aura</span>
                    <input type="text" name="attr_aura" accept="Aura" class="underlined aura" spellcheck="false" title="@{aura}" />
                </div>
                <div class="spacer"></div>
                <div class="myrow bold greybg padindent"> <!-- input DEFENSE -->
                    <div class="blackbgrd">
                        <span class="big only" data-i18n="defense">Defense</span>
                    </div>
                </div>
                <div class="myrow">
                    <span class="lbl" data-i18n="ac-u">AC</span>
                    <input type="number" name="attr_ac" class="nospin underlined sml" value="10" title="@{ac}" />
                    <span class="lbl margindent" data-i18n="touch">Touch</span>
                    <input type="number" name="attr_ac_touch" class="nospin underlined sml" value="10" title="@{ac_touch}" />
                    <span class="lbl margindent" data-i18n="flat-footed">Flat-footed</span>
                    <input type="number" name="attr_ac_flatfooted" class="nospin underlined sml" value="10" title="@{ac_flatfooted}" />
                    <input type="text" name="attr_ac_notes" class="underlined" title="@{ac_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                </div>
                <div class="myrow">
                    <span class="lbl" data-i18n="hp-u">HP</span>
                    <input type="number" name="attr_hp" class="nospin underlined sml" value="0" title="@{hp}" />
                    <span class="lbl">/</span>
                    <input type="number" name="attr_hp_max" class="nospin underlined sml" value="0" title="@{hp_max}" />
                    <input type="text" name="attr_hp_notes" class="underlined" title="@{hp_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                    <span class="lbl margindent" data-i18n="hp-roll">HP Roll</span>
                    <input type="text" name="attr_hd_roll" class="underlined smlmed" spellcheck="false" placeholder="1d6+1" title="@{hd_roll}" />
                    <span class="lbl margindent" data-i18n="hd-u">HD</span>
                    <input type="text" name="attr_hd" class="underlined smlmed" accept="Hit Dice" spellcheck="false" placeholder="1d6" title="@{hd}" />
                </div>
                <div class="myrow">
                    <span class="lbl" data-i18n="fort">Fort</span>
                    <input type="number" name="attr_fortitude" class="nospin underlined sml" value="0" title="@{fortitude}" />
                    <span class="lbl margindent" data-i18n="ref">Ref</span>
                    <input type="number" name="attr_reflex" class="nospin underlined sml" value="0" title="@{reflex}" />
                    <span class="lbl margindent" data-i18n="will">Will</span>
                    <input type="number" name="attr_will" class="nospin underlined sml" value="0" title="@{will}" />
                    <span class="lbl margindent" data-i18n="modifiers">Modifiers</span>
                    <input type="text" name="attr_saves_modifiers" class="underlined" spellcheck="false" title="@{saves_modifiers}" />
                    <span class="lbl margindent" data-i18n="sr-u">SR</span>
                    <input type="number" name="attr_sr" accept="Spell Resistance" class="nospin underlined sml" value="0" title="@{sr}" />
                </div>
                <div class="myrow">
                    <span class="lbl right w100" data-i18n="defensive-abilities">Defensive Abilities</span>
                    <input type="text" name="attr_defensive_abilities" accept="Defensive Abilities" class="underlined" spellcheck="false" title="@{defensive_abilities}" />
                    <span class="lbl margindent right w50" data-i18n="dr-u">DR</span>
                    <input type="text" name="attr_npc_dr" accept="DR" class="underlined" spellcheck="false" title="@{npc_dr}" />
                </div>
                <div class="myrow">
                    <span class="lbl right w100" data-i18n="immune">Immune</span>
                    <input type="text" name="attr_immune" accept="Immune" class="underlined" spellcheck="false" title="@{immune}" />
                    <span class="lbl margindent right w50" data-i18n="resist">Resist</span>
                    <input type="text" name="attr_resist" accept="Resist" class="underlined" spellcheck="false" title="@{resist}" />
                </div>
                <div class="myrow">
                    <span class="lbl right w100" data-i18n="weaknesses">Weaknesses</span>
                    <input type="text" name="attr_weaknesses" accept="Weaknesses" class="underlined" spellcheck="false" title="@{weaknesses}" />
                </div>
                <div class="spacer"></div>
                <div class="myrow bold greybg padindent"> <!-- input OFFENSE -->
                    <div class="blackbgrd">
                        <span class="big only" data-i18n="offense">Offense</span>
                    </div>
                </div>
                <div class="myrow">
                    <span class="lbl" data-i18n="speed">Speed</span>
                    <input type="text" name="attr_npc_speed" accept="Speed" class="underlined" spellcheck="false" title="@{npc_speed}" />
                </div>
                <div class="myrow">
                    <span class="lbl" data-i18n="space">Space</span>
                    <input type="text" name="attr_space" accept="Space" class="underlined" spellcheck="false" title="@{space}" />
                    <span class="lbl margindent" data-i18n="reach">Reach</span>
                    <input type="text" name="attr_reach" accept="Reach" class="underlined" spellcheck="false" title="@{reach}" />
                </div>
                <div class="myrow">
                    <input class="pseudocheck" type="checkbox" name="attr_meleeattacks_flag" value="1" title="@{meleeattacks_flag}" checked="checked" /><span></span>
                    <span class="lbl" data-i18n="melee">Melee</span>
                    <span class="spacer"></span>
                    <input class="pseudocheck" type="checkbox" name="attr_rangedattacks_flag" value="1" title="@{rangedattacks_flag}" checked="checked" /><span></span>
                    <span class="lbl" data-i18n="ranged">Ranged</span>
                    <span class="spacer"></span>
                    <input class="pseudocheck" type="checkbox" name="attr_specialattacks_flag" value="1" title="@{specialattacks_flag}" checked="checked" /><span></span>
                    <span class="lbl" data-i18n="special-attacks">Special Attacks</span>
                </div>
                <div class="myrow">
                    <input class="pseudocheck" type="checkbox" name="attr_spellabilities_flag" value="1" title="@{spellabilities_flag}" /><span></span>
                    <span class="lbl" data-i18n="spell-like-abilities">Spell-Like Abilities</span>
                    <span class="lbl margindent" data-i18n="caster-level">Caster Level</span>
                    <input type="number" name="attr_caster2_level" class="nospin underlined sml" value="0" title="@{caster2_level}" />
                    <span class="lbl margindent" data-i18n="concentration">Concentration</span>
                    <input type="number" name="attr_caster2_concentration" class="nospin underlined sml" value="0" title="@{caster2_concentration}" />
                </div>
                <div class="myrow">
                    <input class="pseudocheck" type="checkbox" name="attr_spells_flag" value="1" title="@{spells_flag}" /><span></span>
                    <span class="lbl" data-i18n="spells">Spells</span>
                    <span class="lbl margindent" data-i18n="caster-level">Caster Level</span>
                    <input type="number" name="attr_caster1_level" class="nospin underlined sml" value="0" title="@{caster1_level}" />
                    <span class="lbl margindent" data-i18n="concentration">Concentration</span>
                    <input type="number" name="attr_caster1_concentration" class="nospin underlined sml" value="0" title="@{caster1_concentration}" />
                </div>
                <div class="myrow padindent">
                    <span class="lbl" data-i18n="spells-per-day">Spells per day</span>
                    <span class="lbl margindent">1</span>
                    <input type="number" name="attr_caster1_spells_perday_level_1" class="nospin underlined sml" value="0" title="@{caster1_spells_perday_level_1}" />
                    <span class="lbl margindent">2</span>
                    <input type="number" name="attr_caster1_spells_perday_level_2" class="nospin underlined sml" value="0" title="@{caster1_spells_perday_level_2}" />
                    <span class="lbl margindent">3</span>
                    <input type="number" name="attr_caster1_spells_perday_level_3" class="nospin underlined sml" value="0" title="@{caster1_spells_perday_level_3}" />
                    <span class="lbl margindent">4</span>
                    <input type="number" name="attr_caster1_spells_perday_level_4" class="nospin underlined sml" value="0" title="@{caster1_spells_perday_level_4}" />
                    <span class="lbl margindent">5</span>
                    <input type="number" name="attr_caster1_spells_perday_level_5" class="nospin underlined sml" value="0" title="@{caster1_spells_perday_level_5}" />
                    <span class="lbl margindent">6</span>
                    <input type="number" name="attr_caster1_spells_perday_level_6" class="nospin underlined sml" value="0" title="@{caster1_spells_perday_level_6}" />
                    <span class="lbl margindent">7</span>
                    <input type="number" name="attr_caster1_spells_perday_level_7" class="nospin underlined sml" value="0" title="@{caster1_spells_perday_level_7}" />
                    <span class="lbl margindent">8</span>
                    <input type="number" name="attr_caster1_spells_perday_level_8" class="nospin underlined sml" value="0" title="@{caster1_spells_perday_level_8}" />
                    <span class="lbl margindent">9</span>
                    <input type="number" name="attr_caster1_spells_perday_level_9" class="nospin underlined sml" value="0" title="@{caster1_spells_perday_level_9}" />
                </div>
                <div class="myrow padindent">
                    <span class="lbl" data-i18n="bloodlines-domains-schools:">Bloodlines, Domains, Schools... :</span>
                    <input type="text" name="attr_caster1_spells_notes" class="underlined senses" spellcheck="false" title="@{caster1_spells_notes}" />
                </div>
                <div class="spacer"></div>
                <div class="myrow bold greybg padindent"> <!-- input TACTICS -->
                    <div class="blackbgrd">
                        <span class="big only" data-i18n="tactics">Tactics</span>
                    </div>
                </div>
                <div class="autoex">
                    <span name="attr_tactics"></span>
                    <textarea name="attr_tactics" accept="Tactics" class="underlined" spellcheck="false" data-i18n-placeholder="tactics" placeholder="tactics" title="@{tactics}"></textarea>
                </div>
                <div class="spacer"></div>
                <div class="myrow bold greybg padindent"> <!-- input STATISTICS -->
                    <div class="blackbgrd">
                        <span class="big only" data-i18n="statistics">Statistics</span>
                    </div>
                </div>
                <div class="myrow">
                    <span class="lbl" data-i18n="str-u">STR</span>
                    <input type="number" name="attr_strength" accept="Str" class="nospin underlined sml" value="0" title="@{strength}" />
                    <span class="lbl margindent" data-i18n="dex-u">DEX</span>
                    <input type="number" name="attr_dexterity" accept="Dex" class="nospin underlined sml" value="0" title="@{dexterity}" />
                    <span class="lbl margindent" data-i18n="con-u">CON</span>
                    <input type="number" name="attr_constitution" accept="Con" class="nospin underlined sml" value="0" title="@{constitution}" />
                    <span class="lbl margindent" data-i18n="int-u">INT</span>
                    <input type="number" name="attr_intelligence" accept="Int" class="nospin underlined sml" value="0" title="@{intelligence}" />
                    <span class="lbl margindent" data-i18n="wis-u">WIS</span>
                    <input type="number" name="attr_wisdom" accept="Wis" class="nospin underlined sml" value="0" title="@{wisdom}" />
                    <span class="lbl margindent" data-i18n="cha-u">CHA</span>
                    <input type="number" name="attr_charisma" accept="Cha" class="nospin underlined sml" value="0" title="@{charisma}" />
                </div>
                <div class="myrow">
                    <span class="lbl" data-i18n="base-atk">Base Atk</span>
                    <input type="number" name="attr_bab" accept="Base Atk" class="nospin underlined sml" value="0" title="@{bab}" />
                    <span class="lbl margindent" data-i18n="cmb-u">CMB</span>
                    <input type="number" name="attr_cmb_mod" accept="CMB" class="nospin underlined sml" value="0" title="@{cmb_mod}" />
                    <input type="text" name="attr_cmb_notes" class="underlined medium" title="@{cmb_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                    <span class="lbl margindent" data-i18n="cmd-u">CMD</span>
                    <input type="number" name="attr_cmd_mod" accept="CMD" class="nospin underlined sml" value="0" title="@{cmd_mod}" />
                    <input type="text" name="attr_cmd_notes" class="underlined medium" title="@{cmd_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                </div>
                <div class="myrow">
                    <span class="lbl bold" data-i18n="skills">Skills</span>
                    <span class="lbl margindent" data-i18n="racial-modifiers">Racial Modifiers</span>
                    <input type="text" name="attr_skills_racial_modifiers" accept="Racial Modifiers" class="underlined senses" spellcheck="false" title="@{skills_racial_modifiers}" />
                </div>
                <div class="myrow">
                    <span class="lbl skill" data-i18n="acrobatics">Acrobatics</span>
                    <input type="number" name="attr_acrobatics" class="nospin underlined sml" value="0" title="@{acrobatics}" />
                    <input type="text" name="attr_acrobatics_notes" class="underlined medium" title="@{acrobatics_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                    <span class="lbl skill" data-i18n="appraise">Appraise</span>
                    <input type="number" name="attr_appraise" class="nospin underlined sml" value="0" title="@{appraise}" />
                    <input type="text" name="attr_appraise_notes" class="underlined medium" title="@{appraise_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                </div>
                <div class="myrow">
                    <span class="lbl skill" data-i18n="bluff">Bluff</span>
                    <input type="number" name="attr_bluff" class="nospin underlined sml" value="0" title="@{bluff}" />
                    <input type="text" name="attr_bluff_notes" class="underlined medium" title="@{bluff_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                    <span class="lbl skill" data-i18n="climb">Climb</span>
                    <input type="number" name="attr_climb" class="nospin underlined sml" value="0" title="@{climb}" />
                    <input type="text" name="attr_climb_notes" class="underlined medium" title="@{climb_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                </div>
                <div class="myrow">
                    <span class="lbl skill" data-i18n="craft">Craft</span>
                    <input type="number" name="attr_craft" class="nospin underlined sml" value="0" title="@{craft}" />
                    <input type="text" name="attr_craft_notes" class="underlined medium" title="@{craft_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                    <span class="lbl skill" data-i18n="diplomacy">Diplomacy</span>
                    <input type="number" name="attr_diplomacy" class="nospin underlined sml" value="0" title="@{diplomacy}" />
                    <input type="text" name="attr_diplomacy_notes" class="underlined medium" title="@{diplomacy_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                </div>
                <div class="myrow">
                    <span class="lbl skill" data-i18n="disable_device">Disable Device*</span>
                    <input type="number" name="attr_disable_device" class="nospin underlined sml" value="0" title="@{disable_device}" />
                    <input type="text" name="attr_disable_device_notes" class="underlined medium" title="@{disable_device_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                    <span class="lbl skill" data-i18n="disguise">Disguise</span>
                    <input type="number" name="attr_disguise" class="nospin underlined sml" value="0" title="@{disguise}" />
                    <input type="text" name="attr_disguise_notes" class="underlined medium" title="@{disguise_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                </div>
                <div class="myrow">
                    <span class="lbl skill" data-i18n="escape_artist">Escape Artist</span>
                    <input type="number" name="attr_escape_artist" class="nospin underlined sml" value="0" title="@{escape_artist}" />
                    <input type="text" name="attr_escape_artist_notes" class="underlined medium" title="@{escape_artist_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                    <span class="lbl skill" data-i18n="fly">Fly</span>
                    <input type="number" name="attr_fly" class="nospin underlined sml" value="0" title="@{fly}" />
                    <input type="text" name="attr_fly_notes" class="underlined medium" title="@{fly_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                </div>
                <div class="myrow">
                    <span class="lbl skill" data-i18n="handle_animal">Handle Animal*</span>
                    <input type="number" name="attr_handle_animal" class="nospin underlined sml" value="0" title="@{handle_animal}" />
                    <input type="text" name="attr_handle_animal_notes" class="underlined medium" title="@{handle_animal_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                    <span class="lbl skill" data-i18n="heal">Heal</span>
                    <input type="number" name="attr_heal" class="nospin underlined sml" value="0" title="@{heal}" />
                    <input type="text" name="attr_heal_notes" class="underlined medium" title="@{heal_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                </div>
                <div class="myrow">
                    <span class="lbl skill" data-i18n="intimidate">Intimidate</span>
                    <input type="number" name="attr_intimidate" class="nospin underlined sml" value="0" title="@{intimidate}" />
                    <input type="text" name="attr_intimidate_notes" class="underlined medium" title="@{intimidate_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                </div>
                <div class="myrow">
                    <span class="lbl skill" data-i18n="knowledge_arcana">Knowledge (Arcana)*</span>
                    <input type="number" name="attr_knowledge_arcana" class="nospin underlined sml" value="0" title="@{knowledge_arcana}" />
                    <input type="text" name="attr_knowledge_arcana_notes" class="underlined medium" title="@{knowledge_arcana_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                    <span class="lbl skill" data-i18n="k_dungeoneering">K. (Dungeoneering)*</span>
                    <input type="number" name="attr_knowledge_dungeoneering" class="nospin underlined sml" value="0" title="@{knowledge_dungeoneering}" />
                    <input type="text" name="attr_knowledge_dungeoneering_notes" class="underlined medium" title="@{knowledge_dungeoneering_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                </div>
                <div class="myrow">
                    <span class="lbl skill" data-i18n="k_engineering">K. (Engineering)*</span>
                    <input type="number" name="attr_knowledge_engineering" class="nospin underlined sml" value="0" title="@{knowledge_engineering}" />
                    <input type="text" name="attr_knowledge_engineering_notes" class="underlined medium" title="@{knowledge_engineering_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                    <span class="lbl skill" data-i18n="k_geography">K. (Geography)*</span>
                    <input type="number" name="attr_knowledge_geography" class="nospin underlined sml" value="0" title="@{knowledge_geography}" />
                    <input type="text" name="attr_knowledge_geography_notes" class="underlined medium" title="@{knowledge_geography_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                </div>
                <div class="myrow">
                    <span class="lbl skill" data-i18n="k_history">K. (History)*</span>
                    <input type="number" name="attr_knowledge_history" class="nospin underlined sml" value="0" title="@{knowledge_history}" />
                    <input type="text" name="attr_knowledge_history_notes" class="underlined medium" title="@{knowledge_history_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                    <span class="lbl skill" data-i18n="k_local">K. (Local)*</span>
                    <input type="number" name="attr_knowledge_local" class="nospin underlined sml" value="0" title="@{knowledge_local}" />
                    <input type="text" name="attr_knowledge_local_notes" class="underlined medium" title="@{knowledge_local_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                </div>
                <div class="myrow">
                    <span class="lbl skill" data-i18n="k_nature">K. (Nature)*</span>
                    <input type="number" name="attr_knowledge_nature" class="nospin underlined sml" value="0" title="@{knowledge_nature}" />
                    <input type="text" name="attr_knowledge_nature_notes" class="underlined medium" title="@{knowledge_nature_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                    <span class="lbl skill" data-i18n="k_nobility">K. (Nobility)*</span>
                    <input type="number" name="attr_knowledge_nobility" class="nospin underlined sml" value="0" title="@{knowledge_nobility}" />
                    <input type="text" name="attr_knowledge_nobility_notes" class="underlined medium" title="@{knowledge_nobility_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                </div>
                <div class="myrow">
                    <span class="lbl skill" data-i18n="k_planes">K. (Planes)*</span>
                    <input type="number" name="attr_knowledge_planes" class="nospin underlined sml" value="0" title="@{knowledge_planes}" />
                    <input type="text" name="attr_knowledge_planes_notes" class="underlined medium" title="@{knowledge_planes_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                    <span class="lbl skill" data-i18n="k_religion">K. (Religion)*</span>
                    <input type="number" name="attr_knowledge_religion" class="nospin underlined sml" value="0" title="@{knowledge_religion}" />
                    <input type="text" name="attr_knowledge_religion_notes" class="underlined medium" title="@{knowledge_religion_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                </div>
                <div class="myrow">
                    <span class="lbl skill" data-i18n="linguistics">Linguistics*</span>
                    <input type="number" name="attr_linguistics" class="nospin underlined sml" value="0" title="@{linguistics}" />
                    <input type="text" name="attr_linguistics_notes" class="underlined medium" title="@{linguistics_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                    <span class="lbl skill" data-i18n="perception">Perception</span>
                    <input type="number" name="attr_perception" class="nospin underlined sml" value="0" title="@{perception}" />
                    <input type="text" name="attr_perception_notes" class="underlined medium" title="@{perception_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                </div>
                <div class="myrow">
                    <span class="lbl skill" data-i18n="perform">Perform</span>
                    <input type="number" name="attr_perform" class="nospin underlined sml" value="0" title="@{perform}" />
                    <input type="text" name="attr_perform_notes" class="underlined medium" title="@{perform_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                    <span class="lbl skill" data-i18n="profession">Profession*</span>
                    <input type="number" name="attr_profession" class="nospin underlined sml" value="0" title="@{profession}" />
                    <input type="text" name="attr_profession_notes" class="underlined medium" title="@{profession_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                </div>
                <div class="myrow">
                    <span class="lbl skill" data-i18n="ride">Ride</span>
                    <input type="number" name="attr_ride" class="nospin underlined sml" value="0" title="@{ride}" />
                    <input type="text" name="attr_ride_notes" class="underlined medium" title="@{ride_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                    <span class="lbl skill" data-i18n="sense_motive">Sense Motive</span>
                    <input type="number" name="attr_sense_motive" class="nospin underlined sml" value="0" title="@{sense_motive}" />
                    <input type="text" name="attr_sense_motive_notes" class="underlined medium" title="@{sense_motive_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                </div>
                <div class="myrow">
                    <span class="lbl skill" data-i18n="sleight_of_hand">Sleight of Hand*</span>
                    <input type="number" name="attr_sleight_of_hand" class="nospin underlined sml" value="0" title="@{sleight_of_hand}" />
                    <input type="text" name="attr_sleight_of_hand_notes" class="underlined medium" title="@{sleight_of_hand_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                    <span class="lbl skill" data-i18n="spellcraft">Spellcraft*</span>
                    <input type="number" name="attr_spellcraft" class="nospin underlined sml" value="0" title="@{spellcraft}" />
                    <input type="text" name="attr_spellcraft_notes" class="underlined medium" title="@{spellcraft_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                </div>
                <div class="myrow">
                    <span class="lbl skill" data-i18n="stealth">Stealth</span>
                    <input type="number" name="attr_stealth" class="nospin underlined sml" value="0" title="@{stealth}" />
                    <input type="text" name="attr_stealth_notes" class="underlined medium" title="@{stealth_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                    <span class="lbl skill" data-i18n="survival">Survival</span>
                    <input type="number" name="attr_survival" class="nospin underlined sml" value="0" title="@{survival}" />
                    <input type="text" name="attr_survival_notes" class="underlined medium" title="@{survival_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                </div>
                <div class="myrow">
                    <span class="lbl skill" data-i18n="swim">Swim</span>
                    <input type="number" name="attr_swim" class="nospin underlined sml" value="0" title="@{swim}" />
                    <input type="text" name="attr_swim_notes" class="underlined medium" title="@{swim_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                    <span class="lbl skill" data-i18n="use_magic_device">Use Magic Device*</span>
                    <input type="number" name="attr_use_magic_device" class="nospin underlined sml" value="0" title="@{use_magic_device}" />
                    <input type="text" name="attr_use_magic_device_notes" class="underlined medium" title="@{use_magic_device_notes}" data-i18n-placeholder="notes" placeholder="Notes" />
                </div>
                <div class="myrow">
                    <span class="lbl bold" data-i18n="languages">Languages</span>
                    <input type="text" name="attr_languages" accept="Languages" class="underlined aura" spellcheck="false" title="@{languages}" />
                </div>
                <div class="myrow">
                    <span class="lbl bold" data-i18n="sq-u" data-i18n-title="special-qualities" title="Special Qualities">SQ</span>
                    <input type="text" name="attr_sq" accept="SQ" class="underlined aura" spellcheck="false" title="@{sq}" />
                </div>
                <div class="myrow">
                    <span class="lbl bold" data-i18n="combat-gear">Combat Gear</span>
                    <div class="autoex">
                        <span name="attr_combat_gear"></span>
                        <textarea name="attr_combat_gear" accept="Combat Gear" class="underlined" spellcheck="false" data-i18n-placeholder="combat-gear" placeholder="Combat Gear" title="@{combat_gear}"></textarea>
                    </div>
                </div>
                <div class="spacer"></div>
                <div class="myrow bold greybg padindent"> <!-- input ECOLOGY -->
                    <div class="blackbgrd">
                        <span class="big only" data-i18n="ecology">Ecology</span>
                    </div>
                </div>
                <div class="autoex">
                    <span name="attr_environment"></span>
                    <textarea name="attr_environment" accept="Environment" class="underlined" spellcheck="false" data-i18n-placeholder="environment" placeholder="Environment" title="@{environment}"></textarea>
                </div>
                <span class="lbl" data-i18n="environment">Environment</span>
                <div class="spacer"></div>
                <div class="autoex">
                    <span name="attr_organization"></span>
                    <textarea name="attr_organization" accept="Organization" class="underlined" spellcheck="false" data-i18n-placeholder="organization" placeholder="Organization" title="@{organization}"></textarea>
                </div>
                <span class="lbl" data-i18n="organization">Organization</span>
                <div class="spacer"></div>
                <div class="autoex">
                    <span name="attr_treasure"></span>
                    <textarea name="attr_treasure" accept="Treasure" class="underlined" spellcheck="false" data-i18n-placeholder="treasure" placeholder="Treasure" title="@{treasure}"></textarea>
                </div>
                <span class="lbl" data-i18n="treasure">Treasure</span>
                <div class="spacer"></div>
                <div class="autoex">
                    <span name="attr_background"></span>
                    <textarea name="attr_background" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{background}"></textarea>
                </div>
                <span class="lbl" data-i18n="description">Description</span>
                <div class="spacer"></div>
                <div class="myrow bold greybg padindent"> <!-- input CONFIGURATION -->
                    <div class="blackbgrd">
                        <span class="big only" data-i18n="tab-configuration">Configuration</span>
                    </div>
                </div>
                <div class="myrow">
                    <span class="lbl bold" data-i18n="general">General</span>
                    <span class="spacer"></span>
                    <input class="pseudocheck" type="checkbox" name="attr_npc" value="1" title="@{npc}" /><span></span><span class="lbl" data-i18n="npc-monster-statblock">NPC/Monster Statblock</span>
                    <span class="spacer"></span>
                    <input class="pseudocheck" type="checkbox" name="attr_special_abilities_flag" value="1" title="@{special_abilities_flag}" checked="checked" /><span></span><span class="lbl" data-i18n="show-special-abilities">Show Special Abilities</span>
                    <span class="spacer"></span>
                    <input class="pseudocheck" type="checkbox" name="attr_ecology_flag" value="1" title="@{ecology_flag}" checked="checked" /><span></span><span class="lbl" data-i18n="show-ecology">Show Ecology</span>
                </div>
                <div class="myrow">
                    <span class="lbl bold" data-i18n="rolls">Rolls</span>
                    <span class="spacer"></span>
                    <input class="pseudocheck" type="checkbox" name="attr_rollshowchar" value="[[1]]" title="@{rollshowchar}" checked="checked" /><span></span><span class="lbl" data-i18n="show-character-name">Show character name</span>
                    <span class="lbl margindent" data-i18n="whisp-rolls-gm:">Whisper Rolls to GM:</span>
                    <select name="attr_whispertype" class="underlined" title="@{whispertype}">
                        <option value="" data-i18n="never-whisper-roll" selected="selected">Never Whisper Rolls</option>
                        <!-- <option value="@{whispertoggle}" data-i18n="toggle-roll-whisper">Whisper Toggle</option> -->
                        <option value="?{Whisper?|Public Roll,|Whisper Roll,/w gm }" data-i18n="query-whisper-roll">Query Whisper</option>
                        <option value="/w gm " data-i18n="always-whisper-roll">Always Whisper Rolls</option>
                    </select>
                </div>
            </div> <!-- END NPC OPTIONS BASE DROP -->
            <div class="spacer"></div>
        </div>  <!-- END NPC options / base entry -->
        <div class="npc-display"> <!-- Display HEAD INFO -->
            <div class="myrow bold">
                <span class="bold" data-i18n="xp-u">XP</span>
                <span class="bold" name="attr_xp"></span>
            </div>
            <input type="hidden" class="optional-flag" name="attr_class" value="" /><div class="myrow optional blk">
                <span name="attr_class"></span>
            </div>
            <div class="myrow">
                <span class="upper" name="attr_npc_alignment"></span>
                <span name="attr_size_display"></span>
                <span name="attr_npc_type"></span>
            </div>
            <div class="myrow">
                <button class="myrol" type="roll" name="InitRoll" data-i18n-title="initiative-roll" title="Initiative roll" value="@{whispertype} &{template:npc} {{name=^{initiative}}} {{type=initiative}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{initiative}[MOD] &{tracker}]]}}"><span class="bold" data-i18n="init">Init</span>&nbsp;<span name="attr_initiative"></span></button>;
                <span class="bold" data-i18n="senses">Senses</span>
                <span name="attr_senses"></span>;
                <button class="myrol" type="roll" name="perception" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{perception}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{perception}[MOD]]]}}"><span class="bold" data-i18n="perception">Perception</span>&nbsp;<span name="attr_perception"></span></button>
            </div>
            <input type="hidden" class="optional-flag" name="attr_aura" value="" /><div class="myrow optional blk">
                <span class="bold" data-i18n="aura">Aura</span>
                <span name="attr_aura"></span>
            </div>
        </div> <!-- END Display HEAD INFO -->
        <div class="npc-display"> <!-- Display DEFENSE -->
            <div class="myrow">
                <span class="npc-section" data-i18n="defense">Defense</span>
                <span class="bold" data-i18n="ac-u">AC</span>
                <span name="attr_ac"></span>,
                <span data-i18n="touch">Touch</span>
                <span name="attr_ac_touch"></span>,
                <span data-i18n="flat-footed">Flat-footed</span>
                <span name="attr_ac_flatfooted"></span>
                <input type="hidden" class="optional-flag" name="attr_ac_notes" value="" /><span class="optional inl">(<span name="attr_ac_notes"></span>)</span>
            </div>
            <div class="myrow">
                <span class="bold" data-i18n="hp-u">HP</span>
                <input type="number" name="attr_hp" class="nospin underlined sml" value="0" title="@{hp}" />
                /
                <span name="attr_hp_max" title="@{hp_max}"></span>
                <input type="hidden" class="optional-flag" name="attr_hp_notes" value="" /><span class="optional inl">(<span name="attr_hp_notes"></span>)</span>
                <button class="myrol" type="roll" name="HpRoll" data-i18n-title="roll-hp" title="Roll HP" value="@{whispertype} &{template:npc} {{name=^{hit-points}}} {{type=hp}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[@{hd_roll}]]}}">(<span name="attr_hd_roll"></span>)</button>
                <span class="bold margindent" data-i18n="hit-dice">Hit Dice</span>
                <button class="myrol" type="roll" name="HdRoll" data-i18n-title="roll-hd" title="Roll HD" value="@{whispertype} &{template:npc} {{name=^{hit-dice}}} {{type=hp}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[@{hd}]]}}"><span name="attr_hd"></span></button>
                <span class="bold margindent" data-i18n="sr-u">SR</span>
                <span name="attr_sr"></span>
            </div>
            <div class="myrow">
                <button class="myrol" type="roll" name="FortRoll" data-i18n-title="fortitude-roll" title="Fortitude roll" value="@{whispertype} &{template:npc} {{name=^{fortitude}}} {{type=save}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{fortitude}[MOD]]]}}"><span class="bold" data-i18n="fort">Fort</span>
                    <span name="attr_fortitude"></span>,</button>
                <button class="myrol" type="roll" name="RefRoll" data-i18n-title="reflex-roll" title="Reflex roll" value="@{whispertype} &{template:npc} {{name=^{reflex}}} {{type=save}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{reflex}[MOD]]]}}"><span class="bold" data-i18n="ref">Ref</span>
                    <span name="attr_reflex"></span>,</button>
                <button class="myrol" type="roll" name="WillRoll" data-i18n-title="will-roll" title="Will roll" value="@{whispertype} &{template:npc} {{name=^{will}}} {{type=save}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{will}[MOD]]]}}"><span class="bold" data-i18n="will">Will</span>
                    <span name="attr_will"></span></button>
                <input type="hidden" class="optional-flag" name="attr_saves_modifiers" value="" /><span class="optional inl">(<span name="attr_saves_modifiers"></span>)</span>
            </div>
            <input type="hidden" class="optional-flag" name="attr_defensive_abilities" value="" /><div class="myrow optional blk">
                <span class="bold" data-i18n="defensive-abilities">Defensive Abilities</span>
                <span name="attr_defensive_abilities"></span>
            </div>
            <input type="hidden" class="optional-flag" name="attr_npc_dr" value="" /><div class="myrow optional blk">
                <span class="bold" data-i18n="dr-u">DR</span>
                <span name="attr_npc_dr"></span>
            </div>
            <input type="hidden" class="optional-flag" name="attr_immune" value="" /><div class="myrow optional blk">
                <span class="bold" data-i18n="immune">Immune</span>
                <span name="attr_immune"></span>
            </div>
            <input type="hidden" class="optional-flag" name="attr_resist" value="" /><div class="myrow optional blk">
                <span class="bold" data-i18n="resist">Resist</span>
                <span name="attr_resist"></span>
            </div>
            <input type="hidden" class="optional-flag" name="attr_weaknesses" value="" /><div class="myrow optional blk">
                <span class="bold" data-i18n="weaknesses">Weaknesses</span>
                <span name="attr_weaknesses"></span>
            </div>
        </div> <!-- END Display DEFENSE -->
    </div>
    <div class="npc-display"> <!-- Display OFFENSE -->
        <span class="npc-section" data-i18n="offense">Offense</span>
        <div class="myrow">
            <span class="bold" data-i18n="speed">Speed</span>
            <span name="attr_npc_speed"></span>
        </div>
        <input type="hidden" class="optional-flag" name="attr_space" value="" /><div class="optional inl">
            <span class="bold" data-i18n="space">Space</span>
            <span name="attr_space"></span>
        </div>
        <input type="hidden" class="optional-flag" name="attr_reach" value="" /><div class="optional inl">
            <span class="bold" data-i18n="reach">Reach</span>
            <span name="attr_reach"></span>
        </div>
        <input type="hidden" class="optional-flag0" name="attr_meleeattacks_flag" value="1" /><div class="optional blk npcatk melee"> <!-- MELEE ATTACKS -->
            <span class="bold" data-i18n="melee">Melee</span>
            <fieldset class="repeating_npcatk-melee">
                <div class="attack">
                    <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                    <button class="myrol underl" type="roll" name="AtkDmgRoll" data-i18n-title="attack-damage-roll" title="Attack & Damage roll" value="@{whispertype} &{template:npc} {{name=@{atkname}}} {{type=attackdamage}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{attack=1}} @{multipleatk} @{descflag}"><span name="attr_atkdisplay"></span></button>
                    <div class="options">
                        <div class="myrow">
                            <span class="lbl" data-i18n="name">Name</span>
                            <input type="text" name="attr_atkname" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_npcatk-melee_$id_atkname}" />
                        </div>
                        <div class="myrow grtopbrd">
                            <span class="lbl" data-i18n="attack:">Attack:</span>
                            <input type="number" class="nospin underlined sml" name="attr_atkmod" value="0" spellcheck="false" title="@{repeating_npcatk-melee_$id_atkmod}" />
                            <span class="lbl margindent" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                            <input type="number" class="nospin underlined sml" name="attr_atkcritrange" value="20" title="@{repeating_npcatk-melee_$id_atkcritrange}" />
                            <span class="spacer"></span>
                            <input class="pseudocheck" type="checkbox" name="attr_multipleatk_flag" value="1" title="@{repeating_npcatk-melee_$id_multipleatk_flag}" /><span></span>
                            <span class="lbl" data-i18="multiple-attacks">Multiple attacks</span>
                            <input type="hidden" name="attr_multipleatk" value="" />
                        </div>
                        <input type="hidden" class="optional-flag0" name="attr_multipleatk_flag" value="0" /><div class="optional blk">
                            <span class="lbl margindent">#2:</span>
                            <input type="text" class="underlined sml" name="attr_atkmod2" value="" spellcheck="false" title="@{repeating_npcatk-melee_$id_atkmod2}" />
                            <span class="lbl margindent">#3:</span>
                            <input type="text" class="underlined sml" name="attr_atkmod3" value="" spellcheck="false" title="@{repeating_npcatk-melee_$id_atkmod3}" />
                            <span class="lbl margindent">#4:</span>
                            <input type="text" class="underlined sml" name="attr_atkmod4" value="" spellcheck="false" title="@{repeating_npcatk-melee_$id_atkmod4}" />
                            <span class="lbl margindent">#5:</span>
                            <input type="text" class="underlined sml" name="attr_atkmod5" value="" spellcheck="false" title="@{repeating_npcatk-melee_$id_atkmod5}" />
                            <span class="lbl margindent">#6:</span>
                            <input type="text" class="underlined sml" name="attr_atkmod6" value="" spellcheck="false" title="@{repeating_npcatk-melee_$id_atkmod6}" />
                            <span class="lbl margindent">#7:</span>
                            <input type="text" class="underlined sml" name="attr_atkmod7" value="" spellcheck="false" title="@{repeating_npcatk-melee_$id_atkmod7}" />
                            <span class="lbl margindent">#8:</span>
                            <input type="text" class="underlined sml" name="attr_atkmod8" value="" spellcheck="false" title="@{repeating_npcatk-melee_$id_atkmod8}" />
                            <span class="lbl margindent">#9:</span>
                            <input type="text" class="underlined sml" name="attr_atkmod9" value="" spellcheck="false" title="@{repeating_npcatk-melee_$id_atkmod9}" />
                        </div>
                        <div class="myrow grtopbrd">
                            <input class="pseudocheck" type="checkbox" name="attr_dmgflag" value="1" title="@{repeating_npcatk-melee_$id_@{dmgflag}" checked="checked" /><span></span>
                            <span class="lbl atk" data-i18n="damage:">Damage:</span>
                            <input type="text" name="attr_dmgbase" class="underlined smlmed" spellcheck="false" placeholder="1d6" title="@{repeating_npcatk-melee_$id_dmgbase}" />
                            <span class="lbl"><span data-i18n="notes">Notes</span>/<span data-i18n="type:">Type:</span></span>
                            <input type="text" name="attr_dmgtype" class="underlined medium" spellcheck="false" data-i18n-placeholder="slashing" placeholder="Slashing" title="@{repeating_npcatk-melee_$id_dmgtype}" />
                            <span class="lbl" data-i18n="critical-multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Critical Multiplier:</span>
                            <input type="number" class="nospin underlined sml" name="attr_dmgcritmulti" value="2" title="@{repeating_npcatk-melee_$id_dmgcritmulti}" />
                        </div>
                        <div class="myrow">
                            <input class="pseudocheck" type="checkbox" name="attr_dmg2flag" value="1" title="@{repeating_npcatk-melee_$id_dmg2flag}" /><span></span>
                            <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                            <input type="text" name="attr_dmg2base" class="underlined smlmed" spellcheck="false" placeholder="1d4" title="@{repeating_npcatk-melee_$id_dmg2base}" />
                            <span class="lbl"><span data-i18n="notes">Notes</span>/<span data-i18n="type:">Type:</span></span>
                            <input type="text" name="attr_dmg2type" class="underlined medium" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_npcatk-melee_$id_dmg2type}" />
                            <span class="lbl" data-i18n="critical-multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Critical Multiplier:</span>
                            <input type="number" class="nospin underlined sml" name="attr_dmg2critmulti" value="1" title="@{repeating_npcatk-melee_$id_dmg2critmulti}" />
                        </div>
                        <div class="myrow grtopbrd">
                            <input class="pseudocheck" type="checkbox" name="attr_descflag" value="{{descflag=[[1]]}}{{desc=@{atkdesc}}}" title="@{repeating_npcatk-melee_$id_descflag}" /><span></span>
                            <span class="lbl atk" data-i18n="description:">Description:</span>
                            <div class="autoex">
                                <span name="attr_atkdesc"></span>
                                <textarea name="attr_atkdesc" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_npcatk-melee_$id_atkdesc}"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div> <!-- END MELEE ATTACKS -->
        <input type="hidden" class="optional-flag0" name="attr_rangedattacks_flag" value="1" /><div class="optional blk npcatk ranged"> <!-- RANGED ATTACKS -->
            <span class="bold" data-i18n="ranged">Ranged</span>
            <fieldset class="repeating_npcatk-ranged">
                <div class="attack">
                    <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                    <button class="myrol underl" type="roll" name="AtkDmgRoll" data-i18n-title="attack-damage-roll" title="Attack & Damage roll" value="@{whispertype} &{template:npc} {{name=@{atkname}}} {{type=attackdamage}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{attack=1}} @{multipleatk} @{descflag} {{range=@{atkrange}}}"><span name="attr_atkdisplay"></span></button>
                    <div class="options">
                        <div class="myrow">
                            <span class="lbl" data-i18n="name">Name</span>
                            <input type="text" name="attr_atkname" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_npcatk-ranged_$id_atkname}" />
                        </div>
                        <div class="myrow grtopbrd">
                            <span class="lbl" data-i18n="attack:">Attack:</span>
                            <input type="number" class="nospin underlined sml" name="attr_atkmod" value="0" spellcheck="false" title="@{repeating_npcatk-melee_$id_atkmod}" />
                            <span class="lbl margindent" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                            <input type="number" class="nospin underlined sml" name="attr_atkcritrange" value="20" title="@{repeating_npcatk-melee_$id_atkcritrange}" />
                            <span class="spacer"></span>
                            <input class="pseudocheck" type="checkbox" name="attr_multipleatk_flag" value="1" title="@{repeating_npcatk-melee_$id_multipleatk_flag}" /><span></span>
                            <span class="lbl" data-i18="multiple-attacks">Multiple attacks</span>
                            <input type="hidden" name="attr_multipleatk" value="" />
                        </div>
                        <input type="hidden" class="optional-flag0" name="attr_multipleatk_flag" value="0" /><div class="optional blk">
                            <span class="lbl margindent">#2:</span>
                            <input type="text" class="underlined sml" name="attr_atkmod2" value="" spellcheck="false" title="@{repeating_npcatk-melee_$id_atkmod2}" />
                            <span class="lbl margindent">#3:</span>
                            <input type="text" class="underlined sml" name="attr_atkmod3" value="" spellcheck="false" title="@{repeating_npcatk-melee_$id_atkmod3}" />
                            <span class="lbl margindent">#4:</span>
                            <input type="text" class="underlined sml" name="attr_atkmod4" value="" spellcheck="false" title="@{repeating_npcatk-melee_$id_atkmod4}" />
                            <span class="lbl margindent">#5:</span>
                            <input type="text" class="underlined sml" name="attr_atkmod5" value="" spellcheck="false" title="@{repeating_npcatk-melee_$id_atkmod5}" />
                            <span class="lbl margindent">#6:</span>
                            <input type="text" class="underlined sml" name="attr_atkmod6" value="" spellcheck="false" title="@{repeating_npcatk-melee_$id_atkmod6}" />
                            <span class="lbl margindent">#7:</span>
                            <input type="text" class="underlined sml" name="attr_atkmod7" value="" spellcheck="false" title="@{repeating_npcatk-melee_$id_atkmod7}" />
                            <span class="lbl margindent">#8:</span>
                            <input type="text" class="underlined sml" name="attr_atkmod8" value="" spellcheck="false" title="@{repeating_npcatk-melee_$id_atkmod8}" />
                            <span class="lbl margindent">#9:</span>
                            <input type="text" class="underlined sml" name="attr_atkmod9" value="" spellcheck="false" title="@{repeating_npcatk-melee_$id_atkmod9}" />
                        </div>
                        <div class="myrow">
                            <span class="lbl w50 right" data-i18n="range:">Range:</span>
                            <input type="text" name="attr_atkrange" class="underlined medium" spellcheck="false" data-i18n-placeholder="range-place" placeholder="10 feet" title="@{repeating_npcatk-ranged_$id_atkrange}" />
                        </div>
                        <div class="myrow grtopbrd">
                            <input class="pseudocheck" type="checkbox" name="attr_dmgflag" value="1" title="@{repeating_npcatk-ranged_$id_dmgflag}" checked="checked" /><span></span>
                            <span class="lbl atk" data-i18n="damage:">Damage:</span>
                            <input type="text" name="attr_dmgbase" class="underlined smlmed" spellcheck="false" placeholder="1d6" title="@{repeating_npcatk-ranged_$id_dmgbase}" />
                            <span class="lbl"><span data-i18n="notes">Notes</span>/<span data-i18n="type:">Type:</span></span>
                            <input type="text" name="attr_dmgtype" class="underlined medium" spellcheck="false" data-i18n-placeholder="slashing" placeholder="Slashing" title="@{repeating_npcatk-ranged_$id_dmgtype}" />
                            <span class="lbl" data-i18n="critical-multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Critical Multiplier:</span>
                            <input type="number" class="nospin underlined sml" name="attr_dmgcritmulti" value="2" title="@{repeating_npcatk-ranged_$id_dmgcritmulti}" />
                        </div>
                        <div class="myrow">
                            <input class="pseudocheck" type="checkbox" name="attr_dmg2flag" value="1" title="@{repeating_npcatk-ranged_$id_dmg2flag}" /><span></span>
                            <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                            <input type="text" name="attr_dmg2base" class="underlined smlmed" spellcheck="false" placeholder="1d4" title="@{repeating_npcatk-ranged_$id_dmg2base}" />
                            <span class="lbl"><span data-i18n="notes">Notes</span>/<span data-i18n="type:">Type:</span></span>
                            <input type="text" name="attr_dmg2type" class="underlined medium" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_npcatk-ranged_$id_dmg2type}" />
                            <span class="lbl" data-i18n="critical-multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Critical Multiplier:</span>
                            <input type="number" class="nospin underlined sml" name="attr_dmg2critmulti" value="1" title="@{repeating_npcatk-ranged_$id_dmg2critmulti}" />
                        </div>
                        <div class="myrow grtopbrd">
                            <input class="pseudocheck" type="checkbox" name="attr_descflag" value="{{descflag=[[1]]}}{{desc=@{atkdesc}}}" title="@{repeating_npcatk-ranged_$id_descflag}" /><span></span>
                            <span class="lbl atk" data-i18n="description:">Description:</span>
                            <div class="autoex">
                                <span name="attr_atkdesc"></span>
                                <textarea name="attr_atkdesc" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_npcatk-ranged_$id_atkdesc}"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div> <!-- END RANGED ATTACKS -->
        <input type="hidden" class="optional-flag0" name="attr_specialattacks_flag" value="1" /><div class="optional blk npcatk special"> <!-- SPECIAL ATTACKS -->
            <span class="bold" data-i18n="special-attacks">Special Attacks</span>
            <fieldset class="repeating_npcatk-special">
                <div class="attack">
                    <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                    <button class="myrol underl" type="roll" name="AtkDmgRoll" data-i18n-title="attack-damage-roll" title="Attack & Damage roll" value="@{whispertype} &{template:npc} {{name=@{atkname}}} {{type=attackdamage}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} @{rangeflag} @{areaflag} @{effectflag} @{atksaveflag} @{atkflag} @{dmgflag} @{dmg2flag} @{descflag}"><span name="attr_atkname"></span></button>
                    <input type="hidden" class="optional-flag" name="attr_perday_max" value="" /><span class="optional inl">(<input type="number" class="nospin spsml center" name="attr_perday" value="0" data-i18n-title="#-used" title="# used" />/<span name="attr_perday_max" data-i18n-title="max-#-per-day" title="Max # per day"></span>)</span>
                    <div class="options">
                        <div class="myrow">
                            <span class="lbl" data-i18n="name">Name</span>
                            <input type="text" name="attr_atkname" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_npcatk-special_$id_atkname}" />
                            <span class="spacer"></span>
                            <input type="text" class="underlined spsml center" name="attr_perday_max" value="" spellcheck="false" title="@{repeating_npcatk-special_$id_perday_max}" />
                            <span class="lbl" data-i18n="per-day">per day</span>
                        </div>
                        <div class="myrow grtopbrd">
                            <input class="pseudocheck" type="checkbox" name="attr_atkflag" value="{{attack=1}}{{roll=[[1d20cs>@{atkcritrange}+@{atkmod}[MOD]+@{rollmod_attack}[BONUS]]]}}{{critconfirm=[[1d20cs20+@{atkmod}[MOD]+@{rollmod_attack}[BONUS]]]}}" title="@{repeating_npcatk-special_$id_atkflag}" /><span></span>
                            <span class="lbl" data-i18n="attack:">Attack:</span>
                            <input type="number" class="nospin underlined sml" name="attr_atkmod" value="0" spellcheck="false" title="@{repeating_npcatk-special_$id_atkmod}" />
                            <span class="lbl margindent" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                            <input type="number" class="nospin underlined sml" name="attr_atkcritrange" value="20" title="@{repeating_npcatk-special_$id_atkcritrange}" />
                        </div>
                        <div class="myrow">
                            <input class="pseudocheck" type="checkbox" name="attr_rangeflag" value="{{range=@{atkrange}}}" title="@{repeating_npcatk-special_$id_rangeflag}" /><span></span>
                            <span class="lbl" data-i18n="range:">Range:</span>
                            <input type="text" name="attr_atkrange" class="underlined medium" spellcheck="false" data-i18n-placeholder="range-place" placeholder="10 feet" title="@{repeating_npcatk-special_$id_atkrange}" />
                            <span class="spacer"></span>
                            <input class="pseudocheck" type="checkbox" name="attr_areaflag" value="{{area=@{atkarea}}}" title="@{repeating_npcatk-special_$id_areaflag}" /><span></span>
                            <span class="lbl" data-i18n="area:">Area:</span>
                            <input type="text" name="attr_atkarea" class="underlined medium" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_npcatk-special_$id_atkarea}" />
                        </div>
                        <div class="myrow grtopbrd">
                            <input class="pseudocheck" type="checkbox" name="attr_effectflag" value="{{effect=@{atkeffect}}}" title="@{repeating_npcatk-special_$id_effectflag}" /><span></span>
                            <span class="lbl" data-i18n="effect:">Effect:</span>
                            <input type="text" name="attr_atkeffect" class="underlined senses" spellcheck="false" title="@{repeating_npcatk-special_$id_atkeffect}" />
                        </div>
                        <div class="myrow">
                            <input class="pseudocheck" type="checkbox" name="attr_atksaveflag" value="{{save=1}}{{savedc=@{atkdc}}}{{saveeffect=@{atksave}}}" title="@{repeating_npcatk-special_$id_atksaveflag}" /><span></span>
                            <span class="lbl" data-i18n="saving-throw:">Saving Throw:</span>
                            <input type="text" name="attr_atksave" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_npcatk-special_$id_atksave}" />
                            <span class="lbl margindent" data-i18n="dc-u">DC</span>
                            <input type="number" class="nospin underlined sml" name="attr_atkdc" value="0" title="@{repeating_npcatk-special_$id_atkdc}" />
                        </div>
                        <div class="myrow grtopbrd">
                            <input class="pseudocheck" type="checkbox" name="attr_dmgflag" value="{{damage=1}}{{dmg1flag=1}}{{dmg1=[[@{dmgbase}[MOD]+@{rollmod_damage}[BONUS]]]}}{{dmg1type=@{dmgtype}}}{{dmg1crit=[[(@{dmgbase}[MOD]+@{rollmod_damage}[BONUS])*@{dmgcritmulti}]]}}" title="@{dmgflag}" /><span></span>
                            <span class="lbl atk" data-i18n="damage:">Damage:</span>
                            <input type="text" name="attr_dmgbase" class="underlined smlmed" spellcheck="false" placeholder="1d6" title="@{repeating_npcatk-special_$id_dmgbase}" />
                            <span class="lbl"><span data-i18n="notes">Notes</span>/<span data-i18n="type:">Type:</span></span>
                            <input type="text" name="attr_dmgtype" class="underlined medium" spellcheck="false" data-i18n-placeholder="slashing" placeholder="Slashing" title="@{repeating_npcatk-special_$id_dmgtype}" />
                            <span class="lbl" data-i18n="critical-multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Critical Multiplier:</span>
                            <input type="number" class="nospin underlined sml" name="attr_dmgcritmulti" value="2" title="@{repeating_npcatk-special_$id_dmgcritmulti}" />
                        </div>
                        <div class="myrow">
                            <input class="pseudocheck" type="checkbox" name="attr_dmg2flag" value="{{damage=1}} {{dmg2flag=1}}{{dmg2=[[@{dmg2base}[MOD]+@{rollmod_damage}[BONUS]]]}}{{dmg2type=@{dmg2type}}}{{dmg2crit=[[(@{dmg2base}[MOD]+@{rollmod_damage}[BONUS])*@{dmg2critmulti}]]}}" title="@{repeating_npcatk-special_$id_dmg2flag}" /><span></span>
                            <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                            <input type="text" name="attr_dmg2base" class="underlined smlmed" spellcheck="false" placeholder="1d4" title="@{repeating_npcatk-special_$id_dmg2base}" />
                            <span class="lbl"><span data-i18n="notes">Notes</span>/<span data-i18n="type:">Type:</span></span>
                            <input type="text" name="attr_dmg2type" class="underlined medium" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_npcatk-special_$id_dmg2type}" />
                            <span class="lbl" data-i18n="critical-multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Critical Multiplier:</span>
                            <input type="number" class="nospin underlined sml" name="attr_dmg2critmulti" value="1" title="@{repeating_npcatk-special_$id_dmg2critmulti}" />
                        </div>
                        <div class="myrow grtopbrd">
                            <input class="pseudocheck" type="checkbox" name="attr_descflag" value="{{descflag=[[1]]}}{{desc=@{atkdesc}}}" title="@{repeating_npcatk-special_$id_descflag}" checked="checked" /><span></span>
                            <span class="lbl atk" data-i18n="description:">Description:</span>
                            <div class="autoex">
                                <span name="attr_atkdesc"></span>
                                <textarea name="attr_atkdesc" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_npcatk-special_$id_atkdesc}"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div> <!-- END SPECIAL ATTACKS -->
        <input type="hidden" class="optional-flag0" name="attr_spellabilities_flag" value="0" /><div class="optional blk npcatk spelllike"> <!-- SPELL-LIKE ABILITIES -->
            <div class="myrow">
                <span class="bold" data-i18n="spell-like-abilities">Spell-Like Abilities</span>
                (<span data-i18n="cl-u">CL</span> <span name="attr_caster2_level"></span>;
                <button class="myrol" type="roll" name="Caster2ConcentrationRoll" data-i18n-title="concentration-roll" title="Concentration roll" value="@{whispertype} &{template:npc} {{name=^{concentration}}} {{type=save}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{caster2_concentration}[MOD]]]}}"><span data-i18n="concentration">Concentration</span> +<span name="attr_caster2_concentration"></span></button>)
            </div>
            <fieldset class="repeating_spell-like"> <!-- REPEATING SPELL-LIKE -->
                <input type="hidden" name="attr_spelllevel" value="like" />
                <input type="hidden" name="attr_spellcaster" value="2" />
                <div class="spell right compendium-drop-target">
                    <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                    <div class="myrow">
                        <input type="hidden" name="attr_rollcontent" />
                        <button class="myrol underl" type="roll" name="SpellRoll" data-i18n-title="cast-spell" title="Cast spell" value="@{rollcontent}"><span name="attr_spelldisplay"></span></button><input type="hidden" class="optional-flag0" name="attr_spellprepared" value="0" /><span class="optional inl">&nbsp;(<input type="number" class="nospin spsml center" name="attr_perday" value="0" data-i18n-title="#-used" title="# used" />/<span name="attr_perday_max" data-i18n-title="max-#-per-day" title="Max # per day"></span>)</span>,
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span class="lbl" data-i18n="name">Name</span>
                            <input type="text" name="attr_spellname" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_spell-like_$id_spellname}" />
                            <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                            <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                            <span class="spacer"></span>
                            <input type="radio" name="attr_timesperday" class="pseudocheck" value="constant" title="@{repeating_spell-like_$id_timesperday}" /><span></span>
                            <span class="lbl" data-i18n="constant">constant</span>
                            <input type="radio" name="attr_timesperday" class="pseudocheck" value="at-will" title="@{repeating_spell-like_$id_timesperday}" checked="checked" /><span></span>
                            <span class="lbl" data-i18n="at-will">at will</span>
                            <input type="radio" name="attr_timesperday" class="pseudocheck" value="per-day" title="@{repeating_spell-like_$id_timesperday}" /><span></span>
                            <span class="lbl" data-i18n="per-day">per day</span>
                            <input type="number" class="nospin underlined spsml" name="attr_perday_max" value="1" title="@{repeating_spell-like_$id_perday_max}" />
                        </div>
                        <div class="myrow grtopbrd">
                            <span class="lbl std right" data-i18n="school:">School:</span>
                            <div class="autoex std">
                                <span name="attr_spellschool"></span>
                                <textarea name="attr_spellschool" accept="School" class="underlined" spellcheck="false" data-i18n-placeholder="spellschool-ph" placeholder="School/Domain/Elemental school..." title="@{repeating_spell-like_$id_spellschool}"></textarea>
                            </div>
                            <span class="lbl std right" data-i18n="class-level:">Class/Level:</span>
                            <div class="autoex std">
                                <span name="attr_spellclasslevel"></span>
                                <textarea name="attr_spellclasslevel" accept="Level" class="underlined" spellcheck="false" data-i18n-placeholder="spellclasslevel-ph" placeholder="Sorcerer/Wizard 3" title="@{repeating_spell-like_$id_spellclasslevel}"></textarea>
                            </div>
                        </div>
                        <div class="myrow">
                            <span class="lbl std right" data-i18n="casting-time:">Casting time:</span>
                            <input type="text" name="attr_spellcastingtime" accept="Casting Time" class="underlined std" spellcheck="false" data-i18n-placeholder="spellcastingtime-ph" placeholder="1 standard action" title="@{repeating_spell-like_$id_spellcastingtime}" />
                        </div>
                        <div class="myrow grtopbrd">
                            <span class="lbl std right" data-i18n="range:">Range:</span>
                            <div class="autoex std">
                                <span name="attr_spellrange"></span>
                                <textarea name="attr_spellrange" accept="Range" class="underlined" spellcheck="false" data-i18n-placeholder="spellrange-ph" placeholder="Long (400 ft. + 40 ft./level)" title="@{repeating_spell-like_$id_spellrange}"></textarea>
                            </div>
                            <span class="lbl std right" data-i18n="area:">Area:</span>
                            <div class="autoex std">
                                <span name="attr_spellarea"></span>
                                <textarea name="attr_spellarea" accept="Area" class="underlined" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_spell-like_$id_spellarea}"></textarea>
                            </div>
                        </div>
                        <div class="myrow">
                            <span class="lbl std right" data-i18n="targets:">Targets:</span>
                            <div class="autoex std">
                                <span name="attr_spelltargets"></span>
                                <textarea name="attr_spelltargets" accept="Target" class="underlined" spellcheck="false" data-i18n-placeholder="spelltargets-ph" placeholder="up to five creatures" title="@{repeating_spell-like_$id_spelltargets}"></textarea>
                            </div>
                        </div>
                        <div class="myrow grtopbrd">
                            <span class="lbl std right" data-i18n="effect:">Effect:</span>
                            <div class="autoex std">
                                <span name="attr_spelleffect"></span>
                                <textarea name="attr_spelleffect" accept="Effect" class="underlined" spellcheck="false" data-i18n-placeholder="spelleffect-ph" placeholder="Heal [[1d6+@{caster1_level}]] HP" title="@{repeating_spell-like_$id_spelleffect}"></textarea>
                            </div>
                            <span class="lbl std right" data-i18n="duration:">Duration:</span>
                            <div class="autoex std">
                                <span name="attr_spellduration"></span>
                                <textarea name="attr_spellduration" accept="Duration" class="underlined" spellcheck="false" data-i18n-placeholder="spellduration-ph" placeholder="Instantaneous" title="@{repeating_spell-like_$id_spellduration}"></textarea>
                            </div>
                        </div>
                        <div class="myrow">
                            <input class="pseudocheck" type="checkbox" name="attr_spellsaveflag" value="{{save=1}}" title="@{repeating_spell-like_$id_spellsaveflag}" checked="checked" /><span></span>
                            <span class="lbl med" data-i18n="saving-throw:">Saving Throw:</span>
                            <input type="text" name="attr_spellsave" accept="Saving Throw" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_spell-like_$id_spellsave}" />
                            <span class="spacer"></span>
                            <span class="lbl" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                            <input type="hidden" name="attr_spelldc" value="0" />
                            <input type="number" class="nospin underlined sml" name="attr_spelldc_mod" value="0" title="@{repeating_spell-like_$id_spelldc}" />
                        </div>
                        <div class="myrow">
                            <input class="pseudocheck" type="checkbox" name="attr_spellresistanceflag" value="{{sr=1}}" title="@{repeating_spell-like_$id_spellresistanceflag}" checked="checked" /><span></span>
                            <span class="lbl med" data-i18n="spell-resistance:">Spell Resistance:</span>
                            <input type="text" name="attr_spellresistance" accept="Spell Resistance" class="underlined med" spellcheck="false" title="@{repeating_spell-like_$id_spellresistance}" />
                        </div>
                        <div class="myrow grtopbrd">
                            <input class="pseudocheck" type="checkbox" name="attr_spellatkflag" value="{{attack=1}}" title="@{repeating_spell-like_$id_spellatkflag}" /><span></span>
                            <span class="lbl atk" data-i18n="attack:">Attack:</span>
                            <input type="hidden" name="attr_spellatktype" value="0" />
                            <input type="text" class="underlined dmgbase" name="attr_spellatkmod" value="0" spellcheck="false" title="@{repeating_spell-like_$id_spellatkmod}" />
                            <span class="spacer"></span>
                            <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                            <input type="number" class="nospin underlined" name="attr_spellatkcritrange" value="20" title="@{repeating_spell-like_$id_spellatkcritrange}" />
                            <span class="lbl" data-i18n="multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Multiplier:</span>
                            <input type="number" class="nospin underlined" name="attr_spelldmgcritmulti" value="2" title="@{repeating_spell-like_$id_spelldmgcritmulti}" />
                        </div>
                        <div class="myrow grtopbrd">
                            <input class="pseudocheck" type="checkbox" name="attr_spelldmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{repeating_spell-like_$id_spelldmgflag}" /><span></span>
                            <span class="lbl atk" data-i18n="damage:">Damage:</span>
                            <input type="text" name="attr_spelldmg" class="underlined dmgbase" spellcheck="false" placeholder="1d6" title="@{repeating_spell-like_$id_spelldmg}" />
                            <span class="lbl right typ" data-i18n="type:">Type:</span>
                            <input type="text" name="attr_spelldmgtype" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_spell-like_$id_spelldmgtype}" />
                            <input class="pseudocheck" type="checkbox" name="attr_spelldmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_spell-like_$id_spelldmg2flag}" /><span></span>
                            <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                            <input type="text" name="attr_spelldmg2" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_spell-like_$id_spelldmg2}" />
                            <span class="lbl right typ" data-i18n="type:">Type:</span>
                            <input type="text" name="attr_spelldmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="force" placeholder="Force" title="@{repeating_spell-like_$id_spelldmg2type}" />
                        </div>
                        <div class="myrow grtopbrd">
                            <input class="pseudocheck" type="checkbox" name="attr_spelldescflag" value="{{descflag=[[1]]}}" checked="checked" title="@{repeating_spell-like_$id_spelldescflag}" /><span></span>
                            <span class="lbl atk" data-i18n="description:">Description:</span>
                            <div class="autoex">
                                <span name="attr_spelldesc"></span>
                                <textarea name="attr_spelldesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_spell-like_$id_spelldesc}"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset> <!-- END REPEATING SPELL-LIKE -->
        </div> <!-- END SPELL-LIKE ABILITIES -->
        <input type="hidden" class="optional-flag0" name="attr_spells_flag" value="0" /><div class="optional blk npcatk spells"> <!-- SPELLS -->
            <div class="myrow">
                <span class="bold" data-i18n="spells-prepared">Spells Prepared</span>
                (<span data-i18n="cl-u">CL</span> <span name="attr_caster1_level"></span>; <button class="myrol" type="roll" name="Caster1ConcentrationRoll" data-i18n-title="concentration-roll" title="Concentration roll" value="@{whispertype} &{template:npc} {{name=^{concentration}}} {{type=save}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{caster1_concentration}[MOD]]]}}"><span data-i18n="concentration">Concentration</span> +<span name="attr_caster1_concentration"></span></button>)
                <span class="blk" name="attr_caster1_spells_notes"></span>
            </div>
            <input type="hidden" class="optional-flag0" name="attr_caster1_spells_perday_level_9" value="0" /><div class="optional blk grtopbrd"> <!-- Spells lvl 9 -->
                <span class="greybg prep"><span data-i18n="9th">9th</span> (<span name="attr_spells_prepared_level_9"></span>/<span name="attr_caster1_spells_total_level_9"></span>)</span>
                <fieldset class="repeating_spell-9"> <!-- REPEATING 9 LVL SPELL -->
                    <input type="hidden" name="attr_spelllevel" value="9" />
                    <input type="hidden" name="attr_spellcaster" value="1" />
                    <div class="spell right compendium-drop-target">
                        <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                        <div class="myrow">
                            <input type="hidden" name="attr_rollcontent" />
                            <button class="myrol underl" type="roll" name="SpellRoll" data-i18n-title="cast-spell" title="Cast spell" value="@{rollcontent}"><span name="attr_spelldisplay"></span>
                                <input type="hidden" class="optional-flag0" name="attr_spellprepared" value="0" /><span class="optional inl">(<span name="attr_spellprepared"></span>)</span></button>
                        </div>
                        <div class="options">
                            <div class="myrow">
                                <span class="lbl" data-i18n="name">Name</span>
                                <input type="text" name="attr_spellname" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_spell-9_$id_spellname}" />
                                <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                <div class="dots margindent">
                                    <input type="radio" name="attr_spellprepared" value="0" checked="checked" data-i18n-title="click-reset" title="Click to reset" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="1" data-i18n-title="prepared-once" title="Prepared once" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="2" data-i18n-title="prepared-twice" title="Prepared twice" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="3" data-i18n-title="prepared-thrice" title="Prepared thrice" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="4" data-i18n-title="prepared-four-times" title="Prepared four times" /><span></span>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="school:">School:</span>
                                <div class="autoex std">
                                    <span name="attr_spellschool"></span>
                                    <textarea name="attr_spellschool" accept="School" class="underlined" spellcheck="false" data-i18n-placeholder="spellschool-ph" placeholder="School/Domain/Elemental school..." title="@{repeating_spell-9_$id_spellschool}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="class-level:">Class/Level:</span>
                                <div class="autoex std">
                                    <span name="attr_spellclasslevel"></span>
                                    <textarea name="attr_spellclasslevel" accept="Level" class="underlined" spellcheck="false" data-i18n-placeholder="spellclasslevel-ph" placeholder="Sorcerer/Wizard 3" title="@{repeating_spell-9_$id_spellclasslevel}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="casting-time:">Casting time:</span>
                                <input type="text" name="attr_spellcastingtime" accept="Casting Time" class="underlined std" spellcheck="false" data-i18n-placeholder="spellcastingtime-ph" placeholder="1 standard action" title="@{repeating_spell-9_$id_spellcastingtime}" />
                                <span class="lbl std right" data-i18n="components:">Components:</span>
                                <div class="autoex std">
                                    <span name="attr_spellcomponent"></span>
                                    <textarea name="attr_spellcomponent" accept="Components" class="underlined" spellcheck="false" data-i18n-placeholder="spellcomponent-ph" placeholder="V, S, M (a ball of bat guano and sulfur)" title="@{repeating_spell-9_$id_spellcomponent}"></textarea>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="range:">Range:</span>
                                <div class="autoex std">
                                    <span name="attr_spellrange"></span>
                                    <textarea name="attr_spellrange" accept="Range" class="underlined" spellcheck="false" data-i18n-placeholder="spellrange-ph" placeholder="Long (400 ft. + 40 ft./level)" title="@{repeating_spell-9_$id_spellrange}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="area:">Area:</span>
                                <div class="autoex std">
                                    <span name="attr_spellarea"></span>
                                    <textarea name="attr_spellarea" accept="Area" class="underlined" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_spell-9_$id_spellarea}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="targets:">Targets:</span>
                                <div class="autoex std">
                                    <span name="attr_spelltargets"></span>
                                    <textarea name="attr_spelltargets" accept="Target" class="underlined" spellcheck="false" data-i18n-placeholder="spelltargets-ph" placeholder="up to five creatures" title="@{repeating_spell-9_$id_spelltargets}"></textarea>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="effect:">Effect:</span>
                                <div class="autoex std">
                                    <span name="attr_spelleffect"></span>
                                    <textarea name="attr_spelleffect" accept="Effect" class="underlined" spellcheck="false" data-i18n-placeholder="spelleffect-ph" placeholder="Heal [[1d6+@{caster1_level}]] HP" title="@{repeating_spell-9_$id_spelleffect}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="duration:">Duration:</span>
                                <div class="autoex std">
                                    <span name="attr_spellduration"></span>
                                    <textarea name="attr_spellduration" accept="Duration" class="underlined" spellcheck="false" data-i18n-placeholder="spellduration-ph" placeholder="Instantaneous" title="@{repeating_spell-9_$id_spellduration}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <input class="pseudocheck" type="checkbox" name="attr_spellsaveflag" value="{{save=1}}" title="@{repeating_spell-9_$id_spellsaveflag}" checked="checked" /><span></span>
                                <span class="lbl med" data-i18n="saving-throw:">Saving Throw:</span>
                                <input type="text" name="attr_spellsave" accept="Saving Throw" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_spell-9_$id_spellsave}" />
                                <span class="spacer"></span>
                                <span class="lbl" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                                <input type="hidden" name="attr_spelldc" value="0" />
                                <input type="number" class="nospin underlined sml" name="attr_spelldc_mod" value="0" title="@{repeating_spell-9_$id_spelldc}" />
                            </div>
                            <div class="myrow">
                                <input class="pseudocheck" type="checkbox" name="attr_spellresistanceflag" value="{{sr=1}}" title="@{repeating_spell-9_$id_spellresistanceflag}" checked="checked" /><span></span>
                                <span class="lbl med" data-i18n="spell-resistance:">Spell Resistance:</span>
                                <input type="text" name="attr_spellresistance" accept="Spell Resistance" class="underlined med" spellcheck="false" title="@{repeating_spell-9_$id_spellresistance}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spellatkflag" value="{{attack=1}}" title="@{repeating_spell-9_$id_spellatkflag}" /><span></span>
                                <span class="lbl atk" data-i18n="attack:">Attack:</span>
                                <input type="hidden" name="attr_spellatktype" value="0" />
                                <input type="text" class="underlined dmgbase" name="attr_spellatkmod" value="0" spellcheck="false" title="@{repeating_spell-9_$id_spellatkmod}" />
                                <span class="spacer"></span>
                                <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                                <input type="number" class="nospin underlined" name="attr_spellatkcritrange" value="20" title="@{repeating_spell-9_$id_spellatkcritrange}" />
                                <span class="lbl" data-i18n="multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Multiplier:</span>
                                <input type="number" class="nospin underlined" name="attr_spelldmgcritmulti" value="2" title="@{repeating_spell-9_$id_spelldmgcritmulti}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spelldmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{repeating_spell-9_$id_spelldmgflag}" /><span></span>
                                <span class="lbl atk" data-i18n="damage:">Damage:</span>
                                <input type="text" name="attr_spelldmg" class="underlined dmgbase" spellcheck="false" placeholder="1d6" title="@{repeating_spell-9_$id_spelldmg}" />
                                <span class="lbl right typ" data-i18n="type:">Type:</span>
                                <input type="text" name="attr_spelldmgtype" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_spell-9_$id_spelldmgtype}" />
                                <input class="pseudocheck" type="checkbox" name="attr_spelldmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_spell-9_$id_spelldmg2flag}" /><span></span>
                                <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                                <input type="text" name="attr_spelldmg2" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_spell-9_$id_spelldmg2}" />
                                <span class="lbl right typ" data-i18n="type:">Type:</span>
                                <input type="text" name="attr_spelldmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="force" placeholder="Force" title="@{repeating_spell-9_$id_spelldmg2type}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spelldescflag" value="{{descflag=[[1]]}}" checked="checked" title="@{repeating_spell-9_$id_spelldescflag}" /><span></span>
                                <span class="lbl atk" data-i18n="description:">Description:</span>
                                <div class="autoex">
                                    <span name="attr_spelldesc"></span>
                                    <textarea name="attr_spelldesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_spell-9_$id_spelldesc}"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset> <!-- END REPEATING 9 LVL SPELL -->
            </div><!-- END Spells lvl 9 -->
            <input type="hidden" class="optional-flag0" name="attr_caster1_spells_perday_level_8" value="0" /><div class="optional blk grtopbrd"> <!-- Spells lvl 8 -->
                <span class="greybg prep"><span data-i18n="8th">8th</span> (<span name="attr_spells_prepared_level_8"></span>/<span name="attr_caster1_spells_total_level_8"></span>)</span>
                <fieldset class="repeating_spell-8"> <!-- REPEATING 8 LVL SPELL -->
                    <input type="hidden" name="attr_spelllevel" value="8" />
                    <input type="hidden" name="attr_spellcaster" value="1" />
                    <div class="spell right compendium-drop-target">
                        <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                        <div class="myrow">
                            <input type="hidden" name="attr_rollcontent" />
                            <button class="myrol underl" type="roll" name="SpellRoll" data-i18n-title="cast-spell" title="Cast spell" value="@{rollcontent}"><span name="attr_spelldisplay"></span>
                                <input type="hidden" class="optional-flag0" name="attr_spellprepared" value="0" /><span class="optional inl">(<span name="attr_spellprepared"></span>)</span></button>
                        </div>
                        <div class="options">
                            <div class="myrow">
                                <span class="lbl" data-i18n="name">Name</span>
                                <input type="text" name="attr_spellname" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_spell-8_$id_spellname}" />
                                <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                <div class="dots margindent">
                                    <input type="radio" name="attr_spellprepared" value="0" checked="checked" data-i18n-title="click-reset" title="Click to reset" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="1" data-i18n-title="prepared-once" title="Prepared once" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="2" data-i18n-title="prepared-twice" title="Prepared twice" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="3" data-i18n-title="prepared-thrice" title="Prepared thrice" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="4" data-i18n-title="prepared-four-times" title="Prepared four times" /><span></span>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="school:">School:</span>
                                <div class="autoex std">
                                    <span name="attr_spellschool"></span>
                                    <textarea name="attr_spellschool" accept="School" class="underlined" spellcheck="false" data-i18n-placeholder="spellschool-ph" placeholder="School/Domain/Elemental school..." title="@{repeating_spell-8_$id_spellschool}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="class-level:">Class/Level:</span>
                                <div class="autoex std">
                                    <span name="attr_spellclasslevel"></span>
                                    <textarea name="attr_spellclasslevel" accept="Level" class="underlined" spellcheck="false" data-i18n-placeholder="spellclasslevel-ph" placeholder="Sorcerer/Wizard 3" title="@{repeating_spell-8_$id_spellclasslevel}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="casting-time:">Casting time:</span>
                                <input type="text" name="attr_spellcastingtime" accept="Casting Time" class="underlined std" spellcheck="false" data-i18n-placeholder="spellcastingtime-ph" placeholder="1 standard action" title="@{repeating_spell-8_$id_spellcastingtime}" />
                                <span class="lbl std right" data-i18n="components:">Components:</span>
                                <div class="autoex std">
                                    <span name="attr_spellcomponent"></span>
                                    <textarea name="attr_spellcomponent" accept="Components" class="underlined" spellcheck="false" data-i18n-placeholder="spellcomponent-ph" placeholder="V, S, M (a ball of bat guano and sulfur)" title="@{repeating_spell-8_$id_spellcomponent}"></textarea>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="range:">Range:</span>
                                <div class="autoex std">
                                    <span name="attr_spellrange"></span>
                                    <textarea name="attr_spellrange" accept="Range" class="underlined" spellcheck="false" data-i18n-placeholder="spellrange-ph" placeholder="Long (400 ft. + 40 ft./level)" title="@{repeating_spell-8_$id_spellrange}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="area:">Area:</span>
                                <div class="autoex std">
                                    <span name="attr_spellarea"></span>
                                    <textarea name="attr_spellarea" accept="Area" class="underlined" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_spell-8_$id_spellarea}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="targets:">Targets:</span>
                                <div class="autoex std">
                                    <span name="attr_spelltargets"></span>
                                    <textarea name="attr_spelltargets" accept="Target" class="underlined" spellcheck="false" data-i18n-placeholder="spelltargets-ph" placeholder="up to five creatures" title="@{repeating_spell-8_$id_spelltargets}"></textarea>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="effect:">Effect:</span>
                                <div class="autoex std">
                                    <span name="attr_spelleffect"></span>
                                    <textarea name="attr_spelleffect" accept="Effect" class="underlined" spellcheck="false" data-i18n-placeholder="spelleffect-ph" placeholder="Heal [[1d6+@{caster1_level}]] HP" title="@{repeating_spell-8_$id_spelleffect}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="duration:">Duration:</span>
                                <div class="autoex std">
                                    <span name="attr_spellduration"></span>
                                    <textarea name="attr_spellduration" accept="Duration" class="underlined" spellcheck="false" data-i18n-placeholder="spellduration-ph" placeholder="Instantaneous" title="@{repeating_spell-8_$id_spellduration}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <input class="pseudocheck" type="checkbox" name="attr_spellsaveflag" value="{{save=1}}" title="@{repeating_spell-8_$id_spellsaveflag}" checked="checked" /><span></span>
                                <span class="lbl med" data-i18n="saving-throw:">Saving Throw:</span>
                                <input type="text" name="attr_spellsave" accept="Saving Throw" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_spell-8_$id_spellsave}" />
                                <span class="spacer"></span>
                                <span class="lbl" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                                <input type="hidden" name="attr_spelldc" value="0" />
                                <input type="number" class="nospin underlined sml" name="attr_spelldc_mod" value="0" title="@{repeating_spell-8_$id_spelldc}" />
                            </div>
                            <div class="myrow">
                                <input class="pseudocheck" type="checkbox" name="attr_spellresistanceflag" value="{{sr=1}}" title="@{repeating_spell-8_$id_spellresistanceflag}" checked="checked" /><span></span>
                                <span class="lbl med" data-i18n="spell-resistance:">Spell Resistance:</span>
                                <input type="text" name="attr_spellresistance" accept="Spell Resistance" class="underlined med" spellcheck="false" title="@{repeating_spell-8_$id_spellresistance}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spellatkflag" value="{{attack=1}}" title="@{repeating_spell-8_$id_spellatkflag}" /><span></span>
                                <span class="lbl atk" data-i18n="attack:">Attack:</span>
                                <input type="hidden" name="attr_spellatktype" value="0" />
                                <input type="text" class="underlined dmgbase" name="attr_spellatkmod" value="0" spellcheck="false" title="@{repeating_spell-8_$id_spellatkmod}" />
                                <span class="spacer"></span>
                                <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                                <input type="number" class="nospin underlined" name="attr_spellatkcritrange" value="20" title="@{repeating_spell-8_$id_spellatkcritrange}" />
                                <span class="lbl" data-i18n="multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Multiplier:</span>
                                <input type="number" class="nospin underlined" name="attr_spelldmgcritmulti" value="2" title="@{repeating_spell-8_$id_spelldmgcritmulti}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spelldmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{repeating_spell-8_$id_spelldmgflag}" /><span></span>
                                <span class="lbl atk" data-i18n="damage:">Damage:</span>
                                <input type="text" name="attr_spelldmg" class="underlined dmgbase" spellcheck="false" placeholder="1d6" title="@{repeating_spell-8_$id_spelldmg}" />
                                <span class="lbl right typ" data-i18n="type:">Type:</span>
                                <input type="text" name="attr_spelldmgtype" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_spell-8_$id_spelldmgtype}" />
                                <input class="pseudocheck" type="checkbox" name="attr_spelldmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_spell-8_$id_spelldmg2flag}" /><span></span>
                                <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                                <input type="text" name="attr_spelldmg2" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_spell-8_$id_spelldmg2}" />
                                <span class="lbl right typ" data-i18n="type:">Type:</span>
                                <input type="text" name="attr_spelldmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="force" placeholder="Force" title="@{repeating_spell-8_$id_spelldmg2type}" />
                            </div>
                            <div class="myrow  grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spelldescflag" value="{{descflag=[[1]]}}" checked="checked" title="@{repeating_spell-8_$id_spelldescflag}" /><span></span>
                                <span class="lbl atk" data-i18n="description:">Description:</span>
                                <div class="autoex">
                                    <span name="attr_spelldesc"></span>
                                    <textarea name="attr_spelldesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_spell-8_$id_spelldesc}"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset> <!-- END REPEATING 8 LVL SPELL -->
            </div><!-- END Spells lvl 8 -->
            <input type="hidden" class="optional-flag0" name="attr_caster1_spells_perday_level_7" value="0" /><div class="optional blk grtopbrd"> <!-- Spells lvl 7 -->
                <span class="greybg prep"><span data-i18n="7th">7th</span> (<span name="attr_spells_prepared_level_7"></span>/<span name="attr_caster1_spells_total_level_7"></span>)</span>
                <fieldset class="repeating_spell-7"> <!-- REPEATING 7 LVL SPELL -->
                    <input type="hidden" name="attr_spelllevel" value="7" />
                    <input type="hidden" name="attr_spellcaster" value="1" />
                    <div class="spell right compendium-drop-target">
                        <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                        <div class="myrow">
                            <input type="hidden" name="attr_rollcontent" />
                            <button class="myrol underl" type="roll" name="SpellRoll" data-i18n-title="cast-spell" title="Cast spell" value="@{rollcontent}"><span name="attr_spelldisplay"></span>
                                <input type="hidden" class="optional-flag0" name="attr_spellprepared" value="0" /><span class="optional inl">(<span name="attr_spellprepared"></span>)</span></button>
                        </div>
                        <div class="options">
                            <div class="myrow">
                                <span class="lbl" data-i18n="name">Name</span>
                                <input type="text" name="attr_spellname" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_spell-7_$id_spellname}" />
                                <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                <div class="dots margindent">
                                    <input type="radio" name="attr_spellprepared" value="0" checked="checked" data-i18n-title="click-reset" title="Click to reset" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="1" data-i18n-title="prepared-once" title="Prepared once" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="2" data-i18n-title="prepared-twice" title="Prepared twice" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="3" data-i18n-title="prepared-thrice" title="Prepared thrice" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="4" data-i18n-title="prepared-four-times" title="Prepared four times" /><span></span>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="school:">School:</span>
                                <div class="autoex std">
                                    <span name="attr_spellschool"></span>
                                    <textarea name="attr_spellschool" accept="School" class="underlined" spellcheck="false" data-i18n-placeholder="spellschool-ph" placeholder="School/Domain/Elemental school..." title="@{repeating_spell-7_$id_spellschool}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="class-level:">Class/Level:</span>
                                <div class="autoex std">
                                    <span name="attr_spellclasslevel"></span>
                                    <textarea name="attr_spellclasslevel" accept="Level" class="underlined" spellcheck="false" data-i18n-placeholder="spellclasslevel-ph" placeholder="Sorcerer/Wizard 3" title="@{repeating_spell-7_$id_spellclasslevel}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="casting-time:">Casting time:</span>
                                <input type="text" name="attr_spellcastingtime" accept="Casting Time" class="underlined std" spellcheck="false" data-i18n-placeholder="spellcastingtime-ph" placeholder="1 standard action" title="@{repeating_spell-7_$id_spellcastingtime}" />
                                <span class="lbl std right" data-i18n="components:">Components:</span>
                                <div class="autoex std">
                                    <span name="attr_spellcomponent"></span>
                                    <textarea name="attr_spellcomponent" accept="Components" class="underlined" spellcheck="false" data-i18n-placeholder="spellcomponent-ph" placeholder="V, S, M (a ball of bat guano and sulfur)" title="@{repeating_spell-7_$id_spellcomponent}"></textarea>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="range:">Range:</span>
                                <div class="autoex std">
                                    <span name="attr_spellrange"></span>
                                    <textarea name="attr_spellrange" accept="Range" class="underlined" spellcheck="false" data-i18n-placeholder="spellrange-ph" placeholder="Long (400 ft. + 40 ft./level)" title="@{repeating_spell-7_$id_spellrange}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="area:">Area:</span>
                                <div class="autoex std">
                                    <span name="attr_spellarea"></span>
                                    <textarea name="attr_spellarea" accept="Area" class="underlined" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_spell-7_$id_spellarea}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="targets:">Targets:</span>
                                <div class="autoex std">
                                    <span name="attr_spelltargets"></span>
                                    <textarea name="attr_spelltargets" accept="Target" class="underlined" spellcheck="false" data-i18n-placeholder="spelltargets-ph" placeholder="up to five creatures" title="@{repeating_spell-7_$id_spelltargets}"></textarea>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="effect:">Effect:</span>
                                <div class="autoex std">
                                    <span name="attr_spelleffect"></span>
                                    <textarea name="attr_spelleffect" accept="Effect" class="underlined" spellcheck="false" data-i18n-placeholder="spelleffect-ph" placeholder="Heal [[1d6+@{caster1_level}]] HP" title="@{repeating_spell-7_$id_spelleffect}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="duration:">Duration:</span>
                                <div class="autoex std">
                                    <span name="attr_spellduration"></span>
                                    <textarea name="attr_spellduration" accept="Duration" class="underlined" spellcheck="false" data-i18n-placeholder="spellduration-ph" placeholder="Instantaneous" title="@{repeating_spell-7_$id_spellduration}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <input class="pseudocheck" type="checkbox" name="attr_spellsaveflag" value="{{save=1}}" title="@{repeating_spell-7_$id_spellsaveflag}" checked="checked" /><span></span>
                                <span class="lbl med" data-i18n="saving-throw:">Saving Throw:</span>
                                <input type="text" name="attr_spellsave" accept="Saving Throw" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_spell-7_$id_spellsave}" />
                                <span class="spacer"></span>
                                <span class="lbl" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                                <input type="hidden" name="attr_spelldc" value="0" />
                                <input type="number" class="nospin underlined sml" name="attr_spelldc_mod" value="0" title="@{repeating_spell-7_$id_spelldc}" />
                            </div>
                            <div class="myrow">
                                <input class="pseudocheck" type="checkbox" name="attr_spellresistanceflag" value="{{sr=1}}" title="@{repeating_spell-7_$id_spellresistanceflag}" checked="checked" /><span></span>
                                <span class="lbl med" data-i18n="spell-resistance:">Spell Resistance:</span>
                                <input type="text" name="attr_spellresistance" accept="Spell Resistance" class="underlined med" spellcheck="false" title="@{repeating_spell-7_$id_spellresistance}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spellatkflag" value="{{attack=1}}" title="@{repeating_spell-7_$id_spellatkflag}" /><span></span>
                                <span class="lbl atk" data-i18n="attack:">Attack:</span>
                                <input type="hidden" name="attr_spellatktype" value="0" />
                                <input type="text" class="underlined dmgbase" name="attr_spellatkmod" value="0" spellcheck="false" title="@{repeating_spell-7_$id_spellatkmod}" />
                                <span class="spacer"></span>
                                <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                                <input type="number" class="nospin underlined" name="attr_spellatkcritrange" value="20" title="@{repeating_spell-7_$id_spellatkcritrange}" />
                                <span class="lbl" data-i18n="multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Multiplier:</span>
                                <input type="number" class="nospin underlined" name="attr_spelldmgcritmulti" value="2" title="@{repeating_spell-7_$id_spelldmgcritmulti}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spelldmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{repeating_spell-7_$id_spelldmgflag}" /><span></span>
                                <span class="lbl atk" data-i18n="damage:">Damage:</span>
                                <input type="text" name="attr_spelldmg" class="underlined dmgbase" spellcheck="false" placeholder="1d6" title="@{repeating_spell-7_$id_spelldmg}" />
                                <span class="lbl right typ" data-i18n="type:">Type:</span>
                                <input type="text" name="attr_spelldmgtype" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_spell-7_$id_spelldmgtype}" />
                                <input class="pseudocheck" type="checkbox" name="attr_spelldmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_spell-7_$id_spelldmg2flag}" /><span></span>
                                <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                                <input type="text" name="attr_spelldmg2" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_spell-7_$id_spelldmg2}" />
                                <span class="lbl right typ" data-i18n="type:">Type:</span>
                                <input type="text" name="attr_spelldmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="force" placeholder="Force" title="@{repeating_spell-7_$id_spelldmg2type}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spelldescflag" value="{{descflag=[[1]]}}" checked="checked" title="@{repeating_spell-7_$id_spelldescflag}" /><span></span>
                                <span class="lbl atk" data-i18n="description:">Description:</span>
                                <div class="autoex">
                                    <span name="attr_spelldesc"></span>
                                    <textarea name="attr_spelldesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_spell-7_$id_spelldesc}"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset> <!-- END REPEATING 7 LVL SPELL -->
            </div><!-- END Spells lvl 7 -->
            <input type="hidden" class="optional-flag0" name="attr_caster1_spells_perday_level_6" value="0" /><div class="optional blk grtopbrd"> <!-- Spells lvl 6 -->
                <span class="greybg prep"><span data-i18n="6th">6th</span> (<span name="attr_spells_prepared_level_6"></span>/<span name="attr_caster1_spells_total_level_6"></span>)</span>
                <fieldset class="repeating_spell-6"> <!-- REPEATING 6 LVL SPELL -->
                    <input type="hidden" name="attr_spelllevel" value="6" />
                    <input type="hidden" name="attr_spellcaster" value="1" />
                    <div class="spell right compendium-drop-target">
                        <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                        <div class="myrow">
                            <input type="hidden" name="attr_rollcontent" />
                            <button class="myrol underl" type="roll" name="SpellRoll" data-i18n-title="cast-spell" title="Cast spell" value="@{rollcontent}"><span name="attr_spelldisplay"></span>
                                <input type="hidden" class="optional-flag0" name="attr_spellprepared" value="0" /><span class="optional inl">(<span name="attr_spellprepared"></span>)</span></button>
                        </div>
                        <div class="options">
                            <div class="myrow">
                                <span class="lbl" data-i18n="name">Name</span>
                                <input type="text" name="attr_spellname" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_spell-6_$id_spellname}" />
                                <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                <div class="dots margindent">
                                    <input type="radio" name="attr_spellprepared" value="0" checked="checked" data-i18n-title="click-reset" title="Click to reset" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="1" data-i18n-title="prepared-once" title="Prepared once" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="2" data-i18n-title="prepared-twice" title="Prepared twice" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="3" data-i18n-title="prepared-thrice" title="Prepared thrice" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="4" data-i18n-title="prepared-four-times" title="Prepared four times" /><span></span>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="school:">School:</span>
                                <div class="autoex std">
                                    <span name="attr_spellschool"></span>
                                    <textarea name="attr_spellschool" accept="School" class="underlined" spellcheck="false" data-i18n-placeholder="spellschool-ph" placeholder="School/Domain/Elemental school..." title="@{repeating_spell-6_$id_spellschool}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="class-level:">Class/Level:</span>
                                <div class="autoex std">
                                    <span name="attr_spellclasslevel"></span>
                                    <textarea name="attr_spellclasslevel" accept="Level" class="underlined" spellcheck="false" data-i18n-placeholder="spellclasslevel-ph" placeholder="Sorcerer/Wizard 3" title="@{repeating_spell-6_$id_spellclasslevel}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="casting-time:">Casting time:</span>
                                <input type="text" name="attr_spellcastingtime" accept="Casting Time" class="underlined std" spellcheck="false" data-i18n-placeholder="spellcastingtime-ph" placeholder="1 standard action" title="@{repeating_spell-6_$id_spellcastingtime}" />
                                <span class="lbl std right" data-i18n="components:">Components:</span>
                                <div class="autoex std">
                                    <span name="attr_spellcomponent"></span>
                                    <textarea name="attr_spellcomponent" accept="Components" class="underlined" spellcheck="false" data-i18n-placeholder="spellcomponent-ph" placeholder="V, S, M (a ball of bat guano and sulfur)" title="@{repeating_spell-6_$id_spellcomponent}"></textarea>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="range:">Range:</span>
                                <div class="autoex std">
                                    <span name="attr_spellrange"></span>
                                    <textarea name="attr_spellrange" accept="Range" class="underlined" spellcheck="false" data-i18n-placeholder="spellrange-ph" placeholder="Long (400 ft. + 40 ft./level)" title="@{repeating_spell-6_$id_spellrange}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="area:">Area:</span>
                                <div class="autoex std">
                                    <span name="attr_spellarea"></span>
                                    <textarea name="attr_spellarea" accept="Area" class="underlined" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_spell-6_$id_spellarea}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="targets:">Targets:</span>
                                <div class="autoex std">
                                    <span name="attr_spelltargets"></span>
                                    <textarea name="attr_spelltargets" accept="Target" class="underlined" spellcheck="false" data-i18n-placeholder="spelltargets-ph" placeholder="up to five creatures" title="@{repeating_spell-6_$id_spelltargets}"></textarea>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="effect:">Effect:</span>
                                <div class="autoex std">
                                    <span name="attr_spelleffect"></span>
                                    <textarea name="attr_spelleffect" accept="Effect" class="underlined" spellcheck="false" data-i18n-placeholder="spelleffect-ph" placeholder="Heal [[1d6+@{caster1_level}]] HP" title="@{repeating_spell-6_$id_spelleffect}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="duration:">Duration:</span>
                                <div class="autoex std">
                                    <span name="attr_spellduration"></span>
                                    <textarea name="attr_spellduration" accept="Duration" class="underlined" spellcheck="false" data-i18n-placeholder="spellduration-ph" placeholder="Instantaneous" title="@{repeating_spell-6_$id_spellduration}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <input class="pseudocheck" type="checkbox" name="attr_spellsaveflag" value="{{save=1}}" title="@{repeating_spell-6_$id_spellsaveflag}" checked="checked" /><span></span>
                                <span class="lbl med" data-i18n="saving-throw:">Saving Throw:</span>
                                <input type="text" name="attr_spellsave" accept="Saving Throw" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_spell-6_$id_spellsave}" />
                                <span class="spacer"></span>
                                <span class="lbl" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                                <input type="hidden" name="attr_spelldc" value="0" />
                                <input type="number" class="nospin underlined sml" name="attr_spelldc_mod" value="0" title="@{repeating_spell-6_$id_spelldc}" />
                            </div>
                            <div class="myrow">
                                <input class="pseudocheck" type="checkbox" name="attr_spellresistanceflag" value="{{sr=1}}" title="@{repeating_spell-6_$id_spellresistanceflag}" checked="checked" /><span></span>
                                <span class="lbl med" data-i18n="spell-resistance:">Spell Resistance:</span>
                                <input type="text" name="attr_spellresistance" accept="Spell Resistance" class="underlined med" spellcheck="false" title="@{repeating_spell-6_$id_spellresistance}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spellatkflag" value="{{attack=1}}" title="@{repeating_spell-6_$id_spellatkflag}" /><span></span>
                                <span class="lbl atk" data-i18n="attack:">Attack:</span>
                                <input type="hidden" name="attr_spellatktype" value="0" />
                                <input type="text" class="underlined dmgbase" name="attr_spellatkmod" value="0" spellcheck="false" title="@{repeating_spell-6_$id_spellatkmod}" />
                                <span class="spacer"></span>
                                <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                                <input type="number" class="nospin underlined" name="attr_spellatkcritrange" value="20" title="@{repeating_spell-6_$id_spellatkcritrange}" />
                                <span class="lbl" data-i18n="multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Multiplier:</span>
                                <input type="number" class="nospin underlined" name="attr_spelldmgcritmulti" value="2" title="@{repeating_spell-6_$id_spelldmgcritmulti}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spelldmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{repeating_spell-6_$id_spelldmgflag}" /><span></span>
                                <span class="lbl atk" data-i18n="damage:">Damage:</span>
                                <input type="text" name="attr_spelldmg" class="underlined dmgbase" spellcheck="false" placeholder="1d6" title="@{repeating_spell-6_$id_spelldmg}" />
                                <span class="lbl right typ" data-i18n="type:">Type:</span>
                                <input type="text" name="attr_spelldmgtype" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_spell-6_$id_spelldmgtype}" />
                                <input class="pseudocheck" type="checkbox" name="attr_spelldmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_spell-6_$id_spelldmg2flag}" /><span></span>
                                <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                                <input type="text" name="attr_spelldmg2" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_spell-6_$id_spelldmg2}" />
                                <span class="lbl right typ" data-i18n="type:">Type:</span>
                                <input type="text" name="attr_spelldmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="force" placeholder="Force" title="@{repeating_spell-6_$id_spelldmg2type}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spelldescflag" value="{{descflag=[[1]]}}" checked="checked" title="@{repeating_spell-6_$id_spelldescflag}" /><span></span>
                                <span class="lbl atk" data-i18n="description:">Description:</span>
                                <div class="autoex">
                                    <span name="attr_spelldesc"></span>
                                    <textarea name="attr_spelldesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_spell-6_$id_spelldesc}"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset> <!-- END REPEATING 6 LVL SPELL -->
            </div><!-- END Spells lvl 6 -->
            <input type="hidden" class="optional-flag0" name="attr_caster1_spells_perday_level_5" value="0" /><div class="optional blk grtopbrd"> <!-- Spells lvl 5 -->
                <span class="greybg prep"><span data-i18n="5th">5th</span> (<span name="attr_spells_prepared_level_5"></span>/<span name="attr_caster1_spells_total_level_5"></span>)</span>
                <fieldset class="repeating_spell-5"> <!-- REPEATING 5 LVL SPELL -->
                    <input type="hidden" name="attr_spelllevel" value="5" />
                    <input type="hidden" name="attr_spellcaster" value="1" />
                    <div class="spell right compendium-drop-target">
                        <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                        <div class="myrow">
                            <input type="hidden" name="attr_rollcontent" />
                            <button class="myrol underl" type="roll" name="SpellRoll" data-i18n-title="cast-spell" title="Cast spell" value="@{rollcontent}"><span name="attr_spelldisplay"></span>
                                <input type="hidden" class="optional-flag0" name="attr_spellprepared" value="0" /><span class="optional inl">(<span name="attr_spellprepared"></span>)</span></button>
                        </div>
                        <div class="options">
                            <div class="myrow">
                                <span class="lbl" data-i18n="name">Name</span>
                                <input type="text" name="attr_spellname" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_spell-5_$id_spellname}" />
                                <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                <div class="dots margindent">
                                    <input type="radio" name="attr_spellprepared" value="0" checked="checked" data-i18n-title="click-reset" title="Click to reset" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="1" data-i18n-title="prepared-once" title="Prepared once" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="2" data-i18n-title="prepared-twice" title="Prepared twice" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="3" data-i18n-title="prepared-thrice" title="Prepared thrice" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="4" data-i18n-title="prepared-four-times" title="Prepared four times" /><span></span>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="school:">School:</span>
                                <div class="autoex std">
                                    <span name="attr_spellschool"></span>
                                    <textarea name="attr_spellschool" accept="School" class="underlined" spellcheck="false" data-i18n-placeholder="spellschool-ph" placeholder="School/Domain/Elemental school..." title="@{repeating_spell-5_$id_spellschool}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="class-level:">Class/Level:</span>
                                <div class="autoex std">
                                    <span name="attr_spellclasslevel"></span>
                                    <textarea name="attr_spellclasslevel" accept="Level" class="underlined" spellcheck="false" data-i18n-placeholder="spellclasslevel-ph" placeholder="Sorcerer/Wizard 3" title="@{repeating_spell-5_$id_spellclasslevel}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="casting-time:">Casting time:</span>
                                <input type="text" name="attr_spellcastingtime" accept="Casting Time" class="underlined std" spellcheck="false" data-i18n-placeholder="spellcastingtime-ph" placeholder="1 standard action" title="@{repeating_spell-5_$id_spellcastingtime}" />
                                <span class="lbl std right" data-i18n="components:">Components:</span>
                                <div class="autoex std">
                                    <span name="attr_spellcomponent"></span>
                                    <textarea name="attr_spellcomponent" accept="Components" class="underlined" spellcheck="false" data-i18n-placeholder="spellcomponent-ph" placeholder="V, S, M (a ball of bat guano and sulfur)" title="@{repeating_spell-5_$id_spellcomponent}"></textarea>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="range:">Range:</span>
                                <div class="autoex std">
                                    <span name="attr_spellrange"></span>
                                    <textarea name="attr_spellrange" accept="Range" class="underlined" spellcheck="false" data-i18n-placeholder="spellrange-ph" placeholder="Long (400 ft. + 40 ft./level)" title="@{repeating_spell-5_$id_spellrange}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="area:">Area:</span>
                                <div class="autoex std">
                                    <span name="attr_spellarea"></span>
                                    <textarea name="attr_spellarea" accept="Area" class="underlined" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_spell-5_$id_spellarea}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="targets:">Targets:</span>
                                <div class="autoex std">
                                    <span name="attr_spelltargets"></span>
                                    <textarea name="attr_spelltargets" accept="Target" class="underlined" spellcheck="false" data-i18n-placeholder="spelltargets-ph" placeholder="up to five creatures" title="@{repeating_spell-5_$id_spelltargets}"></textarea>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="effect:">Effect:</span>
                                <div class="autoex std">
                                    <span name="attr_spelleffect"></span>
                                    <textarea name="attr_spelleffect" accept="Effect" class="underlined" spellcheck="false" data-i18n-placeholder="spelleffect-ph" placeholder="Heal [[1d5+@{caster1_level}]] HP" title="@{repeating_spell-5_$id_spelleffect}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="duration:">Duration:</span>
                                <div class="autoex std">
                                    <span name="attr_spellduration"></span>
                                    <textarea name="attr_spellduration" accept="Duration" class="underlined" spellcheck="false" data-i18n-placeholder="spellduration-ph" placeholder="Instantaneous" title="@{repeating_spell-5_$id_spellduration}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <input class="pseudocheck" type="checkbox" name="attr_spellsaveflag" value="{{save=1}}" title="@{repeating_spell-5_$id_spellsaveflag}" checked="checked" /><span></span>
                                <span class="lbl med" data-i18n="saving-throw:">Saving Throw:</span>
                                <input type="text" name="attr_spellsave" accept="Saving Throw" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_spell-5_$id_spellsave}" />
                                <span class="spacer"></span>
                                <span class="lbl" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                                <input type="hidden" name="attr_spelldc" value="0" />
                                <input type="number" class="nospin underlined sml" name="attr_spelldc_mod" value="0" title="@{repeating_spell-5_$id_spelldc}" />
                            </div>
                            <div class="myrow">
                                <input class="pseudocheck" type="checkbox" name="attr_spellresistanceflag" value="{{sr=1}}" title="@{repeating_spell-5_$id_spellresistanceflag}" checked="checked" /><span></span>
                                <span class="lbl med" data-i18n="spell-resistance:">Spell Resistance:</span>
                                <input type="text" name="attr_spellresistance" accept="Spell Resistance" class="underlined med" spellcheck="false" title="@{repeating_spell-5_$id_spellresistance}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spellatkflag" value="{{attack=1}}" title="@{repeating_spell-5_$id_spellatkflag}" /><span></span>
                                <span class="lbl atk" data-i18n="attack:">Attack:</span>
                                <input type="hidden" name="attr_spellatktype" value="0" />
                                <input type="text" class="underlined dmgbase" name="attr_spellatkmod" value="0" spellcheck="false" title="@{repeating_spell-5_$id_spellatkmod}" />
                                <span class="spacer"></span>
                                <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                                <input type="number" class="nospin underlined" name="attr_spellatkcritrange" value="20" title="@{repeating_spell-5_$id_spellatkcritrange}" />
                                <span class="lbl" data-i18n="multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Multiplier:</span>
                                <input type="number" class="nospin underlined" name="attr_spelldmgcritmulti" value="2" title="@{repeating_spell-5_$id_spelldmgcritmulti}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spelldmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{repeating_spell-5_$id_spelldmgflag}" /><span></span>
                                <span class="lbl atk" data-i18n="damage:">Damage:</span>
                                <input type="text" name="attr_spelldmg" class="underlined dmgbase" spellcheck="false" placeholder="1d5" title="@{repeating_spell-5_$id_spelldmg}" />
                                <span class="lbl right typ" data-i18n="type:">Type:</span>
                                <input type="text" name="attr_spelldmgtype" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_spell-5_$id_spelldmgtype}" />
                                <input class="pseudocheck" type="checkbox" name="attr_spelldmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_spell-5_$id_spelldmg2flag}" /><span></span>
                                <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                                <input type="text" name="attr_spelldmg2" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_spell-5_$id_spelldmg2}" />
                                <span class="lbl right typ" data-i18n="type:">Type:</span>
                                <input type="text" name="attr_spelldmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="force" placeholder="Force" title="@{repeating_spell-5_$id_spelldmg2type}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spelldescflag" value="{{descflag=[[1]]}}" checked="checked" title="@{repeating_spell-5_$id_spelldescflag}" /><span></span>
                                <span class="lbl atk" data-i18n="description:">Description:</span>
                                <div class="autoex">
                                    <span name="attr_spelldesc"></span>
                                    <textarea name="attr_spelldesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_spell-5_$id_spelldesc}"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset> <!-- END REPEATING 5 LVL SPELL -->
            </div><!-- END Spells lvl 5 -->
            <input type="hidden" class="optional-flag0" name="attr_caster1_spells_perday_level_4" value="0" /><div class="optional blk grtopbrd"> <!-- Spells lvl 4 -->
                <span class="greybg prep"><span data-i18n="4th">4th</span> (<span name="attr_spells_prepared_level_4"></span>/<span name="attr_caster1_spells_total_level_4"></span>)</span>
                <fieldset class="repeating_spell-4"> <!-- REPEATING 4 LVL SPELL -->
                    <input type="hidden" name="attr_spelllevel" value="4" />
                    <input type="hidden" name="attr_spellcaster" value="1" />
                    <div class="spell right compendium-drop-target">
                        <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                        <div class="myrow">
                            <input type="hidden" name="attr_rollcontent" />
                            <button class="myrol underl" type="roll" name="SpellRoll" data-i18n-title="cast-spell" title="Cast spell" value="@{rollcontent}"><span name="attr_spelldisplay"></span>
                                <input type="hidden" class="optional-flag0" name="attr_spellprepared" value="0" /><span class="optional inl">(<span name="attr_spellprepared"></span>)</span></button>
                        </div>
                        <div class="options">
                            <div class="myrow">
                                <span class="lbl" data-i18n="name">Name</span>
                                <input type="text" name="attr_spellname" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_spell-4_$id_spellname}" />
                                <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                <div class="dots margindent">
                                    <input type="radio" name="attr_spellprepared" value="0" checked="checked" data-i18n-title="click-reset" title="Click to reset" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="1" data-i18n-title="prepared-once" title="Prepared once" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="2" data-i18n-title="prepared-twice" title="Prepared twice" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="3" data-i18n-title="prepared-thrice" title="Prepared thrice" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="4" data-i18n-title="prepared-four-times" title="Prepared four times" /><span></span>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="school:">School:</span>
                                <div class="autoex std">
                                    <span name="attr_spellschool"></span>
                                    <textarea name="attr_spellschool" accept="School" class="underlined" spellcheck="false" data-i18n-placeholder="spellschool-ph" placeholder="School/Domain/Elemental school..." title="@{repeating_spell-4_$id_spellschool}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="class-level:">Class/Level:</span>
                                <div class="autoex std">
                                    <span name="attr_spellclasslevel"></span>
                                    <textarea name="attr_spellclasslevel" accept="Level" class="underlined" spellcheck="false" data-i18n-placeholder="spellclasslevel-ph" placeholder="Sorcerer/Wizard 3" title="@{repeating_spell-4_$id_spellclasslevel}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="casting-time:">Casting time:</span>
                                <input type="text" name="attr_spellcastingtime" accept="Casting Time" class="underlined std" spellcheck="false" data-i18n-placeholder="spellcastingtime-ph" placeholder="1 standard action" title="@{repeating_spell-4_$id_spellcastingtime}" />
                                <span class="lbl std right" data-i18n="components:">Components:</span>
                                <div class="autoex std">
                                    <span name="attr_spellcomponent"></span>
                                    <textarea name="attr_spellcomponent" accept="Components" class="underlined" spellcheck="false" data-i18n-placeholder="spellcomponent-ph" placeholder="V, S, M (a ball of bat guano and sulfur)" title="@{repeating_spell-4_$id_spellcomponent}"></textarea>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="range:">Range:</span>
                                <div class="autoex std">
                                    <span name="attr_spellrange"></span>
                                    <textarea name="attr_spellrange" accept="Range" class="underlined" spellcheck="false" data-i18n-placeholder="spellrange-ph" placeholder="Long (400 ft. + 40 ft./level)" title="@{repeating_spell-4_$id_spellrange}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="area:">Area:</span>
                                <div class="autoex std">
                                    <span name="attr_spellarea"></span>
                                    <textarea name="attr_spellarea" accept="Area" class="underlined" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_spell-4_$id_spellarea}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="targets:">Targets:</span>
                                <div class="autoex std">
                                    <span name="attr_spelltargets"></span>
                                    <textarea name="attr_spelltargets" accept="Target" class="underlined" spellcheck="false" data-i18n-placeholder="spelltargets-ph" placeholder="up to five creatures" title="@{repeating_spell-4_$id_spelltargets}"></textarea>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="effect:">Effect:</span>
                                <div class="autoex std">
                                    <span name="attr_spelleffect"></span>
                                    <textarea name="attr_spelleffect" accept="Effect" class="underlined" spellcheck="false" data-i18n-placeholder="spelleffect-ph" placeholder="Heal [[1d5+@{caster1_level}]] HP" title="@{repeating_spell-4_$id_spelleffect}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="duration:">Duration:</span>
                                <div class="autoex std">
                                    <span name="attr_spellduration"></span>
                                    <textarea name="attr_spellduration" accept="Duration" class="underlined" spellcheck="false" data-i18n-placeholder="spellduration-ph" placeholder="Instantaneous" title="@{repeating_spell-4_$id_spellduration}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <input class="pseudocheck" type="checkbox" name="attr_spellsaveflag" value="{{save=1}}" title="@{repeating_spell-4_$id_spellsaveflag}" checked="checked" /><span></span>
                                <span class="lbl med" data-i18n="saving-throw:">Saving Throw:</span>
                                <input type="text" name="attr_spellsave" accept="Saving Throw" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_spell-4_$id_spellsave}" />
                                <span class="spacer"></span>
                                <span class="lbl" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                                <input type="hidden" name="attr_spelldc" value="0" />
                                <input type="number" class="nospin underlined sml" name="attr_spelldc_mod" value="0" title="@{repeating_spell-4_$id_spelldc}" />
                            </div>
                            <div class="myrow">
                                <input class="pseudocheck" type="checkbox" name="attr_spellresistanceflag" value="{{sr=1}}" title="@{repeating_spell-4_$id_spellresistanceflag}" checked="checked" /><span></span>
                                <span class="lbl med" data-i18n="spell-resistance:">Spell Resistance:</span>
                                <input type="text" name="attr_spellresistance" accept="Spell Resistance" class="underlined med" spellcheck="false" title="@{repeating_spell-4_$id_spellresistance}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spellatkflag" value="{{attack=1}}" title="@{repeating_spell-4_$id_spellatkflag}" /><span></span>
                                <span class="lbl atk" data-i18n="attack:">Attack:</span>
                                <input type="hidden" name="attr_spellatktype" value="0" />
                                <input type="text" class="underlined dmgbase" name="attr_spellatkmod" value="0" spellcheck="false" title="@{repeating_spell-4_$id_spellatkmod}" />
                                <span class="spacer"></span>
                                <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                                <input type="number" class="nospin underlined" name="attr_spellatkcritrange" value="20" title="@{repeating_spell-4_$id_spellatkcritrange}" />
                                <span class="lbl" data-i18n="multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Multiplier:</span>
                                <input type="number" class="nospin underlined" name="attr_spelldmgcritmulti" value="2" title="@{repeating_spell-4_$id_spelldmgcritmulti}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spelldmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{repeating_spell-4_$id_spelldmgflag}" /><span></span>
                                <span class="lbl atk" data-i18n="damage:">Damage:</span>
                                <input type="text" name="attr_spelldmg" class="underlined dmgbase" spellcheck="false" placeholder="1d6" title="@{repeating_spell-4_$id_spelldmg}" />
                                <span class="lbl right typ" data-i18n="type:">Type:</span>
                                <input type="text" name="attr_spelldmgtype" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_spell-4_$id_spelldmgtype}" />
                                <input class="pseudocheck" type="checkbox" name="attr_spelldmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_spell-4_$id_spelldmg2flag}" /><span></span>
                                <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                                <input type="text" name="attr_spelldmg2" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_spell-4_$id_spelldmg2}" />
                                <span class="lbl right typ" data-i18n="type:">Type:</span>
                                <input type="text" name="attr_spelldmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="force" placeholder="Force" title="@{repeating_spell-4_$id_spelldmg2type}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spelldescflag" value="{{descflag=[[1]]}}" checked="checked" title="@{repeating_spell-4_$id_spelldescflag}" /><span></span>
                                <span class="lbl atk" data-i18n="description:">Description:</span>
                                <div class="autoex">
                                    <span name="attr_spelldesc"></span>
                                    <textarea name="attr_spelldesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_spell-4_$id_spelldesc}"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset> <!-- END REPEATING 4 LVL SPELL -->
            </div><!-- END Spells lvl 4 -->
            <input type="hidden" class="optional-flag0" name="attr_caster1_spells_perday_level_3" value="0" /><div class="optional blk grtopbrd"> <!-- Spells lvl 3 -->
                <span class="greybg prep"><span data-i18n="3rd">3rd</span> (<span name="attr_spells_prepared_level_3"></span>/<span name="attr_caster1_spells_total_level_3"></span>)</span>
                <fieldset class="repeating_spell-3"> <!-- REPEATING 3 LVL SPELL -->
                    <input type="hidden" name="attr_spelllevel" value="3" />
                    <input type="hidden" name="attr_spellcaster" value="1" />
                    <div class="spell right compendium-drop-target">
                        <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                        <div class="myrow">
                            <input type="hidden" name="attr_rollcontent" />
                            <button class="myrol underl" type="roll" name="SpellRoll" data-i18n-title="cast-spell" title="Cast spell" value="@{rollcontent}"><span name="attr_spelldisplay"></span>
                                <input type="hidden" class="optional-flag0" name="attr_spellprepared" value="0" /><span class="optional inl">(<span name="attr_spellprepared"></span>)</span></button>
                        </div>
                        <div class="options">
                            <div class="myrow">
                                <span class="lbl" data-i18n="name">Name</span>
                                <input type="text" name="attr_spellname" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_spell-3_$id_spellname}" />
                                <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                <div class="dots margindent">
                                    <input type="radio" name="attr_spellprepared" value="0" checked="checked" data-i18n-title="click-reset" title="Click to reset" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="1" data-i18n-title="prepared-once" title="Prepared once" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="2" data-i18n-title="prepared-twice" title="Prepared twice" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="3" data-i18n-title="prepared-thrice" title="Prepared thrice" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="4" data-i18n-title="prepared-four-times" title="Prepared four times" /><span></span>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="school:">School:</span>
                                <div class="autoex std">
                                    <span name="attr_spellschool"></span>
                                    <textarea name="attr_spellschool" accept="School" class="underlined" spellcheck="false" data-i18n-placeholder="spellschool-ph" placeholder="School/Domain/Elemental school..." title="@{repeating_spell-3_$id_spellschool}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="class-level:">Class/Level:</span>
                                <div class="autoex std">
                                    <span name="attr_spellclasslevel"></span>
                                    <textarea name="attr_spellclasslevel" accept="Level" class="underlined" spellcheck="false" data-i18n-placeholder="spellclasslevel-ph" placeholder="Sorcerer/Wizard 3" title="@{repeating_spell-3_$id_spellclasslevel}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="casting-time:">Casting time:</span>
                                <input type="text" name="attr_spellcastingtime" accept="Casting Time" class="underlined std" spellcheck="false" data-i18n-placeholder="spellcastingtime-ph" placeholder="1 standard action" title="@{repeating_spell-3_$id_spellcastingtime}" />
                                <span class="lbl std right" data-i18n="components:">Components:</span>
                                <div class="autoex std">
                                    <span name="attr_spellcomponent"></span>
                                    <textarea name="attr_spellcomponent" accept="Components" class="underlined" spellcheck="false" data-i18n-placeholder="spellcomponent-ph" placeholder="V, S, M (a ball of bat guano and sulfur)" title="@{repeating_spell-3_$id_spellcomponent}"></textarea>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="range:">Range:</span>
                                <div class="autoex std">
                                    <span name="attr_spellrange"></span>
                                    <textarea name="attr_spellrange" accept="Range" class="underlined" spellcheck="false" data-i18n-placeholder="spellrange-ph" placeholder="Long (400 ft. + 40 ft./level)" title="@{repeating_spell-3_$id_spellrange}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="area:">Area:</span>
                                <div class="autoex std">
                                    <span name="attr_spellarea"></span>
                                    <textarea name="attr_spellarea" accept="Area" class="underlined" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_spell-3_$id_spellarea}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="targets:">Targets:</span>
                                <div class="autoex std">
                                    <span name="attr_spelltargets"></span>
                                    <textarea name="attr_spelltargets" accept="Target" class="underlined" spellcheck="false" data-i18n-placeholder="spelltargets-ph" placeholder="up to five creatures" title="@{repeating_spell-3_$id_spelltargets}"></textarea>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="effect:">Effect:</span>
                                <div class="autoex std">
                                    <span name="attr_spelleffect"></span>
                                    <textarea name="attr_spelleffect" accept="Effect" class="underlined" spellcheck="false" data-i18n-placeholder="spelleffect-ph" placeholder="Heal [[1d5+@{caster1_level}]] HP" title="@{repeating_spell-3_$id_spelleffect}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="duration:">Duration:</span>
                                <div class="autoex std">
                                    <span name="attr_spellduration"></span>
                                    <textarea name="attr_spellduration" accept="Duration" class="underlined" spellcheck="false" data-i18n-placeholder="spellduration-ph" placeholder="Instantaneous" title="@{repeating_spell-3_$id_spellduration}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <input class="pseudocheck" type="checkbox" name="attr_spellsaveflag" value="{{save=1}}" title="@{repeating_spell-3_$id_spellsaveflag}" checked="checked" /><span></span>
                                <span class="lbl med" data-i18n="saving-throw:">Saving Throw:</span>
                                <input type="text" name="attr_spellsave" accept="Saving Throw" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_spell-3_$id_spellsave}" />
                                <span class="spacer"></span>
                                <span class="lbl" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                                <input type="hidden" name="attr_spelldc" value="0" />
                                <input type="number" class="nospin underlined sml" name="attr_spelldc_mod" value="0" title="@{repeating_spell-3_$id_spelldc}" />
                            </div>
                            <div class="myrow">
                                <input class="pseudocheck" type="checkbox" name="attr_spellresistanceflag" value="{{sr=1}}" title="@{repeating_spell-3_$id_spellresistanceflag}" checked="checked" /><span></span>
                                <span class="lbl med" data-i18n="spell-resistance:">Spell Resistance:</span>
                                <input type="text" name="attr_spellresistance" accept="Spell Resistance" class="underlined med" spellcheck="false" title="@{repeating_spell-3_$id_spellresistance}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spellatkflag" value="{{attack=1}}" title="@{repeating_spell-3_$id_spellatkflag}" /><span></span>
                                <span class="lbl atk" data-i18n="attack:">Attack:</span>
                                <input type="hidden" name="attr_spellatktype" value="0" />
                                <input type="text" class="underlined dmgbase" name="attr_spellatkmod" value="0" spellcheck="false" title="@{repeating_spell-3_$id_spellatkmod}" />
                                <span class="spacer"></span>
                                <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                                <input type="number" class="nospin underlined" name="attr_spellatkcritrange" value="20" title="@{repeating_spell-3_$id_spellatkcritrange}" />
                                <span class="lbl" data-i18n="multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Multiplier:</span>
                                <input type="number" class="nospin underlined" name="attr_spelldmgcritmulti" value="2" title="@{repeating_spell-3_$id_spelldmgcritmulti}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spelldmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{repeating_spell-3_$id_spelldmgflag}" /><span></span>
                                <span class="lbl atk" data-i18n="damage:">Damage:</span>
                                <input type="text" name="attr_spelldmg" class="underlined dmgbase" spellcheck="false" placeholder="1d6" title="@{repeating_spell-3_$id_spelldmg}" />
                                <span class="lbl right typ" data-i18n="type:">Type:</span>
                                <input type="text" name="attr_spelldmgtype" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_spell-3_$id_spelldmgtype}" />
                                <input class="pseudocheck" type="checkbox" name="attr_spelldmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_spell-3_$id_spelldmg2flag}" /><span></span>
                                <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                                <input type="text" name="attr_spelldmg2" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_spell-3_$id_spelldmg2}" />
                                <span class="lbl right typ" data-i18n="type:">Type:</span>
                                <input type="text" name="attr_spelldmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="force" placeholder="Force" title="@{repeating_spell-3_$id_spelldmg2type}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spelldescflag" value="{{descflag=[[1]]}}" checked="checked" title="@{repeating_spell-3_$id_spelldescflag}" /><span></span>
                                <span class="lbl atk" data-i18n="description:">Description:</span>
                                <div class="autoex">
                                    <span name="attr_spelldesc"></span>
                                    <textarea name="attr_spelldesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_spell-3_$id_spelldesc}"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset> <!-- END REPEATING 3 LVL SPELL -->
            </div><!-- END Spells lvl 3 -->
            <input type="hidden" class="optional-flag0" name="attr_caster1_spells_perday_level_2" value="0" /><div class="optional blk grtopbrd"> <!-- Spells lvl 2 -->
                <span class="greybg prep"><span data-i18n="2nd">2nd</span> (<span name="attr_spells_prepared_level_2"></span>/<span name="attr_caster1_spells_total_level_2"></span>)</span>
                <fieldset class="repeating_spell-2"> <!-- REPEATING 2 LVL SPELL -->
                    <input type="hidden" name="attr_spelllevel" value="2" />
                    <input type="hidden" name="attr_spellcaster" value="1" />
                    <div class="spell right compendium-drop-target">
                        <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                        <div class="myrow">
                            <input type="hidden" name="attr_rollcontent" />
                            <button class="myrol underl" type="roll" name="SpellRoll" data-i18n-title="cast-spell" title="Cast spell" value="@{rollcontent}"><span name="attr_spelldisplay"></span>
                                <input type="hidden" class="optional-flag0" name="attr_spellprepared" value="0" /><span class="optional inl">(<span name="attr_spellprepared"></span>)</span></button>
                        </div>
                        <div class="options">
                            <div class="myrow">
                                <span class="lbl" data-i18n="name">Name</span>
                                <input type="text" name="attr_spellname" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_spell-2_$id_spellname}" />
                                <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                <div class="dots margindent">
                                    <input type="radio" name="attr_spellprepared" value="0" checked="checked" data-i18n-title="click-reset" title="Click to reset" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="1" data-i18n-title="prepared-once" title="Prepared once" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="2" data-i18n-title="prepared-twice" title="Prepared twice" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="3" data-i18n-title="prepared-thrice" title="Prepared thrice" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="4" data-i18n-title="prepared-four-times" title="Prepared four times" /><span></span>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="school:">School:</span>
                                <div class="autoex std">
                                    <span name="attr_spellschool"></span>
                                    <textarea name="attr_spellschool" accept="School" class="underlined" spellcheck="false" data-i18n-placeholder="spellschool-ph" placeholder="School/Domain/Elemental school..." title="@{repeating_spell-2_$id_spellschool}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="class-level:">Class/Level:</span>
                                <div class="autoex std">
                                    <span name="attr_spellclasslevel"></span>
                                    <textarea name="attr_spellclasslevel" accept="Level" class="underlined" spellcheck="false" data-i18n-placeholder="spellclasslevel-ph" placeholder="Sorcerer/Wizard 3" title="@{repeating_spell-2_$id_spellclasslevel}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="casting-time:">Casting time:</span>
                                <input type="text" name="attr_spellcastingtime" accept="Casting Time" class="underlined std" spellcheck="false" data-i18n-placeholder="spellcastingtime-ph" placeholder="1 standard action" title="@{repeating_spell-2_$id_spellcastingtime}" />
                                <span class="lbl std right" data-i18n="components:">Components:</span>
                                <div class="autoex std">
                                    <span name="attr_spellcomponent"></span>
                                    <textarea name="attr_spellcomponent" accept="Components" class="underlined" spellcheck="false" data-i18n-placeholder="spellcomponent-ph" placeholder="V, S, M (a ball of bat guano and sulfur)" title="@{repeating_spell-2_$id_spellcomponent}"></textarea>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="range:">Range:</span>
                                <div class="autoex std">
                                    <span name="attr_spellrange"></span>
                                    <textarea name="attr_spellrange" accept="Range" class="underlined" spellcheck="false" data-i18n-placeholder="spellrange-ph" placeholder="Long (400 ft. + 40 ft./level)" title="@{repeating_spell-2_$id_spellrange}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="area:">Area:</span>
                                <div class="autoex std">
                                    <span name="attr_spellarea"></span>
                                    <textarea name="attr_spellarea" accept="Area" class="underlined" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_spell-2_$id_spellarea}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="targets:">Targets:</span>
                                <div class="autoex std">
                                    <span name="attr_spelltargets"></span>
                                    <textarea name="attr_spelltargets" accept="Target" class="underlined" spellcheck="false" data-i18n-placeholder="spelltargets-ph" placeholder="up to five creatures" title="@{repeating_spell-2_$id_spelltargets}"></textarea>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="effect:">Effect:</span>
                                <div class="autoex std">
                                    <span name="attr_spelleffect"></span>
                                    <textarea name="attr_spelleffect" accept="Effect" class="underlined" spellcheck="false" data-i18n-placeholder="spelleffect-ph" placeholder="Heal [[1d5+@{caster1_level}]] HP" title="@{repeating_spell-2_$id_spelleffect}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="duration:">Duration:</span>
                                <div class="autoex std">
                                    <span name="attr_spellduration"></span>
                                    <textarea name="attr_spellduration" accept="Duration" class="underlined" spellcheck="false" data-i18n-placeholder="spellduration-ph" placeholder="Instantaneous" title="@{repeating_spell-2_$id_spellduration}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <input class="pseudocheck" type="checkbox" name="attr_spellsaveflag" value="{{save=1}}" title="@{repeating_spell-2_$id_spellsaveflag}" checked="checked" /><span></span>
                                <span class="lbl med" data-i18n="saving-throw:">Saving Throw:</span>
                                <input type="text" name="attr_spellsave" accept="Saving Throw" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_spell-2_$id_spellsave}" />
                                <span class="spacer"></span>
                                <span class="lbl" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                                <input type="hidden" name="attr_spelldc" value="0" />
                                <input type="number" class="nospin underlined sml" name="attr_spelldc_mod" value="0" title="@{repeating_spell-2_$id_spelldc}" />
                            </div>
                            <div class="myrow">
                                <input class="pseudocheck" type="checkbox" name="attr_spellresistanceflag" value="{{sr=1}}" title="@{repeating_spell-2_$id_spellresistanceflag}" checked="checked" /><span></span>
                                <span class="lbl med" data-i18n="spell-resistance:">Spell Resistance:</span>
                                <input type="text" name="attr_spellresistance" accept="Spell Resistance" class="underlined med" spellcheck="false" title="@{repeating_spell-2_$id_spellresistance}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spellatkflag" value="{{attack=1}}" title="@{repeating_spell-2_$id_spellatkflag}" /><span></span>
                                <span class="lbl atk" data-i18n="attack:">Attack:</span>
                                <input type="hidden" name="attr_spellatktype" value="0" />
                                <input type="text" class="underlined dmgbase" name="attr_spellatkmod" value="0" spellcheck="false" title="@{repeating_spell-2_$id_spellatkmod}" />
                                <span class="spacer"></span>
                                <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                                <input type="number" class="nospin underlined" name="attr_spellatkcritrange" value="20" title="@{repeating_spell-2_$id_spellatkcritrange}" />
                                <span class="lbl" data-i18n="multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Multiplier:</span>
                                <input type="number" class="nospin underlined" name="attr_spelldmgcritmulti" value="2" title="@{repeating_spell-2_$id_spelldmgcritmulti}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spelldmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{repeating_spell-2_$id_spelldmgflag}" /><span></span>
                                <span class="lbl atk" data-i18n="damage:">Damage:</span>
                                <input type="text" name="attr_spelldmg" class="underlined dmgbase" spellcheck="false" placeholder="1d6" title="@{repeating_spell-2_$id_spelldmg}" />
                                <span class="lbl right typ" data-i18n="type:">Type:</span>
                                <input type="text" name="attr_spelldmgtype" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_spell-2_$id_spelldmgtype}" />
                                <input class="pseudocheck" type="checkbox" name="attr_spelldmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_spell-2_$id_spelldmg2flag}" /><span></span>
                                <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                                <input type="text" name="attr_spelldmg2" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_spell-2_$id_spelldmg2}" />
                                <span class="lbl right typ" data-i18n="type:">Type:</span>
                                <input type="text" name="attr_spelldmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="force" placeholder="Force" title="@{repeating_spell-2_$id_spelldmg2type}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spelldescflag" value="{{descflag=[[1]]}}" checked="checked" title="@{repeating_spell-2_$id_spelldescflag}" /><span></span>
                                <span class="lbl atk" data-i18n="description:">Description:</span>
                                <div class="autoex">
                                    <span name="attr_spelldesc"></span>
                                    <textarea name="attr_spelldesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_spell-2_$id_spelldesc}"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset> <!-- END REPEATING 2 LVL SPELL -->
            </div><!-- END Spells lvl 2 -->
            <input type="hidden" class="optional-flag0" name="attr_caster1_spells_perday_level_1" value="0" /><div class="optional blk grtopbrd"> <!-- Spells lvl 1 -->
                <span class="greybg prep"><span data-i18n="1st">1st</span> (<span name="attr_spells_prepared_level_1"></span>/<span name="attr_caster1_spells_total_level_1"></span>)</span>
                <fieldset class="repeating_spell-1"> <!-- REPEATING 1 LVL SPELL -->
                    <input type="hidden" name="attr_spelllevel" value="1" />
                    <input type="hidden" name="attr_spellcaster" value="1" />
                    <div class="spell right compendium-drop-target">
                        <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                        <div class="myrow">
                            <input type="hidden" name="attr_rollcontent" />
                            <button class="myrol underl" type="roll" name="SpellRoll" data-i18n-title="cast-spell" title="Cast spell" value="@{rollcontent}"><span name="attr_spelldisplay"></span>
                                <input type="hidden" class="optional-flag0" name="attr_spellprepared" value="0" /><span class="optional inl">(<span name="attr_spellprepared"></span>)</span></button>
                        </div>
                        <div class="options">
                            <div class="myrow">
                                <span class="lbl" data-i18n="name">Name</span>
                                <input type="text" name="attr_spellname" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_spell-1_$id_spellname}" />
                                <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                <div class="dots margindent">
                                    <input type="radio" name="attr_spellprepared" value="0" checked="checked" data-i18n-title="click-reset" title="Click to reset" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="1" data-i18n-title="prepared-once" title="Prepared once" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="2" data-i18n-title="prepared-twice" title="Prepared twice" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="3" data-i18n-title="prepared-thrice" title="Prepared thrice" /><span></span>
                                    <input type="radio" name="attr_spellprepared" value="4" data-i18n-title="prepared-four-times" title="Prepared four times" /><span></span>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="school:">School:</span>
                                <div class="autoex std">
                                    <span name="attr_spellschool"></span>
                                    <textarea name="attr_spellschool" accept="School" class="underlined" spellcheck="false" data-i18n-placeholder="spellschool-ph" placeholder="School/Domain/Elemental school..." title="@{repeating_spell-1_$id_spellschool}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="class-level:">Class/Level:</span>
                                <div class="autoex std">
                                    <span name="attr_spellclasslevel"></span>
                                    <textarea name="attr_spellclasslevel" accept="Level" class="underlined" spellcheck="false" data-i18n-placeholder="spellclasslevel-ph" placeholder="Sorcerer/Wizard 3" title="@{repeating_spell-1_$id_spellclasslevel}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="casting-time:">Casting time:</span>
                                <input type="text" name="attr_spellcastingtime" accept="Casting Time" class="underlined std" spellcheck="false" data-i18n-placeholder="spellcastingtime-ph" placeholder="1 standard action" title="@{repeating_spell-1_$id_spellcastingtime}" />
                                <span class="lbl std right" data-i18n="components:">Components:</span>
                                <div class="autoex std">
                                    <span name="attr_spellcomponent"></span>
                                    <textarea name="attr_spellcomponent" accept="Components" class="underlined" spellcheck="false" data-i18n-placeholder="spellcomponent-ph" placeholder="V, S, M (a ball of bat guano and sulfur)" title="@{repeating_spell-1_$id_spellcomponent}"></textarea>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="range:">Range:</span>
                                <div class="autoex std">
                                    <span name="attr_spellrange"></span>
                                    <textarea name="attr_spellrange" accept="Range" class="underlined" spellcheck="false" data-i18n-placeholder="spellrange-ph" placeholder="Long (400 ft. + 40 ft./level)" title="@{repeating_spell-1_$id_spellrange}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="area:">Area:</span>
                                <div class="autoex std">
                                    <span name="attr_spellarea"></span>
                                    <textarea name="attr_spellarea" accept="Area" class="underlined" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_spell-1_$id_spellarea}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="targets:">Targets:</span>
                                <div class="autoex std">
                                    <span name="attr_spelltargets"></span>
                                    <textarea name="attr_spelltargets" accept="Target" class="underlined" spellcheck="false" data-i18n-placeholder="spelltargets-ph" placeholder="up to five creatures" title="@{repeating_spell-1_$id_spelltargets}"></textarea>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="effect:">Effect:</span>
                                <div class="autoex std">
                                    <span name="attr_spelleffect"></span>
                                    <textarea name="attr_spelleffect" accept="Effect" class="underlined" spellcheck="false" data-i18n-placeholder="spelleffect-ph" placeholder="Heal [[1d5+@{caster1_level}]] HP" title="@{repeating_spell-1_$id_spelleffect}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="duration:">Duration:</span>
                                <div class="autoex std">
                                    <span name="attr_spellduration"></span>
                                    <textarea name="attr_spellduration" accept="Duration" class="underlined" spellcheck="false" data-i18n-placeholder="spellduration-ph" placeholder="Instantaneous" title="@{repeating_spell-1_$id_spellduration}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <input class="pseudocheck" type="checkbox" name="attr_spellsaveflag" value="{{save=1}}" title="@{repeating_spell-1_$id_spellsaveflag}" checked="checked" /><span></span>
                                <span class="lbl med" data-i18n="saving-throw:">Saving Throw:</span>
                                <input type="text" name="attr_spellsave" accept="Saving Throw" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_spell-1_$id_spellsave}" />
                                <span class="spacer"></span>
                                <span class="lbl" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                                <input type="hidden" name="attr_spelldc" value="0" />
                                <input type="number" class="nospin underlined sml" name="attr_spelldc_mod" value="0" title="@{repeating_spell-1_$id_spelldc}" />
                            </div>
                            <div class="myrow">
                                <input class="pseudocheck" type="checkbox" name="attr_spellresistanceflag" value="{{sr=1}}" title="@{repeating_spell-1_$id_spellresistanceflag}" checked="checked" /><span></span>
                                <span class="lbl med" data-i18n="spell-resistance:">Spell Resistance:</span>
                                <input type="text" name="attr_spellresistance" accept="Spell Resistance" class="underlined med" spellcheck="false" title="@{repeating_spell-1_$id_spellresistance}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spellatkflag" value="{{attack=1}}" title="@{repeating_spell-1_$id_spellatkflag}" /><span></span>
                                <span class="lbl atk" data-i18n="attack:">Attack:</span>
                                <input type="hidden" name="attr_spellatktype" value="0" />
                                <input type="text" class="underlined dmgbase" name="attr_spellatkmod" value="0" spellcheck="false" title="@{repeating_spell-1_$id_spellatkmod}" />
                                <span class="spacer"></span>
                                <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                                <input type="number" class="nospin underlined" name="attr_spellatkcritrange" value="20" title="@{repeating_spell-1_$id_spellatkcritrange}" />
                                <span class="lbl" data-i18n="multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Multiplier:</span>
                                <input type="number" class="nospin underlined" name="attr_spelldmgcritmulti" value="2" title="@{repeating_spell-1_$id_spelldmgcritmulti}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spelldmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{repeating_spell-1_$id_spelldmgflag}" /><span></span>
                                <span class="lbl atk" data-i18n="damage:">Damage:</span>
                                <input type="text" name="attr_spelldmg" class="underlined dmgbase" spellcheck="false" placeholder="1d6" title="@{repeating_spell-1_$id_spelldmg}" />
                                <span class="lbl right typ" data-i18n="type:">Type:</span>
                                <input type="text" name="attr_spelldmgtype" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_spell-1_$id_spelldmgtype}" />
                                <input class="pseudocheck" type="checkbox" name="attr_spelldmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_spell-1_$id_spelldmg2flag}" /><span></span>
                                <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                                <input type="text" name="attr_spelldmg2" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_spell-1_$id_spelldmg2}" />
                                <span class="lbl right typ" data-i18n="type:">Type:</span>
                                <input type="text" name="attr_spelldmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="force" placeholder="Force" title="@{repeating_spell-1_$id_spelldmg2type}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spelldescflag" value="{{descflag=[[1]]}}" checked="checked" title="@{repeating_spell-1_$id_spelldescflag}" /><span></span>
                                <span class="lbl atk" data-i18n="description:">Description:</span>
                                <div class="autoex">
                                    <span name="attr_spelldesc"></span>
                                    <textarea name="attr_spelldesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_spell-1_$id_spelldesc}"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset> <!-- END REPEATING 1 LVL SPELL -->
            </div><!-- END Spells lvl 1 -->
            <div class="myrow grtopbrd"> <!-- Spells lvl 0 -->
                <span class="greybg prep">0 (<span data-i18n="at-will">at will</span>)</span>
                <fieldset class="repeating_spell-0"> <!-- REPEATING 0 LVL SPELL -->
                    <input type="hidden" name="attr_spelllevel" value="0" />
                    <input type="hidden" name="attr_spellcaster" value="1" />
                    <div class="spell right compendium-drop-target">
                        <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                        <div class="myrow">
                            <input type="hidden" name="attr_rollcontent" />
                            <button class="myrol underl" type="roll" name="SpellRoll" data-i18n-title="cast-spell" title="Cast spell" value="@{rollcontent}"><span name="attr_spelldisplay"></span></button>
                        </div>
                        <div class="options">
                            <div class="myrow">
                                <span class="lbl" data-i18n="name">Name</span>
                                <input type="text" name="attr_spellname" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_spell-0_$id_spellname}" />
                                <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="school:">School:</span>
                                <div class="autoex std">
                                    <span name="attr_spellschool"></span>
                                    <textarea name="attr_spellschool" accept="School" class="underlined" spellcheck="false" data-i18n-placeholder="spellschool-ph" placeholder="School/Domain/Elemental school..." title="@{repeating_spell-0_$id_spellschool}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="class-level:">Class/Level:</span>
                                <div class="autoex std">
                                    <span name="attr_spellclasslevel"></span>
                                    <textarea name="attr_spellclasslevel" accept="Level" class="underlined" spellcheck="false" data-i18n-placeholder="spellclasslevel-ph" placeholder="Sorcerer/Wizard 3" title="@{repeating_spell-0_$id_spellclasslevel}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="casting-time:">Casting time:</span>
                                <input type="text" name="attr_spellcastingtime" accept="Casting Time" class="underlined std" spellcheck="false" data-i18n-placeholder="spellcastingtime-ph" placeholder="1 standard action" title="@{repeating_spell-0_$id_spellcastingtime}" />
                                <span class="lbl std right" data-i18n="components:">Components:</span>
                                <div class="autoex std">
                                    <span name="attr_spellcomponent"></span>
                                    <textarea name="attr_spellcomponent" accept="Components" class="underlined" spellcheck="false" data-i18n-placeholder="spellcomponent-ph" placeholder="V, S, M (a ball of bat guano and sulfur)" title="@{repeating_spell-0_$id_spellcomponent}"></textarea>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="range:">Range:</span>
                                <div class="autoex std">
                                    <span name="attr_spellrange"></span>
                                    <textarea name="attr_spellrange" accept="Range" class="underlined" spellcheck="false" data-i18n-placeholder="spellrange-ph" placeholder="Long (400 ft. + 40 ft./level)" title="@{repeating_spell-0_$id_spellrange}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="area:">Area:</span>
                                <div class="autoex std">
                                    <span name="attr_spellarea"></span>
                                    <textarea name="attr_spellarea" accept="Area" class="underlined" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_spell-0_$id_spellarea}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="targets:">Targets:</span>
                                <div class="autoex std">
                                    <span name="attr_spelltargets"></span>
                                    <textarea name="attr_spelltargets" accept="Target" class="underlined" spellcheck="false" data-i18n-placeholder="spelltargets-ph" placeholder="up to five creatures" title="@{repeating_spell-0_$id_spelltargets}"></textarea>
                                </div>
                            </div>
                            <div class="myrow grtopbrd">
                                <span class="lbl std right" data-i18n="effect:">Effect:</span>
                                <div class="autoex std">
                                    <span name="attr_spelleffect"></span>
                                    <textarea name="attr_spelleffect" accept="Effect" class="underlined" spellcheck="false" data-i18n-placeholder="spelleffect-ph" placeholder="Heal [[1d5+@{caster1_level}]] HP" title="@{repeating_spell-0_$id_spelleffect}"></textarea>
                                </div>
                                <span class="lbl std right" data-i18n="duration:">Duration:</span>
                                <div class="autoex std">
                                    <span name="attr_spellduration"></span>
                                    <textarea name="attr_spellduration" accept="Duration" class="underlined" spellcheck="false" data-i18n-placeholder="spellduration-ph" placeholder="Instantaneous" title="@{repeating_spell-0_$id_spellduration}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <input class="pseudocheck" type="checkbox" name="attr_spellsaveflag" value="{{save=1}}" title="@{repeating_spell-0_$id_spellsaveflag}" checked="checked" /><span></span>
                                <span class="lbl med" data-i18n="saving-throw:">Saving Throw:</span>
                                <input type="text" name="attr_spellsave" accept="Saving Throw" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_spell-0_$id_spellsave}" />
                                <span class="spacer"></span>
                                <span class="lbl" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                                <input type="hidden" name="attr_spelldc_mod" value="0" />
                                <input type="number" class="nospin underlined sml" name="attr_spelldc" value="0" title="@{repeating_spell-0_$id_spelldc}" />
                            </div>
                            <div class="myrow">
                                <input class="pseudocheck" type="checkbox" name="attr_spellresistanceflag" value="{{sr=1}}" title="@{repeating_spell-0_$id_spellresistanceflag}" checked="checked" /><span></span>
                                <span class="lbl med" data-i18n="spell-resistance:">Spell Resistance:</span>
                                <input type="text" name="attr_spellresistance" accept="Spell Resistance" class="underlined med" spellcheck="false" title="@{repeating_spell-0_$id_spellresistance}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spellatkflag" value="{{attack=1}}" title="@{repeating_spell-0_$id_spellatkflag}" /><span></span>
                                <span class="lbl atk" data-i18n="attack:">Attack:</span>
                                <input type="hidden" name="attr_spellatktype" value="0" />
                                <input type="text" class="underlined dmgbase" name="attr_spellatkmod" value="0" spellcheck="false" title="@{repeating_spell-0_$id_spellatkmod}" />
                                <span class="spacer"></span>
                                <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                                <input type="number" class="nospin underlined" name="attr_spellatkcritrange" value="20" title="@{repeating_spell-0_$id_spellatkcritrange}" />
                                <span class="lbl" data-i18n="multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Multiplier:</span>
                                <input type="number" class="nospin underlined" name="attr_spelldmgcritmulti" value="2" title="@{repeating_spell-0_$id_spelldmgcritmulti}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spelldmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{repeating_spell-0_$id_spelldmgflag}" /><span></span>
                                <span class="lbl atk" data-i18n="damage:">Damage:</span>
                                <input type="text" name="attr_spelldmg" class="underlined dmgbase" spellcheck="false" placeholder="1d6" title="@{repeating_spell-0_$id_spelldmg}" />
                                <span class="lbl right typ" data-i18n="type:">Type:</span>
                                <input type="text" name="attr_spelldmgtype" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_spell-0_$id_spelldmgtype}" />
                                <input class="pseudocheck" type="checkbox" name="attr_spelldmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_spell-0_$id_spelldmg2flag}" /><span></span>
                                <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                                <input type="text" name="attr_spelldmg2" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_spell-0_$id_spelldmg2}" />
                                <span class="lbl right typ" data-i18n="type:">Type:</span>
                                <input type="text" name="attr_spelldmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="force" placeholder="Force" title="@{repeating_spell-0_$id_spelldmg2type}" />
                            </div>
                            <div class="myrow grtopbrd">
                                <input class="pseudocheck" type="checkbox" name="attr_spelldescflag" value="{{descflag=[[1]]}}" checked="checked" title="@{repeating_spell-0_$id_spelldescflag}" /><span></span>
                                <span class="lbl atk" data-i18n="description:">Description:</span>
                                <div class="autoex">
                                    <span name="attr_spelldesc"></span>
                                    <textarea name="attr_spelldesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_spell-0_$id_spelldesc}"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset> <!-- END REPEATING 0 LVL SPELL -->
            </div><!-- END Spells lvl 0 -->
        </div> <!-- END SPELLS -->
    </div> <!-- END Display OFFENSE -->
    <input type="hidden" class="optional-flag" name="attr_tactics" value="" /><div class="npc-display optional blk"> <!-- Display TACTICS -->
        <span class="npc-section" data-i18n="tactics">Tactics</span>
        <span name="attr_tactics"></span>
    </div>
    <div class="npc-display"> <!-- Display STATISTICS -->
        <span class="npc-section" data-i18n="statistics">Statistics</span>
        <div class="myrow">
            <button class="myrol" type="roll" name="StrRoll" data-i18n-title="strength-roll" title="Strength roll" value="@{whispertype} &{template:npc} {{name=^{strength}}} {{type=ability}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{strength_mod}[MOD]]]}}"><span class="bold" data-i18n="str-u">STR</span>
            <span name="attr_strength"></span> (<span name="attr_strength_mod"></span>)</button>,
            <button class="myrol" type="roll" name="DexRoll" data-i18n-title="dexterity-roll" title="Dexterity roll" value="@{whispertype} &{template:npc} {{name=^{dexterity}}} {{type=ability}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{dexterity_mod}[MOD]]]}}"><span class="bold" data-i18n="dex-u">DEX</span>
            <span name="attr_dexterity"></span> (<span name="attr_dexterity_mod"></span>)</button>,
            <button class="myrol" type="roll" name="ConRoll" data-i18n-title="constitution-roll" title="Constitution roll" value="@{whispertype} &{template:npc} {{name=^{constitution}}} {{type=ability}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{constitution_mod}[MOD]]]}}"><span class="bold" data-i18n="con-u">CON</span>
            <span name="attr_constitution"></span> (<span name="attr_constitution_mod"></span>)</button>,
            <button class="myrol" type="roll" name="IntRoll" data-i18n-title="intelligence-roll" title="Intelligence roll" value="@{whispertype} &{template:npc} {{name=^{intelligence}}} {{type=ability}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{intelligence_mod}[MOD]]]}}"><span class="bold" data-i18n="int-u">INT</span>
            <span name="attr_intelligence"></span> (<span name="attr_intelligence_mod"></span>)</button>,
            <button class="myrol" type="roll" name="WisRoll" data-i18n-title="wisdom-roll" title="wisdom roll" value="@{whispertype} &{template:npc} {{name=^{wisdom}}} {{type=ability}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{wisdom_mod}[MOD]]]}}"><span class="bold" data-i18n="wis-u">WIS</span>
            <span name="attr_wisdom"></span> (<span name="attr_wisdom_mod"></span>)</button>,
            <button class="myrol" type="roll" name="ChaRoll" data-i18n-title="charisma-roll" title="charisma roll" value="@{whispertype} &{template:npc} {{name=^{charisma}}} {{type=ability}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{charisma_mod}[MOD]]]}}"><span class="bold" data-i18n="cha-u">CHA</span>
            <span name="attr_charisma"></span> (<span name="attr_charisma_mod"></span>)</button>
        </div>
        <div class="myrow">
            <span class="bold" data-i18n="base-atk">Base Atk</span>
            <span name="attr_bab"></span>
            ;
            <button class="myrol" type="roll" name="CmbRoll" value="@{whispertype} &{template:npc} {{name=^{combat-maneuver}}} {{type=attack}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20cs20+@{cmb_mod}[MOD]]]}}"><span class="bold" data-i18n="cmb-u" data-i18n-title="combat-maneuver-bonus" title="Combat Maneuver Bonus">CMB</span> <span name="attr_cmb_mod"></span></button>
            <input type="hidden" class="optional-flag" name="attr_cmb_notes" value="" /><span class="optional inl">(<span name="attr_cmb_notes"></span>)</span>
            ;
            <span class="bold" data-i18n="cmd-u">CMD</span>
            <span name="attr_cmd_mod"></span>
            <input type="hidden" class="optional-flag" name="attr_cmd_notes" value="" /><span class="optional inl">(<span name="attr_cmd_notes"></span>)</span>
        </div>
        <div class="myrow npcatk feats"> <!-- Feats -->
            <span class="bold" data-i18n="feats">Feats</span>
            <fieldset class="repeating_feats">
                <div class="feat compendium-drop-target">
                    <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                    <button class="myrol underl" type="roll" name="FeatShow" data-i18n-title="show-feat" title="Show Feat" value="@{whispertype} &{template:npc} {{name=@{name}}} {{type=feat}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{feattype=^{@{type}}}} {{prerequisites=@{prerequisites}}} {{benefits=@{benefits}}} {{normal=@{normal}}} {{special=@{special}}} @{descflag}"><span name="attr_name"></span></button>
                    <div class="options">
                        <div class="myrow">
                            <span class="lbl" data-i18n="name">Name</span>
                            <input type="text" name="attr_name" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_feats_$id_name}" />
                            <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                            <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                            <span class="lbl margindent" data-i18n="type">Type</span>
                            <select class="underlined" name="attr_type" title="@{repeating_feat_$id_type}">
                                <option value="general" data-i18n="general" selected="selected">General</option>
                                <option value="combat" data-i18n="combat">Combat</option>
                                <option value="critical" data-i18n="critical">Critical</option>
                                <option value="grit" data-i18n="grit">Grit</option>
                                <option value="item-creation" data-i18n="item-creation">Item creation</option>
                                <option value="metamagic" data-i18n="metamagic">Metamagic</option>
                                <option value="panache" data-i18n="panache">Panache</option>
                                <option value="performance" data-i18n="performance">Performance</option>
                                <option value="style" data-i18n="style">Style</option>
                                <option value="teamwork" data-i18n="teamwork">Teamwork</option>
                            </select>
                        </div>
                        <div class="myrow grtopbrd">
                            <span class="lbl std right" data-i18n="prerequisites:">Prerequisites:</span>
                            <div class="autoex std">
                                <span name="attr_prerequisites"></span>
                                <textarea name="attr_prerequisites" class="underlined" spellcheck="false" title="@{repeating_feats_$id_prerequisites}"></textarea>
                            </div>
                            <span class="lbl std right" data-i18n="benefits:">Benefits:</span>
                            <div class="autoex std">
                                <span name="attr_benefits"></span>
                                <textarea name="attr_benefits" class="underlined" spellcheck="false" title="@{repeating_feats_$id_benefits}"></textarea>
                            </div>
                        </div>
                        <div class="myrow">
                            <span class="lbl std right" data-i18n="normal:">Normal:</span>
                            <div class="autoex std">
                                <span name="attr_normal"></span>
                                <textarea name="attr_normal" class="underlined" spellcheck="false" title="@{repeating_feats_$id_normal}"></textarea>
                            </div>
                            <span class="lbl std right" data-i18n="special:">Special:</span>
                            <div class="autoex std">
                                <span name="attr_special"></span>
                                <textarea name="attr_special" class="underlined" spellcheck="false" title="@{repeating_feats_$id_special}"></textarea>
                            </div>
                        </div>
                        <div class="myrow grtopbrd">
                            <input class="pseudocheck" type="checkbox" name="attr_descflag" value="{{descflag=[[1]]}}{{desc=@{description}}}" title="@{repeating_feats_$id_descflag}" checked="checked" /><span></span>
                            <span class="lbl atk" data-i18n="description:">Description:</span>
                            <div class="autoex">
                                <span name="attr_description"></span>
                                <textarea name="attr_description" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_feats_$id_description}"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div>  <!-- END Feats -->
        <div class="myrow">
            <span class="bold" data-i18n="skills">Skills</span>
            <input type="hidden" class="optional-flag0" name="attr_acrobatics_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="Acrobatics" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{acrobatics}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{acrobatics}[MOD]]]}} {{abilitytype=@{acrobatics_notes}}}"><span data-i18n="acrobatics">Acrobatics</span> <span name="attr_acrobatics_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_appraise" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="Appraise" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{appraise}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{appraise}[MOD]]]}} {{abilitytype=@{appraise_notes}}}"><span data-i18n="appraise">Appraise</span> <span name="attr_appraise_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_bluff_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="Bluff" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{bluff}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{bluff}[MOD]]]}} {{abilitytype=@{bluff_notes}}}"><span data-i18n="bluff">Bluff</span> <span name="attr_bluff_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_climb_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="Climb" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{climb}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{climb}[MOD]]]}} {{abilitytype=@{climb_notes}}}"><span data-i18n="climb">Climb</span> <span name="attr_climb_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_craft_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="Craft" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{craft}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{craft}[MOD]]]}} {{abilitytype=@{craft_notes}}}"><span data-i18n="craft">Craft</span> <span name="attr_craft_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_diplomacy_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="Diplomacy" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{diplomacy}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{diplomacy}[MOD]]]}} {{abilitytype=@{diplomacy_notes}}}"><span data-i18n="diplomacy">Diplomacy</span> <span name="attr_diplomacy_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_disable_device_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="DisableDevice" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{disable_device}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{disable_device}[MOD]]]}} {{abilitytype=@{disable_device_notes}}}"><span data-i18n="disable_device">Disable Device</span> <span name="attr_disable_device_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_disguise_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="Disguise" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{disguise}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{disguise}[MOD]]]}} {{abilitytype=@{disguise_notes}}}"><span data-i18n="disguise">Disguise</span> <span name="attr_disguise_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_escape_artist_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="EscapeArtist" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{escape_artist}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{escape_artist}[MOD]]]}} {{abilitytype=@{escape_artist_notes}}}"><span data-i18n="escape_artist">Escape Artist</span> <span name="attr_escape_artist_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_fly_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="Fly" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{fly}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{fly}[MOD]]]}} {{abilitytype=@{fly_notes}}}"><span data-i18n="fly">Fly</span> <span name="attr_fly_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_handle_animal_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="HandleAnimal" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{handle_animal}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{handle_animal}[MOD]]]}} {{abilitytype=@{handle_animal_notes}}}"><span data-i18n="handle_animal">Handle Animal</span> <span name="attr_handle_animal_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_heal_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="Heal" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{heal}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{heal}[MOD]]]}} {{abilitytype=@{heal_notes}}}"><span data-i18n="heal">Heal</span> <span name="attr_heal_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_intimidate_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="Intimidate" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{intimidate}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{intimidate}[MOD]]]}} {{abilitytype=@{intimidate_notes}}}"><span data-i18n="intimidate">Intimidate</span> <span name="attr_intimidate_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_knowledge_arcana_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="KnowledgeArcana" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{knowledge_arcana}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{knowledge_arcana}[MOD]]]}} {{abilitytype=@{knowledge_arcana_notes}}}"><span data-i18n="knowledge_arcana">Knowledge Arcana</span> <span name="attr_knowledge_arcana_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_knowledge_dungeoneering_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="KnowledgeDungeoneering" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{knowledge_dungeoneering}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{knowledge_dungeoneering}[MOD]]]}} {{abilitytype=@{knowledge_dungeoneering_notes}}}"><span data-i18n="knowledge_dungeoneering">Knowledge Dungeoneering</span> <span name="attr_knowledge_dungeoneering_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_knowledge_engineering_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="KnowledgeEngineering" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{knowledge_engineering}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{knowledge_engineering}[MOD]]]}} {{abilitytype=@{knowledge_engineering_notes}}}"><span data-i18n="knowledge_engineering">Knowledge Engineering</span> <span name="attr_knowledge_engineering_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_knowledge_geography_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="KnowledgeGeography" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{knowledge_geography}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{knowledge_geography}[MOD]]]}} {{knowledge_geography=@{acrobatics_notes}}}"><span data-i18n="knowledge_geography">Knowledge Geography</span> <span name="attr_knowledge_geography_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_knowledge_history_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="KnowledgeHistory" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{knowledge_history}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{knowledge_history}[MOD]]]}} {{abilitytype=@{knowledge_history_notes}}}"><span data-i18n="knowledge_history">Knowledge History</span> <span name="attr_knowledge_history_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_knowledge_local_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="KnowledgeLocal" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{knowledge_local}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{knowledge_local}[MOD]]]}} {{abilitytype=@{knowledge_local_notes}}}"><span data-i18n="knowledge_local">Knowledge Local</span> <span name="attr_knowledge_local_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_knowledge_nature_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="KnowledgeNature" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{knowledge_nature}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{knowledge_nature}[MOD]]]}} {{abilitytype=@{knowledge_nature_notes}}}"><span data-i18n="knowledge_nature">Knowledge Nature</span> <span name="attr_knowledge_nature_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_knowledge_nobility_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="KnowledgeNobility" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{knowledge_nobility}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{knowledge_nobility}[MOD]]]}} {{abilitytype=@{knowledge_nobility_notes}}}"><span data-i18n="knowledge_nobility">Knowledge Nobility</span> <span name="attr_knowledge_nobility_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_knowledge_planes_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="KnowledgePlanes" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{knowledge_planes}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{knowledge_planes}[MOD]]]}} {{abilitytype=@{knowledge_planes_notes}}}"><span data-i18n="knowledge_planes">Knowledge Planes</span> <span name="attr_knowledge_planes_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_knowledge_religion_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="KnowledgeReligion" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{knowledge_religion}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{knowledge_religion}[MOD]]]}} {{abilitytype=@{knowledge_religion_notes}}}"><span data-i18n="knowledge_religion">Knowledge Religion</span> <span name="attr_knowledge_religion_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_linguistics_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="Linguistics" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{linguistics}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{linguistics}[MOD]]]}} {{abilitytype=@{linguistics_notes}}}"><span data-i18n="linguistics">Linguistics</span> <span name="attr_linguistics_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_perception_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="Perception" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{perception}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{perception}[MOD]]]}} {{abilitytype=@{perception_notes}}}"><span data-i18n="perception">Perception</span> <span name="attr_perception_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_perform_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="Perform" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{perform}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{perform}[MOD]]]}} {{abilitytype=@{perform_notes}}}"><span data-i18n="perform">Perform</span> <span name="attr_perform_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_profession_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="Profession" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{profession}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{profession}[MOD]]]}} {{abilitytype=@{profession_notes}}}"><span data-i18n="profession">Profession</span> <span name="attr_profession_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_ride_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="Ride" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{ride}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{ride}[MOD]]]}} {{abilitytype=@{ride_notes}}}"><span data-i18n="ride">Ride</span> <span name="attr_ride_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_sense_motive_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="SenseMotive" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{sense_motive}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{sense_motive}[MOD]]]}} {{abilitytype=@{sense_motive_notes}}}"><span data-i18n="sense_motive">Sense Motive</span> <span name="attr_sense_motive_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_sleight_of_hand_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="SleightOfHand" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{sleight_of_hand}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{sleight_of_hand}[MOD]]]}} {{abilitytype=@{sleight_of_hand_notes}}}"><span data-i18n="sleight_of_hand">Sleight Of Hand</span> <span name="attr_sleight_of_hand_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_spellcraft_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="Spellcraft" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{spellcraft}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{spellcraft}[MOD]]]}} {{abilitytype=@{spellcraft_notes}}}"><span data-i18n="spellcraft">Spellcraft</span> <span name="attr_spellcraft_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_stealth_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="Stealth" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{stealth}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{stealth}[MOD]]]}} {{abilitytype=@{stealth_notes}}}"><span data-i18n="stealth">Stealth</span> <span name="attr_stealth_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_survival_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="Survival" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{survival}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{survival}[MOD]]]}} {{abilitytype=@{survival_notes}}}"><span data-i18n="survival">Survival</span> <span name="attr_survival_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_swim_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="Swim" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{swim}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{swim}[MOD]]]}} {{abilitytype=@{swim_notes}}}"><span data-i18n="swim">Swim</span> <span name="attr_swim_display"></span></button>,</span>
            <input type="hidden" class="optional-flag0" name="attr_use_magic_device_flag" value="0" /><span class="optional inl"><button class="myrol" type="roll" name="UseMagicDevice" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:npc} {{name=^{use_magic_device}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{use_magic_device}[MOD]]]}} {{abilitytype=@{use_magic_device_notes}}}"><span data-i18n="use_magic_device">Use Magic Device</span> <span name="attr_use_magic_device_display"></span></button>,</span>
            <input type="hidden" class="optional-flag" name="attr_skills_racial_modifiers" value="" /><span class="optional inl"><span class="bold" data-i18n="racial-modifiers">Racial Modifiers</span>&nbsp;<span name="attr_skills_racial_modifiers"></span></span>
        </div>
        <div class="myrow">
            <span class="bold" data-i18n="languages">Languages</span>
            <span name="attr_languages"></span>
        </div>
        <input type="hidden" class="optional-flag" name="attr_sq" value="" /><div class="myrow optional blk">
            <span class="bold" data-i18n="sq-u">SQ</span>
            <span name="attr_sq"></span>
        </div>
        <input type="hidden" class="optional-flag" name="attr_combat_gear" value="" /><div class="myrow optional blk">
            <span class="bold" data-i18n="combat-gear">Combat Gear</span>
            <span name="attr_combat_gear"></span>
        </div>
    </div> <!-- END Display STATISTICS -->
    <input type="hidden" class="optional-flag0" name="attr_special_abilities_flag" value="1" /><div class="specabilities optional blk"> <!-- Display SPECIAL ABILITIES -->
        <div class="npc-display">
            <div class="myrow">
                <span class="npc-section" data-i18n="special-abilities">Special Abilities</span>
            </div>
            <fieldset class="repeating_abilities">
                <div class="ability compendium-drop-target">
                    <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                    <button class="myrol underl" type="roll" name="AbilityShow" data-i18n-title="show-ability" title="Show Ability" value="@{whispertype} &{template:npc} {{name=@{name}}} {{type=feat}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{abilitytype=@{type}}} @{descflag}"><span class="bold" name="attr_name"></span>
                        <input type="hidden" class="optional-flag" name="attr_type" value="" /><span class="optional inl bold">(<span name="attr_type"></span>)</span></button>
                    <span style="display: inline;" name="attr_description"></span>s
                    <div class="options">
                        <div class="myrow">
                            <span class="lbl" data-i18n="name">Name</span>
                            <input type="text" name="attr_name" accept="Name" class="underlined large" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_abilities_$id_name}" />
                            <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                            <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                            <span class="lbl margindent" data-i18n="type">Type</span>
                            <input type="text" name="attr_type" accept="Ability Type" class="underlined small" spellcheck="false" data-i18n-placeholder="type" placeholder="Type" title="@{repeating_abilities_$id_type}" />
                        </div>
                        <div class="myrow">
                            <input class="pseudocheck" type="checkbox" name="attr_descflag" value="{{descflag=[[1]]}}{{desc=@{description}}}" title="@{repeating_abilities_$id_descflag}" checked="checked" /><span></span>
                            <span class="lbl atk" data-i18n="description:">Description:</span>
                            <div class="autoex">
                                <span name="attr_description"></span>
                                <textarea name="attr_description" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_abilities_$id_description}"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div>
    </div> <!-- END Display SPECIAL ABILITIES -->
    <input type="hidden" class="optional-flag0" name="attr_ecology_flag" value="1" /><div class="optional blk"> <!-- Display ECOLOGY -->
        <div class="npc-display">
            <span class="npc-section" data-i18n="ecology">Ecology</span>
            <div class="myrow">
                <span class="bold" data-i18n="environment">Environment</span>
                <span name="attr_environment"></span>
            </div>
            <div class="myrow">
                <span class="bold" data-i18n="organization">Organization</span>
                <span name="attr_organization"></span>
            </div>
            <div class="myrow">
                <span class="bold" data-i18n="treasure">Treasure</span>
                <span name="attr_treasure"></span>
            </div>
            <div class="myrow">
                <span class="bold" data-i18n="description">Description</span>
                <span name="attr_background"></span>
            </div>
        </div>
    </div> <!-- END Display ECOLOGY -->
</div><!-- NPC SHEET -->
<div class="fullpc"> <!-- PC SHEET -->
    <div class="myrow"> <!-- top row -->
        <div class="col1third"> <!-- logo -->
            <img style="width: 270px;" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/logo.png" />
        </div>
        <div class="col2third" style="padding-top: 4px;"> <!-- identity -->
            <div class="myrow">
                <div class="identity">
                    <input type="text" name="attr_character_name" class="underlined" spellcheck="false" title="@{character_name}" />
                    <span data-i18n="character-name">character name</span>
                </div>
                <div class="identity">
                    <select class="alignment underlined" name="attr_alignment" title="@{alignment}">
                        <option value="lawful good" data-i18n="lawful-good">lawful good</option>
                        <option value="neutral good" data-i18n="neutral-good">neutral good</option>
                        <option value="chaotic good" data-i18n="chaotic-good">chaotic good</option>
                        <option value="lawful neutral" data-i18n="lawful-neutral">lawful neutral</option>
                        <option value="neutral" data-i18n="neutral" selected="selected">neutral</option>
                        <option value="chaotic neutral" data-i18n="chaotic-neutral">chaotic neutral</option>
                        <option value="lawful evil" data-i18n="lawful-evil">lawful evil</option>
                        <option value="neutral evil" data-i18n="neutral-evil">neutral evil</option>
                        <option value="chaotic evil" data-i18n="chaotic-evil">chaotic evil</option>
                    </select>
                    <span data-i18n="alignment">alignment</span>
                </div>
                <div class="identity">
                    <input type="text" name="attr_player" class="underlined" spellcheck="false" title="@{player}" />
                    <span data-i18n="player">player</span>
                </div>
            </div>
            <div class="myrow">
                <div class="identity">
                    <span class="pseudoattr greybg underlined" style="width: 210px;" name="attr_class" title="@{class}"></span>
                    <span data-i18n="class">Class</span>
                </div>
                <div class="identity">
                    <span class="pseudoattr greybg underlined center" style="width: 35px;" name="attr_level" title="@{level}"></span>
                    <span data-i18n="level">Level</span>
                </div>
                <div class="identity">
                    <input type="text" name="attr_deity" class="underlined medium" spellcheck="false" title="@{deity}" />
                    <span data-i18n="deity">Deity</span>
                </div>
                <div class="identity">
                    <input type="text" name="attr_homeland" class="underlined medium" spellcheck="false" title="@{homeland}" />
                    <span data-i18n="homeland">Homeland</span>
                </div>
            </div>
            <div class="myrow">
                <div class="identity">
                    <input type="text" name="attr_race" class="underlined medium" spellcheck="false" title="@{race}" />
                    <span data-i18n="race">Race</span>
                </div>
                <div class="identity">
                    <select class="size underlined" name="attr_size" title="@{size}">
                        <option value="fine" data-i18n="fine">Fine</option>
                        <option value="diminutive" data-i18n="diminutive">Diminutive</option>
                        <option value="tiny" data-i18n="tiny">Tiny</option>
                        <option value="small" data-i18n="small">Small</option>
                        <option value="medium" data-i18n="medium" selected="selected">Medium</option>
                        <option value="large" data-i18n="large">Large</option>
                        <option value="huge" data-i18n="huge">Huge</option>
                        <option value="gargantuan" data-i18n="gargantuan">Gargantuan</option>
                        <option value="colossal" data-i18n="colossal">Colossal</option>
                    </select>
                    <span data-i18n="size">Size</span>
                </div>
                <div class="identity">
                    <input type="text" name="attr_gender" class="underlined small" spellcheck="false" title="@{gender}" />
                    <span data-i18n="gender">Gender</span>
                </div>
                <div class="identity">
                    <input type="text" name="attr_age" class="underlined small" spellcheck="false" title="@{age}" />
                    <span data-i18n="age">Age</span>
                </div>
                <div class="identity">
                    <input type="text" name="attr_height" class="underlined small" spellcheck="false" title="@{height}" />
                    <span data-i18n="height-char">Height</span>
                </div>
                <div class="identity">
                    <input type="text" name="attr_weight" class="underlined small" spellcheck="false" title="@{weight}" />
                    <span data-i18n="weight-char">Weight</span>
                </div>
                <div class="identity">
                    <input type="text" name="attr_hair" class="underlined small" spellcheck="false" title="@{hair}" />
                    <span data-i18n="hair">Hair</span>
                </div>
                <div class="identity">
                    <input type="text" name="attr_eyes" class="underlined small" spellcheck="false" title="@{eyes}" />
                    <span data-i18n="eyes">Eyes</span>
                </div>
            </div>
        </div> <!-- END identity -->
    </div> <!-- END top row -->
    <!-- PSEUDO TABS -->
    <input type="radio" name="attr_tabcurrent" class="tabmain" value="tabmain" /><span data-i18n="tab-main">Main</span>
    <input type="radio" name="attr_tabcurrent" class="tabadd" value="tabadd" /><span data-i18n="tab-additional">Additional</span>
    <input type="radio" name="attr_tabcurrent" class="tabspell" value="tabspell" /><span data-i18n="tab-spells">Spells</span>
    <input type="radio" name="attr_tabcurrent" class="tabconf" value="tabconf" checked="checked" /><span data-i18n="tab-configuration">Configuration</span>
    <div class="tabmain"> <!-- TAB MAIN -->
        <div class="colhalf"> <!-- tab1 col1 -->
            <div class="abilities"> <!-- abilities -->
                <div class="labline">
                    <span class="lab" data-i18n="ability-name" data-i18n-title="ability-name" title="Ability Name">Ability Name</span>
                    <span class="lab" data-i18n="score" data-i18n-title="ability-score" title="Score">Score</span>
                    <span class="lab" data-i18n="modifier" data-i18n-title="ability-modifier" title="Modifier">Modifier</span>
                    <span class="lab" data-i18n="temp" data-i18n-title="temp-adjustment" title="Temp Adjustment">Temp</span>
                </div>
                <div class="ability"> <!-- strength -->
                    <input class="options-flag" name="attr_options-flag-str" type="checkbox" data-i18n-title="show-hide-notes" title="Show/hide notes"><span>y</span>
                    <div class="myrow">
                        <div class="blacklabel">
                            <div class="blackbgrd">
                                <button class="myrol big" type="roll" name="StrRoll" data-i18n-title="strength-roll" title="Strength roll" value="@{whispertype} &{template:pc} {{name=^{strength}}} {{type=ability}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{strength_mod}[MOD]+@{rollmod_ability}[BONUS]]]}} {{shownotes=@{rollnotes_ability}}} {{notes=@{strength_notes}}}"><span data-i18n="str">str</span></button>
                                <span class="sml" data-i18n="strength" data-i18n-title="strength" title="Strength">Strength</span>
                            </div>
                        </div>
                        <div class="boxed">
                            <input type="number" name="attr_strength_base" value="10" class="nospin baseattr" title="@{strength}" />
                            <input type="hidden" name="attr_strength" value="10" />
                            <input type="hidden" name="attr_strength_bonus" value="0" class="attr-flag" />
                            <span name="attr_strength" class="pseudoattr finalattr"></span>
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_strength_half_mod" value="0" />
                            <input type="hidden" name="attr_strength_oneandahalf_mod" value="0" />
                            <span name="attr_strength_mod" class="pseudoattr" title="@{strength_mod}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" name="attr_strength_bonus" class="nospin boxed" value="0" title="@{strength_bonus}" />
                        </div>
                    </div>
                    <div class="options">
                        <div class="autoex">
                            <span name="attr_strength_notes"></span>
                            <textarea name="attr_strength_notes" spellcheck="false" data-i18n-placeholder="notes-ability-placeholder" placeholder="Notes: +2 racial, +1 magic item..."></textarea>
                        </div>
                    </div>
                </div> <!-- END strength -->
                <div class="ability"> <!-- dexterity -->
                    <input class="options-flag" name="attr_options-flag-dex" type="checkbox" data-i18n-title="show-hide-notes" title="Show/hide notes"><span>y</span>
                    <div class="myrow">
                        <div class="blacklabel">
                            <div class="blackbgrd">
                                <button class="myrol big" type="roll" name="DexRoll" data-i18n-title="dexterity-roll" title="Dexterity roll" value="@{whispertype} &{template:pc} {{name=^{dexterity}}} {{type=ability}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{dexterity_mod}[MOD]+@{rollmod_ability}[BONUS]]]}} {{shownotes=@{rollnotes_ability}}} {{notes=@{dexterity_notes}}}"><span data-i18n="dex">dex</span></button>
                                <span class="sml" data-i18n="dexterity" data-i18n-title="dexterity" title="Dexterity">Dexterity</span>
                            </div>
                        </div>
                        <div class="boxed">
                            <input type="number" name="attr_dexterity_base" value="10" class="nospin baseattr" title="@{dexterity}" />
                            <input type="hidden" name="attr_dexterity" value="10" />
                            <input type="hidden" name="attr_dexterity_bonus" value="0" class="attr-flag" />
                            <span name="attr_dexterity" class="pseudoattr finalattr"></span>
                        </div>
                        <div class="boxed greybg">
                            <span name="attr_dexterity_mod" class="pseudoattr" title="@{dexterity_mod}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" name="attr_dexterity_bonus" class="nospin boxed" value="0" title="@{dexterity_bonus}" />
                        </div>
                    </div>
                    <div class="options">
                        <div class="autoex">
                            <span name="attr_dexterity_notes"></span>
                            <textarea name="attr_dexterity_notes" spellcheck="false" data-i18n-placeholder="notes-ability-placeholder" placeholder="Notes: +2 racial, +1 magic item..."></textarea>
                        </div>
                    </div>
                </div> <!-- END dexterity -->
                <div class="ability"> <!-- constitution -->
                    <input class="options-flag" name="attr_options-flag-con" type="checkbox" data-i18n-title="show-hide-notes" title="Show/hide notes"><span>y</span>
                    <div class="myrow">
                        <div class="blacklabel">
                            <div class="blackbgrd">
                                <button class="myrol big" type="roll" name="ConRoll" data-i18n-title="constitution-roll" title="Constitution roll" value="@{whispertype} &{template:pc} {{name=^{constitution}}} {{type=ability}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{constitution_mod}[MOD]+@{rollmod_ability}[BONUS]]]}} {{shownotes=@{rollnotes_ability}}} {{notes=@{constitution_notes}}}"><span data-i18n="con">con</span></button>
                                <span class="sml" data-i18n="constitution" data-i18n-title="constitution" title="Constitution">Constitution</span>
                            </div>
                        </div>
                        <div class="boxed">
                            <input type="number" name="attr_constitution_base" value="10" class="nospin baseattr" title="@{constitution}" />
                            <input type="hidden" name="attr_constitution" value="10" />
                            <input type="hidden" name="attr_constitution_bonus" value="0" class="attr-flag" />
                            <span name="attr_constitution" class="pseudoattr finalattr"></span>
                        </div>
                        <div class="boxed greybg">
                            <span name="attr_constitution_mod" class="pseudoattr" title="@{constitution_mod}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" name="attr_constitution_bonus" class="nospin boxed" value="0" title="@{constitution_bonus}" />
                        </div>
                    </div>
                    <div class="options">
                        <div class="autoex">
                            <span name="attr_constitution_notes"></span>
                            <textarea name="attr_constitution_notes" spellcheck="false" data-i18n-placeholder="notes-ability-placeholder" placeholder="Notes: +2 racial, +1 magic item..."></textarea>
                        </div>
                    </div>
                </div> <!-- END constitution -->
                <div class="ability"> <!-- intelligence -->
                    <input class="options-flag" name="attr_options-flag-int" type="checkbox" data-i18n-title="show-hide-notes" title="Show/hide notes"><span>y</span>
                    <div class="myrow">
                        <div class="blacklabel">
                            <div class="blackbgrd">
                                <button class="myrol big" type="roll" name="IntRoll" data-i18n-title="intelligence-roll" title="Intelligence roll" value="@{whispertype} &{template:pc} {{name=^{intelligence}}} {{type=ability}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{intelligence_mod}[MOD]+@{rollmod_ability}[BONUS]]]}} {{shownotes=@{rollnotes_ability}}} {{notes=@{intelligence_notes}}}"><span data-i18n="int">int</span></button>
                                <span class="sml" data-i18n="intelligence" data-i18n-title="intelligence" title="Intelligence">Intelligence</span>
                            </div>
                        </div>
                        <div class="boxed">
                            <input type="number" name="attr_intelligence_base" value="10" class="nospin baseattr" title="@{intelligence}" />
                            <input type="hidden" name="attr_intelligence" value="10" />
                            <input type="hidden" name="attr_intelligence_bonus" value="0" class="attr-flag" />
                            <span name="attr_intelligence" class="pseudoattr finalattr"></span>
                        </div>
                        <div class="boxed greybg">
                            <span name="attr_intelligence_mod" class="pseudoattr" title="@{intelligence_mod}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" name="attr_intelligence_bonus" class="nospin boxed" value="0" title="@{intelligence_bonus}" />
                        </div>
                    </div>
                    <div class="options">
                        <div class="autoex">
                            <span name="attr_intelligence_notes"></span>
                            <textarea name="attr_intelligence_notes" spellcheck="false" data-i18n-placeholder="notes-ability-placeholder" placeholder="Notes: +2 racial, +1 magic item..."></textarea>
                        </div>
                    </div>
                </div> <!-- END intelligence -->
                <div class="ability"> <!-- wisdom -->
                    <input class="options-flag" name="attr_options-flag-wis" type="checkbox" data-i18n-title="show-hide-notes" title="Show/hide notes"><span>y</span>
                    <div class="myrow">
                        <div class="blacklabel">
                            <div class="blackbgrd">
                                <button class="myrol big" type="roll" name="WisRoll" data-i18n-title="wisdom-roll" title="Wisdom roll" value="@{whispertype} &{template:pc} {{name=^{wisdom}}} {{type=ability}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{wisdom_mod}[MOD]+@{rollmod_ability}[BONUS]]]}} {{shownotes=@{rollnotes_ability}}} {{notes=@{wisdom_notes}}}"><span data-i18n="wis">wis</span></button>
                                <span class="sml" data-i18n="wisdom" data-i18n-title="wisdom" title="Wisdom">Wisdom</span>
                            </div>
                        </div>
                        <div class="boxed">
                            <input type="number" name="attr_wisdom_base" value="10" class="nospin baseattr" title="@{wisdom}" />
                            <input type="hidden" name="attr_wisdom" value="10" />
                            <input type="hidden" name="attr_wisdom_bonus" value="0" class="attr-flag" />
                            <span name="attr_wisdom" class="pseudoattr finalattr"></span>
                        </div>
                        <div class="boxed greybg">
                            <span name="attr_wisdom_mod" class="pseudoattr" title="@{wisdom_mod}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" name="attr_wisdom_bonus" class="nospin boxed" value="0" title="@{wisdom_bonus}" />
                        </div>
                    </div>
                    <div class="options">
                        <div class="autoex">
                            <span name="attr_wisdom_notes"></span>
                            <textarea name="attr_wisdom_notes" spellcheck="false" data-i18n-placeholder="notes-ability-placeholder" placeholder="Notes: +2 racial, +1 magic item..."></textarea>
                        </div>
                    </div>
                </div> <!-- END wisdom -->
                <div class="ability"> <!-- charisma -->
                    <input class="options-flag" name="attr_options-flag-cha" type="checkbox" data-i18n-title="show-hide-notes" title="Show/hide notes"><span>y</span>
                    <div class="myrow">
                        <div class="blacklabel">
                            <div class="blackbgrd">
                                <button class="myrol big" type="roll" name="ChaRoll" data-i18n-title="charisma-roll" title="Charisma roll" value="@{whispertype} &{template:pc} {{name=^{charisma}}} {{type=ability}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{charisma_mod}[MOD]+@{rollmod_ability}[BONUS]]]}} {{shownotes=@{rollnotes_ability}}} {{notes=@{charisma_notes}}}"><span data-i18n="cha">cha</span></button>
                                <span class="sml" data-i18n="charisma" data-i18n-title="charisma" title="Charisma">Charisma</span>
                            </div>
                        </div>
                        <div class="boxed">
                            <input type="number" name="attr_charisma_base" value="10" class="nospin baseattr" title="@{charisma}" />
                            <input type="hidden" name="attr_charisma" value="10" />
                            <input type="hidden" name="attr_charisma_bonus" value="0" class="attr-flag" />
                            <span name="attr_charisma" class="pseudoattr finalattr"></span>
                        </div>
                        <div class="boxed greybg">
                            <span name="attr_charisma_mod" class="pseudoattr" title="@{charisma_mod}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" name="attr_charisma_bonus" class="nospin boxed" value="0" title="@{charisma_bonus}" />
                        </div>
                    </div>
                    <div class="options">
                        <div class="autoex">
                            <span name="attr_charisma_notes"></span>
                            <textarea name="attr_charisma_notes" spellcheck="false" data-i18n-placeholder="notes-ability-placeholder" placeholder="Notes: +2 racial, +1 magic item..."></textarea>
                        </div>
                    </div>
                </div> <!-- END charisma -->
            </div>  <!-- END abilities -->
            <div class="subcol hpinit">
                <div class="myrow center"> <!-- HP -->
                    <div class="blacklabel">
                        <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                        <div class="blackbgrd">
                            <button class="myrol big only" type="roll" name="HdRoll" data-i18n-title="hit-die-roll" title="Hit Die roll" value="@{whispertype} &{template:pc} {{name=^{hit-die}}} {{type=hp}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d@{hitdietype}+@{constitution_mod}[MOD]]]}}"><span data-i18n="hit-points">Hit Points</span></button>
                        </div>
                        <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                    </div>
                </div>
                <div class="myrow hpvalues center labline">
                    <span class="lab" data-i18n="curr" data-i18n-title="current" title="Current">curr</span>
                    <span class="lab" data-i18n="max" data-i18n-title="maximum" title="Maximum">max</span>
                    <span class="lab margindent" data-i18n="nonlethal" data-i18n-title="nonlethal-damage" title="Nonlethal Damage">nonlethal</span>
                </div>
                <div class="myrow hpvalues center">
                    <div class="boxed">
                        <input type="number" name="attr_hp" class="nospin boxed" value="0" title="@{hp}" />
                    </div>
                    <div class="boxed">
                        <input type="number" name="attr_hp_max" class="nospin boxed" value="0" title="@{hp_max}" />
                    </div>
                    <div class="boxed margindent">
                        <input type="number" name="attr_nonlethaldmg" class="nospin boxed" value="0" title="@{nonlethaldmg}" />
                    </div>
                </div>
                <div class="autoex hpvalues bordered spell">
                    <span name="attr_dr"></span>
                    <textarea name="attr_dr" spellcheck="false" data-i18n-placeholder="damage-reduction-immunities" placeholder="Damage Reduction, Immunities..." data-i18n-title="damage-reduction-immunities" title="Damage Reduction, Immunities..."></textarea>
                </div>
                 <!-- END HP -->
                <div class="spacer"></div>
                <div class="initiative"> <!-- INITIATIVE -->
                    <input class="options-flag" name="attr_options-flag-initiative" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow">
                        <div class="blacklabel">
                            <div class="blackbgrd">
                                <button class="myrol big" type="roll" name="InitRoll" data-i18n-title="initiative-roll" title="Initiative roll" value="@{whispertype} &{template:pc} {{name=^{initiative}}} {{type=initiative}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{initiative}[MOD]+@{rollmod_initiative}[BONUS] &{tracker}]]}} {{shownotes=@{rollnotes_initiative}}} {{notes=@{initiative_notes}}}"><span data-i18n="init">Init</span></button>
                                <span class="sml" data-i18n="initiative" data-i18n-title="initiative" title="Initiative">Initiative</span>
                            </div>
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_initiative_bonus" class="attr-flag" value="0" />
                            <span name="attr_initiative" class="pseudoattr" title="@{initiative}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" name="attr_initiative_bonus" class="nospin boxed" value="0" title="@{initiative_bonus}" />
                        </div>
                    </div>
                    <div class="myrow labline bottom">
                        <span class="lab" style="margin-left: 73px;" data-i18n="total" data-i18n-title="total" title="Total">Total</span>
                        <span class="lab" data-i18n="temp" data-i18n-title="temp-adjustment" title="Temp Adjustment">Temp</span>
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span class="spacer">=</span>
                            <div class="boxed greybg">
                                <span name="attr_dexterity_mod" class="pseudoattr" title="@{dexterity_mod}"></span>
                            </div>
                            <span class="spacer">+</span>
                            <div class="boxed">
                                <input type="number" name="attr_initiative_misc" class="nospin boxed" value="0" title="@{initiative_misc}" />
                            </div>
                        </div>
                        <div class="myrow labline bottom">
                            <span class="spacer"></span>
                            <span class="lab" data-i18n="dex" data-i18n-title="dexterity-modifier" title="Dexterity Modifier">dex</span>
                            <span class="spacer"></span>
                            <span class="lab" data-i18n="misc" data-i18n-title="misc-modifier" title="Misc Modifier">Misc</span>
                        </div>
                        <div class="autoex">
                            <span name="attr_initiative_notes"></span>
                            <textarea name="attr_initiative_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{initiative_notes}"></textarea>
                        </div>
                    </div>
                </div><!-- END initiative -->
            </div>
            <div class="spacer"></div>
            <div class="acvalues">
                <input class="options-flag" name="attr_options-flag-ac" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                <div class="myrow"> <!-- AC -->
                    <div class="blacklabel ac">
                        <div class="blackbgrd">
                            <span class="big only" data-i18n="ac-u" data-i18n-title="armor-class" title="Armor Class">AC</span>
                        </div>
                    </div>
                    <div class="boxed greybg">
                        <input type="hidden" name="attr_ac_bonus" class="attr-flag" value="0" />
                        <span name="attr_ac" class="pseudoattr" title="@{ac}"></span>
                    </div>
                    <div class="boxed">
                        <input type="number" name="attr_ac_bonus" class="nospin boxed" value="0" title="@{ac_bonus}" />
                    </div>
                    <div class="blacklabel touch">
                        <div class="blackbgrd">
                            <span class="big" data-i18n="touch">Touch</span>
                            <span class="sml" data-i18n="armor-class" data-i18n-title="armor-class" title="Armor Class">Armor Class</span>
                        </div>
                    </div>
                    <div class="boxed greybg">
                        <input type="hidden" name="attr_ac_bonus" class="attr-flag" value="0" />
                        <span name="attr_ac_touch" class="pseudoattr" title="@{ac_touch}"></span>
                    </div>
                    <div class="blacklabel flatfooted">
                        <div class="blackbgrd">
                            <span class="big" data-i18n="flat-footed">Flat-footed</span>
                            <span class="sml" data-i18n="armor-class" data-i18n-title="armor-class" title="Armor Class">Armor Class</span>
                        </div>
                    </div>
                    <div class="boxed greybg">
                        <input type="hidden" name="attr_ac_bonus" class="attr-flag" value="0" />
                        <span name="attr_ac_flatfooted" class="pseudoattr" title="@{ac_flatfooted}"></span>
                    </div>
                </div>
                <div class="myrow labline bottom">
                    <span class="lab" style="margin-left: 43px;" data-i18n="total" data-i18n-title="total" title="Total">Total</span>
                    <span class="lab" data-i18n="temp" data-i18n-title="temp-adjustment" title="Temp Adjustment">Temp</span>
                </div>
                <div class="options">
                    <div class="myrow">
                        <span class="spacer">=</span>
                        <span class="spacer">10</span>
                        <span class="spacer">+</span>
                        <div class="boxed greybg">
                            <span name="attr_ac_armor" class="pseudoattr" title="@{ac_armor}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed greybg">
                            <span name="attr_ac_shield" class="pseudoattr" title="@{ac_shield}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed greybg">
                            <span name="attr_ac_ability_mod" class="pseudoattr" title="@{ac_ability_mod}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed greybg">
                            <span name="attr_ac_size" class="pseudoattr" title="@{ac_size}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed">
                            <input type="number" name="attr_ac_natural" class="nospin boxed" value="0" title="@{ac_natural}" />
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed">
                            <input type="number" name="attr_ac_deflection" class="nospin boxed" value="0" title="@{ac_deflection}" />
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed">
                            <input type="number" name="attr_ac_misc" class="nospin boxed" value="0" title="@{ac_misc}" />
                        </div>
                    </div>
                    <div class="myrow labline bottom">
                        <span class="spacer"></span>
                        <span class="spacer"></span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="armor" data-i18n-title="armor-bonus" title="Armor Bonus">Armor</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="shield" data-i18n-title="shield-bonus" title="Shield Bonus">Shield</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="ability" data-i18n-title="ability-modifier" title="Ability Modifier">Ability</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="size" data-i18n-title="size-modifier" title="Size Modifier">Size</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="natural" data-i18n-title="natural-armor" title="Natural Armor">Natural</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="deflection" data-i18n-title="deflection-modifier" title="Deflection Modifier">Deflection</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="misc" data-i18n-title="misc-bonus" title="Misc Bonus">Misc</span>
                    </div>
                    <div class="autoex">
                        <span name="attr_ac_notes"></span>
                        <textarea name="attr_ac_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{ac_notes}"></textarea>
                    </div>
                </div>
            </div>  <!-- END AC -->
            <div class="spacer"></div>
            <div class="saves"> <!-- SAVING THROWS -->
                <input class="options-flag fortitude" name="attr_options-flag-fortitude" type="checkbox" value="1" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                <input class="options-flag reflex" name="attr_options-flag-reflex" type="checkbox" value="1" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                <input class="options-flag will" name="attr_options-flag-will" type="checkbox" value="1" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                <div class="myrow">
                    <div class="save fortitude">
                        <div class="blacklabel">
                            <div class="blackbgrd">
                                <button class="myrol big" type="roll" name="FortRoll" data-i18n-title="fortitude-roll" title="Fortitude roll" value="@{whispertype} &{template:pc} {{name=^{fortitude}}} {{type=save}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{fortitude}[MOD]+@{rollmod_save}[BONUS]]]}} {{shownotes=@{rollnotes_save}}} {{notes=@{fortitude_notes}}}"><span data-i18n="fort-u">FORT</span></button>
                                <span class="sml" data-i18n="fortitude" data-i18n-title="fortitude" title="Fortitude">Fortitude</span>
                            </div>
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_fortitude_bonus" class="attr-flag" value="0" />
                            <span name="attr_fortitude" class="pseudoattr" title="@{fortitude}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" name="attr_fortitude_bonus" class="nospin boxed" value="0" title="@{fortitude_bonus}" />
                        </div>
                    </div>
                    <div class="save reflex">
                        <div class="blacklabel">
                            <div class="blackbgrd">
                                <button class="myrol big" type="roll" name="RefRoll" data-i18n-title="reflex-roll" title="Reflex roll" value="@{whispertype} &{template:pc} {{name=^{reflex}}} {{type=save}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{reflex}[MOD]+@{rollmod_save}[BONUS]]]}} {{shownotes=@{rollnotes_save}}} {{notes=@{reflex_notes}}}"><span data-i18n="ref-u">REF</span></button>
                                <span class="sml" data-i18n="reflex" data-i18n-title="reflex" title="Reflex">Reflex</span>
                            </div>
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_reflex_bonus" class="attr-flag" value="0" />
                            <span name="attr_reflex" class="pseudoattr" title="@{reflex}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" name="attr_reflex_bonus" class="nospin boxed" value="0" title="@{reflex_bonus}" />
                        </div>
                    </div>
                    <div class="save will">
                        <div class="blacklabel">
                            <div class="blackbgrd">
                                <button class="myrol big" type="roll" name="WillRoll" data-i18n-title="will-roll" title="Will roll" value="@{whispertype} &{template:pc} {{name=^{will}}} {{type=save}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{will}[MOD]+@{rollmod_save}[BONUS]]]}} {{shownotes=@{rollnotes_save}}} {{notes=@{will_notes}}}"><span data-i18n="will-u">WILL</span></button>
                                <span class="sml" data-i18n="will" data-i18n-title="will" title="Will">Will</span>
                            </div>
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_will_bonus" class="attr-flag" value="0" />
                            <span name="attr_will" class="pseudoattr" title="@{will}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" name="attr_will_bonus" class="nospin boxed" value="0" title="@{will_bonus}" />
                        </div>
                    </div>
                </div>
                <div class="myrow labline bottom">
                    <span class="lab" style="margin-left: 61px;" data-i18n="total" data-i18n-title="total" title="Total">Total</span>
                    <span class="lab" data-i18n="temp" data-i18n-title="temp-adjustment" title="Temp Adjustment">Temp</span>
                    <span class="lab" style="margin-left: 47px;" data-i18n="total" data-i18n-title="total" title="Total">Total</span>
                    <span class="lab" data-i18n="temp" data-i18n-title="temp-adjustment" title="Temp Adjustment">Temp</span>
                    <span class="lab" style="margin-left: 58px;" data-i18n="total" data-i18n-title="total" title="Total">Total</span>
                    <span class="lab" data-i18n="temp" data-i18n-title="temp-adjustment" title="Temp Adjustment">Temp</span>
                </div>
                <div class="options-fortitude">
                    <div class="myrow">
                        <span class="spacer" data-i18n="fort-u" data-i18n-title="fortitude" title="Fortitude">FORT</span>
                        <span class="spacer">=</span>
                        <div class="boxed greybg">
                            <span name="attr_fortitude_base" class="pseudoattr" title="@{fortitude_base}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed greybg">
                            <span name="attr_fortitude_ability_mod" class="pseudoattr" title="@{fortitude_ability_mod}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed">
                            <input type="number" name="attr_fortitude_misc" class="nospin boxed" value="0" title="@{fortitude_misc}" />
                        </div>
                    </div>
                    <div class="myrow labline bottom">
                        <span class="spacer invisible" data-i18n="fort-u" data-i18n-title="fortitude" title="Fortitude">FORT</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="base" data-i18n-title="base-modifier" title="Base Modifier">Base</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="ability" data-i18n-title="ability-modifier" title="Ability Modifier">Ability</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="misc" data-i18n-title="misc-modifier" title="Misc Modifier">Misc</span>
                    </div>
                    <div class="autoex">
                        <span name="attr_fortitude_notes"></span>
                        <textarea name="attr_fortitude_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{fortitude_notes}"></textarea>
                    </div>
                </div>
                <div class="options-reflex">
                    <div class="myrow center">
                        <span class="spacer" data-i18n="ref-u" data-i18n-title="reflex" title="Reflex">REF</span>
                        <span class="spacer">=</span>
                        <div class="boxed greybg">
                            <span name="attr_reflex_base" class="pseudoattr" title="@{reflex_base}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed greybg">
                            <span name="attr_reflex_ability_mod" class="pseudoattr" title="@{reflex_ability_mod}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed">
                            <input type="number" name="attr_reflex_misc" class="nospin boxed" value="0" title="@{reflex_misc}" />
                        </div>
                    </div>
                    <div class="myrow center labline bottom">
                        <span class="spacer invisible" data-i18n="ref-u" data-i18n-title="reflex" title="Reflex">REF</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="base" data-i18n-title="base-modifier" title="Base Modifier">Base</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="ability" data-i18n-title="ability-modifier" title="Ability Modifier">Ability</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="misc" data-i18n-title="misc-modifier" title="Misc Modifier">Misc</span>
                    </div>
                    <div class="autoex">
                        <span name="attr_reflex_notes"></span>
                        <textarea name="attr_reflex_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{reflex_notes}"></textarea>
                    </div>
                </div>
                <div class="options-will">
                    <div class="myrow right">
                        <span class="spacer" data-i18n="will-u" data-i18n-title="will" title="Will">WILL</span>
                        <span class="spacer">=</span>
                        <div class="boxed greybg">
                            <span name="attr_will_base" class="pseudoattr" title="@{will_base}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed greybg">
                            <span name="attr_will_ability_mod" class="pseudoattr" title="@{will_ability_mod}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed">
                            <input type="number" name="attr_will_misc" class="nospin boxed" value="0" title="@{will_misc}" />
                        </div>
                    </div>
                    <div class="myrow right labline bottom">
                        <span class="spacer invisible" data-i18n="will-u" data-i18n-title="will" title="Will">WILL</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="base" data-i18n-title="base-modifier" title="Base Modifier">Base</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="ability" data-i18n-title="ability-modifier" title="Ability Modifier">Ability</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="misc" data-i18n-title="misc-modifier" title="Misc Modifier">Misc</span>
                    </div>
                    <div class="autoex">
                        <span name="attr_will_notes"></span>
                        <textarea name="attr_will_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{will_notes}"></textarea>
                    </div>
                </div>
            </div> <!-- END SAVING THROWS -->
            <div class="spacer"></div>
            <div class="babs"> <!-- BABS -->
                <input class="options-flag bab" name="attr_options-flag-bab" type="checkbox" value="1" data-i18n-title="show-hide-notes" title="Show/hide notes"><span>y</span>
                <input class="options-flag cmb" name="attr_options-flag-cmb" type="checkbox" value="1" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                <div class="myrow">
                    <div class="blacklabel bab">
                        <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                        <div class="blackbgrd">
                            <span class="big only" data-i18n="base-attack-bonus">Base Attack Bonus</span>
                        </div>
                    </div>
                    <div class="boxed greybg">
                        <span class="pseudoattr" name="attr_bab" title="@{bab}" />
                    </div>
                    <div class="blacklabel cmb">
                        <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                        <div class="blackbgrd">
                            <button class="myrol big only" type="roll" name="CmbRoll" value="@{whispertype} &{template:pc} {{name=^{combat-maneuver}}} {{type=attack}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20cs20+@{cmb_mod}[MOD]+@{rollmod_attack}[BONUS]]]}} {{shownotes=@{rollnotes_attack}}} {{notes=@{cmb_notes}}}"><span data-i18n="cmb-u" data-i18n-title="combat-maneuver-bonus" title="Combat Maneuver Bonus">CMB</span></button>
                        </div>
                    </div>
                    <div class="boxed greybg">
                        <input type="hidden" name="attr_cmb_bonus" class="attr-flag" value="0" />
                        <span name="attr_cmb_mod" class="pseudoattr" title="@{cmb_mod}"></span>
                    </div>
                    <div class="boxed">
                        <input type="number" name="attr_cmb_bonus" class="nospin boxed" value="0" title="@{cmb_bonus}" />
                    </div>
                </div>
                <div class="myrow labline bottom">
                    <span class="lab" style="margin-left: 340px;" data-i18n="total" data-i18n-title="total" title="Total">Total</span>
                    <span class="lab" data-i18n="temp" data-i18n-title="temp-adjustment" title="Temp Adjustment">Temp</span>
                </div>
                <div class="options-bab">
                    <div class="autoex">
                        <span name="attr_bab_notes"></span>
                        <textarea name="attr_bab_notes" spellcheck="false" data-i18n-placeholder="bab-notes" placeholder="BAB Notes" title="@{bab_notes}"></textarea>
                    </div>
                </div>
                <div class="options-cmb">
                    <div class="myrow right">
                        <span class="spacer" data-i18n="cmb-u" data-i18n-bonus="combat-maneuver-bonus" title="Combat Maneuver Bonus">CMB</span>
                        <span class="spacer">=</span>
                        <div class="boxed greybg">
                            <span name="attr_bab" class="pseudoattr" title="@{bab}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed greybg">
                            <span name="attr_cmb_ability_mod" class="pseudoattr" title="@{cmb_ability_mod}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed greybg">
                            <span name="attr_cmb_size" class="pseudoattr" title="@{cmb_size}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed">
                            <input type="number" name="attr_cmb_misc" class="nospin boxed" value="0" title="@{cmb_misc}" />
                        </div>
                    </div>
                    <div class="myrow right labline bottom">
                        <span class="spacer invisible" data-i18n="cmb-u" data-i18n-bonus="combat-maneuver-bonus" title="Combat Maneuver Bonus">CMB</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="bab-u" data-i18n-title="base-attack-bonus" title="Base Attack Bonus">BAB</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="ability" data-i18n-title="ability-modifier" title="Ability Modifier">Ability</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="size" data-i18n-title="size-modifier" title="Size Modifier">Size</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="misc" data-i18n-title="misc-modifier" title="Misc Modifier">Misc</span>
                    </div>
                    <div class="autoex">
                        <span name="attr_cmb_notes"></span>
                        <textarea name="attr_cmb_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{cmb_notes}"></textarea>
                    </div>
                </div>
            </div> <!-- END BABS -->
            <div class="attackmods"> <!-- ATTACK MODS (MELEE RANGED) -->
                <input class="options-flag melee" name="attr_options-flag-melee" type="checkbox" value="1" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                <input class="options-flag ranged" name="attr_options-flag-ranged" type="checkbox" value="1" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                <div class="myrow">
                    <div class="blacklabel melee">
                        <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                        <div class="blackbgrd">
                            <button class="myrol big only" type="roll" name="MeleeRoll" data-i18n-title="basic-melee-attack-roll" title="Basic Melee Attack Roll" value="@{whispertype} &{template:pc} {{name=^{melee}}} {{type=attack}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20cs20+@{melee_mod}[MOD]+@{rollmod_attack}[BONUS]]]}} {{shownotes=@{rollnotes_attack}}} {{notes=@{melee_notes}}}"><span data-i18n="melee">Melee</span></button>
                        </div>
                    </div>
                    <div class="boxed greybg">
                        <input type="hidden" name="attr_melee_bonus" class="attr-flag" value="0" />
                        <span name="attr_melee_mod" class="pseudoattr" title="@{melee_mod}"></span>
                    </div>
                    <div class="boxed">
                        <input type="number" name="attr_melee_bonus" class="nospin boxed" value="0" title="@{melee_bonus}" />
                    </div>
                    <div class="blacklabel ranged">
                        <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                        <div class="blackbgrd">
                            <button class="myrol big only" type="roll" name="RangedRoll" data-i18n-title="basic-ranged-attack-roll" title="Basic Ranged Attack Roll" value="@{whispertype} &{template:pc} {{name=^{ranged}}} {{type=attack}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20cs20+@{ranged_mod}[MOD]+@{rollmod_attack}[BONUS]]]}} {{shownotes=@{rollnotes_attack}}} {{notes=@{ranged_notes}}}"><span data-i18n="ranged">Ranged</span></button>
                        </div>
                    </div>
                    <div class="boxed greybg">
                        <input type="hidden" name="attr_ranged_bonus" class="attr-flag" value="0" />
                        <span name="attr_ranged_mod" class="pseudoattr" title="@{ranged_mod}"></span>
                    </div>
                    <div class="boxed">
                        <input type="number" name="attr_ranged_bonus" class="nospin boxed" value="0" title="@{ranged_bonus}" />
                    </div>
                </div>
                <div class="myrow labline bottom">
                    <span class="lab" style="margin-left: 125px;" data-i18n="total" data-i18n-title="total" title="Total">Total</span>
                    <span class="lab" data-i18n="temp" data-i18n-title="temp-adjustment" title="Temp Adjustment">Temp</span>
                    <span class="lab" style="margin-left: 128px;" data-i18n="total" data-i18n-title="total" title="Total">Total</span>
                    <span class="lab" data-i18n="temp" data-i18n-title="temp-adjustment" title="Temp Adjustment">Temp</span>
                </div>
                <div class="options-melee">
                    <div class="myrow">
                        <span class="spacer" data-i18n="melee">Melee</span>
                        <span class="spacer">=</span>
                        <div class="boxed greybg">
                            <span name="attr_bab" class="pseudoattr" title="@{bab}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed greybg">
                            <span name="attr_melee_ability_mod" class="pseudoattr" title="@{melee_ability_mod}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed greybg">
                            <span name="attr_bab_size" class="pseudoattr" title="@{bab_size}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed">
                            <input type="number" name="attr_melee_misc" class="nospin boxed" value="0" title="@{melee_misc}" />
                        </div>
                    </div>
                    <div class="myrow labline bottom">
                        <span class="spacer invisible" data-i18n="melee">Melee</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="bab-u" data-i18n-title="base-attack-bonus" title="Base Attack Bonus">BAB</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="ability" data-i18n-title="ability-modifier" title="Ability Modifier">Ability</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="size" data-i18n-title="size-modifier" title="Size Modifier">Size</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="misc" data-i18n-title="misc-modifier" title="Misc Modifier">Misc</span>
                    </div>
                    <div class="autoex">
                        <span name="attr_melee_notes"></span>
                        <textarea name="attr_melee_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{melee_notes}"></textarea>
                    </div>
                </div>
                <div class="options-ranged">
                    <div class="myrow right">
                        <span class="spacer" data-i18n="ranged">Ranged</span>
                        <span class="spacer">=</span>
                        <div class="boxed greybg">
                            <span name="attr_bab" class="pseudoattr" title="@{bab}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed greybg">
                            <span name="attr_ranged_ability_mod" class="pseudoattr" title="@{ranged_ability_mod}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed greybg">
                            <span name="attr_bab_size" class="pseudoattr" title="@{bab_size}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed">
                            <input type="number" name="attr_ranged_misc" class="nospin boxed" value="0" title="@{ranged_misc}" />
                        </div>
                    </div>
                    <div class="myrow right labline bottom">
                        <span class="spacer invisible" data-i18n="ranged">Ranged</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="bab-u" data-i18n-title="base-attack-bonus" title="Base Attack Bonus">BAB</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="ability" data-i18n-title="ability-modifier" title="Ability Modifier">Ability</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="size" data-i18n-title="size-modifier" title="Size Modifier">Size</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="misc" data-i18n-title="misc-modifier" title="Misc Modifier">Misc</span>
                    </div>
                    <div class="autoex">
                        <span name="attr_ranged_notes"></span>
                        <textarea name="attr_ranged_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{ranged_notes}"></textarea>
                    </div>
                </div>
            </div>  <!-- END ATTACK MODS (MELEE RANGED) -->
            <div class="defenses"> <!-- DEFENSES -->
                <input class="options-flag cmd" name="attr_options-flag-cmd" type="checkbox" value="1" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                <input class="options-flag sr" name="attr_options-flag-sr" type="checkbox" value="1" data-i18n-title="show-hide-notes" title="Show/hide notes"><span>y</span>
                <div class="myrow">
                    <div class="blacklabel cmd">
                        <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                        <div class="blackbgrd">
                            <span class="big only" data-i18n="cmd-u" data-i18n-bonus="combat-maneuver-defense" title="Combat Maneuver Defense">CMD</span>
                        </div>
                    </div>
                    <div class="boxed greybg">
                        <input type="hidden" name="attr_cmd_bonus" class="attr-flag" value="0" />
                        <span name="attr_cmd_mod" class="pseudoattr" title="@{cmd_mod}"></span>
                    </div>
                    <div class="boxed">
                        <input type="number" name="attr_cmd_bonus" class="nospin boxed" value="0" title="@{cmd_bonus}" />
                    </div>
                    <div class="blacklabel sr">
                        <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                        <div class="blackbgrd">
                            <span class="big only" data-i18n="spell-resistance">Spell Resistance</span>
                        </div>
                    </div>
                    <div class="boxed">
                        <input type="number" name="attr_sr" class="nospin boxed" value="0" title="@{sr}" />
                    </div>
                </div>
                <div class="myrow labline bottom">
                    <span class="lab" style="margin-left: 86px;" data-i18n="total" data-i18n-title="total" title="Total">Total</span>
                    <span class="lab" data-i18n="temp" data-i18n-title="temp-adjustment" title="Temp Adjustment">Temp</span>
                </div>
                <div class="options-cmd">
                    <div class="myrow">
                        <span class="spacer">=</span>
                        <div class="boxed greybg">
                            <span name="attr_bab" class="pseudoattr" title="@{bab}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed greybg">
                            <span name="attr_strength_mod" class="pseudoattr" title="@{strength_mod}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed greybg">
                            <span name="attr_dexterity_mod" class="pseudoattr" title="@{dexterity_mod}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed greybg">
                            <span name="attr_cmb_size" class="pseudoattr" title="@{cmb_size}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed greybg">
                            <span name="attr_ac_dodge" class="pseudoattr" title="@{ac_dodge}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed greybg">
                            <span name="attr_ac_deflection" class="pseudoattr" title="@{ac_deflection}"></span>
                        </div>
                        <span class="spacer">+</span>
                        <div class="boxed">
                            <input type="number" name="attr_cmd_misc" class="nospin boxed" value="0" title="@{cmd_misc}" />
                        </div>
                        <span class="spacer">+</span>
                        <span class="spacer">10</span>
                    </div>
                    <div class="myrow labline bottom">
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="bab-u" data-i18n-title="base-attack-bonus" title="Base Attack Bonus">BAB</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="str-u" data-i18n-title="strength-modifier" title="Strength Modifier">STR</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="dex-u" data-i18n-title="dexterity-modifier" title="Dexterity Modifier">DEX</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="size" data-i18n-title="size-modifier" title="Size Modifier">Size</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="dodge" data-i18n-title="dodge-bonus" title="Dodge bonus">Dodge</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="deflection" data-i18n-title="deflection-modifier" title="Deflection Modifier">Deflection</span>
                        <span class="spacer"></span>
                        <span class="lab" data-i18n="misc" data-i18n-title="misc-modifier" title="Misc Modifier">Misc</span>
                    </div>
                    <div class="autoex">
                        <span name="attr_cmd_notes"></span>
                        <textarea name="attr_cmd_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{cmd_notes}"></textarea>
                    </div>
                </div>
                <div class="options-sr">
                    <div class="autoex">
                        <span name="attr_sr_snotes"></span>
                        <textarea name="attr_sr_notes" spellcheck="false" data-i18n-placeholder="sr-notes" placeholder="SR Notes" title="@{sr_notes}"></textarea>
                    </div>
                </div>
            </div> <!-- END DEFENSES -->
            <div class="spacer"></div>
            <div class="attacks"> <!-- WEAPONS / ATTACKS -->
                <div class="myrow right">
                    <div class="blacklabel">
                        <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                        <div class="blackbgrd weapon-title">
                            <span class="big only" data-i18n="weapons-attacks">Weapons / Attacks</span>
                        </div>
                        <div class="blackbgrd atk-title">
                            <span class="med only" data-i18n="atk-u" >ATK</span>
                        </div>
                        <div class="blackbgrd damage-title">
                            <span class="med only" data-i18n="dmg-u" >DMG</span>
                        </div>
                        <div class="blackbgrd ammo-title">
                            <span class="med only" data-i18n="ammo" >Ammo</span>
                        </div>
                    </div>
                </div>
                <div class="bordered titled inbox">
                    <div class="myrow"> <!-- REPEATING ATTACK -->
                        <fieldset class="repeating_attacks">
                            <div class="attack right compendium-drop-target">
                                <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                                <div class="myrow right">
                                    <div class="weapon">
                                        <button class="myrol" style="width: 100%;" type="roll" name="AtkDmgRoll" data-i18n-title="full-attack-damage-roll" title="Full Attack & Damage roll" value="@{rollbase}">
                                            <span class="pseudoattr greybg underlined" style="width: 100%;" name="attr_atkname"></span>
                                        </button>
                                    </div>
                                    <div class="atk">
                                        <div class="greybg underlined center">
                                            <button class="myrol" type="roll" name="AtkRoll" data-i18n-title="attack-roll-1" title="Attack roll #1" value="@{rollbase_atk}">
                                                <span class="pseudoattr" name="attr_atkbonusdisplay"></span>
                                            </button>
                                            <button class="myrol" type="roll" name="AtkRoll1" data-i18n-title="attack-roll-2" title="Attack roll #2" value="@{rollbase_atk1}">
                                                <span class="pseudoattr" name="attr_atkbonusdisplay1"></span>
                                            </button>
                                            <button class="myrol" type="roll" name="AtkRoll2" data-i18n-title="attack-roll-3" title="Attack roll #3" value="@{rollbase_atk2}">
                                                <span class="pseudoattr" name="attr_atkbonusdisplay2"></span>
                                            </button>
                                            <button class="myrol" type="roll" name="AtkRoll4" data-i18n-title="attack-roll-4" title="Attack roll #4" value="@{rollbase_atk3}">
                                                <span class="pseudoattr" name="attr_atkbonusdisplay3"></span>
                                            </button>
                                        </div>
                                        <span class="pseudoattr vs block" name="attr_atkdisplay"></span>
                                    </div>
                                    <div class="damage">
                                        <div class="greybg underlined center">
                                            <button class="myrol" type="roll" name="DmgRoll" data-i18n-title="damage-roll" title="Damage roll" value="@{rollbase_dmg}">
                                                <span class="pseudoattr" name="attr_atkdmgdisplay"></span>
                                            </button>
                                        </div>
                                        <div class="greybg underlined center">
                                            <button class="myrol" type="roll" name="DmgRoll" data-i18n-title="damage-roll" title="Damage roll" value="@{rollbase_dmg}">
                                                <span class="pseudoattr" name="attr_atkdmgdisplay2"></span>
                                            </button>
                                        </div>
                                    </div>
                                    <input type="number" class="underlined ammo" name="attr_atkammo" value="0" title="@{repeating_attacks_$id_atkammo}" />
                                </div>
                                <div class="options right">
                                    <div class="myrow">
                                        <span class="lbl" data-i18n="name">Name</span>
                                        <input type="text" name="attr_atkname" accept="Name" class="underlined name" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_attacks_$id_atkname}" />
                                        <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                        <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="lbl" data-i18n="category:">Category:</span>
                                        <input type="text" name="attr_category" accept="Weapon Category" class="underlined dmgbase" spellcheck="false" title="@{repeating_attacks_$id_category}" />
                                        <span class="lbl margindent" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_type" accept="Weapon Type" class="underlined dmgbase" spellcheck="false" title="@{repeating_attacks_$id_type}" />
                                    </div>
                                    <div class="myrow grtopbrd">
                                        <input class="pseudocheck" type="checkbox" name="attr_atkflag" value="{{attack=1}}" title="@{repeating_attacks_$id_atkflag}" checked="checked" /><span></span>
                                        <span class="lbl atk" data-i18n="attack:">Attack:</span>
                                        <select class="underlined type" name="attr_atktype" title="@{repeating_attacks_$id_atktype}">
                                            <option value="melee" selected="selected" data-i18n="melee">Melee</option>
                                            <option value="ranged" data-i18n="ranged">Ranged</option>
                                            <option value="cmb" data-i18n="cmb-u">CMB</option>
                                            <option value="bab" data-i18n="bab-u">BAB</option>
                                            <option value="0">-</option>
                                        </select>
                                        <span class="lbl">+</span>
                                        <select class="underlined type" name="attr_atktype2" title="@{repeating_attacks_$id_atktype2}">
                                            <option value="0" selected="selected">-</option>
                                            <option value="strength" data-i18n="str-u">STR</option>
                                            <option value="dexterity" data-i18n="dex-u">DEX</option>
                                            <option value="constitution" data-i18n="con-u">CON</option>
                                            <option value="intelligence" data-i18n="int-u">INT</option>
                                            <option value="wisdom" data-i18n="wis-u">WIS</option>
                                            <option value="charisma" data-i18n="cha-u">CHA</option>
                                        </select>
                                        <span class="lbl">+</span>
                                        <input type="text" class="underlined dmgbase" name="attr_atkmod" value="0" spellcheck="false" title="@{repeating_attacks_$id_atkmod}" />
                                        <span class="lbl" data-i18n="vs">vs</span>
                                        <select class="underlined vs" name="attr_atkvs" title="@{atkvs}">
                                            <option value="ac" selected="selected" data-i18n="ac-u">AC</option>
                                            <option value="touch" data-i18n="touch">Touch</option>
                                            <option value="flatfooted" data-i18n="flat-footed">Flat-footed</option>
                                            <option value="fftouch" data-i18n="ff-touch">FF Touch</option>
                                            <option value="cmd" data-i18n="cmd-u">CMD</option>
                                            <option value="cmb" data-i18n="cmb-opposed">CMB (opposed)</option>
                                            <option value="fortitude" data-i18n="fortitude">Fortitude</option>
                                            <option value="reflex" data-i18n="reflex">Reflex</option>
                                            <option value="will" data-i18n="will">Will</option>
                                            <option value="other" data-i18n="other">Other</option>
                                        </select>
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                                        <input type="hidden" name="attr_compendium_critical_range" accept="Critical Range" value="" />
                                        <input type="number" class="nospin underlined" name="attr_atkcritrange" value="20" title="@{repeating_attacks_$id_atkcritrange}" />
                                        <span class="lbl margindent" data-i18n="range:">Range:</span>
                                        <input type="text" name="attr_atkrange" accept="Range" class="underlined medium" spellcheck="false" data-i18n-placeholder="range-place" placeholder="10 feet" title="@{repeating_attacks_$id_atkrange}" />
                                    </div>
                                    <div class="myrow grtopbrd">
                                        <input class="pseudocheck" type="checkbox" name="attr_dmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{dmgflag}" checked="checked" /><span></span>
                                        <span class="lbl atk" data-i18n="damage:">Damage:</span>
                                        <input type="hidden" name="attr_compendium_dmg_medium" accept="Damage (Medium)" value="" />
                                        <input type="hidden" name="attr_compendium_dmg_small" accept="Damage (Small)" value="" />
                                        <input type="text" name="attr_dmgbase" class="underlined dmgbase" spellcheck="false" placeholder="1d6" title="@{repeating_attacks_$id_dmgbase}" />
                                        <span class="lbl">+</span>
                                        <select class="underlined dmg" name="attr_dmgattr" title="@{repeating_attacks_$id_dmgattr}">
                                            <option value="strength" selected="selected" data-i18n="str-u">STR</option>
                                            <option value="strength_oneandahalf" data-i18n="str-two-handed">STR (Two-Handed)</option>
                                            <option value="strength_half" data-i18n="str-off-hand">STR (Off-Hand)</option>
                                            <option value="dexterity" data-i18n="dex-u">DEX</option>
                                            <option value="constitution" data-i18n="con-u">CON</option>
                                            <option value="intelligence" data-i18n="int-u">INT</option>
                                            <option value="wisdom" data-i18n="wis-u">WIS</option>
                                            <option value="charisma" data-i18n="cha-u">CHA</option>
                                            <option value="0">-</option>
                                        </select>
                                        <span class="lbl">+</span>
                                        <input type="text" name="attr_dmgmod" class="underlined dmgbase" spellcheck="false" placeholder="0" title="@{repeating_attacks_$id_dmgmod}" />
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="lbl" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_dmgtype" accept="Damage Type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="slashing" placeholder="Slashing" title="@{repeating_attacks_$id_dmgtype}" />
                                        <span class="lbl margindent" data-i18n="critical-multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Critical Multiplier:</span>
                                        <input type="hidden" name="attr_compendium_critical_damage" accept="Critical Damage" value="" />
                                        <input type="number" class="nospin underlined" name="attr_dmgcritmulti" value="2" title="@{repeating_attacks_$id_dmgcritmulti}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_dmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_attacks_$id_dmg2flag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                                        <input type="text" name="attr_dmg2base" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_attacks_$id_dmg2base}" />
                                        <span class="lbl">+</span>
                                        <select class="underlined dmg" name="attr_dmg2attr" title="@{repeating_attacks_$id_dmg2attr}">
                                            <option value="strength" data-i18n="str-u">STR</option>
                                            <option value="strength_oneandahalf" data-i18n="str-two-handed">STR (Two-Handed)</option>
                                            <option value="strength_half" data-i18n="str-off-hand">STR (Off-Hand)</option>
                                            <option value="dexterity" data-i18n="dex-u">DEX</option>
                                            <option value="constitution" data-i18n="con-u">CON</option>
                                            <option value="intelligence" data-i18n="int-u">INT</option>
                                            <option value="wisdom" data-i18n="wis-u">WIS</option>
                                            <option value="charisma" data-i18n="cha-u">CHA</option>
                                            <option value="0" selected="selected">-</option>
                                        </select>
                                        <span class="lbl">+</span>
                                        <input type="text" name="attr_dmg2mod" class="underlined dmgbase" spellcheck="false" placeholder="0" title="@{repeating_attacks_$id_dmg2mod}" />
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="lbl" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_dmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_attacks_$id_dmg2type}" />
                                        <span class="lbl margindent" data-i18n="critical-multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Critical Multiplier:</span>
                                        <input type="number" class="nospin underlined" name="attr_dmg2critmulti" value="1" title="@{repeating_attacks_$id_dmg2critmulti}" />
                                    </div>
                                    <div class="myrow grtopbrd">
                                        <input class="pseudocheck" type="checkbox" name="attr_descflag" value="{{descflag=[[1]]}}" title="@{repeating_attacks_$id_descflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="description:">Description:</span>
                                        <div class="autoex">
                                            <span name="attr_atkdesc"></span>
                                            <textarea name="attr_atkdesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_attacks_$id_atkdesc}"></textarea>
                                        </div>
                                    </div>
                                    <span class="lbl" data-i18n="notes:">Notes:</span>
                                    <div class="autoex">
                                        <span name="attr_notes"></span>
                                        <textarea name="attr_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{repeating_attacks_$id_notes}"></textarea>
                                    </div>
                                </div>
                                <input type="hidden" name="attr_rollbase">
                                <input type="hidden" name="attr_rollbase_atk">
                                <input type="hidden" name="attr_rollbase_atk1">
                                <input type="hidden" name="attr_rollbase_atk2">
                                <input type="hidden" name="attr_rollbase_atk3">
                                <input type="hidden" name="attr_rollbase_dmg">
                            </div>
                        </fieldset>
                    </div> <!-- END REPEATING ATTACK -->
                </div>
            </div> <!-- END ATTACKS -->
            <div class="spacer"></div>
            <div class="speeds"> <!-- SPEEDS -->
                <input class="options-flag" name="attr_options-flag-speed" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                <div class="myrow"> <!-- LAND SPEED -->
                    <div class="blacklabel land">
                        <div class="blackbgrd">
                            <span class="big only" data-i18n="speed">Speed</span>
                        </div>
                    </div>
                    <div class="boxed greybg">
                        <input type="hidden" name="attr_speed_bonus" class="attr-flag" value="0" />
                        <span name="attr_speed" class="pseudoattr" title="@{speed}"></span>
                    </div>
                    <div class="boxed">
                        <input type="number" name="attr_speed_bonus" class="nospin boxed" value="0" title="@{speed_bonus}" />
                    </div>
                    <div class="boxed greybg margindent">
                        <input type="hidden" name="attr_speed_bonus" class="attr-flag" value="0" />
                        <span name="attr_speed_run" class="pseudoattr" title="@{speed_run}"></span>
                    </div>
                    <div class="boxed greybg">
                        <input type="hidden" name="attr_speed_bonus" class="attr-flag" value="0" />
                        <span name="attr_speed_swim" class="pseudoattr" title="@{speed_swim}"></span>
                    </div>
                    <div class="boxed greybg">
                        <input type="hidden" name="attr_speed_bonus" class="attr-flag" value="0" />
                        <span name="attr_speed_climb" class="pseudoattr" title="@{speed_climb}"></span>
                    </div>
                    <div class="boxed margindent">
                        <input type="number" name="attr_speed_fly" class="nospin boxed" value="0" title="@{speed_fly}" />
                    </div>
                    <div class="boxed">
                        <input type="number" name="attr_speed_other" class="nospin boxed" value="0" title="@{speed_other}" />
                    </div>
                </div> <!-- END LAND SPEED -->
                <div class="myrow labline bottom">
                    <span class="lab" style="margin-left: 73px;" data-i18n="land" data-i18n-title="land" title="Land">Land</span>
                    <span class="lab" data-i18n="temp" data-i18n-title="temp-adjustment" title="Temp Adjustment">Temp</span>
                    <span class="lab margindent" data-i18n="run" data-i18n-title="run" title="Run">Run</span>
                    <span class="lab" data-i18n="swim" data-i18n-title="swim" title="Swim">Swim</span>
                    <span class="lab" data-i18n="climb" data-i18n-title="climb" title="Climb">Climb</span>
                    <span class="lab margindent" data-i18n="fly" data-i18n-title="fly" title="Fly">Fly</span>
                    <span class="lab" data-i18n="other" data-i18n-title="other" title="Other">Other</span>
                </div>
                <div class="options">
                    <div class="myrow">
                        <div class="boxed greybg">
                            <span name="attr_speed_base" class="pseudoattr" title="@{speed_base}"></span>
                        </div>
                        <span class="lab">= Min(</span>
                        <div class="boxed greybg">
                            <span name="attr_speed_race" class="pseudoattr" title="@{speed_race}"></span>
                        </div>
                        <div class="boxed greybg">
                            <span name="attr_speed_armor" class="pseudoattr" title="@{speed_armor}"></span>
                        </div>
                        <div class="boxed greybg">
                            <span name="attr_speed_encumbrance" class="pseudoattr" title="@{speed_encumbrance}"></span>
                        </div>
                        <span class="lbl">)</span>
                        <div class="boxed greybg margindent">
                            <span class="pseudoattr" title="@{speed_run_factor}">x<span name="attr_speed_run_factor"></span></span>
                        </div>
                        <span class="lab">= Min(</span>
                        <div class="boxed greybg">
                            <span class="pseudoattr" title="@{armor_run_factor}">x<span name="attr_armor_run_factor"></span></span>
                        </div>
                        <div class="boxed greybg">
                            <span class="pseudoattr" title="@{encumbrance_run_factor}">x<span name="attr_encumbrance_run_factor"></span></span>
                        </div>
                        <span class="lbl">)</span>
                    </div>
                    <div class="myrow labline bottom">
                        <span class="lab" data-i18n="speed" data-i18n-title="speed" title="Speed">Speed</span>
                        <span class="lab">&nbsp;</span>
                        <span class="lab" data-i18n="race" data-i18n-title="race" title="Race">Race</span>
                        <span class="lab" data-i18n="armor" data-i18n-title="armor" title="Armor">Armor</span>
                        <span class="lab" data-i18n="load" data-i18n-title="load" title="Load">Load</span>
                        <span class="lbl">&nbsp;</span>
                        <span class="lab margindent" data-i18n="run" data-i18n-title="run" title="Run">Run</span>
                        <span class="lab">&nbsp;</span>
                        <span class="lab" data-i18n="armor" data-i18n-title="armor" title="Armor">Armor</span>
                        <span class="lab" data-i18n="load" data-i18n-title="load" title="Load">Load</span>
                    </div>
                    <div class="autoex">
                        <span name="attr_speed_notes"></span>
                        <textarea name="attr_speed_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{speed_notes}"></textarea>
                    </div>
                </div>
            </div> <!-- END SPEEDS -->
            <div class="spacer"></div>
            <div class="myrow center languages"> <!-- SENSES -->
                <div class="blacklabel">
                    <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                    <div class="blackbgrd">
                        <span class="big only" data-i18n="senses">Senses</span>
                    </div>
                    <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                </div>
                <div class="bordered titled inbox">
                    <div class="autoex">
                        <span name="attr_senses"></span>
                        <textarea name="attr_senses" spellcheck="false" data-i18n-placeholder="senses" placeholder="Senses" title="@{senses}"></textarea>
                    </div>
                </div>
            </div> <!-- END LANGUAGES -->
            <div class="spacer"></div>
            <div class="myrow center languages"> <!-- LANGUAGES -->
                <div class="blacklabel">
                    <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                    <div class="blackbgrd">
                        <span class="big only" data-i18n="languages">Languages</span>
                    </div>
                    <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                </div>
                <div class="bordered titled inbox">
                    <div class="autoex">
                        <span name="attr_languages"></span>
                        <textarea name="attr_languages" spellcheck="false" data-i18n-placeholder="languages" placeholder="Languages" title="@{languages}"></textarea>
                    </div>
                </div>
            </div> <!-- END LANGUAGES -->
        </div>  <!-- END tab1 col1 -->
        <div class="colhalf"> <!-- tab1 col2 -->
            <div class="myrow center skills"> <!-- SKILLS -->
                <div class="blacklabel">
                    <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                    <div class="blackbgrd">
                        <span class="big only" data-i18n="skills">Skills</span>
                    </div>
                    <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                </div>
                <div class="myrow labline right top">
                    <span class="lab class" data-i18n="c.-u" data-i18n-title="class-skill" title="Class Skill">C.</span>
                    <span class="lab name" data-i18n="skill-names" data-i18n-title="skill-names" title="Skill names">Skill names</span>
                    <span class="lab total" data-i18n="total" data-i18n-title="total-bonus" title="Total Bonus">Total</span>
                    <span class="lab ability" data-i18n="ability" data-i18n-title="ability-modifier" title="Ability Modifier">Ability</span>
                    <span class="lab ranks" data-i18n="ranks" data-i18n-title="ranks" title="Ranks">Ranks</span>
                    <span class="lab misc" data-i18n="misc" data-i18n-title="misc-modifier" title="Misc Modifier">Misc</span>
                    <span class="lab temp" data-i18n="temp" data-i18n-title="temp-adjustment" title="Temp Adjustment">Temp</span>
                </div>
                <div class="myrow skill"> <!-- ACROBATICS -->
                    <input class="options-flag" name="attr_options-flag-acrobatics" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_acrobatics_classkill" value="1" title="@{acrobatics_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="Acrobatics" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{acrobatics}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{acrobatics}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{acrobatics_notes}}}">
                            <span class="lbl name" data-i18n="acrobatics">Acrobatics</span>
                        </button>
                        <input type="hidden" name="attr_acrobatics_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_acrobatics" title="@{acrobatics}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_acrobatics_ability_mod" title="@{acrobatics_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_acrobatics_ranks" class="nospin number underlined" value="0" title="@{acrobatics_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_acrobatics_misc" class="nospin number underlined" value="0" title="@{acrobatics_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_acrobatics_bonus" class="nospin number underlined" value="0" title="@{acrobatics_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_acrobatics_ability" title="@{acrobatics_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity" selected="selected">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_acrobatics_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_acrobatics_armor_penalty" value="@{skill_check_penalty}" title="@{acrobatics_armor_penalty}" checked="checked" /><span></span><span data-i18n="apply-armor-encumbrance-penalty">Apply armor/encumbrance penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_acrobatics_notes"></span>
                            <textarea name="attr_acrobatics_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{acrobatics_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END ACROBATICS -->
                <div class="myrow skill"> <!-- APPRAISE -->
                    <input class="options-flag" name="attr_options-flag-appraise" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_appraise_classkill" value="1" title="@{appraise_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="Appraise" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{appraise}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{appraise}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{appraise_notes}}}">
                            <span class="lbl name" data-i18n="appraise">Appraise</span>
                        </button>
                        <input type="hidden" name="attr_appraise_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_appraise" title="@{appraise}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_appraise_ability_mod" title="@{appraise_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_appraise_ranks" class="nospin number underlined" value="0" title="@{appraise_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_appraise_misc" class="nospin number underlined" value="0" title="@{appraise_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_appraise_bonus" class="nospin number underlined" value="0" title="@{appraise_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_appraise_ability" title="@{appraise_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence" selected="selected">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_appraise_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_appraise_armor_penalty" value="@{skill_check_penalty}" title="@{appraise_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_appraise_notes"></span>
                            <textarea name="attr_appraise_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{appraise_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END APPRAISE -->
                <div class="myrow skill"> <!-- bluff -->
                    <input class="options-flag" name="attr_options-flag-bluff" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_bluff_classkill" value="1" title="@{bluff_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="bluff" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{bluff}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{bluff}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{bluff_notes}}}">
                            <span class="lbl name" data-i18n="bluff">Bluff</span>
                        </button>
                        <input type="hidden" name="attr_bluff_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_bluff" title="@{bluff}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_bluff_ability_mod" title="@{bluff_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_bluff_ranks" class="nospin number underlined" value="0" title="@{bluff_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_bluff_misc" class="nospin number underlined" value="0" title="@{bluff_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_bluff_bonus" class="nospin number underlined" value="0" title="@{bluff_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_bluff_ability" title="@{bluff_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma" selected="selected">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_bluff_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_bluff_armor_penalty" value="@{skill_check_penalty}" title="@{bluff_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_bluff_notes"></span>
                            <textarea name="attr_bluff_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{bluff_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END bluff -->
                <div class="myrow skill"> <!-- climb -->
                    <input class="options-flag" name="attr_options-flag-climb" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_climb_classkill" value="1" title="@{climb_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="climb" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{climb}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{climb}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{climb_notes}}}">
                            <span class="lbl name" data-i18n="climb">Climb</span>
                        </button>
                        <input type="hidden" name="attr_climb_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_climb" title="@{climb}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_climb_ability_mod" title="@{climb_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_climb_ranks" class="nospin number underlined" value="0" title="@{climb_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_climb_misc" class="nospin number underlined" value="0" title="@{climb_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_climb_bonus" class="nospin number underlined" value="0" title="@{climb_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_climb_ability" title="@{climb_ability}">
                                <option value="strength" data-i18n="strength" selected="selected">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_climb_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_climb_armor_penalty" value="@{skill_check_penalty}" title="@{climb_armor_penalty}" checked="checked" /><span></span><span data-i18n="apply-armor-encumbrance-penalty">Apply armor/encumbrance penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_climb_notes"></span>
                            <textarea name="attr_climb_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{climb_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END climb -->
                <div class="myrow skill"> <!-- craft -->
                    <input class="options-flag" name="attr_options-flag-craft" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_craft_classkill" value="1" title="@{craft_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="craft" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{craft} (@{craft_name})}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{craft}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{craft_notes}}}">
                            <span class="lbl craft" data-i18n="craft">Craft</span>
                        </button>
                        <input type="text" name="attr_craft_name" class="craft underlined" data-i18n-placeholder="group" placeholder="Group" title="@{craft_name}" />
                        <input type="hidden" name="attr_craft_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_craft" title="@{craft}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_craft_ability_mod" title="@{craft_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_craft_ranks" class="nospin number underlined" value="0" title="@{craft_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_craft_misc" class="nospin number underlined" value="0" title="@{craft_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_craft_bonus" class="nospin number underlined" value="0" title="@{craft_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_craft_ability" title="@{craft_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence" selected="selected">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_craft_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_craft_armor_penalty" value="@{skill_check_penalty}" title="@{craft_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_craft_notes"></span>
                            <textarea name="attr_craft_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{craft_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END craft -->
                <div>
                    <fieldset class="repeating_skillcraft"> <!-- repeating craft -->
                        <div class="myrow skill">
                            <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                            <div class="myrow right">
                                <input class="pseudocheck" type="checkbox" name="attr_classkill" value="1" title="@{repeating_skillcraft_$id_classkill}" /><span></span>
                                <button class="myrol" type="roll" name="craft" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{craft} (@{name})}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{skill}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{notes}}}">
                                    <span class="lbl craft" data-i18n="craft">Craft</span>
                                </button>
                                <input type="text" name="attr_name" class="craft underlined" data-i18n-placeholder="group" placeholder="Group" title="@{repeating_skillcraft_$id_name}" />
                                <input type="hidden" name="attr_penalty_flag" class="attr-flag" value="0" />
                                <span class="pseudoattr greybg underlined number" name="attr_skill" title="@{repeating_skillcraft_$id_skill}"></span>
                                <input type="hidden" name="attr_skill" />
                                <span class="lbl">=</span>
                                <span class="pseudoattr greybg underlined number" name="attr_ability_mod" title="@{repeating_skillcraft_$id_ability_mod}"></span>
                                <span class="lbl">+</span>
                                <input type="number" name="attr_ranks" class="nospin number underlined" value="0" title="@{repeating_skillcraft_$id_ranks}" />
                                <span class="lbl">+</span>
                                <input type="number" name="attr_misc" class="nospin number underlined" value="0" title="@{repeating_skillcraft_$id_misc}" />
                                <span class="lbl">+</span>
                                <input type="number" name="attr_bonus" class="nospin number underlined" value="0" title="@{repeating_skillcraft_$id_bonus}" />
                            </div>
                            <div class="options">
                                <div class="myrow">
                                    <span data-i18n="ability">Ability</span>:
                                    <select name="attr_ability" title="@{repeating_skillcraft_$id_ability}">
                                        <option value="strength" data-i18n="strength">Strength</option>
                                        <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                        <option value="constitution" data-i18n="constitution">Constitution</option>
                                        <option value="intelligence" data-i18n="intelligence" selected="selected">Intelligence</option>
                                        <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                        <option value="charisma" data-i18n="charisma">Charisma</option>
                                    </select>
                                    <input type="hidden" class="skillability" name="attr_ability" />
                                    <div class="skillability">
                                        <span class="spacer"></span>
                                        <input class="pseudocheck" type="checkbox" name="attr_armor_penalty" value="@{skill_check_penalty}" title="@{repeating_skillcraft_$id_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                                    </div>
                                </div>
                                <div class="autoex">
                                    <span name="attr_notes"></span>
                                    <textarea name="attr_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{repeating_skillcraft_$id_notes}"></textarea>
                                </div>
                            </div>
                        </div>
                    </fieldset>  <!-- END repeating craft -->
                </div>
                <div class="myrow skill"> <!-- diplomacy -->
                    <input class="options-flag" name="attr_options-flag-diplomacy" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_diplomacy_classkill" value="1" title="@{diplomacy_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="diplomacy" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{diplomacy}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{diplomacy}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{diplomacy_notes}}}">
                            <span class="lbl name" data-i18n="diplomacy">Diplomacy</span>
                        </button>
                        <input type="hidden" name="attr_diplomacy_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_diplomacy" title="@{diplomacy}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_diplomacy_ability_mod" title="@{diplomacy_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_diplomacy_ranks" class="nospin number underlined" value="0" title="@{diplomacy_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_diplomacy_misc" class="nospin number underlined" value="0" title="@{diplomacy_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_diplomacy_bonus" class="nospin number underlined" value="0" title="@{diplomacy_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_diplomacy_ability" title="@{diplomacy_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma" selected="selected">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_diplomacy_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_diplomacy_armor_penalty" value="@{skill_check_penalty}" title="@{diplomacy_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_diplomacy_notes"></span>
                            <textarea name="attr_diplomacy_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{diplomacy_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END diplomacy -->
                <div class="myrow skill"> <!-- disable_device -->
                    <input class="options-flag" name="attr_options-flag-disable_device" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_disable_device_classkill" value="1" title="@{disable_device_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="disable_device" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{disable_device}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{disable_device}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{disable_device_notes}}}">
                            <span class="lbl name" data-i18n="disable_device">Disable Device*</span>
                        </button>
                        <input type="hidden" name="attr_disable_device_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_disable_device" title="@{disable_device}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_disable_device_ability_mod" title="@{disable_device_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_disable_device_ranks" class="nospin number underlined" value="0" title="@{disable_device_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_disable_device_misc" class="nospin number underlined" value="0" title="@{disable_device_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_disable_device_bonus" class="nospin number underlined" value="0" title="@{disable_device_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_disable_device_ability" title="@{disable_device_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity" selected="selected">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_disable_device_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_disable_device_armor_penalty" value="@{skill_check_penalty}" title="@{disable_device_armor_penalty}" checked="checked" /><span></span><span data-i18n="apply-armor-encumbrance-penalty">Apply armor/encumbrance penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_disable_device_notes"></span>
                            <textarea name="attr_disable_device_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{disable_device_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END disable_device -->
                <div class="myrow skill"> <!-- disguise -->
                    <input class="options-flag" name="attr_options-flag-disguise" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_disguise_classkill" value="1" title="@{disguise_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="disguise" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{disguise}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{disguise}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{disguise_notes}}}">
                            <span class="lbl name" data-i18n="disguise">Disguise</span>
                        </button>
                        <input type="hidden" name="attr_disguise_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_disguise" title="@{disguise}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_disguise_ability_mod" title="@{disguise_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_disguise_ranks" class="nospin number underlined" value="0" title="@{disguise_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_disguise_misc" class="nospin number underlined" value="0" title="@{disguise_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_disguise_bonus" class="nospin number underlined" value="0" title="@{disguise_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_disguise_ability" title="@{disguise_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma" selected="selected">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_disguise_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_disguise_armor_penalty" value="@{skill_check_penalty}" title="@{disguise_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_disguise_notes"></span>
                            <textarea name="attr_disguise_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{disguise_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END disguise -->
                <div class="myrow skill"> <!-- escape_artist -->
                    <input class="options-flag" name="attr_options-flag-escape_artist" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_escape_artist_classkill" value="1" title="@{escape_artist_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="escape_artist" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{escape_artist}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{escape_artist}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{escape_artist_notes}}}">
                            <span class="lbl name" data-i18n="escape_artist">Escape Artist</span>
                        </button>
                        <input type="hidden" name="attr_escape_artist_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_escape_artist" title="@{escape_artist}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_escape_artist_ability_mod" title="@{escape_artist_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_escape_artist_ranks" class="nospin number underlined" value="0" title="@{escape_artist_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_escape_artist_misc" class="nospin number underlined" value="0" title="@{escape_artist_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_escape_artist_bonus" class="nospin number underlined" value="0" title="@{escape_artist_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_escape_artist_ability" title="@{escape_artist_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity" selected="selected">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_escape_artist_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_escape_artist_armor_penalty" value="@{skill_check_penalty}" title="@{escape_artist_armor_penalty}" checked="checked" /><span></span><span data-i18n="apply-armor-encumbrance-penalty">Apply armor/encumbrance penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_escape_artist_notes"></span>
                            <textarea name="attr_escape_artist_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{escape_artist_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END escape_artist -->
                <div class="myrow skill"> <!-- fly -->
                    <input class="options-flag" name="attr_options-flag-fly" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_fly_classkill" value="1" title="@{fly_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="fly" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{fly}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{fly}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{fly_notes}}}">
                            <span class="lbl name" data-i18n="fly">Fly</span>
                        </button>
                        <input type="hidden" name="attr_fly_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_fly" title="@{fly}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_fly_ability_mod" title="@{fly_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_fly_ranks" class="nospin number underlined" value="0" title="@{fly_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_fly_misc" class="nospin number underlined" value="0" title="@{fly_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_fly_bonus" class="nospin number underlined" value="0" title="@{fly_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_fly_ability" title="@{fly_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity" selected="selected">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_fly_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_fly_armor_penalty" value="@{skill_check_penalty}" title="@{fly_armor_penalty}" checked="checked" /><span></span><span data-i18n="apply-armor-encumbrance-penalty">Apply armor/encumbrance penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_fly_notes"></span>
                            <textarea name="attr_fly_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{fly_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END fly -->
                <div class="myrow skill"> <!-- handle_animal -->
                    <input class="options-flag" name="attr_options-flag-handle_animal" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_handle_animal_classkill" value="1" title="@{handle_animal_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="handle_animal" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{handle_animal}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{handle_animal}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{handle_animal_notes}}}">
                            <span class="lbl name" data-i18n="handle_animal">Handle Animal*</span>
                        </button>
                        <input type="hidden" name="attr_handle_animal_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_handle_animal" title="@{handle_animal}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_handle_animal_ability_mod" title="@{handle_animal_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_handle_animal_ranks" class="nospin number underlined" value="0" title="@{handle_animal_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_handle_animal_misc" class="nospin number underlined" value="0" title="@{handle_animal_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_handle_animal_bonus" class="nospin number underlined" value="0" title="@{handle_animal_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_handle_animal_ability" title="@{handle_animal_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma" selected="selected">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_handle_animal_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_handle_animal_armor_penalty" value="@{skill_check_penalty}" title="@{handle_animal_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_handle_animal_notes"></span>
                            <textarea name="attr_handle_animal_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{handle_animal_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END handle_animal -->
                <div class="myrow skill"> <!-- heal -->
                    <input class="options-flag" name="attr_options-flag-heal" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_heal_classkill" value="1" title="@{heal_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="heal" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{heal}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{heal}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{heal_notes}}}">
                            <span class="lbl name" data-i18n="heal">Heal</span>
                        </button>
                        <input type="hidden" name="attr_heal_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_heal" title="@{heal}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_heal_ability_mod" title="@{heal_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_heal_ranks" class="nospin number underlined" value="0" title="@{heal_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_heal_misc" class="nospin number underlined" value="0" title="@{heal_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_heal_bonus" class="nospin number underlined" value="0" title="@{heal_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_heal_ability" title="@{heal_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom" selected="selected">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_heal_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_heal_armor_penalty" value="@{skill_check_penalty}" title="@{heal_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_heal_notes"></span>
                            <textarea name="attr_heal_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{heal_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END heal -->
                <div class="myrow skill"> <!-- intimidate -->
                    <input class="options-flag" name="attr_options-flag-intimidate" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_intimidate_classkill" value="1" title="@{intimidate_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="intimidate" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{intimidate}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{intimidate}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{intimidate_notes}}}">
                            <span class="lbl name" data-i18n="intimidate">Intimidate</span>
                        </button>
                        <input type="hidden" name="attr_intimidate_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_intimidate" title="@{intimidate}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_intimidate_ability_mod" title="@{intimidate_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_intimidate_ranks" class="nospin number underlined" value="0" title="@{intimidate_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_intimidate_misc" class="nospin number underlined" value="0" title="@{intimidate_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_intimidate_bonus" class="nospin number underlined" value="0" title="@{intimidate_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_intimidate_ability" title="@{intimidate_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma" selected="selected">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_intimidate_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_intimidate_armor_penalty" value="@{skill_check_penalty}" title="@{intimidate_armor_penalty}" checked="checked" /><span></span><span data-i18n="apply-armor-encumbrance-penalty">Apply armor/encumbrance penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_intimidate_notes"></span>
                            <textarea name="attr_intimidate_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{intimidate_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END intimidate -->
                <div class="myrow skill"> <!-- knowledge_arcana -->
                    <input class="options-flag" name="attr_options-flag-knowledge_arcana" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_knowledge_arcana_classkill" value="1" title="@{knowledge_arcana_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="knowledge_arcana" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{knowledge_arcana}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{knowledge_arcana}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{knowledge_arcana_notes}}}">
                            <span class="lbl name" data-i18n="knowledge_arcana">Knowledge (Arcana)*</span>
                        </button>
                        <input type="hidden" name="attr_knowledge_arcana_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_knowledge_arcana" title="@{knowledge_arcana}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_knowledge_arcana_ability_mod" title="@{knowledge_arcana_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_arcana_ranks" class="nospin number underlined" value="0" title="@{knowledge_arcana_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_arcana_misc" class="nospin number underlined" value="0" title="@{knowledge_arcana_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_arcana_bonus" class="nospin number underlined" value="0" title="@{knowledge_arcana_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_knowledge_arcana_ability" title="@{knowledge_arcana_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence" selected="selected">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_knowledge_arcana_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_knowledge_arcana_armor_penalty" value="@{skill_check_penalty}" title="@{knowledge_arcana_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_knowledge_arcana_notes"></span>
                            <textarea name="attr_knowledge_arcana_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{knowledge_arcana_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END knowledge_arcana -->
                <div class="myrow skill"> <!-- knowledge_dungeoneering -->
                    <input class="options-flag" name="attr_options-flag-knowledge_dungeoneering" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_knowledge_dungeoneering_classkill" value="1" title="@{knowledge_dungeoneering_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="knowledge_dungeoneering" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{knowledge_dungeoneering}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{knowledge_dungeoneering}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{knowledge_dungeoneering_notes}}}">
                            <span class="lbl name" data-i18n="knowledge_dungeoneering">Knowledge (Dungeoneering)*</span>
                        </button>
                        <input type="hidden" name="attr_knowledge_dungeoneering_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_knowledge_dungeoneering" title="@{knowledge_dungeoneering}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_knowledge_dungeoneering_ability_mod" title="@{knowledge_dungeoneering_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_dungeoneering_ranks" class="nospin number underlined" value="0" title="@{knowledge_dungeoneering_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_dungeoneering_misc" class="nospin number underlined" value="0" title="@{knowledge_dungeoneering_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_dungeoneering_bonus" class="nospin number underlined" value="0" title="@{knowledge_dungeoneering_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_knowledge_dungeoneering_ability" title="@{knowledge_dungeoneering_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence" selected="selected">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_knowledge_dungeoneering_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_knowledge_dungeoneering_armor_penalty" value="@{skill_check_penalty}" title="@{knowledge_dungeoneering_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_knowledge_dungeoneering_notes"></span>
                            <textarea name="attr_knowledge_dungeoneering_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{knowledge_dungeoneering_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END knowledge_dungeoneering -->
                <div class="myrow skill"> <!-- knowledge_engineering -->
                    <input class="options-flag" name="attr_options-flag-knowledge_engineering" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_knowledge_engineering_classkill" value="1" title="@{knowledge_engineering_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="knowledge_engineering" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{knowledge_engineering}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{knowledge_engineering}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{knowledge_engineering_notes}}}">
                            <span class="lbl name" data-i18n="knowledge_engineering">Knowledge (Engineering)*</span>
                        </button>
                        <input type="hidden" name="attr_knowledge_engineering_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_knowledge_engineering" title="@{knowledge_engineering}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_knowledge_engineering_ability_mod" title="@{knowledge_engineering_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_engineering_ranks" class="nospin number underlined" value="0" title="@{knowledge_engineering_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_engineering_misc" class="nospin number underlined" value="0" title="@{knowledge_engineering_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_engineering_bonus" class="nospin number underlined" value="0" title="@{knowledge_engineering_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_knowledge_engineering_ability" title="@{knowledge_engineering_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence" selected="selected">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_knowledge_engineering_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_knowledge_engineering_armor_penalty" value="@{skill_check_penalty}" title="@{knowledge_engineering_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_knowledge_engineering_notes"></span>
                            <textarea name="attr_knowledge_engineering_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{knowledge_engineering_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END knowledge_engineering -->
                <div class="myrow skill"> <!-- knowledge_geography -->
                    <input class="options-flag" name="attr_options-flag-knowledge_geography" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_knowledge_geography_classkill" value="1" title="@{knowledge_geography_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="knowledge_geography" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{knowledge_geography}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{knowledge_geography}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{knowledge_geography_notes}}}">
                            <span class="lbl name" data-i18n="knowledge_geography">Knowledge (Geography)*</span>
                        </button>
                        <input type="hidden" name="attr_knowledge_geography_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_knowledge_geography" title="@{knowledge_geography}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_knowledge_geography_ability_mod" title="@{knowledge_geography_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_geography_ranks" class="nospin number underlined" value="0" title="@{knowledge_geography_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_geography_misc" class="nospin number underlined" value="0" title="@{knowledge_geography_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_geography_bonus" class="nospin number underlined" value="0" title="@{knowledge_geography_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_knowledge_geography_ability" title="@{knowledge_geography_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence" selected="selected">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_knowledge_geography_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_knowledge_geography_armor_penalty" value="@{skill_check_penalty}" title="@{knowledge_geography_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_knowledge_geography_notes"></span>
                            <textarea name="attr_knowledge_geography_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{knowledge_geography_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END knowledge_geography -->
                <div class="myrow skill"> <!-- knowledge_history -->
                    <input class="options-flag" name="attr_options-flag-knowledge_history" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_knowledge_history_classkill" value="1" title="@{knowledge_history_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="knowledge_history" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{knowledge_history}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{knowledge_history}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{knowledge_history_notes}}}">
                            <span class="lbl name" data-i18n="knowledge_history">Knowledge (History)*</span>
                        </button>
                        <input type="hidden" name="attr_knowledge_history_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_knowledge_history" title="@{knowledge_history}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_knowledge_history_ability_mod" title="@{knowledge_history_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_history_ranks" class="nospin number underlined" value="0" title="@{knowledge_history_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_history_misc" class="nospin number underlined" value="0" title="@{knowledge_history_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_history_bonus" class="nospin number underlined" value="0" title="@{knowledge_history_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_knowledge_history_ability" title="@{knowledge_history_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence" selected="selected">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_knowledge_history_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_knowledge_history_armor_penalty" value="@{skill_check_penalty}" title="@{knowledge_history_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_knowledge_history_notes"></span>
                            <textarea name="attr_knowledge_history_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{knowledge_history_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END knowledge_history -->
                <div class="myrow skill"> <!-- knowledge_local -->
                    <input class="options-flag" name="attr_options-flag-knowledge_local" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_knowledge_local_classkill" value="1" title="@{knowledge_local_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="knowledge_local" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{knowledge_local}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{knowledge_local}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{knowledge_local_notes}}}">
                            <span class="lbl name" data-i18n="knowledge_local">Knowledge (Local)*</span>
                        </button>
                        <input type="hidden" name="attr_knowledge_local_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_knowledge_local" title="@{knowledge_local}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_knowledge_local_ability_mod" title="@{knowledge_local_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_local_ranks" class="nospin number underlined" value="0" title="@{knowledge_local_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_local_misc" class="nospin number underlined" value="0" title="@{knowledge_local_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_local_bonus" class="nospin number underlined" value="0" title="@{knowledge_local_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_knowledge_local_ability" title="@{knowledge_local_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence" selected="selected">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_knowledge_local_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_knowledge_local_armor_penalty" value="@{skill_check_penalty}" title="@{knowledge_local_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_knowledge_local_notes"></span>
                            <textarea name="attr_knowledge_local_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{knowledge_local_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END knowledge_local -->
                <div class="myrow skill"> <!-- knowledge_nature -->
                    <input class="options-flag" name="attr_options-flag-knowledge_nature" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_knowledge_nature_classkill" value="1" title="@{knowledge_nature_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="knowledge_nature" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{knowledge_nature}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{knowledge_nature}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{knowledge_nature_notes}}}">
                            <span class="lbl name" data-i18n="knowledge_nature">Knowledge (Nature)*</span>
                        </button>
                        <input type="hidden" name="attr_knowledge_nature_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_knowledge_nature" title="@{knowledge_nature}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_knowledge_nature_ability_mod" title="@{knowledge_nature_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_nature_ranks" class="nospin number underlined" value="0" title="@{knowledge_nature_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_nature_misc" class="nospin number underlined" value="0" title="@{knowledge_nature_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_nature_bonus" class="nospin number underlined" value="0" title="@{knowledge_nature_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_knowledge_nature_ability" title="@{knowledge_nature_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence" selected="selected">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_knowledge_nature_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_knowledge_nature_armor_penalty" value="@{skill_check_penalty}" title="@{knowledge_nature_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_knowledge_nature_notes"></span>
                            <textarea name="attr_knowledge_nature_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{knowledge_nature_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END knowledge_nature -->
                <div class="myrow skill"> <!-- knowledge_nobility -->
                    <input class="options-flag" name="attr_options-flag-knowledge_nobility" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_knowledge_nobility_classkill" value="1" title="@{knowledge_nobility_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="knowledge_nobility" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{knowledge_nobility}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{knowledge_nobility}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{knowledge_nobility_notes}}}">
                            <span class="lbl name" data-i18n="knowledge_nobility">Knowledge (Nobility)*</span>
                        </button>
                        <input type="hidden" name="attr_knowledge_nobility_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_knowledge_nobility" title="@{knowledge_nobility}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_knowledge_nobility_ability_mod" title="@{knowledge_nobility_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_nobility_ranks" class="nospin number underlined" value="0" title="@{knowledge_nobility_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_nobility_misc" class="nospin number underlined" value="0" title="@{knowledge_nobility_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_nobility_bonus" class="nospin number underlined" value="0" title="@{knowledge_nobility_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_knowledge_nobility_ability" title="@{knowledge_nobility_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence" selected="selected">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_knowledge_nobility_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_knowledge_nobility_armor_penalty" value="@{skill_check_penalty}" title="@{knowledge_nobility_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_knowledge_nobility_notes"></span>
                            <textarea name="attr_knowledge_nobility_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{knowledge_nobility_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END knowledge_nobility -->
                <div class="myrow skill"> <!-- knowledge_planes -->
                    <input class="options-flag" name="attr_options-flag-knowledge_planes" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_knowledge_planes_classkill" value="1" title="@{knowledge_planes_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="knowledge_planes" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{knowledge_planes}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{knowledge_planes}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{knowledge_planes_notes}}}">
                            <span class="lbl name" data-i18n="knowledge_planes">Knowledge (Planes)*</span>
                        </button>
                        <input type="hidden" name="attr_knowledge_planes_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_knowledge_planes" title="@{knowledge_planes}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_knowledge_planes_ability_mod" title="@{knowledge_planes_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_planes_ranks" class="nospin number underlined" value="0" title="@{knowledge_planes_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_planes_misc" class="nospin number underlined" value="0" title="@{knowledge_planes_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_planes_bonus" class="nospin number underlined" value="0" title="@{knowledge_planes_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_knowledge_planes_ability" title="@{knowledge_planes_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence" selected="selected">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_knowledge_planes_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_knowledge_planes_armor_penalty" value="@{skill_check_penalty}" title="@{knowledge_planes_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_knowledge_planes_notes"></span>
                            <textarea name="attr_knowledge_planes_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{knowledge_planes_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END knowledge_planes -->
                <div class="myrow skill"> <!-- knowledge_religion -->
                    <input class="options-flag" name="attr_options-flag-knowledge_religion" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_knowledge_religion_classkill" value="1" title="@{knowledge_religion_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="knowledge_religion" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{knowledge_religion}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{knowledge_religion}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{knowledge_religion_notes}}}">
                            <span class="lbl name" data-i18n="knowledge_religion">Knowledge (Religion)*</span>
                        </button>
                        <input type="hidden" name="attr_knowledge_religion_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_knowledge_religion" title="@{knowledge_religion}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_knowledge_religion_ability_mod" title="@{knowledge_religion_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_religion_ranks" class="nospin number underlined" value="0" title="@{knowledge_religion_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_religion_misc" class="nospin number underlined" value="0" title="@{knowledge_religion_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_knowledge_religion_bonus" class="nospin number underlined" value="0" title="@{knowledge_religion_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_knowledge_religion_ability" title="@{knowledge_religion_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence" selected="selected">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_knowledge_religion_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_knowledge_religion_armor_penalty" value="@{skill_check_penalty}" title="@{knowledge_religion_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_knowledge_religion_notes"></span>
                            <textarea name="attr_knowledge_religion_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{knowledge_religion_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END knowledge_religion -->
                <fieldset class="repeating_skillknowledge"> <!-- repeating knowledge -->
                    <div class="myrow skill">
                        <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                        <div class="myrow right">
                            <input class="pseudocheck" type="checkbox" name="attr_classkill" value="1" title="@{repeating_skillknowledge_$id_classkill}" /><span></span>
                            <button class="myrol" type="roll" name="craft" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{knowledge} (@{name})}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{skill}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{notes}}}">
                                <span class="lbl knowledge" data-i18n="knowledge">Knowledge</span>
                            </button>
                            <input type="text" name="attr_name" class="knowledge underlined" data-i18n-placeholder="field-of-study" placeholder="Field of study" title="@{repeating_skillknowledge_$id_name}" />
                            <input type="hidden" name="attr_penalty_flag" class="attr-flag" value="0" />
                            <span class="pseudoattr greybg underlined number" name="attr_skill" title="@{repeating_skillknowledge_$id_skill}"></span>
                            <input type="hidden" name="attr_skill" />
                            <span class="lbl">=</span>
                            <span class="pseudoattr greybg underlined number" name="attr_ability_mod" title="@{repeating_skillknowledge_$id_ability_mod}"></span>
                            <span class="lbl">+</span>
                            <input type="number" name="attr_ranks" class="nospin number underlined" value="0" title="@{repeating_skillknowledge_$id_ranks}" />
                            <span class="lbl">+</span>
                            <input type="number" name="attr_misc" class="nospin number underlined" value="0" title="@{repeating_skillknowledge_$id_misc}" />
                            <span class="lbl">+</span>
                            <input type="number" name="attr_bonus" class="nospin number underlined" value="0" title="@{repeating_skillknowledge_$id_bonus}" />
                        </div>
                        <div class="options">
                            <div class="myrow">
                                <span data-i18n="ability">Ability</span>:
                                <select name="attr_ability" title="@{repeating_skillknowledge_$id_ability}">
                                    <option value="strength" data-i18n="strength">Strength</option>
                                    <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                    <option value="constitution" data-i18n="constitution">Constitution</option>
                                    <option value="intelligence" data-i18n="intelligence" selected="selected">Intelligence</option>
                                    <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                    <option value="charisma" data-i18n="charisma">Charisma</option>
                                </select>
                                <input type="hidden" class="skillability" name="attr_ability" />
                                <div class="skillability">
                                    <span class="spacer"></span>
                                    <input class="pseudocheck" type="checkbox" name="attr_armor_penalty" value="@{skill_check_penalty}" title="@{repeating_skillknowledge_$id_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                                </div>
                            </div>
                            <div class="autoex">
                                <span name="attr_notes"></span>
                                <textarea name="attr_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{repeating_skillknowledge_$id_notes}"></textarea>
                            </div>
                        </div>
                    </div>
                </fieldset>  <!-- END repeating knowledge -->
                <div class="myrow skill"> <!-- linguistics -->
                    <input class="options-flag" name="attr_options-flag-linguistics" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_linguistics_classkill" value="1" title="@{linguistics_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="linguistics" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{linguistics}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{linguistics}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{linguistics_notes}}}">
                            <span class="lbl name" data-i18n="linguistics">Linguistics*</span>
                        </button>
                        <input type="hidden" name="attr_linguistics_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_linguistics" title="@{linguistics}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_linguistics_ability_mod" title="@{linguistics_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_linguistics_ranks" class="nospin number underlined" value="0" title="@{linguistics_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_linguistics_misc" class="nospin number underlined" value="0" title="@{linguistics_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_linguistics_bonus" class="nospin number underlined" value="0" title="@{linguistics_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_linguistics_ability" title="@{linguistics_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence" selected="selected">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_linguistics_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_linguistics_armor_penalty" value="@{skill_check_penalty}" title="@{linguistics_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_linguistics_notes"></span>
                            <textarea name="attr_linguistics_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{linguistics_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END linguistics -->
                <div class="myrow skill"> <!-- perception -->
                    <input class="options-flag" name="attr_options-flag-perception" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_perception_classkill" value="1" title="@{perception_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="perception" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{perception}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{perception}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{perception_notes}}}">
                            <span class="lbl name" data-i18n="perception">Perception</span>
                        </button>
                        <input type="hidden" name="attr_perception_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_perception" title="@{perception}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_perception_ability_mod" title="@{perception_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_perception_ranks" class="nospin number underlined" value="0" title="@{perception_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_perception_misc" class="nospin number underlined" value="0" title="@{perception_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_perception_bonus" class="nospin number underlined" value="0" title="@{perception_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_perception_ability" title="@{perception_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom" selected="selected">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_perception_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_perception_armor_penalty" value="@{skill_check_penalty}" title="@{perception_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_perception_notes"></span>
                            <textarea name="attr_perception_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{perception_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END perception -->
                <div class="myrow skill"> <!-- perform -->
                    <input class="options-flag" name="attr_options-flag-perform" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_perform_classkill" value="1" title="@{perform_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="perform" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{perform} (@{perform_name})}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{perform}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{perform_notes}}}">
                            <span class="lbl perform" data-i18n="perform">Perform</span>
                        </button>
                        <input type="text" name="attr_perform_name" class="perform underlined" data-i18n-placeholder="category" placeholder="Category" title="@{perform_name}" />
                        <input type="hidden" name="attr_perform_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_perform" title="@{perform}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_perform_ability_mod" title="@{perform_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_perform_ranks" class="nospin number underlined" value="0" title="@{perform_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_perform_misc" class="nospin number underlined" value="0" title="@{perform_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_perform_bonus" class="nospin number underlined" value="0" title="@{perform_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_perform_ability" title="@{perform_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma" selected="selected">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_perform_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_perform_armor_penalty" value="@{skill_check_penalty}" title="@{perform_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_perform_notes"></span>
                            <textarea name="attr_perform_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{perform_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END perform -->
                <fieldset class="repeating_skillperform"> <!-- repeating perform -->
                    <div class="myrow skill">
                        <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                        <div class="myrow right">
                            <input class="pseudocheck" type="checkbox" name="attr_classkill" value="1" title="@{classkill}" /><span></span>
                            <button class="myrol" type="roll" name="craft" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{perform} (@{name})}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{skill}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{notes}}}">
                                <span class="lbl perform" data-i18n="perform">Perform</span>
                            </button>
                            <input type="text" name="attr_name" class="perform underlined" data-i18n-placeholder="category" placeholder="Category" title="@{repeating_skillperform_$id_name}" />
                            <input type="hidden" name="attr_penalty_flag" class="attr-flag" value="0" />
                            <span class="pseudoattr greybg underlined number" name="attr_skill" title="@{repeating_skillperform_$id_skill}"></span>
                            <input type="hidden" name="attr_skill" />
                            <span class="lbl">=</span>
                            <span class="pseudoattr greybg underlined number" name="attr_ability_mod" title="@{repeating_skillperform_$id_ability_mod}"></span>
                            <span class="lbl">+</span>
                            <input type="number" name="attr_ranks" class="nospin number underlined" value="0" title="@{repeating_skillperform_$id_ranks}" />
                            <span class="lbl">+</span>
                            <input type="number" name="attr_misc" class="nospin number underlined" value="0" title="@{repeating_skillperform_$id_misc}" />
                            <span class="lbl">+</span>
                            <input type="number" name="attr_bonus" class="nospin number underlined" value="0" title="@{repeating_skillperform_$id_bonus}" />
                        </div>
                        <div class="options">
                            <div class="myrow">
                                <span data-i18n="ability">Ability</span>:
                                <select name="attr_ability" title="@{repeating_skillperform_$id_ability}">
                                    <option value="strength" data-i18n="strength">Strength</option>
                                    <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                    <option value="constitution" data-i18n="constitution">Constitution</option>
                                    <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                    <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                    <option value="charisma" data-i18n="charisma" selected="selected">Charisma</option>
                                </select>
                                <input type="hidden" class="skillability" name="attr_ability" />
                                <div class="skillability">
                                    <span class="spacer"></span>
                                    <input class="pseudocheck" type="checkbox" name="attr_armor_penalty" value="@{skill_check_penalty}" title="@{repeating_skillperform_$id_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                                </div>
                            </div>
                            <div class="autoex">
                                <span name="attr_notes"></span>
                                <textarea name="attr_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{repeating_skillperform_$id_notes}"></textarea>
                            </div>
                        </div>
                    </div>
                </fieldset>  <!-- END repeating perform -->
                <div class="myrow skill"> <!-- profession -->
                    <input class="options-flag" name="attr_options-flag-profession" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_profession_classkill" value="1" title="@{profession_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="profession" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{profession} (@{profession_name})}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{profession}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{profession_notes}}}">
                            <span class="lbl profession" data-i18n="profession">Profession*</span>
                        </button>
                        <input type="text" name="attr_profession_name" class="profession underlined" data-i18n-placeholder="job" placeholder="Job" title="@{profession_name}" />
                        <input type="hidden" name="attr_profession_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_profession" title="@{profession}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_profession_ability_mod" title="@{profession_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_profession_ranks" class="nospin number underlined" value="0" title="@{profession_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_profession_misc" class="nospin number underlined" value="0" title="@{profession_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_profession_bonus" class="nospin number underlined" value="0" title="@{profession_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_profession_ability" title="@{profession_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom" selected="selected">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_profession_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_profession_armor_penalty" value="@{skill_check_penalty}" title="@{profession_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_profession_notes"></span>
                            <textarea name="attr_profession_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{profession_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END profession -->
                <fieldset class="repeating_skillprofession"> <!-- repeating profession -->
                    <div class="myrow skill">
                        <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                        <div class="myrow right">
                            <input class="pseudocheck" type="checkbox" name="attr_classkill" value="1" title="@{repeating_skillprofession_$id_classkill}" /><span></span>
                            <button class="myrol" type="roll" name="craft" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{profession} (@{name})}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{skill}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{notes}}}">
                                <span class="lbl profession" data-i18n="profession">Profession</span>
                            </button>
                            <input type="text" name="attr_name" class="profession underlined" data-i18n-placeholder="job" placeholder="Job" title="@{repeating_skillprofession_$id_name}" />
                            <input type="hidden" name="attr_penalty_flag" class="attr-flag" value="0" />
                            <span class="pseudoattr greybg underlined number" name="attr_skill" title="@{repeating_skillprofession_$id_skill}"></span>
                            <input type="hidden" name="attr_skill" />
                            <span class="lbl">=</span>
                            <span class="pseudoattr greybg underlined number" name="attr_ability_mod" title="@{repeating_skillprofession_$id_ability_mod}"></span>
                            <span class="lbl">+</span>
                            <input type="number" name="attr_ranks" class="nospin number underlined" value="0" title="@{repeating_skillprofession_$id_ranks}" />
                            <span class="lbl">+</span>
                            <input type="number" name="attr_misc" class="nospin number underlined" value="0" title="@{repeating_skillprofession_$id_misc}" />
                            <span class="lbl">+</span>
                            <input type="number" name="attr_bonus" class="nospin number underlined" value="0" title="@{repeating_skillprofession_$id_bonus}" />
                        </div>
                        <div class="options">
                            <div class="myrow">
                                <span data-i18n="ability">Ability</span>:
                                <select name="attr_ability" title="@{repeating_skillprofession_$id_ability}">
                                    <option value="strength" data-i18n="strength">Strength</option>
                                    <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                    <option value="constitution" data-i18n="constitution">Constitution</option>
                                    <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                    <option value="wisdom" data-i18n="wisdom" selected="selected">Wisdom</option>
                                    <option value="charisma" data-i18n="charisma">Charisma</option>
                                </select>
                                <input type="hidden" class="skillability" name="attr_ability" />
                                <div class="skillability">
                                    <span class="spacer"></span>
                                    <input class="pseudocheck" type="checkbox" name="attr_armor_penalty" value="@{skill_check_penalty}" title="@{repeating_skillprofession_$id_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                                </div>
                            </div>
                            <div class="autoex">
                                <span name="attr_notes"></span>
                                <textarea name="attr_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{repeating_skillprofession_$id_notes}"></textarea>
                            </div>
                        </div>
                    </div>
                </fieldset>  <!-- END repeating profession -->
                <div class="myrow skill"> <!-- ride -->
                    <input class="options-flag" name="attr_options-flag-ride" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_ride_classkill" value="1" title="@{ride_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="ride" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{ride}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{ride}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{ride_notes}}}">
                            <span class="lbl name" data-i18n="ride">Ride</span>
                        </button>
                        <input type="hidden" name="attr_ride_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_ride" title="@{ride}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_ride_ability_mod" title="@{ride_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_ride_ranks" class="nospin number underlined" value="0" title="@{ride_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_ride_misc" class="nospin number underlined" value="0" title="@{ride_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_ride_bonus" class="nospin number underlined" value="0" title="@{ride_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_ride_ability" title="@{ride_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity" selected="selected">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_ride_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_ride_armor_penalty" value="@{skill_check_penalty}" title="@{ride_armor_penalty}" checked="checked" /><span></span><span data-i18n="apply-armor-encumbrance-penalty">Apply armor/encumbrance penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_ride_notes"></span>
                            <textarea name="attr_ride_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{ride_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END ride -->
                <div class="myrow skill"> <!-- sense_motive -->
                    <input class="options-flag" name="attr_options-flag-sense_motive" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_sense_motive_classkill" value="1" title="@{sense_motive_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="sense_motive" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{sense_motive}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{sense_motive}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{sense_motive_notes}}}">
                            <span class="lbl name" data-i18n="sense_motive">Sense Motive</span>
                        </button>
                        <input type="hidden" name="attr_sense_motive_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_sense_motive" title="@{sense_motive}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_sense_motive_ability_mod" title="@{sense_motive_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_sense_motive_ranks" class="nospin number underlined" value="0" title="@{sense_motive_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_sense_motive_misc" class="nospin number underlined" value="0" title="@{sense_motive_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_sense_motive_bonus" class="nospin number underlined" value="0" title="@{sense_motive_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_sense_motive_ability" title="@{sense_motive_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom" selected="selected">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_sense_motive_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_sense_motive_armor_penalty" value="@{skill_check_penalty}" title="@{sense_motive_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_sense_motive_notes"></span>
                            <textarea name="attr_sense_motive_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{sense_motive_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END sense_motive -->
                <div class="myrow skill"> <!-- sleight_of_hand -->
                    <input class="options-flag" name="attr_options-flag-sleight_of_hand" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_sleight_of_hand_classkill" value="1" title="@{sleight_of_hand_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="sleight_of_hand" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{sleight_of_hand}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{sleight_of_hand}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{sleight_of_hand_notes}}}">
                            <span class="lbl name" data-i18n="sleight_of_hand">Sleight of Hand*</span>
                        </button>
                        <input type="hidden" name="attr_sleight_of_hand_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_sleight_of_hand" title="@{sleight_of_hand}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_sleight_of_hand_ability_mod" title="@{sleight_of_hand_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_sleight_of_hand_ranks" class="nospin number underlined" value="0" title="@{sleight_of_hand_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_sleight_of_hand_misc" class="nospin number underlined" value="0" title="@{sleight_of_hand_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_sleight_of_hand_bonus" class="nospin number underlined" value="0" title="@{sleight_of_hand_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_sleight_of_hand_ability" title="@{sleight_of_hand_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity" selected="selected">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_sleight_of_hand_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_sleight_of_hand_armor_penalty" value="@{skill_check_penalty}" title="@{sleight_of_hand_armor_penalty}" checked="checked" /><span></span><span data-i18n="apply-armor-encumbrance-penalty">Apply armor/encumbrance penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_sleight_of_hand_notes"></span>
                            <textarea name="attr_sleight_of_hand_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{sleight_of_hand_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END sleight_of_hand -->
                <div class="myrow skill"> <!-- spellcraft -->
                    <input class="options-flag" name="attr_options-flag-spellcraft" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_spellcraft_classkill" value="1" title="@{spellcraft_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="spellcraft" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{spellcraft}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{spellcraft}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{spellcraft_notes}}}">
                            <span class="lbl name" data-i18n="spellcraft">Spellcraft*</span>
                        </button>
                        <input type="hidden" name="attr_spellcraft_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_spellcraft" title="@{spellcraft}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_spellcraft_ability_mod" title="@{spellcraft_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_spellcraft_ranks" class="nospin number underlined" value="0" title="@{spellcraft_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_spellcraft_misc" class="nospin number underlined" value="0" title="@{spellcraft_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_spellcraft_bonus" class="nospin number underlined" value="0" title="@{spellcraft_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_spellcraft_ability" title="@{spellcraft_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence" selected="selected">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_spellcraft_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_spellcraft_armor_penalty" value="@{skill_check_penalty}" title="@{spellcraft_armor_penalty}" checked="checked" /><span></span><span data-i18n="apply-armor-encumbrance-penalty">Apply armor/encumbrance penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_spellcraft_notes"></span>
                            <textarea name="attr_spellcraft_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{spellcraft_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END spellcraft -->
                <div class="myrow skill"> <!-- stealth -->
                    <input class="options-flag" name="attr_options-flag-stealth" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_stealth_classkill" value="1" title="@{stealth_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="stealth" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{stealth}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{stealth}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{stealth_notes}}}">
                            <span class="lbl name" data-i18n="stealth">Stealth</span>
                        </button>
                        <input type="hidden" name="attr_stealth_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_stealth" title="@{stealth}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_stealth_ability_mod" title="@{stealth_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_stealth_ranks" class="nospin number underlined" value="0" title="@{stealth_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_stealth_misc" class="nospin number underlined" value="0" title="@{stealth_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_stealth_bonus" class="nospin number underlined" value="0" title="@{stealth_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_stealth_ability" title="@{stealth_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity" selected="selected">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_stealth_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_stealth_armor_penalty" value="@{skill_check_penalty}" title="@{stealth_armor_penalty}" checked="checked" /><span></span><span data-i18n="apply-armor-encumbrance-penalty">Apply armor/encumbrance penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_stealth_notes"></span>
                            <textarea name="attr_stealth_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{stealth_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END stealth -->
                <div class="myrow skill"> <!-- survival -->
                    <input class="options-flag" name="attr_options-flag-survival" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_survival_classkill" value="1" title="@{survival_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="survival" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{survival}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{survival}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{survival_notes}}}">
                            <span class="lbl name" data-i18n="survival">Survival</span>
                        </button>
                        <input type="hidden" name="attr_survival_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_survival" title="@{survival}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_survival_ability_mod" title="@{survival_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_survival_ranks" class="nospin number underlined" value="0" title="@{survival_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_survival_misc" class="nospin number underlined" value="0" title="@{survival_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_survival_bonus" class="nospin number underlined" value="0" title="@{survival_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_survival_ability" title="@{survival_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom" selected="selected">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_survival_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_survival_armor_penalty" value="@{skill_check_penalty}" title="@{survival_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_survival_notes"></span>
                            <textarea name="attr_survival_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{survival_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END survival -->
                <div class="myrow skill"> <!-- swim -->
                    <input class="options-flag" name="attr_options-flag-swim" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_swim_classkill" value="1" title="@{swim_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="swim" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{swim}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{swim}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{swim_notes}}}">
                            <span class="lbl name" data-i18n="swim">Swim</span>
                        </button>
                        <input type="hidden" name="attr_swim_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_swim" title="@{swim}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_swim_ability_mod" title="@{swim_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_swim_ranks" class="nospin number underlined" value="0" title="@{swim_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_swim_misc" class="nospin number underlined" value="0" title="@{swim_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_swim_bonus" class="nospin number underlined" value="0" title="@{swim_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_swim_ability" title="@{swim_ability}">
                                <option value="strength" data-i18n="strength" selected="selected">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_swim_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_swim_armor_penalty" value="@{skill_check_penalty}" title="@{swim_armor_penalty}" checked="checked" /><span></span><span data-i18n="apply-armor-encumbrance-penalty">Apply armor/encumbrance penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_swim_notes"></span>
                            <textarea name="attr_swim_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{swim_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END swim -->
                <div class="myrow skill"> <!-- use_magic_device -->
                    <input class="options-flag" name="attr_options-flag-use_magic_device" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                    <div class="myrow right">
                        <input class="pseudocheck" type="checkbox" name="attr_use_magic_device_classkill" value="1" title="@{use_magic_device_classkill}" /><span></span>
                        <button class="myrol" type="roll" name="use_magic_device" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=^{use_magic_device}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{use_magic_device}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{use_magic_device_notes}}}">
                            <span class="lbl name" data-i18n="use_magic_device">Use Magic Device*</span>
                        </button>
                        <input type="hidden" name="attr_use_magic_device_penalty_flag" class="attr-flag" value="0" />
                        <span class="pseudoattr greybg underlined number" name="attr_use_magic_device" title="@{use_magic_device}"></span>
                        <span class="lbl">=</span>
                        <span class="pseudoattr greybg underlined number" name="attr_use_magic_device_ability_mod" title="@{use_magic_device_ability_mod}"></span>
                        <span class="lbl">+</span>
                        <input type="number" name="attr_use_magic_device_ranks" class="nospin number underlined" value="0" title="@{use_magic_device_ranks}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_use_magic_device_misc" class="nospin number underlined" value="0" title="@{use_magic_device_misc}" />
                        <span class="lbl">+</span>
                        <input type="number" name="attr_use_magic_device_bonus" class="nospin number underlined" value="0" title="@{use_magic_device_bonus}" />
                    </div>
                    <div class="options">
                        <div class="myrow">
                            <span data-i18n="ability">Ability</span>:
                            <select name="attr_use_magic_device_ability" title="@{use_magic_device_ability}">
                                <option value="strength" data-i18n="strength">Strength</option>
                                <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                <option value="constitution" data-i18n="constitution">Constitution</option>
                                <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                                <option value="charisma" data-i18n="charisma" selected="selected">Charisma</option>
                            </select>
                            <input type="hidden" class="skillability" name="attr_use_magic_device_ability" />
                            <div class="skillability">
                                <span class="spacer"></span>
                                <input class="pseudocheck" type="checkbox" name="attr_use_magic_device_armor_penalty" value="@{skill_check_penalty}" title="@{use_magic_device_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                            </div>
                        </div>
                        <div class="autoex">
                            <span name="attr_use_magic_device_notes"></span>
                            <textarea name="attr_use_magic_device_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{use_magic_device_notes}"></textarea>
                        </div>
                    </div>
                </div>  <!-- END use_magic_device -->
                <fieldset class="repeating_skillcustom"> <!-- repeating custom skill -->
                    <div class="myrow skill">
                        <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                        <div class="myrow right">
                            <input class="pseudocheck" type="checkbox" name="attr_classkill" value="1" title="@{repeating_skillcustom_$id_classkill}" /><span></span>
                            <button class="myrol" type="roll" name="craft" data-i18n-title="skill-roll" title="Roll Skill" value="@{whispertype} &{template:pc} {{name=@{name}}} {{type=skill}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{roll=[[1d20+@{skill}[MOD]+@{rollmod_skill}[BONUS]]]}} {{shownotes=@{rollnotes_skill}}} {{notes=@{notes}}}">
                                <span class="lbl custom" data-i18n="custom">Custom</span>
                            </button>
                            <input type="text" name="attr_name" class="custom underlined" data-i18n-placeholder="skill" placeholder="Skill" title="@{repeating_skillcustom_$id_name}" />
                            <input type="hidden" name="attr_penalty_flag" class="attr-flag" value="0" />
                            <span class="pseudoattr greybg underlined number" name="attr_skill" title="@{repeating_skillcustom_$id_skill}"></span>
                            <input type="hidden" name="attr_skill" />
                            <span class="lbl">=</span>
                            <span class="pseudoattr greybg underlined number" name="attr_ability_mod" title="@{repeating_skillcustom_$id_ability_mod}"></span>
                            <span class="lbl">+</span>
                            <input type="number" name="attr_ranks" class="nospin number underlined" value="0" title="@{repeating_skillcustom_$id_ranks}" />
                            <span class="lbl">+</span>
                            <input type="number" name="attr_misc" class="nospin number underlined" value="0" title="@{repeating_skillcustom_$id_misc}" />
                            <span class="lbl">+</span>
                            <input type="number" name="attr_bonus" class="nospin number underlined" value="0" title="@{repeating_skillcustom_$id_bonus}" />
                        </div>
                        <div class="options">
                            <div class="myrow">
                                <span data-i18n="ability">Ability</span>:
                                <select name="attr_ability" title="@{repeating_skillcustom_$id_ability}">
                                    <option value="strength" data-i18n="strength">Strength</option>
                                    <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                                    <option value="constitution" data-i18n="constitution">Constitution</option>
                                    <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                                    <option value="wisdom" data-i18n="wisdom" selected="selected">Wisdom</option>
                                    <option value="charisma" data-i18n="charisma">Charisma</option>
                                </select>
                                <input type="hidden" class="skillability" name="attr_ability" />
                                <div class="skillability">
                                    <span class="spacer"></span>
                                    <input class="pseudocheck" type="checkbox" name="attr_armor_penalty" value="@{skill_check_penalty}" title="@{repeating_skillcustom_$id_armor_penalty}" /><span></span><span data-i18n="armor-penalty">Armor Penalty</span>
                                </div>
                            </div>
                            <div class="autoex">
                                <span name="attr_notes"></span>
                                <textarea name="attr_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{repeating_skillcustom_$id_notes}"></textarea>
                            </div>
                        </div>
                    </div>
                </fieldset>  <!-- END repeating custom skill -->
                <div class="spacer"></div>
                <div class="myrow"> <!-- TOTAL RANKS -->
                    <div class="blacklabel totalranks">
                        <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                        <div class="blackbgrd">
                            <span class="big only" data-i18n="total-ranks">Total Ranks</span>
                        </div>
                    </div>
                    <div class="boxed greybg">
                        <span class="pseudoattr" name="attr_skills_ranks_total" title="@{skills_ranks_total}"></span>
                    </div>
                </div>  <!-- END TOTAL RANKS -->
            </div> <!-- END SKILLS -->
        </div>  <!-- END tab1 col2 -->
    </div> <!-- END TAB MAIN -->
    <div class="tabadd"> <!-- TAB ADDITIONNAL -->
        <div class="col2third"> <!-- AC ITEMS -->
            <div class="acitems"> <!-- AC ITEMS -->
                <div class="myrow right">
                    <div class="blacklabel right">
                        <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                        <div class="blackbgrd item">
                            <span class="big only" data-i18n="ac-items">AC Items</span>
                        </div>
                        <div class="blackbgrd equipped">
                            <span class="med only" data-i18n="eq" data-i18n-title="equipped" title="Equipped">Eq</span>
                        </div>
                        <div class="blackbgrd ac">
                            <span class="med only" data-i18n="ac-u" data-i18n-title="ac-bonus" title="AC Bonus">AC</span>
                        </div>
                        <div class="blackbgrd flat">
                            <span class="med only" data-i18n="flat" data-i18n-title="flat-footed-bonus" title="Flat-footed Bonus">Flat</span>
                        </div>
                        <div class="blackbgrd touch">
                            <span class="med only" data-i18n="touch" data-i18n-title="touch-bonus" title="Touch Bonus">Touch</span>
                        </div>
                        <div class="blackbgrd type">
                            <span class="med only" data-i18n="type">Type</span>
                        </div>
                        <div class="blackbgrd check">
                            <span class="med only" data-i18n="check" data-i18n-title="check-penalty" title="Check Penalty">Check</span>
                        </div>
                        <div class="blackbgrd max">
                            <span class="med only" data-i18n="dex" data-i18n-title="max-dex-bonus" title="Max Dex Bonus">Dex</span>
                        </div>
                        <div class="blackbgrd spellfailure">
                            <span class="med only" data-i18n="spell" data-i18n-title="spell-failure" title="Spell Failure">Spell</span>
                        </div>
                    </div>
                </div>
                <div class="bordered titled inboxright">
                    <div class="myrow"> <!-- REPEATING AC ITEMS -->
                        <fieldset class="repeating_acitems">
                            <div class="acitem right compendium-drop-target">
                                <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-notes" title="Show/hide notes" /><span>y</span>
                                <div class="myrow right">
                                    <input type="text" name="attr_name" accept="Name" spellcheck="false" class="underlined" title="@{repeating_acitems_$id_name}" data-i18n-placeholder="item" placeholder="Item" />
                                    <input class="pseudocheck" type="checkbox" name="attr_equipped" value="1" title="@{repeating_acitems_$id_equipped}" checked="checked" /><span></span>
                                    <input type="hidden" name="attr_compendium_ac_bonus" accept="Armor/Shield Bonus" />
                                    <input type="number" name="attr_ac_bonus" value="0" class="nospin underlined" title="@{repeating_acitems_$id_ac_bonus}" />
                                    <input type="number" name="attr_flatfooted_bonus" value="0" class="nospin underlined" title="@{repeating_acitems_$id_flatfooted_bonus}" />
                                    <input type="number" name="attr_touch_bonus" value="0" class="nospin underlined" title="@{repeating_acitems_$id_touch_bonus}" />
                                    <input type="hidden" name="attr_compendium_armor_category" accept="Armor Category" />
                                    <select name="attr_type" title="@{repeating_acitems_$id_type}">
                                        <option value="light" data-i18n="light">Light</option>
                                        <option value="medium" data-i18n="medium" selected="selected">Medium</option>
                                        <option value="heavy" data-i18n="heavy">Heavy</option>
                                        <option value="shield" data-i18n="shield">Shield</option>
                                        <option value="misc" data-i18n="misc">Misc</option>
                                    </select>
                                    <input type="hidden" name="attr_compendium_check_penalty" accept="Armor Check Penalty" />
                                    <input type="number" name="attr_check_penalty" value="0" class="nospin underlined" title="@{repeating_acitems_$id_check_penalty}" />
                                    <input type="hidden" name="attr_compendium_max_dex_bonus"  accept="Maximum Dex Bonus" />
                                    <input type="number" name="attr_max_dex_bonus" value="0" class="nospin underlined" title="@{repeating_acitems_$id_max_dex_bonus}" />
                                    <input type="hidden" name="attr_compendium_spell_failure"  accept="Arcane Spell Failure Chance" />
                                    <input type="number" name="attr_spell_failure" value="0" class="nospin underlined" title="@{repeating_acitems_$id_spell_failure}" />
                                </div>
                                <div class="options right">
                                    <div class="myrow">
                                        <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                        <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                        <span class="lbl margindent" data-i18n="speed-20ft" >Speed 20 ft.</span>
                                        <input type="text" name="attr_speed20" accept="Speed 20ft." class="underlined speed" spellcheck="false" class="underlined" title="@{repeating_acitems_$id_speed20}" />
                                        <span class="lbl margindent" data-i18n="speed-30ft" >Speed 30 ft.</span>
                                        <input type="text" name="attr_speed30" accept="Speed 30ft." class="underlined speed" spellcheck="false" class="underlined" title="@{repeating_acitems_$id_speed30}" />
                                        <span class="lbl margindent" data-i18n="run" >Run</span> x
                                        <input type="number" name="attr_run_factor" value="4" class="nospin underlined sml"  title="@{repeating_acitems_$id_run_factor}" />
                                    </div>
                                    <div class="autoex">
                                        <span name="attr_notes"></span>
                                        <textarea name="attr_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{repeating_acitems_$id_notes}"></textarea>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    </div> <!-- END REPEATING AC ITEMS -->
                    <div class="myrow right" style="margin-top: 3px;"> <!-- Ac Items Totals -->
                        <span class="lab bold totals" data-i18n="totals-u">TOTALS</span>
                        <div class="boxed greybg">
                            <span class="pseudoattr" name="attr_speed_armor" title="@{speed_armor}"></span>
                        </div>
                        <div class="boxed greybg">
                            <span class="pseudoattr" title="@{armor_run_factor}">x<span name="attr_armor_run_factor"></span></span>
                        </div>
                        <div class="boxed greybg margindent">
                            <span name="attr_ac_shield" class="pseudoattr" title="@{ac_shield}"></span>
                        </div>
                        <div class="boxed greybg">
                            <span name="attr_ac_armor" class="pseudoattr" title="@{ac_armor}"></span>
                        </div>
                        <div class="boxed greybg">
                            <span name="attr_ac_flatfooted_bonus" class="pseudoattr" title="@{ac_flatfooted_bonus}"></span>
                        </div>
                        <div class="boxed greybg">
                            <span name="attr_ac_touch_bonus" class="pseudoattr" title="@{ac_touch_bonus}"></span>
                        </div>
                        <span class="spacer type"></span>
                        <div class="boxed greybg">
                            <span name="attr_armor_check_penalty" class="pseudoattr" title="@{armor_check_penalty}"></span>
                        </div>
                        <div class="boxed greybg">
                            <span name="attr_ac_ability_maximum" class="pseudoattr" title="@{ac_ability_maximum}"></span>
                        </div>
                        <div class="boxed greybg">
                            <span name="attr_armor_spell_failure" class="pseudoattr" title="@{armor_spell_failure}"></span>
                        </div>
                    </div>
                    <div class="myrow labline bottom">
                        <span class="lab speed" data-i18n="speed">Speed</span>
                        <span class="lab" data-i18n="run">Run</span>
                        <span class="lab margindent" data-i18n="shield">Shield</span>
                        <span class="lab" data-i18n="armor">Armor</span>
                    </div>
                    <!-- End Ac Items Totals -->
                </div>
            </div> <!-- END AC ITEMS -->
        </div> <!-- END AC ITEMS -->
        <div class="col1third"> <!-- XP AND MONEY -->
            <div class="myrow right"> <!-- XP -->
                <div class="blacklabel">
                    <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                    <div class="blackbgrd margindent">
                        <span class="big only" data-i18n="experience">Experience</span>
                    </div>
                    <div class="blackbgrd">
                        <span class="med only" data-i18n="points">Points</span>
                    </div>
                    <div class="blackbgrd" style="margin-left: 17px;margin-right: 2px;">
                        <span class="med only" data-i18n="next-level">Next Level</span>
                    </div>
                </div>
                <div class="bordered titled inboxright">
                    <div class="myrow right">
                        <input type="text" name="attr_xp" class="smlmed right" value="0" title="@{xp}" />
                        <input type="text" name="attr_xp_max" class="smlmed right" value="2000" title="@{xp_max}" />
                    </div>
                    <div class="spacer"></div>
                </div>
            </div> <!-- END XP -->
            <div class="myrow center money"> <!-- MONEY -->
                <div class="blacklabel">
                    <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                    <div class="blackbgrd">
                        <span class="big only" data-i18n="money">Money</span>
                    </div>
                    <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                </div>
                <div class="bordered titled inbox">
                    <div class="myrow center">
                        <div class="subcol">
                            <span class="lab block" data-i18n="cp-u">CP</span>
                            <input type="number" class="nospin" name="attr_money_cp" value="0" title="@{money_cp}" />
                        </div>
                        <div class="subcol">
                            <span class="lab block" data-i18n="sp-u">SP</span>
                            <input type="number" class="nospin" name="attr_money_sp" value="0" title="@{money_sp}" />
                        </div>
                        <div class="subcol">
                            <span class="lab block" data-i18n="gp-u">GP</span>
                            <input type="number" class="nospin" name="attr_money_gp" value="0" title="@{money_gp}" />
                        </div>
                        <div class="subcol">
                            <span class="lab block" data-i18n="pp-u">PP</span>
                            <input type="number" class="nospin" name="attr_money_pp" value="0" title="@{money_pp}" />
                        </div>
                    </div>
                    <div class="autoex">
                        <span name="attr_money_other"></span>
                        <textarea name="attr_money_other" spellcheck="false" data-i18n-placeholder="other-valuables" placeholder="Other valuables" title="@{money_other}"></textarea>
                    </div>
                </div>
            </div> <!-- END MONEY -->
        </div> <!-- END XP AND MONEY -->
        <div class="spacer"></div>
        <div class="colhalf"> <!-- GEAR & ENCUMBRANCE -->
            <div class="gear"> <!-- GEAR -->
                <div class="myrow right">
                    <div class="blacklabel title right">
                        <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                        <div class="blackbgrd gear">
                            <span class="big only" data-i18n="gear">Gear</span>
                        </div>
                        <div class="blackbgrd item">
                            <span class="med only" data-i18n="item">Item</span>
                        </div>
                        <div class="blackbgrd qty">
                            <span class="med only" data-i18n="qty" data-i18n-title="quantity" title="Quantity">Qty</span>
                        </div>
                        <div class="blackbgrd weight">
                            <span class="med only" data-i18n="weight" >Weight</span>
                        </div>
                    </div>
                </div>
                <div class="bordered titled inboxright">
                    <fieldset class="repeating_gear">
                        <div class="myrow right gearitem compendium-drop-target">
                            <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                            <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                            <input type="text" name="attr_name" accept="Name" class="underlined item" spellcheck="false" title="@{repeating_gear_$id_name}" />
                            <input type="number" name="attr_quantity" step="0.01" min="0" value="1" class="nospin underlined sml margindent" spellcheck="false" title="@{repeating_gear_$id_quantity}" />
                            <input type="hidden" name="attr_compendium_weight" accept="Weight" />
                            <input type="number" name="attr_weight" step="0.01" min="0" value="0" class="nospin underlined sml margindent" spellcheck="false" title="@{repeating_gear_$id_weight}" />
                            <input type="hidden" name="attr_weight_total" value="0" />
                            <span class="pseudoattr greybg right underlined total margindent" name="attr_weight_total"></span>
                        </div>
                    </fieldset>
                    <div class="myrow right">
                        <div class="blacklabel total right">
                            <div class="blackbgrd gear">
                                <span class="big only" data-i18n="total-weight">Total Weight</span>
                                <input type="hidden" name="attr_encumbrance" value="light" class="overload" />
                                <span class="lbl margindent overload" name="attr_encumbrance_display"></span>
                                <span name="attr_encumbrance_gear_weight" class="pseudoattr right greybg wtotal margindent"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div> <!-- END GEAR -->
            <div class="spacer"></div>
            <div class="myrow encumbrance"> <!-- ENCUMBRANCE -->
                <input class="options-flag" name="attr_options-flag-encumbrance" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                <div class="myrow center">
                    <span class="lab std right" data-i18n="light-load">Light Load</span>
                    <div class="boxed greybg">
                        <span class="pseudoattr" name="attr_encumbrance_load_light" title="@{encumbrance_load_light}"></span>
                    </div>
                    <span class="lab std right margindent" data-i18n="medium-load">Medium Load</span>
                    <div class="boxed greybg">
                        <span class="pseudoattr" name="attr_encumbrance_load_medium" title="@{encumbrance_load_medium}"></span>
                    </div>
                    <span class="lab std right margindent" data-i18n="heavy-load">Heavy Load</span>
                    <div class="boxed greybg">
                        <span class="pseudoattr" name="attr_encumbrance_load_heavy" title="@{encumbrance_load_heavy}"></span>
                    </div>
                </div>
                <div class="spacer"></div>
                <div class="myrow center">
                    <span class="lab std right" data-i18n="lift-over-head">Lift Over Head</span>
                    <div class="boxed greybg">
                        <span class="pseudoattr" name="attr_encumbrance_lift_head" title="@{encumbrance_lift_head}"></span>
                    </div>
                    <span class="lab std right margindent" data-i18n="lift-off-ground">Lift Off Ground</span>
                    <div class="boxed greybg">
                        <span class="pseudoattr" name="attr_encumbrance_lift_ground" title="@{encumbrance_lift_ground}"></span>
                    </div>
                    <span class="lab std right margindent" data-i18n="drag-or-push">Drag Or Push</span>
                    <div class="boxed greybg">
                        <span class="pseudoattr" name="attr_encumbrance_drag_push" title="@{encumbrance_drag_push}"></span>
                    </div>
                </div>
                <div class="spacer"></div>
                <div class="myrow center">
                    <span class="lab right" data-i18n="speed">Speed</span>
                    <div class="boxed greybg">
                        <span class="pseudoattr" name="attr_speed_encumbrance" title="@{speed_encumbrance}"></span>
                    </div>
                    <span class="lab right margindent" data-i18n="run">Run</span>
                    <div class="boxed greybg">
                        <span class="pseudoattr" title="@{encumbrance_run_factor}">x<span name="attr_encumbrance_run_factor"></span></span>
                    </div>
                    <span class="lab right margindent" data-i18n="check-penalty">Check penalty</span>
                    <div class="boxed greybg">
                        <span class="pseudoattr" name="attr_encumbrance_check_penalty" title="@{encumbrance_check_penalty}"></span>
                    </div>
                    <span class="lab right margindent" data-i18n="max-dex-bonus">Max Dex Bonus</span>
                    <div class="boxed greybg">
                        <span class="pseudoattr" name="attr_encumbrance_ability_maximum" title="@{encumbrance_ability_maximum}"></span>
                    </div>
                </div>
                <div class="options">
                    <div class="myrow">
                        <span class="lab" data-i18n="strength">Strength</span>
                        <span class="lab">(+)</span>
                        <div class="boxed">
                            <input type="number" name="attr_encumbrance_load_bonus" class="nospin boxed" value="0" title="@{encumbrance_load_bonus}" />
                        </div>
                        <span class="lab margindent" data-i18n="multiplier">Multiplier</span>
                        <span class="lab">(*)</span>
                        <div class="boxed">
                            <input type="number" name="attr_encumbrance_load_multiplier" class="nospin boxed" value="1" title="@{encumbrance_load_multiplier}" />
                        </div>
                    </div>
                    <div class="autoex">
                        <span name="attr_encumbrance_load_notes"></span>
                        <textarea name="attr_encumbrance_load_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{encumbrance_load_notes}"></textarea>
                    </div>
                </div>
            </div> <!-- ENCUMBRACE -->
            <div class="spacer"></div>
            <div class="myrow center"> <!-- ADDITIONAL GEAR -->
                <div class="blacklabel">
                    <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                    <div class="blackbgrd">
                        <span class="big only" data-i18n="additional-gear">Additional Gear</span>
                    </div>
                    <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                </div>
            </div>
            <div class="bordered titled inbox">
                <div class="autoex">
                    <span name="attr_misc_notes"></span>
                    <textarea name="attr_misc_notes" spellcheck="false" data-i18n-placeholder="additional-gear" placeholder="Additional Gear" title="@{misc_notes}"></textarea>
                </div>
            </div> <!-- END NOTES -->
        </div> <!-- END GEAR & ENCUMBRANCE -->
        <div class="colhalf padindent"> <!-- FEATS & TRAITS & BRACKGROUND -->
            <div class="feats"> <!-- FEATS -->
                <div class="myrow center">
                    <div class="blacklabel">
                        <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                        <div class="blackbgrd">
                            <span class="big only" data-i18n="feats">Feats</span>
                        </div>
                        <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                    </div>
                </div>
                <fieldset class="repeating_feats">
                    <div class="feat underlined compendium-drop-target">
                        <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                        <button class="myrol margindent" type="roll" name="FeatShow" data-i18n-title="show-feat" title="Show Feat" value="@{whispertype} &{template:pc} {{name=@{name}}} {{type=feat}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{shortdesc=@{descshort}}} {{feattype=^{@{type}}}} {{prerequisites=@{prerequisites}}} {{benefits=@{benefits}}} {{normal=@{normal}}} {{special=@{special}}} @{descflag}"><span class="pseudoattr"><span name="attr_name"></span> (<span name="attr_type" data-i18n-dynamic></span>)</span></button>
                        <span name="attr_descshort"></span>
                        <div class="options">
                            <div class="myrow">
                                <span class="lbl" data-i18n="name">Name</span>
                                <input type="text" name="attr_name" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_feats_$id_name}" />
                                <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                <span class="lbl margindent" data-i18n="type">Type</span>
                                <select class="underlined" name="attr_type" title="@{repeating_feat_$id_type}">
                                    <option value="general" data-i18n="general" selected="selected">General</option>
                                    <option value="combat" data-i18n="combat">Combat</option>
                                    <option value="critical" data-i18n="critical">Critical</option>
                                    <option value="grit" data-i18n="grit">Grit</option>
                                    <option value="item-creation" data-i18n="item-creation">Item creation</option>
                                    <option value="metamagic" data-i18n="metamagic">Metamagic</option>
                                    <option value="panache" data-i18n="panache">Panache</option>
                                    <option value="performance" data-i18n="performance">Performance</option>
                                    <option value="style" data-i18n="style">Style</option>
                                    <option value="teamwork" data-i18n="teamwork">Teamwork</option>
                                </select>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="short-desc:" data-i18n-title="short description:" title="Short Description">Short Desc.:</span>
                                <input type="text" name="attr_descshort" class="underlined std" spellcheck="false" title="@{repeating_feats_$id_descshort}" />
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="prerequisites:">Prerequisites:</span>
                                <div class="autoex std">
                                    <span name="attr_prerequisites"></span>
                                    <textarea name="attr_prerequisites" class="underlined" spellcheck="false" title="@{repeating_feats_$id_prerequisites}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="benefits:">Benefits:</span>
                                <div class="autoex std">
                                    <span name="attr_benefits"></span>
                                    <textarea name="attr_benefits" class="underlined" spellcheck="false" title="@{repeating_feats_$id_benefits}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="normal:">Normal:</span>
                                <div class="autoex std">
                                    <span name="attr_normal"></span>
                                    <textarea name="attr_normal" class="underlined" spellcheck="false" title="@{repeating_feats_$id_normal}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="special:">Special:</span>
                                <div class="autoex std">
                                    <span name="attr_special"></span>
                                    <textarea name="attr_special" class="underlined" spellcheck="false" title="@{repeating_feats_$id_special}"></textarea>
                                </div>
                            </div>
                            <div class="myrow">
                                <input class="pseudocheck" type="checkbox" name="attr_descflag" value="{{descflag=[[1]]}}{{desc=@{description}}}" title="@{repeating_feats_$id_descflag}" checked="checked" /><span></span>
                                <span class="lbl atk" data-i18n="description:">Description:</span>
                                <div class="autoex">
                                    <span name="attr_description"></span>
                                    <textarea name="attr_description" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_feats_$id_description}"></textarea>
                                </div>
                            </div>
                            <span class="lbl" data-i18n="notes:">Notes:</span>
                            <div class="autoex">
                                <span name="attr_notes"></span>
                                <textarea name="attr_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{repeating_attacks_$id_notes}"></textarea>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </div> <!-- END FEATS -->
            <div class="spacer"></div>
            <div class="traits"> <!-- TRAITS -->
                <div class="myrow center">
                    <div class="blacklabel">
                        <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                        <div class="blackbgrd">
                            <span class="big only" data-i18n="traits">Traits</span>
                        </div>
                        <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                    </div>
                </div>
                <fieldset class="repeating_abilities">
                    <div class="ability underlined compendium-drop-target">
                        <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                        <button class="myrol margindent" type="roll" name="AbilityShow" data-i18n-title="show-ability" title="Show Ability" value="@{whispertype} &{template:pc} {{name=@{name}}} {{type=feat}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{abilitytype=@{type}}}  {{shortdesc=@{descshort}}} @{descflag}"><span class="pseudoattr" name="attr_name"></span>
                            <input type="hidden" class="optional-flag" name="attr_type" value="" /><span class="optional inl pseudoattr">(<span name="attr_type"></span>)</span></button>
                        <span name="attr_descshort"></span>
                        <div class="options">
                            <div class="myrow">
                                <span class="lbl" data-i18n="name">Name</span>
                                <input type="text" name="attr_name" accept="Name" class="underlined large" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_abilities_$id_name}" />
                                <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="type">Type</span>
                                <input type="text" name="attr_type" accept="Ability Type" class="underlined" spellcheck="false" data-i18n-placeholder="type" placeholder="Type" title="@{repeating_abilities_$id_type}" />
                            </div>
                            <div class="myrow">
                                <span class="lbl std right" data-i18n="short-desc:" data-i18n-title="short description:" title="Short Description">Short Desc.:</span>
                                <input type="text" name="attr_descshort" class="underlined std" spellcheck="false" title="@{repeating_abilities_$id_descshort}" />
                            </div>
                            <div class="myrow">
                                <input class="pseudocheck" type="checkbox" name="attr_descflag" value="{{descflag=[[1]]}}{{desc=@{description}}}" title="@{repeating_abilities_$id_descflag}" checked="checked" /><span></span>
                                <span class="lbl atk" data-i18n="description:">Description:</span>
                                <div class="autoex">
                                    <span name="attr_description"></span>
                                    <textarea name="attr_description" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_abilities_$id_description}"></textarea>
                                </div>
                            </div>
                            <span class="lbl" data-i18n="notes:">Notes:</span>
                            <div class="autoex">
                                <span name="attr_notes"></span>
                                <textarea name="attr_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{repeating_attacks_$id_notes}"></textarea>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </div> <!-- END TRAITS -->
            <div class="spacer"></div>
            <div class="myrow center"> <!-- BACKGROUND -->
                <div class="blacklabel">
                    <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                    <div class="blackbgrd">
                        <span class="big only" data-i18n="notes">Notes</span>
                    </div>
                    <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                </div>
            </div>
            <div class="bordered titled inbox">
                <div class="autoex">
                    <span name="attr_background"></span>
                    <textarea name="attr_background" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{background}"></textarea>
                </div>
            </div> <!-- END BACKGROUND -->
        </div> <!-- END FEATS & TRAITS & BRACKGROUND -->
    </div> <!-- END TAB ADDITIONNAL -->
    <div class="tabspell"> <!-- TAB SPELLS -->
        <div class="col1third"> <!-- misc magic -->
            <div class="myrow center spellcasting"> <!-- SPELLCASTING -->
                <div class="blacklabel">
                    <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                    <div class="blackbgrd">
                        <span class="big only" data-i18n="spellcasting">Spellcasting</span>
                    </div>
                    <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                </div>
                <div class="bordered titled inbox"> <!-- CASTER CLASS 1 -->
                    <div class="myrow">
                        <span class="lbl" data-i18n="class">Class</span>
                        <span class="roundblack">1</span>
                        <input type="text" name="attr_caster1_class" class="underlined" spellcheck="false" title="@{caster1_class}" />
                    </div>
                    <div class="myrow">
                        <span class="lbl" data-i18n="caster-level">Caster Level</span>
                        <input type="number" name="attr_caster1_level" value="0" class="nospin underlined number" title="@{caster1_level}" />
                        <span class="spacer"></span>
                        <span class="lbl" data-i18n="ability-mod">Ability mod</span>
                        <span class="pseudoattr number greybg underlined" name="attr_caster1_ability_mod" title="@{caster1_ability_mod}"></span>
                    </div>
                    <div class="spacer"></div>
                    <div class="concentration"> <!-- CONCENTRATION -->
                        <input class="options-flag" name="attr_options-flag-concentration" type="checkbox" value="1" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                        <div class="myrow padindent">
                            <button class="myrol" type="roll" name="Caster1ConcentrationRoll" data-i18n-title="concentration-roll" title="Concentration roll" value="@{whispertype} &{template:pc} {{name=^{concentration}}} {{type=save}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{casterclass=@{caster1_class}}} {{level=@{caster1_level}}} {{roll=[[1d20+@{caster1_concentration}[MOD]+@{rollmod_save}[BONUS]]]}} {{shownotes=@{rollnotes_save}}} {{notes=@{caster1_concentration_notes}}}"><span class="lbl" data-i18n="concentration">Concentration</span></button>
                            <input type="hidden" name="attr_caster1_concentration_bonus" class="attr-flag" value="0" />
                            <span name="attr_caster1_concentration" class="pseudoattr number greybg underlined" title="@{caster1_concentration}"></span>
                            <span class="spacer"></span>
                            <span class="lab" data-i18n="temp" data-i18n-title="temp-adjustment" title="Temp Adjustment">Temp</span>
                            <input type="number" name="attr_caster1_concentration_bonus" class="nospin underlined" value="0" title="@{caster1_concentration_bonus}" />
                        </div>
                        <div class="options padindent">
                            <div class="myrow padindent">
                                <span class="spacer">=</span>
                                <span name="attr_caster1_level" class="pseudoattr number greybg underlined" title="@{caster1_level}"></span>
                                <span class="spacer">+</span>
                                <span name="attr_caster1_ability_mod" class="pseudoattr number greybg underlined" title="@{caster1_ability_mod}"></span>
                                <span class="spacer">+</span>
                                <input type="number" name="attr_caster1_concentration_misc" class="nospin underlined" value="0" title="@{caster1_concentration_misc}" />
                            </div>
                            <div class="myrow padindent labline bottom">
                                <span class="spacer"></span>
                                <span class="lab" data-i18n="caster" data-i18n-title="caster-level" title="Caster Level">Caster</span>
                                <span class="spacer"></span>
                                <span class="lab" data-i18n="ability" data-i18n-title="ability-modifier" title="Ability Modifier">Ability</span>
                                <span class="spacer"></span>
                                <span class="lab" data-i18n="misc" data-i18n-title="misc-modifier" title="Misc Modifier">Misc</span>
                            </div>
                            <div class="autoex">
                                <span name="attr_caster1_concentration_notes"></span>
                                <textarea name="attr_caster1_concentration_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{caster1_concentration_notes}"></textarea>
                            </div>
                        </div>
                    </div> <!-- END CONCENTRATION -->
                    <div class="spacer"></div>
                    <div class="myrow labline top perlevel">
                        <span class="lab" data-i18n="level" data-i18n-title="spell-level" title="Spell Level">Level</span>
                        <span class="lab" data-i18n="known" data-i18n-title="spells-known" title="Spells Known">Known</span>
                        <span class="lab" data-i18n="per-day" data-i18n-title="spells-per-day" title="Spells Per Day">per day</span>
                        <span class="lab" data-i18n="bonus" data-i18n-title="bonus-spells" title="Bonus Spells">Bonus</span>
                        <span class="lab" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                        <span class="lab" data-i18n="temp" data-i18n-title="save-dc-temp-adjustment" title="Save DC Temp Adjustment">Temp</span>
                    </div>
                    <div class="myrow perlevel">
                        <span class="pseudoattr level center">0</span>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_known_level_0" value="0" title="@{caster1_spells_known_level_0}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_perday_level_0" value="0" title="@{caster1_spells_perday_level_0}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_bonus_level_0" value="0" title="@{caster1_spells_bonus_level_0}" />
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_caster1_dcbonus_level_0" class="attr-flag" value="0" />
                            <span name="attr_caster1_dc_level_0" class="pseudoattr" title="@{caster1_dc_level_0}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_dcbonus_level_0" value="0" title="@{caster1_dcbonus_level_0}" />
                        </div>
                    </div>
                    <div class="myrow perlevel">
                        <span class="pseudoattr level center">1</span>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_known_level_1" value="0" title="@{caster1_spells_known_level_1}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_perday_level_1" value="0" title="@{caster1_spells_perday_level_1}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_bonus_level_1" value="0" title="@{caster1_spells_bonus_level_1}" />
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_caster1_dcbonus_level_1" class="attr-flag" value="0" />
                            <span name="attr_caster1_dc_level_1" class="pseudoattr" title="@{caster1_dc_level_1}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_dcbonus_level_1" value="0" title="@{caster1_dcbonus_level_1}" />
                        </div>
                    </div>
                    <div class="myrow perlevel">
                        <span class="pseudoattr level center">2</span>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_known_level_2" value="0" title="@{caster1_spells_known_level_2}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_perday_level_2" value="0" title="@{caster1_spells_perday_level_2}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_bonus_level_2" value="0" title="@{caster1_spells_bonus_level_2}" />
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_caster1_dcbonus_level_2" class="attr-flag" value="0" />
                            <span name="attr_caster1_dc_level_2" class="pseudoattr" title="@{caster1_dc_level_2}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_dcbonus_level_2" value="0" title="@{caster1_dcbonus_level_2}" />
                        </div>
                    </div>
                    <div class="myrow perlevel">
                        <span class="pseudoattr level center">3</span>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_known_level_3" value="0" title="@{caster1_spells_known_level_3}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_perday_level_3" value="0" title="@{caster1_spells_perday_level_3}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_bonus_level_3" value="0" title="@{caster1_spells_bonus_level_3}" />
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_caster1_dcbonus_level_3" class="attr-flag" value="0" />
                            <span name="attr_caster1_dc_level_3" class="pseudoattr" title="@{caster1_dc_level_3}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_dcbonus_level_3" value="0" title="@{caster1_dcbonus_level_3}" />
                        </div>
                    </div>
                    <div class="myrow perlevel">
                        <span class="pseudoattr level center">4</span>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_known_level_4" value="0" title="@{caster1_spells_known_level_4}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_perday_level_4" value="0" title="@{caster1_spells_perday_level_4}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_bonus_level_4" value="0" title="@{caster1_spells_bonus_level_4}" />
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_caster1_dcbonus_level_4" class="attr-flag" value="0" />
                            <span name="attr_caster1_dc_level_4" class="pseudoattr" title="@{caster1_dc_level_4}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_dcbonus_level_4" value="0" title="@{caster1_dcbonus_level_4}" />
                        </div>
                    </div>
                    <div class="myrow perlevel">
                        <span class="pseudoattr level center">5</span>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_known_level_5" value="0" title="@{caster1_spells_known_level_5}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_perday_level_5" value="0" title="@{caster1_spells_perday_level_5}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_bonus_level_5" value="0" title="@{caster1_spells_bonus_level_5}" />
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_caster1_dcbonus_level_5" class="attr-flag" value="0" />
                            <span name="attr_caster1_dc_level_5" class="pseudoattr" title="@{caster1_dc_level_5}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_dcbonus_level_5" value="0" title="@{caster1_dcbonus_level_5}" />
                        </div>
                    </div>
                    <div class="myrow perlevel">
                        <span class="pseudoattr level center">6</span>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_known_level_6" value="0" title="@{caster1_spells_known_level_6}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_perday_level_6" value="0" title="@{caster1_spells_perday_level_6}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_bonus_level_6" value="0" title="@{caster1_spells_bonus_level_6}" />
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_caster1_dcbonus_level_6" class="attr-flag" value="0" />
                            <span name="attr_caster1_dc_level_6" class="pseudoattr" title="@{caster1_dc_level_6}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_dcbonus_level_6" value="0" title="@{caster1_dcbonus_level_6}" />
                        </div>
                    </div>
                    <div class="myrow perlevel">
                        <span class="pseudoattr level center">7</span>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_known_level_7" value="0" title="@{caster1_spells_known_level_7}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_perday_level_7" value="0" title="@{caster1_spells_perday_level_7}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_bonus_level_7" value="0" title="@{caster1_spells_bonus_level_7}" />
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_caster1_dcbonus_level_7" class="attr-flag" value="0" />
                            <span name="attr_caster1_dc_level_7" class="pseudoattr" title="@{caster1_dc_level_7}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_dcbonus_level_7" value="0" title="@{caster1_dcbonus_level_7}" />
                        </div>
                    </div>
                    <div class="myrow perlevel">
                        <span class="pseudoattr level center">8</span>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_known_level_8" value="0" title="@{caster1_spells_known_level_8}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_perday_level_8" value="0" title="@{caster1_spells_perday_level_8}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_bonus_level_8" value="0" title="@{caster1_spells_bonus_level_8}" />
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_caster1_dcbonus_level_8" class="attr-flag" value="0" />
                            <span name="attr_caster1_dc_level_8" class="pseudoattr" title="@{caster1_dc_level_8}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_dcbonus_level_8" value="0" title="@{caster1_dcbonus_level_8}" />
                        </div>
                    </div>
                    <div class="myrow perlevel">
                        <span class="pseudoattr level center">9</span>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_known_level_9" value="0" title="@{caster1_spells_known_level_9}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_perday_level_9" value="0" title="@{caster1_spells_perday_level_9}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_spells_bonus_level_9" value="0" title="@{caster1_spells_bonus_level_9}" />
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_caster1_dcbonus_level_9" class="attr-flag" value="0" />
                            <span name="attr_caster1_dc_level_9" class="pseudoattr" title="@{caster1_dc_level_9}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster1_dcbonus_level_9" value="0" title="@{caster1_dcbonus_level_9}" />
                        </div>
                    </div>
                    <div class="spacer"></div>
                    <span class="lbl" data-i18n="bloodlines-domains-schools:">Bloodlines, Domains, Schools... :</span>
                    <div class="padindent">
                        <div class="autoex">
                            <span name="attr_caster1_spells_notes"></span>
                            <textarea name="attr_caster1_spells_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{caster1_spells_notes}"></textarea>
                        </div>
                    </div>
                </div> <!-- END CASTER CLASS 1 -->
                <div class="spacer"></div>
                <input type="hidden" class="optional-flag0" name="attr_caster2_flag" value="0" /><div class="optional blk bordered inbox"> <!-- CASTER CLASS 2 -->
                    <div class="myrow">
                        <span class="lbl" data-i18n="class">Class</span>
                        <span class="roundblack">2</span>
                        <input type="text" name="attr_caster2_class" class="underlined" spellcheck="false" title="@{caster2_class}" />
                    </div>
                    <div class="myrow">
                        <span class="lbl" data-i18n="caster-level">Caster Level</span>
                        <input type="number" name="attr_caster2_level" value="0" class="nospin underlined number" title="@{caster2_level}" />
                        <span class="spacer"></span>
                        <span class="lbl" data-i18n="ability-mod">Ability mod</span>
                        <span class="pseudoattr number greybg underlined" name="attr_caster2_ability_mod" title="@{caster2_ability_mod}"></span>
                    </div>
                    <div class="spacer"></div>
                    <div class="concentration"> <!-- CONCENTRATION -->
                        <input class="options-flag" name="attr_options-flag-concentration" type="checkbox" value="1" data-i18n-title="show-hide-options" title="Show/hide options"><span>y</span>
                        <div class="myrow padindent">
                            <button class="myrol" type="roll" name="Caster2ConcentrationRoll" data-i18n-title="concentration-roll" title="Concentration roll" value="@{whispertype} &{template:pc} {{name=^{concentration}}} {{type=save}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{casterclass=@{caster2_class}}} {{level=@{caster2_level}}} {{roll=[[1d20+@{caster2_concentration}[MOD]+@{rollmod_save}[BONUS]]]}} {{shownotes=@{rollnotes_save}}} {{notes=@{caster2_concentration_notes}}}"><span class="lbl" data-i18n="concentration">Concentration</span></button>
                            <input type="hidden" name="attr_caster2_concentration_bonus" class="attr-flag" value="0" />
                            <span name="attr_caster2_concentration" class="pseudoattr number greybg underlined" title="@{caster2_concentration}"></span>
                            <span class="spacer"></span>
                            <span class="lab" data-i18n="temp" data-i18n-title="temp-adjustment" title="Temp Adjustment">Temp</span>
                            <input type="number" name="attr_caster2_concentration_bonus" class="nospin underlined" value="0" title="@{caster2_concentration_bonus}" />
                        </div>
                        <div class="options padindent">
                            <div class="myrow padindent">
                                <span class="spacer">=</span>
                                <span name="attr_caster2_level" class="pseudoattr number greybg underlined" title="@{caster2_level}"></span>
                                <span class="spacer">+</span>
                                <span name="attr_caster2_ability_mod" class="pseudoattr number greybg underlined" title="@{caster2_ability_mod}"></span>
                                <span class="spacer">+</span>
                                <input type="number" name="attr_caster2_concentration_misc" class="nospin underlined" value="0" title="@{caster2_concentration_misc}" />
                            </div>
                            <div class="myrow padindent labline bottom">
                                <span class="spacer"></span>
                                <span class="lab" data-i18n="caster" data-i18n-title="caster-level" title="Caster Level">Caster</span>
                                <span class="spacer"></span>
                                <span class="lab" data-i18n="ability" data-i18n-title="ability-modifier" title="Ability Modifier">Ability</span>
                                <span class="spacer"></span>
                                <span class="lab" data-i18n="misc" data-i18n-title="misc-modifier" title="Misc Modifier">Misc</span>
                            </div>
                            <div class="autoex">
                                <span name="attr_caster2_concentration_notes"></span>
                                <textarea name="attr_caster2_concentration_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{caster2_concentration_notes}"></textarea>
                            </div>
                        </div>
                    </div> <!-- END CONCENTRATION -->
                    <div class="spacer"></div>
                    <div class="myrow labline top perlevel">
                        <span class="lab" data-i18n="level" data-i18n-title="spell-level" title="Spell Level">Level</span>
                        <span class="lab" data-i18n="known" data-i18n-title="spells-known" title="Spells Known">Known</span>
                        <span class="lab" data-i18n="per-day" data-i18n-title="spells-per-day" title="Spells Per Day">per day</span>
                        <span class="lab" data-i18n="bonus" data-i18n-title="bonus-spells" title="Bonus Spells">Bonus</span>
                        <span class="lab" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                        <span class="lab" data-i18n="temp" data-i18n-title="save-dc-temp-adjustment" title="Save DC Temp Adjustment">Temp</span>
                    </div>
                    <div class="myrow perlevel">
                        <span class="pseudoattr level center">0</span>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_known_level_0" value="0" title="@{caster2_spells_known_level_0}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_perday_level_0" value="0" title="@{caster2_spells_perday_level_0}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_bonus_level_0" value="0" title="@{caster2_spells_bonus_level_0}" />
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_caster2_dcbonus_level_0" class="attr-flag" value="0" />
                            <span name="attr_caster2_dc_level_0" class="pseudoattr" title="@{caster2_dc_level_0}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_dcbonus_level_0" value="0" title="@{caster2_dcbonus_level_0}" />
                        </div>
                    </div>
                    <div class="myrow perlevel">
                        <span class="pseudoattr level center">1</span>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_known_level_1" value="0" title="@{caster2_spells_known_level_1}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_perday_level_1" value="0" title="@{caster2_spells_perday_level_1}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_bonus_level_1" value="0" title="@{caster2_spells_bonus_level_1}" />
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_caster2_dcbonus_level_1" class="attr-flag" value="0" />
                            <span name="attr_caster2_dc_level_1" class="pseudoattr" title="@{caster2_dc_level_1}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_dcbonus_level_1" value="0" title="@{caster2_dcbonus_level_1}" />
                        </div>
                    </div>
                    <div class="myrow perlevel">
                        <span class="pseudoattr level center">2</span>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_known_level_2" value="0" title="@{caster2_spells_known_level_2}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_perday_level_2" value="0" title="@{caster2_spells_perday_level_2}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_bonus_level_2" value="0" title="@{caster2_spells_bonus_level_2}" />
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_caster2_dcbonus_level_2" class="attr-flag" value="0" />
                            <span name="attr_caster2_dc_level_2" class="pseudoattr" title="@{caster2_dc_level_2}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_dcbonus_level_2" value="0" title="@{caster2_dcbonus_level_2}" />
                        </div>
                    </div>
                    <div class="myrow perlevel">
                        <span class="pseudoattr level center">3</span>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_known_level_3" value="0" title="@{caster2_spells_known_level_3}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_perday_level_3" value="0" title="@{caster2_spells_perday_level_3}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_bonus_level_3" value="0" title="@{caster2_spells_bonus_level_3}" />
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_caster2_dcbonus_level_3" class="attr-flag" value="0" />
                            <span name="attr_caster2_dc_level_3" class="pseudoattr" title="@{caster2_dc_level_3}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_dcbonus_level_3" value="0" title="@{caster2_dcbonus_level_3}" />
                        </div>
                    </div>
                    <div class="myrow perlevel">
                        <span class="pseudoattr level center">4</span>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_known_level_4" value="0" title="@{caster2_spells_known_level_4}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_perday_level_4" value="0" title="@{caster2_spells_perday_level_4}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_bonus_level_4" value="0" title="@{caster2_spells_bonus_level_4}" />
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_caster2_dcbonus_level_4" class="attr-flag" value="0" />
                            <span name="attr_caster2_dc_level_4" class="pseudoattr" title="@{caster2_dc_level_4}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_dcbonus_level_4" value="0" title="@{caster2_dcbonus_level_4}" />
                        </div>
                    </div>
                    <div class="myrow perlevel">
                        <span class="pseudoattr level center">5</span>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_known_level_5" value="0" title="@{caster2_spells_known_level_5}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_perday_level_5" value="0" title="@{caster2_spells_perday_level_5}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_bonus_level_5" value="0" title="@{caster2_spells_bonus_level_5}" />
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_caster2_dcbonus_level_5" class="attr-flag" value="0" />
                            <span name="attr_caster2_dc_level_5" class="pseudoattr" title="@{caster2_dc_level_5}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_dcbonus_level_5" value="0" title="@{caster2_dcbonus_level_5}" />
                        </div>
                    </div>
                    <div class="myrow perlevel">
                        <span class="pseudoattr level center">6</span>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_known_level_6" value="0" title="@{caster2_spells_known_level_6}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_perday_level_6" value="0" title="@{caster2_spells_perday_level_6}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_bonus_level_6" value="0" title="@{caster2_spells_bonus_level_6}" />
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_caster2_dcbonus_level_6" class="attr-flag" value="0" />
                            <span name="attr_caster2_dc_level_6" class="pseudoattr" title="@{caster2_dc_level_6}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_dcbonus_level_6" value="0" title="@{caster2_dcbonus_level_6}" />
                        </div>
                    </div>
                    <div class="myrow perlevel">
                        <span class="pseudoattr level center">7</span>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_known_level_7" value="0" title="@{caster2_spells_known_level_7}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_perday_level_7" value="0" title="@{caster2_spells_perday_level_7}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_bonus_level_7" value="0" title="@{caster2_spells_bonus_level_7}" />
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_caster2_dcbonus_level_7" class="attr-flag" value="0" />
                            <span name="attr_caster2_dc_level_7" class="pseudoattr" title="@{caster2_dc_level_7}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_dcbonus_level_7" value="0" title="@{caster2_dcbonus_level_7}" />
                        </div>
                    </div>
                    <div class="myrow perlevel">
                        <span class="pseudoattr level center">8</span>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_known_level_8" value="0" title="@{caster2_spells_known_level_8}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_perday_level_8" value="0" title="@{caster2_spells_perday_level_8}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_bonus_level_8" value="0" title="@{caster2_spells_bonus_level_8}" />
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_caster2_dcbonus_level_8" class="attr-flag" value="0" />
                            <span name="attr_caster2_dc_level_8" class="pseudoattr" title="@{caster2_dc_level_8}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_dcbonus_level_8" value="0" title="@{caster2_dcbonus_level_8}" />
                        </div>
                    </div>
                    <div class="myrow perlevel">
                        <span class="pseudoattr level center">9</span>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_known_level_9" value="0" title="@{caster2_spells_known_level_9}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_perday_level_9" value="0" title="@{caster2_spells_perday_level_9}" />
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_spells_bonus_level_9" value="0" title="@{caster2_spells_bonus_level_9}" />
                        </div>
                        <div class="boxed greybg">
                            <input type="hidden" name="attr_caster2_dcbonus_level_9" class="attr-flag" value="0" />
                            <span name="attr_caster2_dc_level_9" class="pseudoattr" title="@{caster2_dc_level_9}"></span>
                        </div>
                        <div class="boxed">
                            <input type="number" class="nospin" name="attr_caster2_dcbonus_level_9" value="0" title="@{caster2_dcbonus_level_9}" />
                        </div>
                    </div>
                    <div class="spacer"></div>
                    <span class="lbl" data-i18n="bloodlines-domains-schools:">Bloodlines, Domains, Schools... :</span>
                    <div class="padindent">
                        <div class="autoex">
                            <span name="attr_caster2_spells_notes"></span>
                            <textarea name="attr_caster2_spells_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{caster2_spells_notes}"></textarea>
                        </div>
                    </div>
                </div> <!-- END CASTER CLASS 2 -->
            </div> <!-- END SPELLCASTING -->
        </div> <!-- END misc magic -->
        <div class="col2third spells"> <!-- SPELLS -->
            <div class="myrow center">
                <div class="blacklabel">
                    <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                    <div class="blackbgrd">
                        <span class="big only" data-i18n="spells">Spells</span>
                    </div>
                    <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                </div>
                <div class="myrow"> <!-- LVL 0-1 -->
                    <div class="col1third"> <!-- SPELLS LEVEL 0 -->
                        <div class="myrow">
                            <div class="blacklabel">
                                <div class="blackbgrd weapon">
                                    <span class="big only" data-i18n="level-0">Level 0</span>
                                </div>
                                <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                            </div>
                        </div>
                        <div class="myrow right"> <!-- Prepared count -->
                            <span class="lbl" data-i18n="prepared" data-i18n-title="prepared-times" title="Prepared # times">Prepared</span>
                            <span class="roundblack margindent">1</span>
                            <input type="hidden" class="attr-flag" name="attr_caster1_spells_prepared_flag_0" value="0" />
                            <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster1_spells_prepared_level_0" title="@{caster1_spells_prepared_level_0}"></span>
                            <span class="lbl">/</span>
                            <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster1_spells_total_level_0" title="@{caster1_spells_total_level_0}"></span>
                            <input type="hidden" name="attr_caster2_flag" value="0" class="optional-flag0" /><div class="optional inl margindent">
                                <span class="roundblack margindent">2</span>
                                <input type="hidden" class="attr-flag" name="attr_caster2_spells_prepared_flag_0" value="0" />
                                <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster2_spells_prepared_level_0" title="@{caster2_spells_prepared_level_0}"></span>
                                <span class="lbl">/</span>
                                <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster2_spells_total_level_0" title="@{caster2_spells_total_level_0}"></span>
                            </div>
                        </div> <!-- End Prepared count -->
                        <fieldset class="repeating_spell-0"> <!-- REPEATING 0 LVL SPELL -->
                            <input type="hidden" name="attr_spelllevel" value="0" />
                            <div class="spell right compendium-drop-target">
                                <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                                <div class="myrow right">
                                    <input type="hidden" name="attr_rollcontent" />
                                    <span class="roundblack" name="attr_spellcaster"></span>
                                    <button class="myrol" type="roll" name="SpellRoll" data-i18n-title="cast-spell" title="Cast spell" value="@{rollcontent}"><span class="pseudoattr greybg underlined spelldsp" name="attr_spelldisplay"></span></button>
                                    <input type="hidden" class="attr-flag" name="attr_spellprepared" /><span></span>
                                    <div class="dots">
                                        <input type="radio" name="attr_spellprepared" value="0" checked="checked" data-i18n-title="click-reset" title="Click to reset" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="1" data-i18n-title="prepared-once" title="Prepared once" /><span></span>
                                    </div>
                                </div>
                                <div class="options right">
                                    <input type="hidden" name="attr_spellmulticasters-flag" value="0" class="optional-flag0" /><div class="optional blk">
                                        <span class="lbl" data-18n="spellcaster-class">Spellcaster class</span>
                                        <input type="radio" name="attr_spellcaster" class="pseudocheck" value="1" title="@{repeating_spell-0_$id_spellcaster}" checked="checked" /><span></span>
                                        <span class="lbl">1.</span><span class="lbl" name="attr_spellcaster1_class"></span>
                                        <input type="radio" name="attr_spellcaster" class="pseudocheck" value="2" title="@{repeating_spell-0_$id_spellcaster}" /><span></span>
                                        <span class="lbl">2.</span><span class="lbl" name="attr_spellcaster2_class"></span>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl" data-i18n="name">Name</span>
                                        <input type="text" name="attr_spellname" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_spell-0_$id_spellname}" />
                                        <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                        <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="school:">School:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellschool"></span>
                                            <textarea name="attr_spellschool" accept="School" class="underlined" spellcheck="false" data-i18n-placeholder="spellschool-ph" placeholder="School/Domain/Elemental school..." title="@{repeating_spell-0_$id_spellschool}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="class-level:">Class/Level:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellclasslevel"></span>
                                            <textarea name="attr_spellclasslevel" accept="Level" class="underlined" spellcheck="false" data-i18n-placeholder="spellclasslevel-ph" placeholder="Sorcerer/Wizard 3" title="@{repeating_spell-0_$id_spellclasslevel}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="casting-time:">Casting time:</span>
                                        <input type="text" name="attr_spellcastingtime" accept="Casting Time" class="underlined std" spellcheck="false" data-i18n-placeholder="spellcastingtime-ph" placeholder="1 standard action" title="@{repeating_spell-0_$id_spellcastingtime}" />
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="components:">Components:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellcomponent"></span>
                                            <textarea name="attr_spellcomponent" accept="Components" class="underlined" spellcheck="false" data-i18n-placeholder="spellcomponent-ph" placeholder="V, S, M (a ball of bat guano and sulfur)" title="@{repeating_spell-0_$id_spellcomponent}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="range:">Range:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellrange"></span>
                                            <textarea name="attr_spellrange" accept="Range" class="underlined" spellcheck="false" data-i18n-placeholder="spellrange-ph" placeholder="Long (400 ft. + 40 ft./level)" title="@{repeating_spell-0_$id_spellrange}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="area:">Area:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellarea"></span>
                                            <textarea name="attr_spellarea" accept="Area" class="underlined" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_spell-0_$id_spellarea}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="targets:">Targets:</span>
                                        <div class="autoex std">
                                            <span name="attr_spelltargets"></span>
                                            <textarea name="attr_spelltargets" accept="Target" class="underlined" spellcheck="false" data-i18n-placeholder="spelltargets-ph" placeholder="up to five creatures" title="@{repeating_spell-0_$id_spelltargets}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="effect:">Effect:</span>
                                        <div class="autoex std">
                                            <span name="attr_spelleffect"></span>
                                            <textarea name="attr_spelleffect" accept="Effect" class="underlined" spellcheck="false" data-i18n-placeholder="spelleffect-ph" placeholder="Heal [[1d6+@{caster1_level}]] HP" title="@{repeating_spell-0_$id_spelleffect}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="duration:">Duration:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellduration"></span>
                                            <textarea name="attr_spellduration" accept="Duration" class="underlined" spellcheck="false" data-i18n-placeholder="spellduration-ph" placeholder="Instantaneous" title="@{repeating_spell-0_$id_spellduration}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellsaveflag" value="{{save=1}}" title="@{repeating_spell-0_$id_spellsaveflag}" checked="checked" /><span></span>
                                        <span class="lbl med" data-i18n="saving-throw:">Saving Throw:</span>
                                        <input type="text" name="attr_spellsave" accept="Saving Throw" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_spell-0_$id_spellsave}" />
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="lbl margindent" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                                        <span class="lbl">+</span>
                                        <input type="number" class="nospin underlined sml" name="attr_spelldc_mod" value="0" title="@{repeating_spell-0_$id_spelldc_mod}" />
                                        <span class="lbl">=</span>
                                        <span class="pseudoattr greybg underlined number" name="attr_spelldc" title="@{repeating_spell-0_$id_spelldc}"></span>
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellresistanceflag" value="{{sr=1}}" title="@{repeating_spell-0_$id_spellresistanceflag}" checked="checked" /><span></span>
                                        <span class="lbl med" data-i18n="spell-resistance:">Spell Resistance:</span>
                                        <input type="text" name="attr_spellresistance" accept="Spell Resistance" class="underlined med" spellcheck="false" title="@{repeating_spell-0_$id_spellresistance}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellatkflag" value="{{attack=1}}" title="@{repeating_spell-0_$id_spellatkflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="attack:">Attack:</span>
                                        <select class="underlined type" name="attr_spellatktype" title="@{repeating_spell-0_$id_spellatktype}">
                                            <option value="melee" data-i18n="melee">Melee</option>
                                            <option value="ranged" data-i18n="ranged" selected="selected">Ranged</option>
                                            <option value="cmb" data-i18n="cmb-u">CMB</option>
                                            <option value="strength" data-i18n="str-u">STR</option>
                                            <option value="dexterity" data-i18n="dex-u">DEX</option>
                                            <option value="constitution" data-i18n="con-u">CON</option>
                                            <option value="intelligence" data-i18n="int-u">INT</option>
                                            <option value="wisdom" data-i18n="wis-u">WIS</option>
                                            <option value="charisma" data-i18n="cha-u">CHA</option>
                                            <option value="0">-</option>
                                        </select>
                                        <span class="lbl">+</span>
                                        <input type="text" class="underlined dmgbase" name="attr_spellatkmod" value="0" spellcheck="false" title="@{repeating_spell-0_$id_spellatkmod}" />
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="spacer"></span>
                                        <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                                        <input type="number" class="nospin underlined" name="attr_spellatkcritrange" value="20" title="@{repeating_spell-0_$id_spellatkcritrange}" />
                                        <span class="lbl" data-i18n="multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Multiplier:</span>
                                        <input type="number" class="nospin underlined" name="attr_spelldmgcritmulti" value="2" title="@{repeating_spell-0_$id_spelldmgcritmulti}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{repeating_spell-0_$id_spelldmgflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage:">Damage:</span>
                                        <input type="text" name="attr_spelldmg" class="underlined dmgbase" spellcheck="false" placeholder="1d6" title="@{repeating_spell-0_$id_spelldmg}" />
                                        <span class="lbl right typ" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_spelldmgtype" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_spell-0_$id_spelldmgtype}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_spell-0_$id_spelldmg2flag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                                        <input type="text" name="attr_spelldmg2" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_spell-0_$id_spelldmg2}" />
                                        <span class="lbl right typ" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_spelldmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="force" placeholder="Force" title="@{repeating_spell-0_$id_spelldmg2type}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldescflag" value="{{descflag=[[1]]}}" title="@{repeating_spell-0_$id_spelldescflag}" checked="checked" /><span></span>
                                        <span class="lbl atk" data-i18n="description:">Description:</span>
                                        <div class="autoex">
                                            <span name="attr_spelldesc"></span>
                                            <textarea name="attr_spelldesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_spell-0_$id_spelldesc}"></textarea>
                                        </div>
                                    </div>
                                    <span class="lbl" data-i18n="notes:">Notes:</span>
                                    <div class="autoex">
                                        <span name="attr_notes"></span>
                                        <textarea name="attr_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{repeating_spell-0_$id_notes}"></textarea>
                                    </div>
                                </div>
                            </div>
                        </fieldset> <!-- END REPEATING 0 LVL SPELL -->
                    </div> <!-- END SPELLS LEVEL 0 -->
                    <div class="col1third"> <!-- SPELLS LEVEL 1 -->
                        <div class="myrow">
                            <div class="blacklabel">
                                <div class="blackbgrd weapon">
                                    <span class="big only" data-i18n="level-1">Level 1</span>
                                </div>
                                <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                            </div>
                        </div>
                        <div class="myrow right"> <!-- Prepared count -->
                            <span class="lbl" data-i18n="prepared" data-i18n-title="prepared-times" title="Prepared # times">Prepared</span>
                            <span class="roundblack margindent">1</span>
                            <input type="hidden" class="attr-flag" name="attr_caster1_spells_prepared_flag_1" value="0" />
                            <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster1_spells_prepared_level_1" title="@{caster1_spells_prepared_level_1}"></span>
                            <span class="lbl">/</span>
                            <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster1_spells_total_level_1" title="@{caster1_spells_total_level_1}"></span>
                            <input type="hidden" name="attr_caster2_flag" value="0" class="optional-flag0" /><div class="optional inl margindent">
                                <span class="roundblack margindent">2</span>
                                <input type="hidden" class="attr-flag" name="attr_caster2_spells_prepared_flag_1" value="0" />
                                <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster2_spells_prepared_level_1" title="@{caster2_spells_prepared_level_1}"></span>
                                <span class="lbl">/</span>
                                <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster2_spells_total_level_1" title="@{caster2_spells_total_level_1}"></span>
                            </div>
                        </div> <!-- End Prepared count -->
                        <fieldset class="repeating_spell-1"> <!-- REPEATING 1 LVL SPELL -->
                            <input type="hidden" name="attr_spelllevel" value="1" />
                            <div class="spell right compendium-drop-target">
                                <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                                <div class="myrow right">
                                    <input type="hidden" name="attr_rollcontent" />
                                    <span class="roundblack" name="attr_spellcaster"></span>
                                    <button class="myrol" type="roll" name="SpellRoll" data-i18n-title="cast-spell" title="Cast spell" value="@{rollcontent}"><span class="pseudoattr greybg underlined spelldsp" name="attr_spelldisplay"></span></button>
                                    <input type="hidden" class="attr-flag" name="attr_spellprepared" /><span></span>
                                    <div class="dots">
                                        <input type="radio" name="attr_spellprepared" value="0" checked="checked" data-i18n-title="click-reset" title="Click to reset" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="1" data-i18n-title="prepared-once" title="Prepared once" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="2" data-i18n-title="prepared-twice" title="Prepared twice" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="3" data-i18n-title="prepared-thrice" title="Prepared thrice" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="4" data-i18n-title="prepared-four-times" title="Prepared four times" /><span></span>
                                    </div>
                                </div>
                                <div class="options right">
                                    <input type="hidden" name="attr_spellmulticasters-flag" value="0" class="optional-flag0" /><div class="optional blk">
                                        <span class="lbl" data-18n="spellcaster-class">Spellcaster class</span>
                                        <input type="radio" name="attr_spellcaster" class="pseudocheck" value="1" title="@{repeating_spell-0_$id_spellcaster}" checked="checked" /><span></span>
                                        <span class="lbl">1.</span><span class="lbl" name="attr_spellcaster1_class"></span>
                                        <input type="radio" name="attr_spellcaster" class="pseudocheck" value="2" title="@{repeating_spell-0_$id_spellcaster}" /><span></span>
                                        <span class="lbl">2.</span><span class="lbl" name="attr_spellcaster2_class"></span>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl" data-i18n="name">Name</span>
                                        <input type="text" name="attr_spellname" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_spell-1_$id_spellname}" />
                                        <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                        <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="school:">School:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellschool"></span>
                                            <textarea name="attr_spellschool" accept="School" class="underlined" spellcheck="false" data-i18n-placeholder="spellschool-ph" placeholder="School/Domain/Elemental school..." title="@{repeating_spell-1_$id_spellschool}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="class-level:">Class/Level:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellclasslevel"></span>
                                            <textarea name="attr_spellclasslevel" accept="Level" class="underlined" spellcheck="false" data-i18n-placeholder="spellclasslevel-ph" placeholder="Sorcerer/Wizard 3" title="@{repeating_spell-1_$id_spellclasslevel}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="casting-time:">Casting time:</span>
                                        <input type="text" name="attr_spellcastingtime" accept="Casting Time" class="underlined std" spellcheck="false" data-i18n-placeholder="spellcastingtime-ph" placeholder="1 standard action" title="@{repeating_spell-1_$id_spellcastingtime}" />
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="components:">Components:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellcomponent"></span>
                                            <textarea name="attr_spellcomponent" accept="Components" class="underlined" spellcheck="false" data-i18n-placeholder="spellcomponent-ph" placeholder="V, S, M (a ball of bat guano and sulfur)" title="@{repeating_spell-1_$id_spellcomponent}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="range:">Range:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellrange"></span>
                                            <textarea name="attr_spellrange" accept="Range" class="underlined" spellcheck="false" data-i18n-placeholder="spellrange-ph" placeholder="Long (400 ft. + 40 ft./level)" title="@{repeating_spell-1_$id_spellrange}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="area:">Area:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellarea"></span>
                                            <textarea name="attr_spellarea" accept="Area" class="underlined" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_spell-1_$id_spellarea}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="targets:">Targets:</span>
                                        <div class="autoex std">
                                            <span name="attr_spelltargets"></span>
                                            <textarea name="attr_spelltargets" accept="Target" class="underlined" spellcheck="false" data-i18n-placeholder="spelltargets-ph" placeholder="up to five creatures" title="@{repeating_spell-1_$id_spelltargets}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="effect:">Effect:</span>
                                        <div class="autoex std">
                                            <span name="attr_spelleffect"></span>
                                            <textarea name="attr_spelleffect" accept="Effect" class="underlined" spellcheck="false" data-i18n-placeholder="spelleffect-ph" placeholder="Heal [[1d6+@{caster1_level}]] HP" title="@{repeating_spell-1_$id_spelleffect}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="duration:">Duration:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellduration"></span>
                                            <textarea name="attr_spellduration" accept="Duration" class="underlined" spellcheck="false" data-i18n-placeholder="spellduration-ph" placeholder="Instantaneous" title="@{repeating_spell-1_$id_spellduration}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellsaveflag" value="{{save=1}}" title="@{repeating_spell-1_$id_spellsaveflag}" checked="checked" /><span></span>
                                        <span class="lbl med" data-i18n="saving-throw:">Saving Throw:</span>
                                        <input type="text" name="attr_spellsave" accept="Saving Throw" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_spell-1_$id_spellsave}" />
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="spacer"></span>
                                        <span class="lbl" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                                        <span class="lbl">+</span>
                                        <input type="number" class="nospin underlined sml" name="attr_spelldc_mod" value="0" title="@{repeating_spell-1_$id_spelldc_mod}" />
                                        <span class="lbl">=</span>
                                        <span class="pseudoattr greybg underlined number" name="attr_spelldc" title="@{repeating_spell-1_$id_spelldc}"></span>
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellresistanceflag" value="{{sr=1}}" title="@{repeating_spell-1_$id_spellresistanceflag}" checked="checked" /><span></span>
                                        <span class="lbl med" data-i18n="spell-resistance:">Spell Resistance:</span>
                                        <input type="text" name="attr_spellresistance" accept="Spell Resistance" class="underlined med" spellcheck="false" title="@{repeating_spell-1_$id_spellresistance}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellatkflag" value="{{attack=1}}" title="@{repeating_spell-1_$id_spellatkflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="attack:">Attack:</span>
                                        <select class="underlined type" name="attr_spellatktype" title="@{repeating_spell-1_$id_spellatktype}">
                                            <option value="melee" data-i18n="melee">Melee</option>
                                            <option value="ranged" data-i18n="ranged" selected="selected">Ranged</option>
                                            <option value="cmb" data-i18n="cmb-u">CMB</option>
                                            <option value="strength" data-i18n="str-u">STR</option>
                                            <option value="dexterity" data-i18n="dex-u">DEX</option>
                                            <option value="constitution" data-i18n="con-u">CON</option>
                                            <option value="intelligence" data-i18n="int-u">INT</option>
                                            <option value="wisdom" data-i18n="wis-u">WIS</option>
                                            <option value="charisma" data-i18n="cha-u">CHA</option>
                                            <option value="0">-</option>
                                        </select>
                                        <span class="lbl">+</span>
                                        <input type="text" class="underlined dmgbase" name="attr_spellatkmod" value="0" spellcheck="false" title="@{repeating_spell-1_$id_spellatkmod}" />
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="spacer"></span>
                                        <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                                        <input type="number" class="nospin underlined" name="attr_spellatkcritrange" value="20" title="@{repeating_spell-1_$id_spellatkcritrange}" />
                                        <span class="lbl" data-i18n="multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Multiplier:</span>
                                        <input type="number" class="nospin underlined" name="attr_spelldmgcritmulti" value="2" title="@{repeating_spell-1_$id_spelldmgcritmulti}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{repeating_spell-1_$id_spelldmgflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage:">Damage:</span>
                                        <input type="text" name="attr_spelldmg" class="underlined dmgbase" spellcheck="false" placeholder="1d6" title="@{repeating_spell-1_$id_spelldmg}" />
                                        <span class="lbl right typ" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_spelldmgtype" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_spell-1_$id_spelldmgtype}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_spell-1_$id_spelldmg2flag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                                        <input type="text" name="attr_spelldmg2" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_spell-1_$id_spelldmg2}" />
                                        <span class="lbl right typ" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_spelldmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="force" placeholder="Force" title="@{repeating_spell-1_$id_spelldmg2type}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldescflag" value="{{descflag=[[1]]}}" title="@{repeating_spell-1_$id_spelldescflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="description:">Description:</span>
                                        <div class="autoex">
                                            <span name="attr_spelldesc"></span>
                                            <textarea name="attr_spelldesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_spell-1_$id_spelldesc}"></textarea>
                                        </div>
                                    </div>
                                    <span class="lbl" data-i18n="notes:">Notes:</span>
                                    <div class="autoex">
                                        <span name="attr_notes"></span>
                                        <textarea name="attr_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{repeating_spell-1_$id_notes}"></textarea>
                                    </div>
                                </div>
                            </div>
                        </fieldset> <!-- END REPEATING 1 LVL SPELL -->
                    </div>  <!-- END SPELLS LEVEL 1 -->
                </div> <!-- END LVL 0-1 -->
                <div class="myrow"> <!-- LVL 2-3 -->
                    <div class="col1third"> <!-- SPELLS LEVEL 2 -->
                        <div class="myrow">
                            <div class="blacklabel">
                                <div class="blackbgrd weapon">
                                    <span class="big only" data-i18n="level-2">Level 2</span>
                                </div>
                                <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                            </div>
                        </div>
                        <div class="myrow right"> <!-- Prepared count -->
                            <span class="lbl" data-i18n="prepared" data-i18n-title="prepared-times" title="Prepared # times">Prepared</span>
                            <span class="roundblack margindent">1</span>
                            <input type="hidden" class="attr-flag" name="attr_caster1_spells_prepared_flag_2" value="0" />
                            <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster1_spells_prepared_level_2" title="@{caster1_spells_prepared_level_2}"></span>
                            <span class="lbl">/</span>
                            <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster1_spells_total_level_2" title="@{caster1_spells_total_level_2}"></span>
                            <input type="hidden" name="attr_caster2_flag" value="0" class="optional-flag0" /><div class="optional inl margindent">
                                <span class="roundblack margindent">2</span>
                                <input type="hidden" class="attr-flag" name="attr_caster2_spells_prepared_flag_2" value="0" />
                                <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster2_spells_prepared_level_2" title="@{caster2_spells_prepared_level_2}"></span>
                                <span class="lbl">/</span>
                                <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster2_spells_total_level_2" title="@{caster2_spells_total_level_2}"></span>
                            </div>
                        </div> <!-- End Prepared count -->
                        <fieldset class="repeating_spell-2"> <!-- REPEATING 2 LVL SPELL -->
                            <input type="hidden" name="attr_spelllevel" value="2" />
                            <div class="spell right compendium-drop-target">
                                <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                                <div class="myrow right">
                                    <input type="hidden" name="attr_rollcontent" />
                                    <span class="roundblack" name="attr_spellcaster"></span>
                                    <button class="myrol" type="roll" name="SpellRoll" data-i18n-title="cast-spell" title="Cast spell" value="@{rollcontent}"><span class="pseudoattr greybg underlined spelldsp" name="attr_spelldisplay"></span></button>
                                    <input type="hidden" class="attr-flag" name="attr_spellprepared" /><span></span>
                                    <div class="dots">
                                        <input type="radio" name="attr_spellprepared" value="0" checked="checked" data-i18n-title="click-reset" title="Click to reset" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="1" data-i18n-title="prepared-once" title="Prepared once" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="2" data-i18n-title="prepared-twice" title="Prepared twice" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="3" data-i18n-title="prepared-thrice" title="Prepared thrice" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="4" data-i18n-title="prepared-four-times" title="Prepared four times" /><span></span>
                                    </div>
                                </div>
                                <div class="options right">
                                    <input type="hidden" name="attr_spellmulticasters-flag" value="0" class="optional-flag0" /><div class="optional blk">
                                        <span class="lbl" data-18n="spellcaster-class">Spellcaster class</span>
                                        <input type="radio" name="attr_spellcaster" class="pseudocheck" value="1" title="@{repeating_spell-0_$id_spellcaster}" checked="checked" /><span></span>
                                        <span class="lbl">1.</span><span class="lbl" name="attr_spellcaster1_class"></span>
                                        <input type="radio" name="attr_spellcaster" class="pseudocheck" value="2" title="@{repeating_spell-0_$id_spellcaster}" /><span></span>
                                        <span class="lbl">2.</span><span class="lbl" name="attr_spellcaster2_class"></span>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl" data-i18n="name">Name</span>
                                        <input type="text" name="attr_spellname" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_spell-2_$id_spellname}" />
                                        <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                        <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="school:">School:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellschool"></span>
                                            <textarea name="attr_spellschool" accept="School" class="underlined" spellcheck="false" data-i18n-placeholder="spellschool-ph" placeholder="School/Domain/Elemental school..." title="@{repeating_spell-2_$id_spellschool}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="class-level:">Class/Level:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellclasslevel"></span>
                                            <textarea name="attr_spellclasslevel" accept="Level" class="underlined" spellcheck="false" data-i18n-placeholder="spellclasslevel-ph" placeholder="Sorcerer/Wizard 3" title="@{repeating_spell-2_$id_spellclasslevel}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="casting-time:">Casting time:</span>
                                        <input type="text" name="attr_spellcastingtime" accept="Casting Time" class="underlined std" spellcheck="false" data-i18n-placeholder="spellcastingtime-ph" placeholder="1 standard action" title="@{repeating_spell-2_$id_spellcastingtime}" />
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="components:">Components:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellcomponent"></span>
                                            <textarea name="attr_spellcomponent" accept="Components" class="underlined" spellcheck="false" data-i18n-placeholder="spellcomponent-ph" placeholder="V, S, M (a ball of bat guano and sulfur)" title="@{repeating_spell-2_$id_spellcomponent}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="range:">Range:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellrange"></span>
                                            <textarea name="attr_spellrange" accept="Range" class="underlined" spellcheck="false" data-i18n-placeholder="spellrange-ph" placeholder="Long (400 ft. + 40 ft./level)" title="@{repeating_spell-2_$id_spellrange}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="area:">Area:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellarea"></span>
                                            <textarea name="attr_spellarea" accept="Area" class="underlined" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_spell-2_$id_spellarea}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="targets:">Targets:</span>
                                        <div class="autoex std">
                                            <span name="attr_spelltargets"></span>
                                            <textarea name="attr_spelltargets" accept="Target" class="underlined" spellcheck="false" data-i18n-placeholder="spelltargets-ph" placeholder="up to five creatures" title="@{repeating_spell-2_$id_spelltargets}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="effect:">Effect:</span>
                                        <div class="autoex std">
                                            <span name="attr_spelleffect"></span>
                                            <textarea name="attr_spelleffect" accept="Effect" class="underlined" spellcheck="false" data-i18n-placeholder="spelleffect-ph" placeholder="Heal [[1d6+@{caster1_level}]] HP" title="@{repeating_spell-2_$id_spelleffect}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="duration:">Duration:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellduration"></span>
                                            <textarea name="attr_spellduration" accept="Duration" class="underlined" spellcheck="false" data-i18n-placeholder="spellduration-ph" placeholder="Instantaneous" title="@{repeating_spell-2_$id_spellduration}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellsaveflag" value="{{save=1}}" title="@{repeating_spell-2_$id_spellsaveflag}" checked="checked" /><span></span>
                                        <span class="lbl med" data-i18n="saving-throw:">Saving Throw:</span>
                                        <input type="text" name="attr_spellsave" accept="Saving Throw" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_spell-2_$id_spellsave}" />
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="spacer"></span>
                                        <span class="lbl" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                                        <span class="lbl">+</span>
                                        <input type="number" class="nospin underlined sml" name="attr_spelldc_mod" value="0" title="@{repeating_spell-2_$id_spelldc_mod}" />
                                        <span class="lbl">=</span>
                                        <span class="pseudoattr greybg underlined number" name="attr_spelldc" title="@{repeating_spell-2_$id_spelldc}"></span>
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellresistanceflag" value="{{sr=1}}" title="@{repeating_spell-2_$id_spellresistanceflag}" checked="checked" /><span></span>
                                        <span class="lbl med" data-i18n="spell-resistance:">Spell Resistance:</span>
                                        <input type="text" name="attr_spellresistance" accept="Spell Resistance" class="underlined med" spellcheck="false" title="@{repeating_spell-2_$id_spellresistance}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellatkflag" value="{{attack=1}}" title="@{repeating_spell-2_$id_spellatkflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="attack:">Attack:</span>
                                        <select class="underlined type" name="attr_spellatktype" title="@{repeating_spell-2_$id_spellatktype}">
                                            <option value="melee" data-i18n="melee">Melee</option>
                                            <option value="ranged" data-i18n="ranged" selected="selected">Ranged</option>
                                            <option value="cmb" data-i18n="cmb-u">CMB</option>
                                            <option value="strength" data-i18n="str-u">STR</option>
                                            <option value="dexterity" data-i18n="dex-u">DEX</option>
                                            <option value="constitution" data-i18n="con-u">CON</option>
                                            <option value="intelligence" data-i18n="int-u">INT</option>
                                            <option value="wisdom" data-i18n="wis-u">WIS</option>
                                            <option value="charisma" data-i18n="cha-u">CHA</option>
                                            <option value="0">-</option>
                                        </select>
                                        <span class="lbl">+</span>
                                        <input type="text" class="underlined dmgbase" name="attr_spellatkmod" value="0" spellcheck="false" title="@{repeating_spell-2_$id_spellatkmod}" />
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="spacer"></span>
                                        <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                                        <input type="number" class="nospin underlined" name="attr_spellatkcritrange" value="20" title="@{repeating_spell-2_$id_spellatkcritrange}" />
                                        <span class="lbl" data-i18n="multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Multiplier:</span>
                                        <input type="number" class="nospin underlined" name="attr_spelldmgcritmulti" value="2" title="@{repeating_spell-2_$id_spelldmgcritmulti}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{repeating_spell-2_$id_spelldmgflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage:">Damage:</span>
                                        <input type="text" name="attr_spelldmg" class="underlined dmgbase" spellcheck="false" placeholder="1d6" title="@{repeating_spell-2_$id_spelldmg}" />
                                        <span class="lbl right typ" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_spelldmgtype" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_spell-2_$id_spelldmgtype}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_spell-2_$id_spelldmg2flag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                                        <input type="text" name="attr_spelldmg2" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_spell-2_$id_spelldmg2}" />
                                        <span class="lbl right typ" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_spelldmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="force" placeholder="Force" title="@{repeating_spell-2_$id_spelldmg2type}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldescflag" value="{{descflag=[[1]]}}" title="@{repeating_spell-2_$id_spelldescflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="description:">Description:</span>
                                        <div class="autoex">
                                            <span name="attr_spelldesc"></span>
                                            <textarea name="attr_spelldesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_spell-2_$id_spelldesc}"></textarea>
                                        </div>
                                    </div>
                                    <span class="lbl" data-i18n="notes:">Notes:</span>
                                    <div class="autoex">
                                        <span name="attr_notes"></span>
                                        <textarea name="attr_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{repeating_spell-2_$id_notes}"></textarea>
                                    </div>
                                </div>
                            </div>
                        </fieldset> <!-- END REPEATING 2 LVL SPELL -->
                    </div> <!-- END SPELLS LEVEL 2 -->
                    <div class="col1third"> <!-- SPELLS LEVEL 3 -->
                        <div class="myrow">
                            <div class="blacklabel">
                                <div class="blackbgrd weapon">
                                    <span class="big only" data-i18n="level-3">Level 3</span>
                                </div>
                                <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                            </div>
                        </div>
                        <div class="myrow right"> <!-- Prepared count -->
                            <span class="lbl" data-i18n="prepared" data-i18n-title="prepared-times" title="Prepared # times">Prepared</span>
                            <span class="roundblack margindent">1</span>
                            <input type="hidden" class="attr-flag" name="attr_caster1_spells_prepared_flag_3" value="0" />
                            <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster1_spells_prepared_level_3" title="@{caster1_spells_prepared_level_3}"></span>
                            <span class="lbl">/</span>
                            <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster1_spells_total_level_3" title="@{caster1_spells_total_level_3}"></span>
                            <input type="hidden" name="attr_caster2_flag" value="0" class="optional-flag0" /><div class="optional inl margindent">
                                <span class="roundblack margindent">2</span>
                                <input type="hidden" class="attr-flag" name="attr_caster2_spells_prepared_flag_3" value="0" />
                                <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster2_spells_prepared_level_3" title="@{caster2_spells_prepared_level_3}"></span>
                                <span class="lbl">/</span>
                                <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster2_spells_total_level_3" title="@{caster2_spells_total_level_3}"></span>
                            </div>
                        </div> <!-- End Prepared count -->
                        <fieldset class="repeating_spell-3"> <!-- REPEATING 3 LVL SPELL -->
                            <input type="hidden" name="attr_spelllevel" value="3" />
                            <div class="spell right compendium-drop-target">
                                <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                                <div class="myrow right">
                                    <input type="hidden" name="attr_rollcontent" />
                                    <span class="roundblack" name="attr_spellcaster"></span>
                                    <button class="myrol" type="roll" name="SpellRoll" data-i18n-title="cast-spell" title="Cast spell" value="@{rollcontent}"><span class="pseudoattr greybg underlined spelldsp" name="attr_spelldisplay"></span></button>
                                    <input type="hidden" class="attr-flag" name="attr_spellprepared" /><span></span>
                                    <div class="dots">
                                        <input type="radio" name="attr_spellprepared" value="0" checked="checked" data-i18n-title="click-reset" title="Click to reset" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="1" data-i18n-title="prepared-once" title="Prepared once" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="2" data-i18n-title="prepared-twice" title="Prepared twice" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="3" data-i18n-title="prepared-thrice" title="Prepared thrice" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="4" data-i18n-title="prepared-four-times" title="Prepared four times" /><span></span>
                                    </div>
                                </div>
                                <div class="options right">
                                    <input type="hidden" name="attr_spellmulticasters-flag" value="0" class="optional-flag0" /><div class="optional blk">
                                        <span class="lbl" data-18n="spellcaster-class">Spellcaster class</span>
                                        <input type="radio" name="attr_spellcaster" class="pseudocheck" value="1" title="@{repeating_spell-0_$id_spellcaster}" checked="checked" /><span></span>
                                        <span class="lbl">1.</span><span class="lbl" name="attr_spellcaster1_class"></span>
                                        <input type="radio" name="attr_spellcaster" class="pseudocheck" value="2" title="@{repeating_spell-0_$id_spellcaster}" /><span></span>
                                        <span class="lbl">2.</span><span class="lbl" name="attr_spellcaster2_class"></span>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl" data-i18n="name">Name</span>
                                        <input type="text" name="attr_spellname" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_spell-3_$id_spellname}" />
                                        <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                        <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="school:">School:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellschool"></span>
                                            <textarea name="attr_spellschool" accept="School" class="underlined" spellcheck="false" data-i18n-placeholder="spellschool-ph" placeholder="School/Domain/Elemental school..." title="@{repeating_spell-3_$id_spellschool}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="class-level:">Class/Level:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellclasslevel"></span>
                                            <textarea name="attr_spellclasslevel" accept="Level" class="underlined" spellcheck="false" data-i18n-placeholder="spellclasslevel-ph" placeholder="Sorcerer/Wizard 3" title="@{repeating_spell-3_$id_spellclasslevel}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="casting-time:">Casting time:</span>
                                        <input type="text" name="attr_spellcastingtime" accept="Casting Time" class="underlined std" spellcheck="false" data-i18n-placeholder="spellcastingtime-ph" placeholder="1 standard action" title="@{repeating_spell-3_$id_spellcastingtime}" />
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="components:">Components:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellcomponent"></span>
                                            <textarea name="attr_spellcomponent" accept="Components" class="underlined" spellcheck="false" data-i18n-placeholder="spellcomponent-ph" placeholder="V, S, M (a ball of bat guano and sulfur)" title="@{repeating_spell-3_$id_spellcomponent}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="range:">Range:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellrange"></span>
                                            <textarea name="attr_spellrange" accept="Range" class="underlined" spellcheck="false" data-i18n-placeholder="spellrange-ph" placeholder="Long (400 ft. + 40 ft./level)" title="@{repeating_spell-3_$id_spellrange}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="area:">Area:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellarea"></span>
                                            <textarea name="attr_spellarea" accept="Area" class="underlined" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_spell-3_$id_spellarea}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="targets:">Targets:</span>
                                        <div class="autoex std">
                                            <span name="attr_spelltargets"></span>
                                            <textarea name="attr_spelltargets" accept="Target" class="underlined" spellcheck="false" data-i18n-placeholder="spelltargets-ph" placeholder="up to five creatures" title="@{repeating_spell-3_$id_spelltargets}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="effect:">Effect:</span>
                                        <div class="autoex std">
                                            <span name="attr_spelleffect"></span>
                                            <textarea name="attr_spelleffect" accept="Effect" class="underlined" spellcheck="false" data-i18n-placeholder="spelleffect-ph" placeholder="Heal [[1d6+@{caster1_level}]] HP" title="@{repeating_spell-3_$id_spelleffect}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="duration:">Duration:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellduration"></span>
                                            <textarea name="attr_spellduration" accept="Duration" class="underlined" spellcheck="false" data-i18n-placeholder="spellduration-ph" placeholder="Instantaneous" title="@{repeating_spell-3_$id_spellduration}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellsaveflag" value="{{save=1}}" title="@{repeating_spell-3_$id_spellsaveflag}" checked="checked" /><span></span>
                                        <span class="lbl med" data-i18n="saving-throw:">Saving Throw:</span>
                                        <input type="text" name="attr_spellsave" accept="Saving Throw" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_spell-3_$id_spellsave}" />
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="spacer"></span>
                                        <span class="lbl" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                                        <span class="lbl">+</span>
                                        <input type="number" class="nospin underlined sml" name="attr_spelldc_mod" value="0" title="@{repeating_spell-3_$id_spelldc_mod}" />
                                        <span class="lbl">=</span>
                                        <span class="pseudoattr greybg underlined number" name="attr_spelldc" title="@{repeating_spell-3_$id_spelldc}"></span>
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellresistanceflag" value="{{sr=1}}" title="@{repeating_spell-3_$id_spellresistanceflag}" checked="checked" /><span></span>
                                        <span class="lbl med" data-i18n="spell-resistance:">Spell Resistance:</span>
                                        <input type="text" name="attr_spellresistance" accept="Spell Resistance" class="underlined med" spellcheck="false" title="@{repeating_spell-3_$id_spellresistance}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellatkflag" value="{{attack=1}}" title="@{repeating_spell-3_$id_spellatkflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="attack:">Attack:</span>
                                        <select class="underlined type" name="attr_spellatktype" title="@{repeating_spell-3_$id_spellatktype}">
                                            <option value="melee" data-i18n="melee">Melee</option>
                                            <option value="ranged" data-i18n="ranged" selected="selected">Ranged</option>
                                            <option value="cmb" data-i18n="cmb-u">CMB</option>
                                            <option value="strength" data-i18n="str-u">STR</option>
                                            <option value="dexterity" data-i18n="dex-u">DEX</option>
                                            <option value="constitution" data-i18n="con-u">CON</option>
                                            <option value="intelligence" data-i18n="int-u">INT</option>
                                            <option value="wisdom" data-i18n="wis-u">WIS</option>
                                            <option value="charisma" data-i18n="cha-u">CHA</option>
                                            <option value="0">-</option>
                                        </select>
                                        <span class="lbl">+</span>
                                        <input type="text" class="underlined dmgbase" name="attr_spellatkmod" value="0" spellcheck="false" title="@{repeating_spell-3_$id_spellatkmod}" />
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="spacer"></span>
                                        <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                                        <input type="number" class="nospin underlined" name="attr_spellatkcritrange" value="20" title="@{repeating_spell-3_$id_spellatkcritrange}" />
                                        <span class="lbl" data-i18n="multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Multiplier:</span>
                                        <input type="number" class="nospin underlined" name="attr_spelldmgcritmulti" value="2" title="@{repeating_spell-3_$id_spelldmgcritmulti}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{repeating_spell-3_$id_spelldmgflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage:">Damage:</span>
                                        <input type="text" name="attr_spelldmg" class="underlined dmgbase" spellcheck="false" placeholder="1d6" title="@{repeating_spell-3_$id_spelldmg}" />
                                        <span class="lbl right typ" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_spelldmgtype" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_spell-3_$id_spelldmgtype}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_spell-3_$id_spelldmg2flag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                                        <input type="text" name="attr_spelldmg2" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_spell-3_$id_spelldmg2}" />
                                        <span class="lbl right typ" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_spelldmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="force" placeholder="Force" title="@{repeating_spell-3_$id_spelldmg2type}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldescflag" value="{{descflag=[[1]]}}" title="@{repeating_spell-3_$id_spelldescflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="description:">Description:</span>
                                        <div class="autoex">
                                            <span name="attr_spelldesc"></span>
                                            <textarea name="attr_spelldesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_spell-3_$id_spelldesc}"></textarea>
                                        </div>
                                    </div>
                                    <span class="lbl" data-i18n="notes:">Notes:</span>
                                    <div class="autoex">
                                        <span name="attr_notes"></span>
                                        <textarea name="attr_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{repeating_spell-3_$id_notes}"></textarea>
                                    </div>
                                </div>
                            </div>
                        </fieldset> <!-- END REPEATING 3 LVL SPELL -->
                    </div> <!-- END SPELLS LEVEL 3 -->
                </div> <!-- END LVL 2-3 -->
                <div class="myrow"> <!-- LVL 4-5 -->
                    <div class="col1third"> <!-- SPELLS LEVEL 4 -->
                        <div class="myrow">
                            <div class="blacklabel">
                                <div class="blackbgrd weapon">
                                    <span class="big only" data-i18n="level-4">Level 4</span>
                                </div>
                                <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                            </div>
                        </div>
                        <div class="myrow right"> <!-- Prepared count -->
                            <span class="lbl" data-i18n="prepared" data-i18n-title="prepared-times" title="Prepared # times">Prepared</span>
                            <span class="roundblack margindent">1</span>
                            <input type="hidden" class="attr-flag" name="attr_caster1_spells_prepared_flag_4" value="0" />
                            <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster1_spells_prepared_level_4" title="@{caster1_spells_prepared_level_4}"></span>
                            <span class="lbl">/</span>
                            <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster1_spells_total_level_4" title="@{caster1_spells_total_level_4}"></span>
                            <input type="hidden" name="attr_caster2_flag" value="0" class="optional-flag0" /><div class="optional inl margindent">
                                <span class="roundblack margindent">2</span>
                                <input type="hidden" class="attr-flag" name="attr_caster2_spells_prepared_flag_4" value="0" />
                                <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster2_spells_prepared_level_4" title="@{caster2_spells_prepared_level_4}"></span>
                                <span class="lbl">/</span>
                                <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster2_spells_total_level_4" title="@{caster2_spells_total_level_4}"></span>
                            </div>
                        </div> <!-- End Prepared count -->
                        <fieldset class="repeating_spell-4"> <!-- REPEATING 4 LVL SPELL -->
                            <input type="hidden" name="attr_spelllevel" value="4" />
                            <div class="spell right compendium-drop-target">
                                <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                                <div class="myrow right">
                                    <input type="hidden" name="attr_rollcontent" />
                                    <span class="roundblack" name="attr_spellcaster"></span>
                                    <button class="myrol" type="roll" name="SpellRoll" data-i18n-title="cast-spell" title="Cast spell" value="@{rollcontent}"><span class="pseudoattr greybg underlined spelldsp" name="attr_spelldisplay"></span></button>
                                    <input type="hidden" class="attr-flag" name="attr_spellprepared" /><span></span>
                                    <div class="dots">
                                        <input type="radio" name="attr_spellprepared" value="0" checked="checked" data-i18n-title="click-reset" title="Click to reset" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="1" data-i18n-title="prepared-once" title="Prepared once" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="2" data-i18n-title="prepared-twice" title="Prepared twice" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="3" data-i18n-title="prepared-thrice" title="Prepared thrice" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="4" data-i18n-title="prepared-four-times" title="Prepared four times" /><span></span>
                                    </div>
                                </div>
                                <div class="options right">
                                    <input type="hidden" name="attr_spellmulticasters-flag" value="0" class="optional-flag0" /><div class="optional blk">
                                        <span class="lbl" data-18n="spellcaster-class">Spellcaster class</span>
                                        <input type="radio" name="attr_spellcaster" class="pseudocheck" value="1" title="@{repeating_spell-0_$id_spellcaster}" checked="checked" /><span></span>
                                        <span class="lbl">1.</span><span class="lbl" name="attr_spellcaster1_class"></span>
                                        <input type="radio" name="attr_spellcaster" class="pseudocheck" value="2" title="@{repeating_spell-0_$id_spellcaster}" /><span></span>
                                        <span class="lbl">2.</span><span class="lbl" name="attr_spellcaster2_class"></span>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl" data-i18n="name">Name</span>
                                        <input type="text" name="attr_spellname" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_spell-4_$id_spellname}" />
                                        <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                        <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="school:">School:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellschool"></span>
                                            <textarea name="attr_spellschool" accept="School" class="underlined" spellcheck="false" data-i18n-placeholder="spellschool-ph" placeholder="School/Domain/Elemental school..." title="@{repeating_spell-4_$id_spellschool}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="class-level:">Class/Level:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellclasslevel"></span>
                                            <textarea name="attr_spellclasslevel" accept="Level" class="underlined" spellcheck="false" data-i18n-placeholder="spellclasslevel-ph" placeholder="Sorcerer/Wizard 3" title="@{repeating_spell-4_$id_spellclasslevel}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="casting-time:">Casting time:</span>
                                        <input type="text" name="attr_spellcastingtime" accept="Casting Time" class="underlined std" spellcheck="false" data-i18n-placeholder="spellcastingtime-ph" placeholder="1 standard action" title="@{repeating_spell-4_$id_spellcastingtime}" />
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="components:">Components:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellcomponent"></span>
                                            <textarea name="attr_spellcomponent" accept="Components" class="underlined" spellcheck="false" data-i18n-placeholder="spellcomponent-ph" placeholder="V, S, M (a ball of bat guano and sulfur)" title="@{repeating_spell-4_$id_spellcomponent}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="range:">Range:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellrange"></span>
                                            <textarea name="attr_spellrange" accept="Range" class="underlined" spellcheck="false" data-i18n-placeholder="spellrange-ph" placeholder="Long (400 ft. + 40 ft./level)" title="@{repeating_spell-4_$id_spellrange}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="area:">Area:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellarea"></span>
                                            <textarea name="attr_spellarea" accept="Area" class="underlined" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_spell-4_$id_spellarea}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="targets:">Targets:</span>
                                        <div class="autoex std">
                                            <span name="attr_spelltargets"></span>
                                            <textarea name="attr_spelltargets" accept="Target" class="underlined" spellcheck="false" data-i18n-placeholder="spelltargets-ph" placeholder="up to five creatures" title="@{repeating_spell-4_$id_spelltargets}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="effect:">Effect:</span>
                                        <div class="autoex std">
                                            <span name="attr_spelleffect"></span>
                                            <textarea name="attr_spelleffect" accept="Effect" class="underlined" spellcheck="false" data-i18n-placeholder="spelleffect-ph" placeholder="Heal [[1d6+@{caster1_level}]] HP" title="@{repeating_spell-4_$id_spelleffect}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="duration:">Duration:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellduration"></span>
                                            <textarea name="attr_spellduration" accept="Duration" class="underlined" spellcheck="false" data-i18n-placeholder="spellduration-ph" placeholder="Instantaneous" title="@{repeating_spell-4_$id_spellduration}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellsaveflag" value="{{save=1}}" title="@{repeating_spell-4_$id_spellsaveflag}" checked="checked" /><span></span>
                                        <span class="lbl med" data-i18n="saving-throw:">Saving Throw:</span>
                                        <input type="text" name="attr_spellsave" accept="Saving Throw" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_spell-4_$id_spellsave}" />
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="spacer"></span>
                                        <span class="lbl" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                                        <span class="lbl">+</span>
                                        <input type="number" class="nospin underlined sml" name="attr_spelldc_mod" value="0" title="@{repeating_spell-4_$id_spelldc_mod}" />
                                        <span class="lbl">=</span>
                                        <span class="pseudoattr greybg underlined number" name="attr_spelldc" title="@{repeating_spell-4_$id_spelldc}"></span>
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellresistanceflag" value="{{sr=1}}" title="@{repeating_spell-4_$id_spellresistanceflag}" checked="checked" /><span></span>
                                        <span class="lbl med" data-i18n="spell-resistance:">Spell Resistance:</span>
                                        <input type="text" name="attr_spellresistance" accept="Spell Resistance" class="underlined med" spellcheck="false" title="@{repeating_spell-4_$id_spellresistance}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellatkflag" value="{{attack=1}}" title="@{repeating_spell-4_$id_spellatkflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="attack:">Attack:</span>
                                        <select class="underlined type" name="attr_spellatktype" title="@{repeating_spell-4_$id_spellatktype}">
                                            <option value="melee" data-i18n="melee">Melee</option>
                                            <option value="ranged" data-i18n="ranged" selected="selected">Ranged</option>
                                            <option value="cmb" data-i18n="cmb-u">CMB</option>
                                            <option value="strength" data-i18n="str-u">STR</option>
                                            <option value="dexterity" data-i18n="dex-u">DEX</option>
                                            <option value="constitution" data-i18n="con-u">CON</option>
                                            <option value="intelligence" data-i18n="int-u">INT</option>
                                            <option value="wisdom" data-i18n="wis-u">WIS</option>
                                            <option value="charisma" data-i18n="cha-u">CHA</option>
                                            <option value="0">-</option>
                                        </select>
                                        <span class="lbl">+</span>
                                        <input type="text" class="underlined dmgbase" name="attr_spellatkmod" value="0" spellcheck="false" title="@{repeating_spell-4_$id_spellatkmod}" />
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="spacer"></span>
                                        <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                                        <input type="number" class="nospin underlined" name="attr_spellatkcritrange" value="20" title="@{repeating_spell-4_$id_spellatkcritrange}" />
                                        <span class="lbl" data-i18n="multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Multiplier:</span>
                                        <input type="number" class="nospin underlined" name="attr_spelldmgcritmulti" value="2" title="@{repeating_spell-4_$id_spelldmgcritmulti}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{repeating_spell-4_$id_spelldmgflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage:">Damage:</span>
                                        <input type="text" name="attr_spelldmg" class="underlined dmgbase" spellcheck="false" placeholder="1d6" title="@{repeating_spell-4_$id_spelldmg}" />
                                        <span class="lbl right typ" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_spelldmgtype" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_spell-4_$id_spelldmgtype}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_spell-4_$id_spelldmg2flag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                                        <input type="text" name="attr_spelldmg2" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_spell-4_$id_spelldmg2}" />
                                        <span class="lbl right typ" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_spelldmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="force" placeholder="Force" title="@{repeating_spell-4_$id_spelldmg2type}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldescflag" value="{{descflag=[[1]]}}" title="@{repeating_spell-4_$id_spelldescflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="description:">Description:</span>
                                        <div class="autoex">
                                            <span name="attr_spelldesc"></span>
                                            <textarea name="attr_spelldesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_spell-4_$id_spelldesc}"></textarea>
                                        </div>
                                    </div>
                                    <span class="lbl" data-i18n="notes:">Notes:</span>
                                    <div class="autoex">
                                        <span name="attr_notes"></span>
                                        <textarea name="attr_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{repeating_spell-4_$id_notes}"></textarea>
                                    </div>
                                </div>
                            </div>
                        </fieldset> <!-- END REPEATING 2 LVL SPELL -->
                    </div> <!-- END SPELLS LEVEL 4 -->
                    <div class="col1third"> <!-- SPELLS LEVEL 5 -->
                        <div class="myrow">
                            <div class="blacklabel">
                                <div class="blackbgrd weapon">
                                    <span class="big only" data-i18n="level-5">Level 5</span>
                                </div>
                                <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                            </div>
                        </div>
                        <div class="myrow right"> <!-- Prepared count -->
                            <span class="lbl" data-i18n="prepared" data-i18n-title="prepared-times" title="Prepared # times">Prepared</span>
                            <span class="roundblack margindent">1</span>
                            <input type="hidden" class="attr-flag" name="attr_caster1_spells_prepared_flag_5" value="0" />
                            <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster1_spells_prepared_level_5" title="@{caster1_spells_prepared_level_5}"></span>
                            <span class="lbl">/</span>
                            <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster1_spells_total_level_5" title="@{caster1_spells_total_level_5}"></span>
                            <input type="hidden" name="attr_caster2_flag" value="0" class="optional-flag0" /><div class="optional inl margindent">
                                <span class="roundblack margindent">2</span>
                                <input type="hidden" class="attr-flag" name="attr_caster2_spells_prepared_flag_5" value="0" />
                                <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster2_spells_prepared_level_5" title="@{caster2_spells_prepared_level_5}"></span>
                                <span class="lbl">/</span>
                                <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster2_spells_total_level_5" title="@{caster2_spells_total_level_5}"></span>
                            </div>
                        </div> <!-- End Prepared count -->
                        <fieldset class="repeating_spell-5"> <!-- REPEATING 5 LVL SPELL -->
                            <input type="hidden" name="attr_spelllevel" value="5" />
                            <div class="spell right compendium-drop-target">
                                <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                                <div class="myrow right">
                                    <input type="hidden" name="attr_rollcontent" />
                                    <span class="roundblack" name="attr_spellcaster"></span>
                                    <button class="myrol" type="roll" name="SpellRoll" data-i18n-title="cast-spell" title="Cast spell" value="@{rollcontent}"><span class="pseudoattr greybg underlined spelldsp" name="attr_spelldisplay"></span></button>
                                    <input type="hidden" class="attr-flag" name="attr_spellprepared" /><span></span>
                                    <div class="dots">
                                        <input type="radio" name="attr_spellprepared" value="0" checked="checked" data-i18n-title="click-reset" title="Click to reset" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="1" data-i18n-title="prepared-once" title="Prepared once" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="2" data-i18n-title="prepared-twice" title="Prepared twice" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="3" data-i18n-title="prepared-thrice" title="Prepared thrice" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="4" data-i18n-title="prepared-four-times" title="Prepared four times" /><span></span>
                                    </div>
                                </div>
                                <div class="options right">
                                    <input type="hidden" name="attr_spellmulticasters-flag" value="0" class="optional-flag0" /><div class="optional blk">
                                        <span class="lbl" data-18n="spellcaster-class">Spellcaster class</span>
                                        <input type="radio" name="attr_spellcaster" class="pseudocheck" value="1" title="@{repeating_spell-0_$id_spellcaster}" checked="checked" /><span></span>
                                        <span class="lbl">1.</span><span class="lbl" name="attr_spellcaster1_class"></span>
                                        <input type="radio" name="attr_spellcaster" class="pseudocheck" value="2" title="@{repeating_spell-0_$id_spellcaster}" /><span></span>
                                        <span class="lbl">2.</span><span class="lbl" name="attr_spellcaster2_class"></span>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl" data-i18n="name">Name</span>
                                        <input type="text" name="attr_spellname" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_spell-5_$id_spellname}" />
                                        <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                        <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="school:">School:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellschool"></span>
                                            <textarea name="attr_spellschool" accept="School" class="underlined" spellcheck="false" data-i18n-placeholder="spellschool-ph" placeholder="School/Domain/Elemental school..." title="@{repeating_spell-5_$id_spellschool}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="class-level:">Class/Level:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellclasslevel"></span>
                                            <textarea name="attr_spellclasslevel" accept="Level" class="underlined" spellcheck="false" data-i18n-placeholder="spellclasslevel-ph" placeholder="Sorcerer/Wizard 3" title="@{repeating_spell-5_$id_spellclasslevel}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="casting-time:">Casting time:</span>
                                        <input type="text" name="attr_spellcastingtime" accept="Casting Time" class="underlined std" spellcheck="false" data-i18n-placeholder="spellcastingtime-ph" placeholder="1 standard action" title="@{repeating_spell-5_$id_spellcastingtime}" />
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="components:">Components:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellcomponent"></span>
                                            <textarea name="attr_spellcomponent" accept="Components" class="underlined" spellcheck="false" data-i18n-placeholder="spellcomponent-ph" placeholder="V, S, M (a ball of bat guano and sulfur)" title="@{repeating_spell-5_$id_spellcomponent}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="range:">Range:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellrange"></span>
                                            <textarea name="attr_spellrange" accept="Range" class="underlined" spellcheck="false" data-i18n-placeholder="spellrange-ph" placeholder="Long (400 ft. + 40 ft./level)" title="@{repeating_spell-5_$id_spellrange}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="area:">Area:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellarea"></span>
                                            <textarea name="attr_spellarea" accept="Area" class="underlined" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_spell-5_$id_spellarea}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="targets:">Targets:</span>
                                        <div class="autoex std">
                                            <span name="attr_spelltargets"></span>
                                            <textarea name="attr_spelltargets" accept="Target" class="underlined" spellcheck="false" data-i18n-placeholder="spelltargets-ph" placeholder="up to five creatures" title="@{repeating_spell-5_$id_spelltargets}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="effect:">Effect:</span>
                                        <div class="autoex std">
                                            <span name="attr_spelleffect"></span>
                                            <textarea name="attr_spelleffect" accept="Effect" class="underlined" spellcheck="false" data-i18n-placeholder="spelleffect-ph" placeholder="Heal [[1d6+@{caster1_level}]] HP" title="@{repeating_spell-5_$id_spelleffect}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="duration:">Duration:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellduration"></span>
                                            <textarea name="attr_spellduration" accept="Duration" class="underlined" spellcheck="false" data-i18n-placeholder="spellduration-ph" placeholder="Instantaneous" title="@{repeating_spell-5_$id_spellduration}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellsaveflag" value="{{save=1}}" title="@{repeating_spell-5_$id_spellsaveflag}" checked="checked" /><span></span>
                                        <span class="lbl med" data-i18n="saving-throw:">Saving Throw:</span>
                                        <input type="text" name="attr_spellsave" accept="Saving Throw" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_spell-5_$id_spellsave}" />
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="spacer"></span>
                                        <span class="lbl" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                                        <span class="lbl">+</span>
                                        <input type="number" class="nospin underlined sml" name="attr_spelldc_mod" value="0" title="@{repeating_spell-5_$id_spelldc_mod}" />
                                        <span class="lbl">=</span>
                                        <span class="pseudoattr greybg underlined number" name="attr_spelldc" title="@{repeating_spell-5_$id_spelldc}"></span>
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellresistanceflag" value="{{sr=1}}" title="@{repeating_spell-5_$id_spellresistanceflag}" checked="checked" /><span></span>
                                        <span class="lbl med" data-i18n="spell-resistance:">Spell Resistance:</span>
                                        <input type="text" name="attr_spellresistance" accept="Spell Resistance" class="underlined med" spellcheck="false" title="@{repeating_spell-5_$id_spellresistance}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellatkflag" value="{{attack=1}}" title="@{repeating_spell-5_$id_spellatkflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="attack:">Attack:</span>
                                        <select class="underlined type" name="attr_spellatktype" title="@{repeating_spell-5_$id_spellatktype}">
                                            <option value="melee" data-i18n="melee">Melee</option>
                                            <option value="ranged" data-i18n="ranged" selected="selected">Ranged</option>
                                            <option value="cmb" data-i18n="cmb-u">CMB</option>
                                            <option value="strength" data-i18n="str-u">STR</option>
                                            <option value="dexterity" data-i18n="dex-u">DEX</option>
                                            <option value="constitution" data-i18n="con-u">CON</option>
                                            <option value="intelligence" data-i18n="int-u">INT</option>
                                            <option value="wisdom" data-i18n="wis-u">WIS</option>
                                            <option value="charisma" data-i18n="cha-u">CHA</option>
                                            <option value="0">-</option>
                                        </select>
                                        <span class="lbl">+</span>
                                        <input type="text" class="underlined dmgbase" name="attr_spellatkmod" value="0" spellcheck="false" title="@{repeating_spell-5_$id_spellatkmod}" />
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="spacer"></span>
                                        <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                                        <input type="number" class="nospin underlined" name="attr_spellatkcritrange" value="20" title="@{repeating_spell-5_$id_spellatkcritrange}" />
                                        <span class="lbl" data-i18n="multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Multiplier:</span>
                                        <input type="number" class="nospin underlined" name="attr_spelldmgcritmulti" value="2" title="@{repeating_spell-5_$id_spelldmgcritmulti}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{repeating_spell-5_$id_spelldmgflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage:">Damage:</span>
                                        <input type="text" name="attr_spelldmg" class="underlined dmgbase" spellcheck="false" placeholder="1d6" title="@{repeating_spell-5_$id_spelldmg}" />
                                        <span class="lbl right typ" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_spelldmgtype" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_spell-5_$id_spelldmgtype}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_spell-5_$id_spelldmg2flag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                                        <input type="text" name="attr_spelldmg2" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_spell-5_$id_spelldmg2}" />
                                        <span class="lbl right typ" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_spelldmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="force" placeholder="Force" title="@{repeating_spell-5_$id_spelldmg2type}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldescflag" value="{{descflag=[[1]]}}" title="@{repeating_spell-5_$id_spelldescflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="description:">Description:</span>
                                        <div class="autoex">
                                            <span name="attr_spelldesc"></span>
                                            <textarea name="attr_spelldesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_spell-5_$id_spelldesc}"></textarea>
                                        </div>
                                    </div>
                                    <span class="lbl" data-i18n="notes:">Notes:</span>
                                    <div class="autoex">
                                        <span name="attr_notes"></span>
                                        <textarea name="attr_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{repeating_spell-5_$id_notes}"></textarea>
                                    </div>
                                </div>
                            </div>
                        </fieldset> <!-- END REPEATING 1 LVL SPELL -->
                    </div> <!-- END SPELLS LEVEL 5 -->
                </div> <!-- END LVL 4-5 -->
                <div class="myrow"> <!-- LVL 6-7 -->
                    <div class="col1third"> <!-- SPELLS LEVEL 6 -->
                        <div class="myrow">
                            <div class="blacklabel">
                                <div class="blackbgrd weapon">
                                    <span class="big only" data-i18n="level-6">Level 6</span>
                                </div>
                                <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                            </div>
                        </div>
                        <div class="myrow right"> <!-- Prepared count -->
                            <span class="lbl" data-i18n="prepared" data-i18n-title="prepared-times" title="Prepared # times">Prepared</span>
                            <span class="roundblack margindent">1</span>
                            <input type="hidden" class="attr-flag" name="attr_caster1_spells_prepared_flag_6" value="0" />
                            <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster1_spells_prepared_level_6" title="@{caster1_spells_prepared_level_6}"></span>
                            <span class="lbl">/</span>
                            <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster1_spells_total_level_6" title="@{caster1_spells_total_level_6}"></span>
                            <input type="hidden" name="attr_caster2_flag" value="0" class="optional-flag0" /><div class="optional inl margindent">
                                <span class="roundblack margindent">2</span>
                                <input type="hidden" class="attr-flag" name="attr_caster2_spells_prepared_flag_6" value="0" />
                                <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster2_spells_prepared_level_6" title="@{caster2_spells_prepared_level_6}"></span>
                                <span class="lbl">/</span>
                                <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster2_spells_total_level_6" title="@{caster2_spells_total_level_6}"></span>
                            </div>
                        </div> <!-- End Prepared count -->
                        <fieldset class="repeating_spell-6"> <!-- REPEATING 6 LVL SPELL -->
                            <input type="hidden" name="attr_spelllevel" value="6" />
                            <div class="spell right compendium-drop-target">
                                <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                                <div class="myrow right">
                                    <input type="hidden" name="attr_rollcontent" />
                                    <span class="roundblack" name="attr_spellcaster"></span>
                                    <button class="myrol" type="roll" name="SpellRoll" data-i18n-title="cast-spell" title="Cast spell" value="@{rollcontent}"><span class="pseudoattr greybg underlined spelldsp" name="attr_spelldisplay"></span></button>
                                    <input type="hidden" class="attr-flag" name="attr_spellprepared" /><span></span>
                                    <div class="dots">
                                        <input type="radio" name="attr_spellprepared" value="0" checked="checked" data-i18n-title="click-reset" title="Click to reset" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="1" data-i18n-title="prepared-once" title="Prepared once" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="2" data-i18n-title="prepared-twice" title="Prepared twice" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="3" data-i18n-title="prepared-thrice" title="Prepared thrice" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="4" data-i18n-title="prepared-four-times" title="Prepared four times" /><span></span>
                                    </div>
                                </div>
                                <div class="options right">
                                    <input type="hidden" name="attr_spellmulticasters-flag" value="0" class="optional-flag0" /><div class="optional blk">
                                        <span class="lbl" data-18n="spellcaster-class">Spellcaster class</span>
                                        <input type="radio" name="attr_spellcaster" class="pseudocheck" value="1" title="@{repeating_spell-0_$id_spellcaster}" checked="checked" /><span></span>
                                        <span class="lbl">1.</span><span class="lbl" name="attr_spellcaster1_class"></span>
                                        <input type="radio" name="attr_spellcaster" class="pseudocheck" value="2" title="@{repeating_spell-0_$id_spellcaster}" /><span></span>
                                        <span class="lbl">2.</span><span class="lbl" name="attr_spellcaster2_class"></span>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl" data-i18n="name">Name</span>
                                        <input type="text" name="attr_spellname" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_spell-6_$id_spellname}" />
                                        <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                        <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="school:">School:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellschool"></span>
                                            <textarea name="attr_spellschool" accept="School" class="underlined" spellcheck="false" data-i18n-placeholder="spellschool-ph" placeholder="School/Domain/Elemental school..." title="@{repeating_spell-6_$id_spellschool}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="class-level:">Class/Level:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellclasslevel"></span>
                                            <textarea name="attr_spellclasslevel" accept="Level" class="underlined" spellcheck="false" data-i18n-placeholder="spellclasslevel-ph" placeholder="Sorcerer/Wizard 3" title="@{repeating_spell-6_$id_spellclasslevel}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="casting-time:">Casting time:</span>
                                        <input type="text" name="attr_spellcastingtime" accept="Casting Time" class="underlined std" spellcheck="false" data-i18n-placeholder="spellcastingtime-ph" placeholder="1 standard action" title="@{repeating_spell-6_$id_spellcastingtime}" />
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="components:">Components:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellcomponent"></span>
                                            <textarea name="attr_spellcomponent" accept="Components" class="underlined" spellcheck="false" data-i18n-placeholder="spellcomponent-ph" placeholder="V, S, M (a ball of bat guano and sulfur)" title="@{repeating_spell-6_$id_spellcomponent}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="range:">Range:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellrange"></span>
                                            <textarea name="attr_spellrange" accept="Range" class="underlined" spellcheck="false" data-i18n-placeholder="spellrange-ph" placeholder="Long (400 ft. + 40 ft./level)" title="@{repeating_spell-6_$id_spellrange}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="area:">Area:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellarea"></span>
                                            <textarea name="attr_spellarea" accept="Area" class="underlined" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_spell-6_$id_spellarea}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="targets:">Targets:</span>
                                        <div class="autoex std">
                                            <span name="attr_spelltargets"></span>
                                            <textarea name="attr_spelltargets" accept="Target" class="underlined" spellcheck="false" data-i18n-placeholder="spelltargets-ph" placeholder="up to five creatures" title="@{repeating_spell-6_$id_spelltargets}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="effect:">Effect:</span>
                                        <div class="autoex std">
                                            <span name="attr_spelleffect"></span>
                                            <textarea name="attr_spelleffect" accept="Effect" class="underlined" spellcheck="false" data-i18n-placeholder="spelleffect-ph" placeholder="Heal [[1d6+@{caster1_level}]] HP" title="@{repeating_spell-6_$id_spelleffect}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="duration:">Duration:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellduration"></span>
                                            <textarea name="attr_spellduration" accept="Duration" class="underlined" spellcheck="false" data-i18n-placeholder="spellduration-ph" placeholder="Instantaneous" title="@{repeating_spell-6_$id_spellduration}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellsaveflag" value="{{save=1}}" title="@{repeating_spell-6_$id_spellsaveflag}" checked="checked" /><span></span>
                                        <span class="lbl med" data-i18n="saving-throw:">Saving Throw:</span>
                                        <input type="text" name="attr_spellsave" accept="Saving Throw" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_spell-6_$id_spellsave}" />
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="spacer"></span>
                                        <span class="lbl" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                                        <span class="lbl">+</span>
                                        <input type="number" class="nospin underlined sml" name="attr_spelldc_mod" value="0" title="@{repeating_spell-6_$id_spelldc_mod}" />
                                        <span class="lbl">=</span>
                                        <span class="pseudoattr greybg underlined number" name="attr_spelldc" title="@{repeating_spell-6_$id_spelldc}"></span>
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellresistanceflag" value="{{sr=1}}" title="@{repeating_spell-6_$id_spellresistanceflag}" checked="checked" /><span></span>
                                        <span class="lbl med" data-i18n="spell-resistance:">Spell Resistance:</span>
                                        <input type="text" name="attr_spellresistance" accept="Spell Resistance" class="underlined med" spellcheck="false" title="@{repeating_spell-6_$id_spellresistance}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellatkflag" value="{{attack=1}}" title="@{repeating_spell-6_$id_spellatkflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="attack:">Attack:</span>
                                        <select class="underlined type" name="attr_spellatktype" title="@{repeating_spell-6_$id_spellatktype}">
                                            <option value="melee" data-i18n="melee">Melee</option>
                                            <option value="ranged" data-i18n="ranged" selected="selected">Ranged</option>
                                            <option value="cmb" data-i18n="cmb-u">CMB</option>
                                            <option value="strength" data-i18n="str-u">STR</option>
                                            <option value="dexterity" data-i18n="dex-u">DEX</option>
                                            <option value="constitution" data-i18n="con-u">CON</option>
                                            <option value="intelligence" data-i18n="int-u">INT</option>
                                            <option value="wisdom" data-i18n="wis-u">WIS</option>
                                            <option value="charisma" data-i18n="cha-u">CHA</option>
                                            <option value="0">-</option>
                                        </select>
                                        <span class="lbl">+</span>
                                        <input type="text" class="underlined dmgbase" name="attr_spellatkmod" value="0" spellcheck="false" title="@{repeating_spell-6_$id_spellatkmod}" />
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="spacer"></span>
                                        <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                                        <input type="number" class="nospin underlined" name="attr_spellatkcritrange" value="20" title="@{repeating_spell-6_$id_spellatkcritrange}" />
                                        <span class="lbl" data-i18n="multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Multiplier:</span>
                                        <input type="number" class="nospin underlined" name="attr_spelldmgcritmulti" value="2" title="@{repeating_spell-6_$id_spelldmgcritmulti}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{repeating_spell-6_$id_spelldmgflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage:">Damage:</span>
                                        <input type="text" name="attr_spelldmg" class="underlined dmgbase" spellcheck="false" placeholder="1d6" title="@{repeating_spell-6_$id_spelldmg}" />
                                        <span class="lbl right typ" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_spelldmgtype" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_spell-6_$id_spelldmgtype}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_spell-6_$id_spelldmg2flag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                                        <input type="text" name="attr_spelldmg2" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_spell-6_$id_spelldmg2}" />
                                        <span class="lbl right typ" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_spelldmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="force" placeholder="Force" title="@{repeating_spell-6_$id_spelldmg2type}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldescflag" value="{{descflag=[[1]]}}" title="@{repeating_spell-6_$id_spelldescflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="description:">Description:</span>
                                        <div class="autoex">
                                            <span name="attr_spelldesc"></span>
                                            <textarea name="attr_spelldesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_spell-6_$id_spelldesc}"></textarea>
                                        </div>
                                    </div>
                                    <span class="lbl" data-i18n="notes:">Notes:</span>
                                    <div class="autoex">
                                        <span name="attr_notes"></span>
                                        <textarea name="attr_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{repeating_spell-6_$id_notes}"></textarea>
                                    </div>
                                </div>
                            </div>
                        </fieldset> <!-- END REPEATING 6 LVL SPELL -->
                    </div> <!-- END SPELLS LEVEL 6 -->
                    <div class="col1third"> <!-- SPELLS LEVEL 7 -->
                        <div class="myrow">
                            <div class="blacklabel">
                                <div class="blackbgrd weapon">
                                    <span class="big only" data-i18n="level-7">Level 7</span>
                                </div>
                                <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                            </div>
                        </div>
                        <div class="myrow right"> <!-- Prepared count -->
                            <span class="lbl" data-i18n="prepared" data-i18n-title="prepared-times" title="Prepared # times">Prepared</span>
                            <span class="roundblack margindent">1</span>
                            <input type="hidden" class="attr-flag" name="attr_caster1_spells_prepared_flag_7" value="0" />
                            <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster1_spells_prepared_level_7" title="@{caster1_spells_prepared_level_7}"></span>
                            <span class="lbl">/</span>
                            <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster1_spells_total_level_7" title="@{caster1_spells_total_level_7}"></span>
                            <input type="hidden" name="attr_caster2_flag" value="0" class="optional-flag0" /><div class="optional inl margindent">
                                <span class="roundblack margindent">2</span>
                                <input type="hidden" class="attr-flag" name="attr_caster2_spells_prepared_flag_7" value="0" />
                                <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster2_spells_prepared_level_7" title="@{caster2_spells_prepared_level_7}"></span>
                                <span class="lbl">/</span>
                                <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster2_spells_total_level_7" title="@{caster2_spells_total_level_7}"></span>
                            </div>
                        </div> <!-- End Prepared count -->
                        <fieldset class="repeating_spell-7"> <!-- REPEATING 7 LVL SPELL -->
                            <input type="hidden" name="attr_spelllevel" value="7" />
                            <div class="spell right compendium-drop-target">
                                <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                                <div class="myrow right">
                                    <input type="hidden" name="attr_rollcontent" />
                                    <span class="roundblack" name="attr_spellcaster"></span>
                                    <button class="myrol" type="roll" name="SpellRoll" data-i18n-title="cast-spell" title="Cast spell" value="@{rollcontent}"><span class="pseudoattr greybg underlined spelldsp" name="attr_spelldisplay"></span></button>
                                    <input type="hidden" class="attr-flag" name="attr_spellprepared" /><span></span>
                                    <div class="dots">
                                        <input type="radio" name="attr_spellprepared" value="0" checked="checked" data-i18n-title="click-reset" title="Click to reset" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="1" data-i18n-title="prepared-once" title="Prepared once" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="2" data-i18n-title="prepared-twice" title="Prepared twice" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="3" data-i18n-title="prepared-thrice" title="Prepared thrice" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="4" data-i18n-title="prepared-four-times" title="Prepared four times" /><span></span>
                                    </div>
                                </div>
                                <div class="options right">
                                    <input type="hidden" name="attr_spellmulticasters-flag" value="0" class="optional-flag0" /><div class="optional blk">
                                        <span class="lbl" data-18n="spellcaster-class">Spellcaster class</span>
                                        <input type="radio" name="attr_spellcaster" class="pseudocheck" value="1" title="@{repeating_spell-0_$id_spellcaster}" checked="checked" /><span></span>
                                        <span class="lbl">1.</span><span class="lbl" name="attr_spellcaster1_class"></span>
                                        <input type="radio" name="attr_spellcaster" class="pseudocheck" value="2" title="@{repeating_spell-0_$id_spellcaster}" /><span></span>
                                        <span class="lbl">2.</span><span class="lbl" name="attr_spellcaster2_class"></span>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl" data-i18n="name">Name</span>
                                        <input type="text" name="attr_spellname" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_spell-7_$id_spellname}" />
                                        <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                        <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="school:">School:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellschool"></span>
                                            <textarea name="attr_spellschool" accept="School" class="underlined" spellcheck="false" data-i18n-placeholder="spellschool-ph" placeholder="School/Domain/Elemental school..." title="@{repeating_spell-7_$id_spellschool}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="class-level:">Class/Level:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellclasslevel"></span>
                                            <textarea name="attr_spellclasslevel" accept="Level" class="underlined" spellcheck="false" data-i18n-placeholder="spellclasslevel-ph" placeholder="Sorcerer/Wizard 3" title="@{repeating_spell-7_$id_spellclasslevel}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="casting-time:">Casting time:</span>
                                        <input type="text" name="attr_spellcastingtime" accept="Casting Time" class="underlined std" spellcheck="false" data-i18n-placeholder="spellcastingtime-ph" placeholder="1 standard action" title="@{repeating_spell-7_$id_spellcastingtime}" />
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="components:">Components:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellcomponent"></span>
                                            <textarea name="attr_spellcomponent" accept="Components" class="underlined" spellcheck="false" data-i18n-placeholder="spellcomponent-ph" placeholder="V, S, M (a ball of bat guano and sulfur)" title="@{repeating_spell-7_$id_spellcomponent}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="range:">Range:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellrange"></span>
                                            <textarea name="attr_spellrange" accept="Range" class="underlined" spellcheck="false" data-i18n-placeholder="spellrange-ph" placeholder="Long (400 ft. + 40 ft./level)" title="@{repeating_spell-7_$id_spellrange}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="area:">Area:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellarea"></span>
                                            <textarea name="attr_spellarea" accept="Area" class="underlined" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_spell-7_$id_spellarea}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="targets:">Targets:</span>
                                        <div class="autoex std">
                                            <span name="attr_spelltargets"></span>
                                            <textarea name="attr_spelltargets" accept="Target" class="underlined" spellcheck="false" data-i18n-placeholder="spelltargets-ph" placeholder="up to five creatures" title="@{repeating_spell-7_$id_spelltargets}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="effect:">Effect:</span>
                                        <div class="autoex std">
                                            <span name="attr_spelleffect"></span>
                                            <textarea name="attr_spelleffect" accept="Effect" class="underlined" spellcheck="false" data-i18n-placeholder="spelleffect-ph" placeholder="Heal [[1d6+@{caster1_level}]] HP" title="@{repeating_spell-7_$id_spelleffect}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="duration:">Duration:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellduration"></span>
                                            <textarea name="attr_spellduration" accept="Duration" class="underlined" spellcheck="false" data-i18n-placeholder="spellduration-ph" placeholder="Instantaneous" title="@{repeating_spell-7_$id_spellduration}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellsaveflag" value="{{save=1}}" title="@{repeating_spell-7_$id_spellsaveflag}" checked="checked" /><span></span>
                                        <span class="lbl med" data-i18n="saving-throw:">Saving Throw:</span>
                                        <input type="text" name="attr_spellsave" accept="Saving Throw" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_spell-7_$id_spellsave}" />
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="spacer"></span>
                                        <span class="lbl" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                                        <span class="lbl">+</span>
                                        <input type="number" class="nospin underlined sml" name="attr_spelldc_mod" value="0" title="@{repeating_spell-7_$id_spelldc_mod}" />
                                        <span class="lbl">=</span>
                                        <span class="pseudoattr greybg underlined number" name="attr_spelldc" title="@{repeating_spell-7_$id_spelldc}"></span>
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellresistanceflag" value="{{sr=1}}" title="@{repeating_spell-7_$id_spellresistanceflag}" checked="checked" /><span></span>
                                        <span class="lbl med" data-i18n="spell-resistance:">Spell Resistance:</span>
                                        <input type="text" name="attr_spellresistance" accept="Spell Resistance" class="underlined med" spellcheck="false" title="@{repeating_spell-7_$id_spellresistance}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellatkflag" value="{{attack=1}}" title="@{repeating_spell-7_$id_spellatkflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="attack:">Attack:</span>
                                        <select class="underlined type" name="attr_spellatktype" title="@{repeating_spell-7_$id_spellatktype}">
                                            <option value="melee" data-i18n="melee">Melee</option>
                                            <option value="ranged" data-i18n="ranged" selected="selected">Ranged</option>
                                            <option value="cmb" data-i18n="cmb-u">CMB</option>
                                            <option value="strength" data-i18n="str-u">STR</option>
                                            <option value="dexterity" data-i18n="dex-u">DEX</option>
                                            <option value="constitution" data-i18n="con-u">CON</option>
                                            <option value="intelligence" data-i18n="int-u">INT</option>
                                            <option value="wisdom" data-i18n="wis-u">WIS</option>
                                            <option value="charisma" data-i18n="cha-u">CHA</option>
                                            <option value="0">-</option>
                                        </select>
                                        <span class="lbl">+</span>
                                        <input type="text" class="underlined dmgbase" name="attr_spellatkmod" value="0" spellcheck="false" title="@{repeating_spell-7_$id_spellatkmod}" />
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="spacer"></span>
                                        <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                                        <input type="number" class="nospin underlined" name="attr_spellatkcritrange" value="20" title="@{repeating_spell-7_$id_spellatkcritrange}" />
                                        <span class="lbl" data-i18n="multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Multiplier:</span>
                                        <input type="number" class="nospin underlined" name="attr_spelldmgcritmulti" value="2" title="@{repeating_spell-7_$id_spelldmgcritmulti}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{repeating_spell-7_$id_spelldmgflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage:">Damage:</span>
                                        <input type="text" name="attr_spelldmg" class="underlined dmgbase" spellcheck="false" placeholder="1d6" title="@{repeating_spell-7_$id_spelldmg}" />
                                        <span class="lbl right typ" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_spelldmgtype" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_spell-7_$id_spelldmgtype}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_spell-7_$id_spelldmg2flag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                                        <input type="text" name="attr_spelldmg2" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_spell-7_$id_spelldmg2}" />
                                        <span class="lbl right typ" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_spelldmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="force" placeholder="Force" title="@{repeating_spell-7_$id_spelldmg2type}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldescflag" value="{{descflag=[[1]]}}" title="@{repeating_spell-7_$id_spelldescflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="description:">Description:</span>
                                        <div class="autoex">
                                            <span name="attr_spelldesc"></span>
                                            <textarea name="attr_spelldesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_spell-7_$id_spelldesc}"></textarea>
                                        </div>
                                    </div>
                                    <span class="lbl" data-i18n="notes:">Notes:</span>
                                    <div class="autoex">
                                        <span name="attr_notes"></span>
                                        <textarea name="attr_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{repeating_spell-7_$id_notes}"></textarea>
                                    </div>
                                </div>
                            </div>
                        </fieldset> <!-- END REPEATING 7 LVL SPELL -->
                    </div> <!-- END SPELLS LEVEL 7 -->
                </div> <!-- END LVL 6-7 -->
                <div class="myrow"> <!-- LVL 8-9 -->
                    <div class="col1third"> <!-- SPELLS LEVEL 8 -->
                        <div class="myrow">
                            <div class="blacklabel">
                                <div class="blackbgrd weapon">
                                    <span class="big only" data-i18n="level-8">Level 8</span>
                                </div>
                                <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                            </div>
                        </div>
                        <div class="myrow right"> <!-- Prepared count -->
                            <span class="lbl" data-i18n="prepared" data-i18n-title="prepared-times" title="Prepared # times">Prepared</span>
                            <span class="roundblack margindent">1</span>
                            <input type="hidden" class="attr-flag" name="attr_caster1_spells_prepared_flag_8" value="0" />
                            <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster1_spells_prepared_level_8" title="@{caster1_spells_prepared_level_8}"></span>
                            <span class="lbl">/</span>
                            <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster1_spells_total_level_8" title="@{caster1_spells_total_level_8}"></span>
                            <input type="hidden" name="attr_caster2_flag" value="0" class="optional-flag0" /><div class="optional inl margindent">
                                <span class="roundblack margindent">2</span>
                                <input type="hidden" class="attr-flag" name="attr_caster2_spells_prepared_flag_8" value="0" />
                                <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster2_spells_prepared_level_8" title="@{caster2_spells_prepared_level_8}"></span>
                                <span class="lbl">/</span>
                                <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster2_spells_total_level_8" title="@{caster2_spells_total_level_8}"></span>
                            </div>
                        </div> <!-- End Prepared count -->
                        <fieldset class="repeating_spell-8"> <!-- REPEATING 8 LVL SPELL -->
                            <input type="hidden" name="attr_spelllevel" value="8" />
                            <div class="spell right compendium-drop-target">
                                <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                                <div class="myrow right">
                                    <input type="hidden" name="attr_rollcontent" />
                                    <span class="roundblack" name="attr_spellcaster"></span>
                                    <button class="myrol" type="roll" name="SpellRoll" data-i18n-title="cast-spell" title="Cast spell" value="@{rollcontent}"><span class="pseudoattr greybg underlined spelldsp" name="attr_spelldisplay"></span></button>
                                    <input type="hidden" class="attr-flag" name="attr_spellprepared" /><span></span>
                                    <div class="dots">
                                        <input type="radio" name="attr_spellprepared" value="0" checked="checked" data-i18n-title="click-reset" title="Click to reset" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="1" data-i18n-title="prepared-once" title="Prepared once" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="2" data-i18n-title="prepared-twice" title="Prepared twice" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="3" data-i18n-title="prepared-thrice" title="Prepared thrice" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="4" data-i18n-title="prepared-four-times" title="Prepared four times" /><span></span>
                                    </div>
                                </div>
                                <div class="options right">
                                    <input type="hidden" name="attr_spellmulticasters-flag" value="0" class="optional-flag0" /><div class="optional blk">
                                        <span class="lbl" data-18n="spellcaster-class">Spellcaster class</span>
                                        <input type="radio" name="attr_spellcaster" class="pseudocheck" value="1" title="@{repeating_spell-0_$id_spellcaster}" checked="checked" /><span></span>
                                        <span class="lbl">1.</span><span class="lbl" name="attr_spellcaster1_class"></span>
                                        <input type="radio" name="attr_spellcaster" class="pseudocheck" value="2" title="@{repeating_spell-0_$id_spellcaster}" /><span></span>
                                        <span class="lbl">2.</span><span class="lbl" name="attr_spellcaster2_class"></span>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl" data-i18n="name">Name</span>
                                        <input type="text" name="attr_spellname" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_spell-8_$id_spellname}" />
                                        <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                        <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="school:">School:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellschool"></span>
                                            <textarea name="attr_spellschool" accept="School" class="underlined" spellcheck="false" data-i18n-placeholder="spellschool-ph" placeholder="School/Domain/Elemental school..." title="@{repeating_spell-8_$id_spellschool}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="class-level:">Class/Level:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellclasslevel"></span>
                                            <textarea name="attr_spellclasslevel" accept="Level" class="underlined" spellcheck="false" data-i18n-placeholder="spellclasslevel-ph" placeholder="Sorcerer/Wizard 3" title="@{repeating_spell-8_$id_spellclasslevel}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="casting-time:">Casting time:</span>
                                        <input type="text" name="attr_spellcastingtime" accept="Casting Time" class="underlined std" spellcheck="false" data-i18n-placeholder="spellcastingtime-ph" placeholder="1 standard action" title="@{repeating_spell-8_$id_spellcastingtime}" />
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="components:">Components:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellcomponent"></span>
                                            <textarea name="attr_spellcomponent" accept="Components" class="underlined" spellcheck="false" data-i18n-placeholder="spellcomponent-ph" placeholder="V, S, M (a ball of bat guano and sulfur)" title="@{repeating_spell-8_$id_spellcomponent}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="range:">Range:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellrange"></span>
                                            <textarea name="attr_spellrange" accept="Range" class="underlined" spellcheck="false" data-i18n-placeholder="spellrange-ph" placeholder="Long (400 ft. + 40 ft./level)" title="@{repeating_spell-8_$id_spellrange}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="area:">Area:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellarea"></span>
                                            <textarea name="attr_spellarea" accept="Area" class="underlined" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_spell-8_$id_spellarea}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="targets:">Targets:</span>
                                        <div class="autoex std">
                                            <span name="attr_spelltargets"></span>
                                            <textarea name="attr_spelltargets" accept="Target" class="underlined" spellcheck="false" data-i18n-placeholder="spelltargets-ph" placeholder="up to five creatures" title="@{repeating_spell-8_$id_spelltargets}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="effect:">Effect:</span>
                                        <div class="autoex std">
                                            <span name="attr_spelleffect"></span>
                                            <textarea name="attr_spelleffect" accept="Effect" class="underlined" spellcheck="false" data-i18n-placeholder="spelleffect-ph" placeholder="Heal [[1d6+@{caster1_level}]] HP" title="@{repeating_spell-8_$id_spelleffect}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="duration:">Duration:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellduration"></span>
                                            <textarea name="attr_spellduration" accept="Duration" class="underlined" spellcheck="false" data-i18n-placeholder="spellduration-ph" placeholder="Instantaneous" title="@{repeating_spell-8_$id_spellduration}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellsaveflag" value="{{save=1}}" title="@{repeating_spell-8_$id_spellsaveflag}" checked="checked" /><span></span>
                                        <span class="lbl med" data-i18n="saving-throw:">Saving Throw:</span>
                                        <input type="text" name="attr_spellsave" accept="Saving Throw" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_spell-8_$id_spellsave}" />
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="spacer"></span>
                                        <span class="lbl" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                                        <span class="lbl">+</span>
                                        <input type="number" class="nospin underlined sml" name="attr_spelldc_mod" value="0" title="@{repeating_spell-8_$id_spelldc_mod}" />
                                        <span class="lbl">=</span>
                                        <span class="pseudoattr greybg underlined number" name="attr_spelldc" title="@{repeating_spell-8_$id_spelldc}"></span>
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellresistanceflag" value="{{sr=1}}" title="@{repeating_spell-8_$id_spellresistanceflag}" checked="checked" /><span></span>
                                        <span class="lbl med" data-i18n="spell-resistance:">Spell Resistance:</span>
                                        <input type="text" name="attr_spellresistance" accept="Spell Resistance" class="underlined med" spellcheck="false" title="@{repeating_spell-8_$id_spellresistance}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellatkflag" value="{{attack=1}}" title="@{repeating_spell-8_$id_spellatkflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="attack:">Attack:</span>
                                        <select class="underlined type" name="attr_spellatktype" title="@{repeating_spell-8_$id_spellatktype}">
                                            <option value="melee" data-i18n="melee">Melee</option>
                                            <option value="ranged" data-i18n="ranged" selected="selected">Ranged</option>
                                            <option value="cmb" data-i18n="cmb-u">CMB</option>
                                            <option value="strength" data-i18n="str-u">STR</option>
                                            <option value="dexterity" data-i18n="dex-u">DEX</option>
                                            <option value="constitution" data-i18n="con-u">CON</option>
                                            <option value="intelligence" data-i18n="int-u">INT</option>
                                            <option value="wisdom" data-i18n="wis-u">WIS</option>
                                            <option value="charisma" data-i18n="cha-u">CHA</option>
                                            <option value="0">-</option>
                                        </select>
                                        <span class="lbl">+</span>
                                        <input type="text" class="underlined dmgbase" name="attr_spellatkmod" value="0" spellcheck="false" title="@{repeating_spell-8_$id_spellatkmod}" />
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="spacer"></span>
                                        <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                                        <input type="number" class="nospin underlined" name="attr_spellatkcritrange" value="20" title="@{repeating_spell-8_$id_spellatkcritrange}" />
                                        <span class="lbl" data-i18n="multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Multiplier:</span>
                                        <input type="number" class="nospin underlined" name="attr_spelldmgcritmulti" value="2" title="@{repeating_spell-8_$id_spelldmgcritmulti}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{repeating_spell-8_$id_spelldmgflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage:">Damage:</span>
                                        <input type="text" name="attr_spelldmg" class="underlined dmgbase" spellcheck="false" placeholder="1d6" title="@{repeating_spell-8_$id_spelldmg}" />
                                        <span class="lbl right typ" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_spelldmgtype" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_spell-8_$id_spelldmgtype}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_spell-8_$id_spelldmg2flag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                                        <input type="text" name="attr_spelldmg2" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_spell-8_$id_spelldmg2}" />
                                        <span class="lbl right typ" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_spelldmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="force" placeholder="Force" title="@{repeating_spell-8_$id_spelldmg2type}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldescflag" value="{{descflag=[[1]]}}" title="@{repeating_spell-8_$id_spelldescflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="description:">Description:</span>
                                        <div class="autoex">
                                            <span name="attr_spelldesc"></span>
                                            <textarea name="attr_spelldesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_spell-8_$id_spelldesc}"></textarea>
                                        </div>
                                    </div>
                                    <span class="lbl" data-i18n="notes:">Notes:</span>
                                    <div class="autoex">
                                        <span name="attr_notes"></span>
                                        <textarea name="attr_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{repeating_spell-8_$id_notes}"></textarea>
                                    </div>
                                </div>
                            </div>
                        </fieldset> <!-- END REPEATING 8 LVL SPELL -->
                    </div> <!-- END SPELLS LEVEL 8 -->
                    <div class="col1third"> <!-- SPELLS LEVEL 9 -->
                        <div class="myrow">
                            <div class="blacklabel">
                                <div class="blackbgrd weapon">
                                    <span class="big only" data-i18n="level-9">Level 9</span>
                                </div>
                                <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                            </div>
                        </div>
                        <div class="myrow right"> <!-- Prepared count -->
                            <span class="lbl" data-i18n="prepared" data-i18n-title="prepared-times" title="Prepared # times">Prepared</span>
                            <span class="roundblack margindent">1</span>
                            <input type="hidden" class="attr-flag" name="attr_caster1_spells_prepared_flag_9" value="0" />
                            <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster1_spells_prepared_level_9" title="@{caster1_spells_prepared_level_9}"></span>
                            <span class="lbl">/</span>
                            <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster1_spells_total_level_9" title="@{caster1_spells_total_level_9}"></span>
                            <input type="hidden" name="attr_caster2_flag" value="0" class="optional-flag0" /><div class="optional inl margindent">
                                <span class="roundblack margindent">2</span>
                                <input type="hidden" class="attr-flag" name="attr_caster2_spells_prepared_flag_9" value="0" />
                                <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster2_spells_prepared_level_9" title="@{caster2_spells_prepared_level_9}"></span>
                                <span class="lbl">/</span>
                                <span class="prepared pseudoattr sml greybg underlined center" name="attr_caster2_spells_total_level_9" title="@{caster2_spells_total_level_9}"></span>
                            </div>
                        </div> <!-- End Prepared count -->
                        <fieldset class="repeating_spell-9"> <!-- REPEATING 9 LVL SPELL -->
                            <input type="hidden" name="attr_spelllevel" value="9" />
                            <div class="spell right compendium-drop-target">
                                <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                                <div class="myrow right">
                                    <input type="hidden" name="attr_rollcontent" />
                                    <span class="roundblack" name="attr_spellcaster"></span>
                                    <button class="myrol" type="roll" name="SpellRoll" data-i18n-title="cast-spell" title="Cast spell" value="@{rollcontent}"><span class="pseudoattr greybg underlined spelldsp" name="attr_spelldisplay"></span></button>
                                    <input type="hidden" class="attr-flag" name="attr_spellprepared" /><span></span>
                                    <div class="dots">
                                        <input type="radio" name="attr_spellprepared" value="0" checked="checked" data-i18n-title="click-reset" title="Click to reset" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="1" data-i18n-title="prepared-once" title="Prepared once" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="2" data-i18n-title="prepared-twice" title="Prepared twice" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="3" data-i18n-title="prepared-thrice" title="Prepared thrice" /><span></span>
                                        <input type="radio" name="attr_spellprepared" value="4" data-i18n-title="prepared-four-times" title="Prepared four times" /><span></span>
                                    </div>
                                </div>
                                <div class="options right">
                                    <input type="hidden" name="attr_spellmulticasters-flag" value="0" class="optional-flag0" /><div class="optional blk">
                                        <span class="lbl" data-18n="spellcaster-class">Spellcaster class</span>
                                        <input type="radio" name="attr_spellcaster" class="pseudocheck" value="1" title="@{repeating_spell-0_$id_spellcaster}" checked="checked" /><span></span>
                                        <span class="lbl">1.</span><span class="lbl" name="attr_spellcaster1_class"></span>
                                        <input type="radio" name="attr_spellcaster" class="pseudocheck" value="2" title="@{repeating_spell-0_$id_spellcaster}" /><span></span>
                                        <span class="lbl">2.</span><span class="lbl" name="attr_spellcaster2_class"></span>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl" data-i18n="name">Name</span>
                                        <input type="text" name="attr_spellname" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_spell-9_$id_spellname}" />
                                        <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                        <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="school:">School:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellschool"></span>
                                            <textarea name="attr_spellschool" accept="School" class="underlined" spellcheck="false" data-i18n-placeholder="spellschool-ph" placeholder="School/Domain/Elemental school..." title="@{repeating_spell-9_$id_spellschool}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="class-level:">Class/Level:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellclasslevel"></span>
                                            <textarea name="attr_spellclasslevel" accept="Level" class="underlined" spellcheck="false" data-i18n-placeholder="spellclasslevel-ph" placeholder="Sorcerer/Wizard 3" title="@{repeating_spell-9_$id_spellclasslevel}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="casting-time:">Casting time:</span>
                                        <input type="text" name="attr_spellcastingtime" accept="Casting Time" class="underlined std" spellcheck="false" data-i18n-placeholder="spellcastingtime-ph" placeholder="1 standard action" title="@{repeating_spell-9_$id_spellcastingtime}" />
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="components:">Components:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellcomponent"></span>
                                            <textarea name="attr_spellcomponent" accept="Components" class="underlined" spellcheck="false" data-i18n-placeholder="spellcomponent-ph" placeholder="V, S, M (a ball of bat guano and sulfur)" title="@{repeating_spell-9_$id_spellcomponent}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="range:">Range:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellrange"></span>
                                            <textarea name="attr_spellrange" accept="Range" class="underlined" spellcheck="false" data-i18n-placeholder="spellrange-ph" placeholder="Long (400 ft. + 40 ft./level)" title="@{repeating_spell-9_$id_spellrange}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="area:">Area:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellarea"></span>
                                            <textarea name="attr_spellarea" accept="Area" class="underlined" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_spell-9_$id_spellarea}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="targets:">Targets:</span>
                                        <div class="autoex std">
                                            <span name="attr_spelltargets"></span>
                                            <textarea name="attr_spelltargets" accept="Target" class="underlined" spellcheck="false" data-i18n-placeholder="spelltargets-ph" placeholder="up to five creatures" title="@{repeating_spell-9_$id_spelltargets}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="effect:">Effect:</span>
                                        <div class="autoex std">
                                            <span name="attr_spelleffect"></span>
                                            <textarea name="attr_spelleffect" accept="Effect" class="underlined" spellcheck="false" data-i18n-placeholder="spelleffect-ph" placeholder="Heal [[1d6+@{caster1_level}]] HP" title="@{repeating_spell-9_$id_spelleffect}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="duration:">Duration:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellduration"></span>
                                            <textarea name="attr_spellduration" accept="Duration" class="underlined" spellcheck="false" data-i18n-placeholder="spellduration-ph" placeholder="Instantaneous" title="@{repeating_spell-9_$id_spellduration}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellsaveflag" value="{{save=1}}" title="@{repeating_spell-9_$id_spellsaveflag}" checked="checked" /><span></span>
                                        <span class="lbl med" data-i18n="saving-throw:">Saving Throw:</span>
                                        <input type="text" name="attr_spellsave" accept="Saving Throw" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_spell-9_$id_spellsave}" />
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="spacer"></span>
                                        <span class="lbl" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                                        <span class="lbl">+</span>
                                        <input type="number" class="nospin underlined sml" name="attr_spelldc_mod" value="0" title="@{repeating_spell-9_$id_spelldc_mod}" />
                                        <span class="lbl">=</span>
                                        <span class="pseudoattr greybg underlined number" name="attr_spelldc" title="@{repeating_spell-9_$id_spelldc}"></span>
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellresistanceflag" value="{{sr=1}}" title="@{repeating_spell-9_$id_spellresistanceflag}" checked="checked" /><span></span>
                                        <span class="lbl med" data-i18n="spell-resistance:">Spell Resistance:</span>
                                        <input type="text" name="attr_spellresistance" accept="Spell Resistance" class="underlined med" spellcheck="false" title="@{repeating_spell-9_$id_spellresistance}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellatkflag" value="{{attack=1}}" title="@{repeating_spell-9_$id_spellatkflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="attack:">Attack:</span>
                                        <select class="underlined type" name="attr_spellatktype" title="@{repeating_spell-9_$id_spellatktype}">
                                            <option value="melee" data-i18n="melee">Melee</option>
                                            <option value="ranged" data-i18n="ranged" selected="selected">Ranged</option>
                                            <option value="cmb" data-i18n="cmb-u">CMB</option>
                                            <option value="strength" data-i18n="str-u">STR</option>
                                            <option value="dexterity" data-i18n="dex-u">DEX</option>
                                            <option value="constitution" data-i18n="con-u">CON</option>
                                            <option value="intelligence" data-i18n="int-u">INT</option>
                                            <option value="wisdom" data-i18n="wis-u">WIS</option>
                                            <option value="charisma" data-i18n="cha-u">CHA</option>
                                            <option value="0">-</option>
                                        </select>
                                        <span class="lbl">+</span>
                                        <input type="text" class="underlined dmgbase" name="attr_spellatkmod" value="0" spellcheck="false" title="@{repeating_spell-9_$id_spellatkmod}" />
                                    </div>
                                    <div class="myrow padindent">
                                        <span class="spacer"></span>
                                        <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                                        <input type="number" class="nospin underlined" name="attr_spellatkcritrange" value="20" title="@{repeating_spell-9_$id_spellatkcritrange}" />
                                        <span class="lbl" data-i18n="multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Multiplier:</span>
                                        <input type="number" class="nospin underlined" name="attr_spelldmgcritmulti" value="2" title="@{repeating_spell-9_$id_spelldmgcritmulti}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{repeating_spell-9_$id_spelldmgflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage:">Damage:</span>
                                        <input type="text" name="attr_spelldmg" class="underlined dmgbase" spellcheck="false" placeholder="1d6" title="@{repeating_spell-9_$id_spelldmg}" />
                                        <span class="lbl right typ" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_spelldmgtype" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_spell-9_$id_spelldmgtype}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_spell-9_$id_spelldmg2flag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                                        <input type="text" name="attr_spelldmg2" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_spell-9_$id_spelldmg2}" />
                                        <span class="lbl right typ" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_spelldmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="force" placeholder="Force" title="@{repeating_spell-9_$id_spelldmg2type}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldescflag" value="{{descflag=[[1]]}}" title="@{repeating_spell-9_$id_spelldescflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="description:">Description:</span>
                                        <div class="autoex">
                                            <span name="attr_spelldesc"></span>
                                            <textarea name="attr_spelldesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_spell-9_$id_spelldesc}"></textarea>
                                        </div>
                                    </div>
                                    <span class="lbl" data-i18n="notes:">Notes:</span>
                                    <div class="autoex">
                                        <span name="attr_notes"></span>
                                        <textarea name="attr_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{repeating_spell-9_$id_notes}"></textarea>
                                    </div>
                                </div>
                            </div>
                        </fieldset> <!-- END REPEATING 9 LVL SPELL -->
                    </div> <!-- END SPELLS LEVEL 9 -->
                </div> <!-- END LVL 8-9 -->
                <div class="myrow"> <!-- SPELL-LIKE and METAMAGIC -->
                    <div class="col1third"> <!-- SPELL-LIKE ABILITIES -->
                        <div class="myrow">
                            <div class="blacklabel">
                                <div class="blackbgrd weapon">
                                    <span class="big only" data-i18n="spell-like">Spell-Like</span>
                                </div>
                                <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                            </div>
                        </div>
                        <fieldset class="repeating_spell-like"> <!-- REPEATING SPELL-LIKE -->
                            <input type="hidden" name="attr_spelllevel" value="like" />
                            <input type="hidden" name="attr_spellcaster" value="2" />
                            <div class="spell right compendium-drop-target">
                                <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                                <div class="myrow">
                                    <input type="hidden" name="attr_rollcontent" />
                                    <button class="myrol margindent" type="roll" name="SpellRoll" data-i18n-title="cast-spell" title="Cast spell" value="@{rollcontent}"><span class="pseudoattr greybg underlined spelldsp" name="attr_spelldisplay"></span></button><input type="hidden" class="optional-flag0" name="attr_spellprepared" value="0" /><span class="optional inl">&nbsp;<input type="number" class="nospin spsml center" name="attr_perday" value="0" data-i18n-title="#-used" title="# used" /><span class="pseudoattr">/</span><span class="pseudoattr" name="attr_perday_max" data-i18n-title="max-#-per-day" title="Max # per day"></span></span>
                                </div>
                                <div class="options">
                                    <div class="myrow">
                                        <span class="lbl" data-i18n="name">Name</span>
                                        <input type="text" name="attr_spellname" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_spell-like_$id_spellname}" />
                                        <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                        <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                        <span class="spacer"></span>
                                        <input type="radio" name="attr_timesperday" class="pseudocheck" value="constant" title="@{repeating_spell-like_$id_timesperday}" /><span></span>
                                        <span class="lbl" data-i18n="constant">constant</span>
                                        <input type="radio" name="attr_timesperday" class="pseudocheck" value="at-will" title="@{repeating_spell-like_$id_timesperday}" checked="checked" /><span></span>
                                        <span class="lbl" data-i18n="at-will">at will</span>
                                        <input type="radio" name="attr_timesperday" class="pseudocheck" value="per-day" title="@{repeating_spell-like_$id_timesperday}" /><span></span>
                                        <span class="lbl" data-i18n="per-day">per day</span>
                                        <input type="number" class="nospin underlined spsml" name="attr_perday_max" value="1" title="@{repeating_spell-like_$id_perday_max}" />
                                    </div>
                                    <div class="myrow grtopbrd">
                                        <span class="lbl std right" data-i18n="school:">School:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellschool"></span>
                                            <textarea name="attr_spellschool" accept="School" class="underlined" spellcheck="false" data-i18n-placeholder="spellschool-ph" placeholder="School/Domain/Elemental school..." title="@{repeating_spell-like_$id_spellschool}"></textarea>
                                        </div>
                                        <span class="lbl std right" data-i18n="class-level:">Class/Level:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellclasslevel"></span>
                                            <textarea name="attr_spellclasslevel" accept="Level" class="underlined" spellcheck="false" data-i18n-placeholder="spellclasslevel-ph" placeholder="Sorcerer/Wizard 3" title="@{repeating_spell-like_$id_spellclasslevel}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="casting-time:">Casting time:</span>
                                        <input type="text" name="attr_spellcastingtime" accept="Casting Time" class="underlined std" spellcheck="false" data-i18n-placeholder="spellcastingtime-ph" placeholder="1 standard action" title="@{repeating_spell-like_$id_spellcastingtime}" />
                                    </div>
                                    <div class="myrow grtopbrd">
                                        <span class="lbl std right" data-i18n="range:">Range:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellrange"></span>
                                            <textarea name="attr_spellrange" accept="Range" class="underlined" spellcheck="false" data-i18n-placeholder="spellrange-ph" placeholder="Long (400 ft. + 40 ft./level)" title="@{repeating_spell-like_$id_spellrange}"></textarea>
                                        </div>
                                        <span class="lbl std right" data-i18n="area:">Area:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellarea"></span>
                                            <textarea name="attr_spellarea" accept="Area" class="underlined" spellcheck="false" data-i18n-placeholder="spellarea-ph" placeholder="20-ft.-radius spread" title="@{repeating_spell-like_$id_spellarea}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl std right" data-i18n="targets:">Targets:</span>
                                        <div class="autoex std">
                                            <span name="attr_spelltargets"></span>
                                            <textarea name="attr_spelltargets" accept="Target" class="underlined" spellcheck="false" data-i18n-placeholder="spelltargets-ph" placeholder="up to five creatures" title="@{repeating_spell-like_$id_spelltargets}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow grtopbrd">
                                        <span class="lbl std right" data-i18n="effect:">Effect:</span>
                                        <div class="autoex std">
                                            <span name="attr_spelleffect"></span>
                                            <textarea name="attr_spelleffect" accept="Effect" class="underlined" spellcheck="false" data-i18n-placeholder="spelleffect-ph" placeholder="Heal [[1d6+@{caster1_level}]] HP" title="@{repeating_spell-like_$id_spelleffect}"></textarea>
                                        </div>
                                        <span class="lbl std right" data-i18n="duration:">Duration:</span>
                                        <div class="autoex std">
                                            <span name="attr_spellduration"></span>
                                            <textarea name="attr_spellduration" accept="Duration" class="underlined" spellcheck="false" data-i18n-placeholder="spellduration-ph" placeholder="Instantaneous" title="@{repeating_spell-like_$id_spellduration}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellsaveflag" value="{{save=1}}" title="@{repeating_spell-like_$id_spellsaveflag}" checked="checked" /><span></span>
                                        <span class="lbl med" data-i18n="saving-throw:">Saving Throw:</span>
                                        <input type="text" name="attr_spellsave" accept="Saving Throw" class="underlined med" spellcheck="false" data-i18n-placeholder="spellsave-ph" placeholder="Reflex Half" title="@{repeating_spell-like_$id_spellsave}" />
                                        <span class="spacer"></span>
                                        <span class="lbl" data-i18n="dc-u" data-i18n-title="spell-save-dc" title="Spell Save DC">DC</span>
                                        <input type="hidden" name="attr_spelldc" value="0" />
                                        <input type="number" class="nospin underlined sml" name="attr_spelldc_mod" value="0" title="@{repeating_spell-like_$id_spelldc}" />
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellresistanceflag" value="{{sr=1}}" title="@{repeating_spell-like_$id_spellresistanceflag}" checked="checked" /><span></span>
                                        <span class="lbl med" data-i18n="spell-resistance:">Spell Resistance:</span>
                                        <input type="text" name="attr_spellresistance" accept="Spell Resistance" class="underlined med" spellcheck="false" title="@{repeating_spell-like_$id_spellresistance}" />
                                    </div>
                                    <div class="myrow grtopbrd">
                                        <input class="pseudocheck" type="checkbox" name="attr_spellatkflag" value="{{attack=1}}" title="@{repeating_spell-like_$id_spellatkflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="attack:">Attack:</span>
                                        <input type="hidden" name="attr_spellatktype" value="0" />
                                        <input type="text" class="underlined dmgbase" name="attr_spellatkmod" value="0" spellcheck="false" title="@{repeating_spell-like_$id_spellatkmod}" />
                                        <span class="spacer"></span>
                                        <span class="lbl" data-i18n="critical-range:" data-i18n-title="critical-range" title="Critical Range">Critical Range:</span>
                                        <input type="number" class="nospin underlined" name="attr_spellatkcritrange" value="20" title="@{repeating_spell-like_$id_spellatkcritrange}" />
                                        <span class="lbl" data-i18n="multiplier:" data-i18n-title="critical-multiplier" title="Critical Multiplier">Multiplier:</span>
                                        <input type="number" class="nospin underlined" name="attr_spelldmgcritmulti" value="2" title="@{repeating_spell-like_$id_spelldmgcritmulti}" />
                                    </div>
                                    <div class="myrow grtopbrd">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldmgflag" value="{{damage=1}} {{dmg1flag=1}}" title="@{repeating_spell-like_$id_spelldmgflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage:">Damage:</span>
                                        <input type="text" name="attr_spelldmg" class="underlined dmgbase" spellcheck="false" placeholder="1d6" title="@{repeating_spell-like_$id_spelldmg}" />
                                        <span class="lbl right typ" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_spelldmgtype" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="fire" placeholder="Fire" title="@{repeating_spell-like_$id_spelldmgtype}" />
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldmg2flag" value="{{damage=1}} {{dmg2flag=1}}" title="@{repeating_spell-like_$id_spelldmg2flag}" /><span></span>
                                        <span class="lbl atk" data-i18n="damage2:">Damage2:</span>
                                        <input type="text" name="attr_spelldmg2" class="underlined dmgbase" spellcheck="false" placeholder="1d4" title="@{repeating_spell-like_$id_spelldmg2}" />
                                        <span class="lbl right typ" data-i18n="type:">Type:</span>
                                        <input type="text" name="attr_spelldmg2type" class="underlined dmgtype" spellcheck="false" data-i18n-placeholder="force" placeholder="Force" title="@{repeating_spell-like_$id_spelldmg2type}" />
                                    </div>
                                    <div class="myrow grtopbrd">
                                        <input class="pseudocheck" type="checkbox" name="attr_spelldescflag" value="{{descflag=[[1]]}}" checked="checked" title="@{repeating_spell-like_$id_spelldescflag}" /><span></span>
                                        <span class="lbl atk" data-i18n="description:">Description:</span>
                                        <div class="autoex">
                                            <span name="attr_spelldesc"></span>
                                            <textarea name="attr_spelldesc" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_spell-like_$id_spelldesc}"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </fieldset> <!-- END REPEATING SPELL-LIKE -->
                    </div> <!-- END SPELL-LIKE ABILITIES -->
                    <div class="col1third"> <!-- METAMAGIC -->
                        <div class="myrow right">
                            <div class="blacklabel">
                                <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                                <div class="blackbgrd">
                                    <span class="big only" data-i18n="metamagic">Metamagic</span>
                                </div>
                            </div>
                        </div>
                        <fieldset class="repeating_metamagic">
                            <div class="myrow metamagic underlined compendium-drop-target">
                                <input class="options-flag" name="attr_options-flag" type="checkbox" data-i18n-title="show-hide-options" title="Show/hide options" checked="checked"><span>y</span>
                                <button class="myrol margindent" type="roll" name="FeatShow" data-i18n-title="show-feat" title="Show Feat" value="@{whispertype} &{template:pc} {{name=@{name}}} {{type=feat}} {{showchar=@{rollshowchar}}} {{charname=@{character_name}}} {{feattype=^{metamagic}}} {{prerequisites=@{prerequisites}}} {{benefits=@{benefits}}} {{normal=@{normal}}} {{special=@{special}}} @{descflag}"><span class="pseudoattr" name="attr_name"></span></button>
                                <div class="options">
                                    <div class="myrow">
                                        <span class="lbl" data-i18n="name">Name</span>
                                        <input type="text" name="attr_name" accept="Name" class="underlined" spellcheck="false" data-i18n-placeholder="name" placeholder="Name" title="@{repeating_feats_$id_name}" />
                                        <input type="hidden" name="attr_fromcompendium" accept="uniqueName" class="fromcompendium" value="" />
                                        <button class="myrol" type="compendium" name="attr_fromcompendium" accept="uniqueName" data-i18n="open-compendium-item" title="Open Compendium Item"></button>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl" data-i18n="prerequisites:">Prerequisites:</span>
                                        <div class="autoex">
                                            <span name="attr_prerequisites"></span>
                                            <textarea name="attr_prerequisites" class="underlined" spellcheck="false" title="@{repeating_feats_$id_prerequisites}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl" data-i18n="benefits:">Benefits:</span>
                                        <div class="autoex">
                                            <span name="attr_benefits"></span>
                                            <textarea name="attr_benefits" class="underlined" spellcheck="false" title="@{repeating_feats_$id_benefits}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl" data-i18n="normal:">Normal:</span>
                                        <div class="autoex">
                                            <span name="attr_normal"></span>
                                            <textarea name="attr_normal" class="underlined" spellcheck="false" title="@{repeating_feats_$id_normal}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl" data-i18n="special:">Special:</span>
                                        <div class="autoex">
                                            <span name="attr_special"></span>
                                            <textarea name="attr_special" class="underlined" spellcheck="false" title="@{repeating_feats_$id_special}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <input class="pseudocheck" type="checkbox" name="attr_descflag" value="{{descflag=[[1]]}}{{desc=@{description}}}" title="@{repeating_feats_$id_descflag}" checked="checked" /><span></span>
                                        <span class="lbl atk" data-i18n="description:">Description:</span>
                                        <div class="autoex">
                                            <span name="attr_description"></span>
                                            <textarea name="attr_description" accept="Content" class="underlined" spellcheck="false" data-i18n-placeholder="description" placeholder="Description" title="@{repeating_feats_$id_description}"></textarea>
                                        </div>
                                    </div>
                                    <div class="myrow">
                                        <span class="lbl" data-i18n="notes:">Notes:</span>
                                        <div class="autoex">
                                            <span name="attr_notes"></span>
                                            <textarea name="attr_notes" spellcheck="false" data-i18n-placeholder="notes" placeholder="Notes" title="@{repeating_attacks_$id_notes}"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    </div> <!-- END METAMAGIC -->
                </div> <!-- END SPELL-LIKE and METAMAGIC -->
            </div>
        </div> <!-- END SPELLS -->
    </div> <!-- END TAB SPELLS -->
    <div class="tabconf"> <!-- TAB CONFIGURATION -->
        <div class="col2third">
            <div class="blacklabel">
                <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                <div class="blackbgrd">
                    <span class="big only" data-i18n="class">class</span>
                </div>
                <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
            </div>
            <div class="bordered titled inbox">
                <div class="labline top help multiclass right">
                    <span class="lab spellcasting" data-i18n="spellcasting">Spellcasting</span>
                </div>
                <div class="labline top help multiclass bord">
                    <span class="roundblack">?</span>
                    <span class="lab class" data-i18n="class" data-i18n-title="class-name" title="Class name">Class</span>
                    <span class="lab fav" data-i18n="f-u" data-i18n-title="favored-class" title="Favored Class">F</span>
                    <span class="lab" data-i18n="lvl" data-i18n-title="level" title="Level">Lvl</span>
                    <span class="lab hd" data-i18n="hd-u" data-i18n-title="hit-dice" title="Hit Dice">HD</span>
                    <span class="lab" data-i18n="bab-u" data-i18n-title="base-attack-bonus" title="Base Attack Bonus">BAB</span>
                    <span class="lab" data-i18n="fort-u" data-i18n-title="fortitude" title="Fortitude">FORT</span>
                    <span class="lab" data-i18n="ref-u" data-i18n-title="reflex" title="Reflex">REF</span>
                    <span class="lab" data-i18n="will-u" data-i18n-title="will" title="Will">WILL</span>
                    <span class="lab spell" data-i18n="sc-u" data-i18n-title="spellcasting" title="Spellcasting">SC</span>
                    <span class="lab" data-i18n="cl-u" data-i18n-title="caster-level" title="Caster Level">CL</span>
                    <span class="lab ability" data-i18n="ability" data-i18n-title="casting-ability" title="Casting Ability">Ability</span>
                    <span class="lab" data-i18n="dc-u" data-i18n-title="save-dc-misc-bonus" title="Save DC Misc Bonus">DC</span>
                    <span class="lab fail" data-i18n="sf-u" data-i18n-title="armor-spell-failure" title="Armor spell failure">SF</span>
                </div>
                <div class="myrow multiclass">
                    <span class="roundblack">1</span>
                    <input type="text" name="attr_class1_name" spellcheck="false" class="underlined medium" title="@{class1_name}" />
                    <input type="radio" name="attr_class_favored" class="sheet-pseudocheck" value="1" checked="checked" title="@{class_favored}" /><span></span>
                    <input type="number" name="attr_class1_level" value="1" class="nospin underlined sml" title="@{class1_level}" />
                    <select name="attr_hitdietype" class="underlined" title="@{hitdietype}">
                        <option value="4">D4</option>
                        <option value="6">D6</option>
                        <option value="8" selected="selected">D8</option>
                        <option value="10">D10</option>
                        <option value="12">D12</option>
                    </select>
                    <input type="number" name="attr_class1_bab" value="0" class="nospin underlined sml" title="@{class1_bab}" />
                    <input type="number" name="attr_class1_fortitude" value="0" class="nospin underlined sml" title="@{class1_fortitude}" />
                    <input type="number" name="attr_class1_reflex" value="0" class="nospin underlined sml" title="@{class1_reflex}" />
                    <input type="number" name="attr_class1_will" value="0" class="nospin underlined sml" title="@{class1_will}" />
                    <input class="pseudocheck margindent" type="checkbox" name="attr_caster1_flag" value="1" title="@{caster1_flag}" /><span></span>
                    <input type="number" name="attr_caster1_level" value="0" class="nospin underlined sml" title="@{caster1_level}" />
                    <select name="attr_caster1_ability" class="underlined ability" title="@{caster1_ability}">
                        <option value="strength" data-i18n="strength">Strength</option>
                        <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                        <option value="constitution" data-i18n="constitution">Constitution</option>
                        <option value="intelligence" data-i18n="intelligence" selected="selected">Intelligence</option>
                        <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                        <option value="charisma" data-i18n="charisma">Charisma</option>
                    </select>
                    <input type="number" name="attr_caster1_dc_misc" value="0" class="nospin sml underlined" title="@{caster1_dc_misc}" />
                    <input class="pseudocheck" type="checkbox" name="attr_caster1_spell_failure" value="1" title="@{caster1_spell_failure}" checked="checked" /><span></span>
                </div>
                <div class="myrow multiclass">
                    <span class="roundblack">2</span>
                    <input type="text" name="attr_class2_name" spellcheck="false" class="underlined medium" title="@{class2_name}" />
                    <input type="radio" name="attr_class_favored" class="sheet-pseudocheck" value="1" title="@{class_favored}" /><span></span>
                    <input type="number" name="attr_class2_level" value="0" class="nospin underlined sml" title="@{class2_level}" />
                    <select name="attr_class2_hitdietype" class="underlined" title="@{class2_hitdietype}">
                        <option value="4">D4</option>
                        <option value="6">D6</option>
                        <option value="8" selected="selected">D8</option>
                        <option value="10">D10</option>
                        <option value="12">D12</option>
                    </select>
                    <input type="number" name="attr_class2_bab" value="0" class="nospin underlined sml" title="@{class2_bab}" />
                    <input type="number" name="attr_class2_fortitude" value="0" class="nospin underlined sml" title="@{class2_fortitude}" />
                    <input type="number" name="attr_class2_reflex" value="0" class="nospin underlined sml" title="@{class2_reflex}" />
                    <input type="number" name="attr_class2_will" value="0" class="nospin underlined sml" title="@{class2_will}" />
                    <input class="pseudocheck margindent" type="checkbox" name="attr_caster2_flag" value="1" title="@{caster2_flag}" /><span></span>
                    <input type="number" name="attr_caster2_level" value="0" class="nospin underlined sml" title="@{caster2_level}" />
                    <select name="attr_caster2_ability" class="underlined ability" title="@{caster2_ability}">
                        <option value="strength" data-i18n="strength">Strength</option>
                        <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                        <option value="constitution" data-i18n="constitution">Constitution</option>
                        <option value="intelligence" data-i18n="intelligence" selected="selected">Intelligence</option>
                        <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                        <option value="charisma" data-i18n="charisma">Charisma</option>
                    </select>
                    <input type="number" name="attr_caster2_dc_misc" value="0" class="nospin sml underlined" title="@{caster2_dc_misc}" />
                    <input class="pseudocheck" type="checkbox" name="attr_caster2_spell_failure" value="1" title="@{caster2_spell_failure}" checked="checked" /><span></span>
                </div>
                <div class="myrow multiclass">
                    <span class="roundblack">3</span>
                    <input type="text" name="attr_class3_name" spellcheck="false" class="underlined medium" title="@{class3_name}" />
                    <input type="radio" name="attr_class_favored" class="sheet-pseudocheck" value="1" title="@{class_favored}" /><span></span>
                    <input type="number" name="attr_class3_level" value="0" class="nospin underlined sml" title="@{class3_level}" />
                    <select name="attr_class3_hitdietype" class="underlined" title="@{class3_hitdietype}">
                        <option value="4">D4</option>
                        <option value="6">D6</option>
                        <option value="8" selected="selected">D8</option>
                        <option value="10">D10</option>
                        <option value="12">D12</option>
                    </select>
                    <input type="number" name="attr_class3_bab" value="0" class="nospin underlined sml" title="@{class3_bab}" />
                    <input type="number" name="attr_class3_fortitude" value="0" class="nospin underlined sml" title="@{class3_fortitude}" />
                    <input type="number" name="attr_class3_reflex" value="0" class="nospin underlined sml" title="@{class3_reflex}" />
                    <input type="number" name="attr_class3_will" value="0" class="nospin underlined sml" title="@{class3_will}" />
                </div>
                <div class="spacer"></div>
                <div class="myrow multiclass" style="padding-left: 175px;">
                    <div class="boxed greybg">
                        <span name="attr_level" class="pseudoattr" title="@{level}"></span>
                    </div>
                    <div class="boxed greybg" style="margin-left: 27px;">
                        <span name="attr_bab" class="pseudoattr" title="@{bab}"></span>
                    </div>
                    <div class="boxed greybg">
                        <span name="attr_fortitude_base" class="pseudoattr" title="@{fortitude_base}"></span>
                    </div>
                    <div class="boxed greybg">
                        <span name="attr_reflex_base" class="pseudoattr" title="@{reflex_base}"></span>
                    </div>
                    <div class="boxed greybg">
                        <span name="attr_will_base" class="pseudoattr" title="@{will_base}"></span>
                    </div>
                </div>
            </div>
            <div class="spacer"></div>
            <div class="col1third"> <!-- RACE and AC -->
                <div class="blacklabel">
                    <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                    <div class="blackbgrd">
                        <span class="big only" data-i18n="race">Race</span>
                    </div>
                    <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                </div>
                <div class="bordered titled inbox">
                    <div class="myrow">
                        <span data-i18n="speed">Speed</span>:
                        <input type="number" name="attr_speed_race" value="30" class="nospin sml underlined" title="@{speed_race}" />
                        <span data-i18n="ft.">Ft.</span>
                    </div>
                    <div class="myrow padindent">
                        <input class="pseudocheck" type="checkbox" name="attr_speed_notmodified" value="1" title="@{speed_notmodified}" /><span></span>
                        <span data-i18n="speed-never-modified">Never modified by armor or encumbrance</span>
                    </div>
                </div>
                <div class="blacklabel">
                    <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                    <div class="blackbgrd">
                        <span class="big only" data-i18n="armor-class">Armor Class</span>
                    </div>
                    <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                </div>
                <div class="bordered titled inbox">
                    <div class="myrow padindent">
                        <span data-i18n="primary-ability-modifier">Primary ability modifier</span>:
                        <select name="attr_ac_ability_primary" class="underlined" title="@{ac_ability_primary}">
                            <option value="strength" data-i18n="strength">Strength</option>
                            <option value="dexterity" data-i18n="dexterity" selected="selected">Dexterity</option>
                            <option value="constitution" data-i18n="constitution">Constitution</option>
                            <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                            <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                            <option value="charisma" data-i18n="charisma">Charisma</option>
                        </select>
                    </div>
                    <div class="myrow padindent">
                        <span data-i18n="secondary-ability-modifier">Secondary ability modifier</span>:
                        <select name="attr_ac_ability_secondary" class="underlined" title="@{ac_ability_secondary}">
                            <option value="none" data-i18n="none" selected="selected">None</option>
                            <option value="strength" data-i18n="strength">Strength</option>
                            <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                            <option value="constitution" data-i18n="constitution">Constitution</option>
                            <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                            <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                            <option value="charisma" data-i18n="charisma">Charisma</option>
                        </select>
                    </div>
                    <div class="myrow padindent"><span data-i18n="dodge-bonus">Dodge bonus</span>:<input type="number" name="attr_ac_dodge" value="0" class="nospin sml underlined" title="@{ac_dodge}" /></div>
                    <div class="myrow padindent"><input class="pseudocheck" type="checkbox" name="attr_ac_noflatflooted" value="1" title="@{ac_noflatflooted}" /><span></span><span data-i18n="cannot-be-caught-flat-footed">Cannot be caught Flat-Footed</span></div>
                    <div class="myrow padindent"><input class="pseudocheck" type="checkbox" name="attr_ac_touchshield" value="1" title="@{ac_touchshield}" /><span></span><span data-i18n="shield-bonus-added-to-touch-ac">Shield bonus added to Touch AC</span></div>
                </div>
            </div> <!-- END RACE and AC -->
            <div class="col1third"> <!-- SAVES and ATTACKS -->
                <div class="blacklabel">
                    <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                    <div class="blackbgrd">
                        <span class="big only" data-i18n="saving-throws">Saving Throws</span>
                    </div>
                    <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                </div>
                <div class="bordered titled inbox">
                    <div class="myrow padindent">
                        <span data-i18n="fortitude-ability">Fortitude Ability</span>:
                        <select name="attr_fortitude_ability" class="underlined" title="@{fortitude_ability}">
                            <option value="strength" data-i18n="strength">Strength</option>
                            <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                            <option value="constitution" data-i18n="constitution" selected="selected">Constitution</option>
                            <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                            <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                            <option value="charisma" data-i18n="charisma">Charisma</option>
                        </select>
                    </div>
                    <div class="myrow padindent">
                        <span data-i18n="reflex-ability">Reflex Ability</span>:
                        <select name="attr_reflex_ability" class="underlined" title="@{reflex_ability}">
                            <option value="strength" data-i18n="strength">Strength</option>
                            <option value="dexterity" data-i18n="dexterity" selected="selected">Dexterity</option>
                            <option value="constitution" data-i18n="constitution">Constitution</option>
                            <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                            <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                            <option value="charisma" data-i18n="charisma">Charisma</option>
                        </select>
                    </div>
                    <div class="myrow padindent">
                        <span data-i18n="will-ability">Will Ability</span>:
                        <select name="attr_will_ability" class="underlined" title="@{will_ability}">
                            <option value="strength" data-i18n="strength">Strength</option>
                            <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                            <option value="constitution" data-i18n="constitution">Constitution</option>
                            <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                            <option value="wisdom" data-i18n="wisdom" selected="selected">Wisdom</option>
                            <option value="charisma" data-i18n="charisma">Charisma</option>
                        </select>
                    </div>
                </div>
                <div class="blacklabel">
                    <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                    <div class="blackbgrd">
                        <span class="big only" data-i18n="attacks">Attacks</span>
                    </div>
                    <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                </div>
                <div class="bordered titled inbox">
                    <div class="myrow padindent">
                        <span data-i18n="cmb-ability">CMB Ability</span>:
                        <select name="attr_cmb_ability" class="underlined" title="@{cmb_ability}">
                            <option value="strength" data-i18n="strength" selected="selected">Strength</option>
                            <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                            <option value="constitution" data-i18n="constitution">Constitution</option>
                            <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                            <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                            <option value="charisma" data-i18n="charisma">Charisma</option>
                        </select>
                    </div>
                    <div class="myrow padindent">
                        <span data-i18n="melee-ability">Melee Ability</span>:
                        <select name="attr_melee_ability" class="underlined" title="@{melee_ability}">
                            <option value="strength" data-i18n="strength" selected="selected">Strength</option>
                            <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                            <option value="constitution" data-i18n="constitution">Constitution</option>
                            <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                            <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                            <option value="charisma" data-i18n="charisma">Charisma</option>
                        </select>
                    </div>
                    <div class="myrow padindent">
                        <span data-i18n="ranged-ability">Ranged Ability</span>:
                        <select name="attr_ranged_ability" class="underlined" title="@{ranged_ability}">
                            <option value="strength" data-i18n="strength">Strength</option>
                            <option value="dexterity" data-i18n="dexterity" selected="selected">Dexterity</option>
                            <option value="constitution" data-i18n="constitution">Constitution</option>
                            <option value="intelligence" data-i18n="intelligence">Intelligence</option>
                            <option value="wisdom" data-i18n="wisdom">Wisdom</option>
                            <option value="charisma" data-i18n="charisma">Charisma</option>
                        </select>
                    </div>
                </div>
            </div> <!-- END SAVES and ATTACKS -->
        </div>
        <div class="col1third"> <!-- ROLLS and MISC -->
            <div class="blacklabel">
                <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                <div class="blackbgrd">
                    <span class="big only" data-i18n="rolls">Rolls</span>
                </div>
                <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
            </div>
            <div class="bordered titled inbox">
                <input class="pseudocheck" type="checkbox" name="attr_rollshowchar" value="[[1]]" title="@{rollshowchar}" checked="checked" /><span></span><span data-i18n="show-character-name">Show character name</span>
                <div class="myrow">
                    <span data-i18n="whisp-rolls-gm:">Whisper Rolls to GM:</span>
                    <select name="attr_whispertype" class="underlined" title="@{whispertype}">
                        <option value="" data-i18n="never-whisper-roll" selected="selected">Never Whisper Rolls</option>
                        <!-- <option value="@{whispertoggle}" data-i18n="toggle-roll-whisper">Whisper Toggle</option> -->
                        <option value="?{Whisper?|Public Roll,|Whisper Roll,/w gm }" data-i18n="query-whisper-roll">Query Whisper</option>
                        <option value="/w gm " data-i18n="always-whisper-roll">Always Whisper Rolls</option>
                    </select>
                </div>
                <span class="block" data-i18n="query-modifier">Query modifier for:</span>
                    <div class="myrow padindent"><input class="pseudocheck" type="checkbox" name="attr_rollmod_ability" value="?{Modifier|0}" title="@{rollmod_ability}" /><span></span><span data-i18n="ability-rolls">Ability Rolls</span></div>
                    <div class="myrow padindent"><input class="pseudocheck" type="checkbox" name="attr_rollmod_initiative" value="?{Modifier|0}" title="@{rollmod_initiative}" /><span></span><span data-i18n="initiative-rolls">Initiative Rolls</span></div>
                    <div class="myrow padindent"><input class="pseudocheck" type="checkbox" name="attr_rollmod_save" value="?{Modifier|0}" title="@{rollmod_save}" /><span></span><span data-i18n="save-concentration-rolls">Saving Throw & Concentration Rolls</span></div>
                    <div class="myrow padindent"><input class="pseudocheck" type="checkbox" name="attr_rollmod_skill" value="?{Modifier|0}" title="@{rollmod_skill}" /><span></span><span data-i18n="skill-rolls">Skill Rolls</span></div>
                    <div class="myrow padindent"><input class="pseudocheck" type="checkbox" name="attr_rollmod_attack" value="?{Attack Modifier|0}" title="@{rollmod_attack}" /><span></span><span data-i18n="attack-rolls">Attack & CMB Rolls</span></div>
                    <div class="myrow padindent"><input class="pseudocheck" type="checkbox" name="attr_rollmod_damage" value="?{Damage Modifier|0}" title="@{rollmod_damage}" /><span></span><span data-i18n="damage-rolls">Damage Rolls</span></div>
                <span class="block" data-i18n="show-notes-in">Show Notes in:</span>
                    <div class="myrow padindent"><input class="pseudocheck" type="checkbox" name="attr_rollnotes_ability" value="[[1]]" title="@{rollnotes_ability}" /><span></span><span data-i18n="ability-rolls">Ability Rolls</span></div>
                    <div class="myrow padindent"><input class="pseudocheck" type="checkbox" name="attr_rollnotes_initiative" value="[[1]]" title="@{rollnotes_initiative}" /><span></span><span data-i18n="initiative-rolls">Initiative Rolls</span></div>
                    <div class="myrow padindent"><input class="pseudocheck" type="checkbox" name="attr_rollnotes_save" value="[[1]]" title="@{rollnotes_save}" /><span></span><span data-i18n="save-concentration-rolls">Saving Throw & Concentration Rolls</span></div>
                    <div class="myrow padindent"><input class="pseudocheck" type="checkbox" name="attr_rollnotes_skill" value="[[1]]" title="@{rollnotes_skill}" /><span></span><span data-i18n="skill-rolls">Skill Rolls</span></div>
                    <div class="myrow padindent"><input class="pseudocheck" type="checkbox" name="attr_rollnotes_attack" value="[[1]]" title="@{rollnotes_attack}" /><span></span><span data-i18n="attack-rolls">Attack & CMB Rolls</span></div>
                    <div class="myrow padindent"><input class="pseudocheck" type="checkbox" name="attr_rollnotes_spell" value="[[1]]" title="@{rollnotes_spell}" /><span></span><span data-i18n="spell-rolls">Spell Rolls</span></div>
            </div>
            <div class="spacer"></div>
            <div class="blacklabel">
                <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                <div class="blackbgrd">
                    <span class="big only" data-i18n="misc-u">MISC</span>
                </div>
                <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
            </div>
            <div class="bordered titled inbox">
                <input class="pseudocheck" type="checkbox" name="attr_npc" value="1" title="@{npc}" /><span></span><span data-i18n="npc-monster-statblock">NPC/Monster Statblock</span>
            </div>
            <div class="spacer"></div>
            <div class="myrow right">
                <span data-i18n="version">Version</span>&nbsp;<span name="attr_version"></span>
            </div>
        </div> <!-- END ROLLS and MISC -->
    </div> <!-- END TAB CONFIGURATION -->
</div>  <!-- END PC SHEET -->

<!-- HIDDEN ATTRIBUTES -->
<input type="hidden" name="none_mod" value="0" />
<!-- HIDDEN TRANSLATION TEXT -->
<div style="display: none;">
    <span data-i18n="combat-maneuver">Combat Maneuver</span>
    <span data-i18n="light-load">Light load</span>
    <span data-i18n="medium-load">Medium load</span>
    <span data-i18n="heavy-load">Heavy load</span>
    <span data-i18n="over-load">Overload</span>
</div>

<!-- ROLL TEMPLATES -->
<rolltemplate class="sheet-rolltemplate-pc">
    {{#name}}
        {{#rollTotal() showchar 1}}
            <div class="charname smallname bold">{{charname}}</div>
        {{/rollTotal() showchar 1}}
    {{/name}}
    {{#smallname}}
        <div class="charname smallname bold">
            {{#rollTotal() showchar 1}}{{charname}} /{{/rollTotal() showchar 1}}
            {{smallname}}
        </div>
    {{/smallname}}
    <div class="bordered">
        {{#type}}<div class="sheet-icon sheet-{{type}}"></div>{{/type}}
        {{#name}}
            <div class="vtop">
                <div class="blacklabel top">
                    <span class="big">{{name}}</span>
                    {{#feattype}}<span class="med">({{feattype}})</span>{{/feattype}}
                    {{#abilitytype}}<span class="med">({{abilitytype}})</span>{{/abilitytype}}
                    {{#atkvs}}<span class="med">{{atkvs}}</span>{{/atkvs}}
                    {{#casterclass}}<span class="med">({{casterclass}}</span>{{#level}}<span class="med"> {{level}}</span>{{/level}}<span class="med">)</span>{{/casterclass}}
                    <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                </div>
                {{^roll1}}{{#roll}}<div class="resright">{{roll}}</div>{{/roll}}{{/roll1}}
            </div>
            {{^roll1}}
                {{#attack}}
                    {{#rollWasCrit() roll}}
                        <div class="right vtop">
                            <span class="symbol">t</span>
                            {{critconfirm}}
                            <div class="blacklabel med right yellow">
                                <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                                <span data-i18n="crit-confirm">Crit confirm</span>
                            </div>
                        </div>
                    {{/rollWasCrit() roll}}
                {{/attack}}
            {{/roll1}}
        {{/name}}
        {{#attack}}
            {{#roll1}}
                {{#roll}}
                    <div class="flexatk">
                        <div class="blacklabel med">
                            <span data-i18n="attack">Attack</span>
                            <span data-i18n="#1">#1</span>
                            <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                        </div>
                        {{roll}}
                        <div class="spacer"></div>
                        {{#rollWasCrit() roll}}
                            <span class="symbol">t</span>
                            {{critconfirm}}
                            <div class="blacklabel med right yellow">
                                <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                                <span data-i18n="crit-confirm">Crit confirm</span>
                            </div>
                        {{/rollWasCrit() roll}}
                    </div>
                    {{#rolldmg1}}
                        <div class="flexdmg">
                            <div class="blacklabel med yellow">
                                <span data-i18n="damage">Damage</span>
                                <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                            </div>
                            {{rolldmg1}}
                            {{#rolldmg1crit}}{{#rollWasCrit() roll}}
                            <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{rolldmg1crit}}
                            {{/rollWasCrit() roll}}{{/rolldmg1crit}}
                            <span class="notes inl">{{rolldmg1type}}</span>
                        </div>
                    {{/rolldmg1}}
                    {{#rolldmg2}}
                        <div class="flexdmg">
                            <div class="blacklabel med yellow">
                                <span data-i18n="damage2">Damage2</span>
                                <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                            </div>
                            {{rolldmg2}}
                            {{#rolldmg2crit}}{{#rollWasCrit() roll}}
                            <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{rolldmg2crit}}
                            {{/rollWasCrit() roll}}{{/rolldmg2crit}}
                            <span class="notes inl">{{rolldmg2type}}</span>
                        </div>
                    {{/rolldmg2}}
                {{/roll}}
                <div class="flexatk">
                    <div class="blacklabel med">
                        <span data-i18n="attack">Attack</span>
                        <span data-i18n="#2">#2</span>
                        <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                    </div>
                    {{roll1}}
                    <div class="spacer"></div>
                    {{#rollWasCrit() roll1}}
                        <span class="symbol">t</span>
                        {{critconfirm1}}
                        <div class="blacklabel med right yellow">
                            <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                            <span data-i18n="crit-confirm">Crit confirm</span>
                        </div>
                    {{/rollWasCrit() roll1}}
                </div>
                {{#roll1dmg1}}
                    <div class="flexdmg">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage">Damage</span>
                            <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                        </div>
                        {{roll1dmg1}}
                        {{#roll1dmg1crit}}{{#rollWasCrit() roll1}}
                        <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{roll1dmg1crit}}
                        {{/rollWasCrit() roll1}}{{/roll1dmg1crit}}
                        <span class="notes inl">{{roll1dmg1type}}</span>
                    </div>
                {{/roll1dmg1}}
                {{#roll1dmg2}}
                    <div class="flexdmg">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage2">Damage2</span>
                            <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                        </div>
                        {{roll1dmg2}}
                        {{#roll1dmg2crit}}{{#rollWasCrit() roll1}}
                        <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{roll1dmg2crit}}
                        {{/rollWasCrit() roll1}}{{/roll1dmg2crit}}
                        <span class="notes inl">{{roll1dmg2type}}</span>
                    </div>
                {{/roll1dmg2}}
            {{/roll1}}
            {{#roll2}}
                <div class="flexatk">
                    <div class="blacklabel med">
                        <span data-i18n="attack">Attack</span>
                        <span data-i18n="#3">#3</span>
                        <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                    </div>
                    {{roll2}}
                    <div class="spacer"></div>
                    {{#rollWasCrit() roll2}}
                        <span class="symbol">t</span>
                        {{critconfirm2}}
                        <div class="blacklabel med right yellow">
                            <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                            <span data-i18n="crit-confirm">Crit confirm</span>
                        </div>
                    {{/rollWasCrit() roll2}}
                </div>
                {{#roll2dmg1}}
                    <div class="flexdmg">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage">Damage</span>
                            <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                        </div>
                        {{roll2dmg1}}
                        {{#roll2dmg1crit}}{{#rollWasCrit() roll2}}
                        <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{roll2dmg1crit}}
                        {{/rollWasCrit() roll2}}{{/roll2dmg1crit}}
                        <span class="notes inl">{{roll2dmg1type}}</span>
                    </div>
                {{/roll2dmg1}}
                {{#roll2dmg2}}
                    <div class="flexdmg">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage2">Damage2</span>
                            <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                        </div>
                        {{roll2dmg2}}
                        {{#roll2dmg2crit}}{{#rollWasCrit() roll2}}
                        <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{roll2dmg2crit}}
                        {{/rollWasCrit() roll2}}{{/roll2dmg2crit}}
                        <span class="notes inl">{{roll2dmg2type}}</span>
                    </div>
                {{/roll2dmg2}}
            {{/roll2}}
            {{#roll3}}
                <div class="flexatk">
                    <div class="blacklabel med">
                        <span data-i18n="attack">Attack</span>
                        <span data-i18n="#4">#4</span>
                        <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                    </div>
                    {{roll3}}
                    <div class="spacer"></div>
                    {{#rollWasCrit() roll3}}
                        <span class="symbol">t</span>
                        {{critconfirm3}}
                        <div class="blacklabel med right yellow">
                            <img class="brdleft" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdleft.png" />
                            <span data-i18n="crit-confirm">Crit confirm</span>
                        </div>
                    {{/rollWasCrit() roll3}}
                </div>
                {{#roll3dmg1}}
                    <div class="flexdmg">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage">Damage</span>
                            <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                        </div>
                        {{roll3dmg1}}
                        {{#roll3dmg1crit}}{{#rollWasCrit() roll3}}
                        <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{roll3dmg1crit}}
                        {{/rollWasCrit() roll3}}{{/roll3dmg1crit}}
                        <span class="notes inl">{{roll3dmg1type}}</span>
                    </div>
                {{/roll3dmg1}}
                {{#roll3dmg2}}
                    <div class="flexdmg">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage2">Damage2</span>
                            <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                        </div>
                        {{roll3dmg2}}
                        {{#roll3dmg2crit}}{{#rollWasCrit() roll3}}
                        <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{roll3dmg2crit}}
                        {{/rollWasCrit() roll3}}{{/roll3dmg2crit}}
                        <span class="notes inl">{{roll3dmg2type}}</span>
                    </div>
                {{/roll3dmg2}}
            {{/roll3}}
        {{/attack}}
        {{#damage}}
            {{#dmg1flag}}
                <div class="flexdmg">
                    <div class="blacklabel med yellow">
                        <span data-i18n="damage">Damage</span>
                        <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                    </div>
                    {{dmg1}}
                    {{#dmg1crit}}
                        {{#roll}}{{#rollWasCrit() roll}}<span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{dmg1crit}}{{/rollWasCrit() roll}}{{/roll}}
                        {{^roll}}<span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{dmg1crit}}{{/roll}}
                    {{/dmg1crit}}
                    <span class="notes inl">{{dmg1type}}</span>
                </div>
            {{/dmg1flag}}
            {{#dmg2flag}}
                <div class="flexdmg">
                    <div class="blacklabel med yellow">
                        <span data-i18n="damage2">Damage2</span>
                        <img class="brdright" src="https://raw.githubusercontent.com/NathaTerrien/roll20-wip/master/PFO/img/brdright.png" />
                    </div>
                    {{dmg2}}
                    {{#dmg2crit}}
                        {{#roll}}{{#rollWasCrit() roll}}<span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{dmg2crit}}{{/rollWasCrit() roll}}{{/roll}}
                        {{^roll}}<span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{dmg2crit}}{{/roll}}
                    {{/dmg2crit}}
                    <span class="notes inl">{{dmg2type}}</span>
                </div>
            {{/dmg2flag}}
        {{/damage}}
        {{#shortdesc}}<div class="center"><span class="notes ital">{{shortdesc}}</span></div>{{/shortdesc}}
        {{#spellfailureroll}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="spell-failure">Spell Failure</span>
                {{spellfailureroll}} <span class="notes inl">></span> {{spellfailure}}
                {{#rollGreater() spellfailureroll spellfailure}}<span class="lbl bold" style="color: #247305;" data-i18n="success">Success</span>{{/rollGreater() spellfailureroll spellfailure}}
                {{#rollTotal() spellfailureroll spellfailure}}<span class="lbl bold" style="color: #BE202E;" data-i18n="failure">Failure</span>{{/rollTotal() spellfailureroll spellfailure}}
                {{#rollLess() spellfailureroll spellfailure}}<span class="lbl bold" style="color: #BE202E;" data-i18n="failure">Failure</span>{{/rollLess() spellfailureroll spellfailure}}
            </div>
        {{/spellfailureroll}}
        {{#sr}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="spell-resistance:">Spell Resistance:</span>
                <span class="notes inl">{{spellresistance}}</span>
            </div>
        {{/sr}}
        {{#save}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="saving-throw:">Saving Throw:</span>
                <span class="notes inl">{{saveeffect}}</span>
                <span class="lbl bold" data-i18n="dc-u">DC</span>
                {{savedc}}
            </div>
        {{/save}}
        {{#school}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="school:">School:</span>
                <span class="notes inl">{{school}}</span>
            </div>
        {{/school}}
        {{#castingtime}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="casting-time:">Casting time:</span>
                <span class="notes inl">{{castingtime}}</span>
            </div>
        {{/castingtime}}
        {{#component}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="components:">Components:</span>
                <span class="notes inl">{{component}}</span>
            </div>
        {{/component}}
        {{#range}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="range:">Range:</span>
                <span class="notes inl">{{range}}</span>
            </div>
        {{/range}}
        {{#area}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="area:">Area:</span>
                <span class="notes inl">{{area}}</span>
            </div>
        {{/area}}
        {{#targets}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="targets:">Targets:</span>
                <span class="notes inl">{{targets}}</span>
            </div>
        {{/targets}}
        {{#effect}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="effect:">Effect:</span>
                <span class="notes inl">{{effect}}</span>
            </div>
        {{/effect}}
        {{#duration}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="duration:">Duration:</span>
                <span class="notes inl">{{duration}}</span>
            </div>
        {{/duration}}
        {{#prerequisites}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="prerequisites:">Prerequisites:</span>
                <span class="notes inl">{{prerequisites}}</span>
            </div>
        {{/prerequisites}}
        {{#benefits}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="benefits:">Benefits:</span>
                <span class="notes inl">{{benefits}}</span>
            </div>
        {{/benefits}}
        {{#normal}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="normal:">Normal:</span>
                <span class="notes inl">{{normal}}</span>
            </div>
        {{/normal}}
        {{#special}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="special:">Special:</span>
                <span class="notes inl">{{special}}</span>
            </div>
        {{/special}}

    </div>
    {{#descflag}}
        {{#desc}}
            <div class="desc">
                <span class="notes inl ital">{{desc}}</span>
            </div>
        {{/desc}}
    {{/descflag}}
    {{#rollTotal() shownotes 1}}
        {{#notes}}
            <div class="notes">
                <span class="lbl bold" data-i18n="notes">Notes</span>
                <span class="notes inl ital">{{notes}}</span>
            </div>
        {{/notes}}
    {{/rollTotal() shownotes 1}}
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-npc">
    {{#name}}
        {{#rollTotal() showchar 1}}
            <div class="charname smallname bold">{{charname}}</div>
        {{/rollTotal() showchar 1}}
    {{/name}}
    {{#smallname}}
        <div class="charname smallname bold">
            {{#rollTotal() showchar 1}}{{charname}} /{{/rollTotal() showchar 1}}
            {{smallname}}
        </div>
    {{/smallname}}
    <div class="bordered">
        {{#type}}<div class="sheet-icon sheet-{{type}}"></div>{{/type}}
        {{#name}}
            <div class="center vtop">
                <span class="big">{{name}}</span>
                {{^attack}}{{#roll}}<span class="bigres">{{roll}}</span>{{/roll}}{{/attack}}
                {{#feattype}}<span class="med">({{feattype}})</span>{{/feattype}}
                {{#abilitytype}}<span class="med">({{abilitytype}})</span>{{/abilitytype}}
                {{#atkvs}}<span class="med">{{atkvs}}</span>{{/atkvs}}
                {{#casterclass}}<span class="med">({{casterclass}}</span>{{#level}}<span class="med"> {{level}}</span>{{/level}}<span class="med">)</span>{{/casterclass}}
            </div>
        {{/name}}
        {{#attack}}
            {{#roll}}
                <div class="flexatk">
                    <div class="blacklabel med">
                        <span data-i18n="attack">Attack</span>
                        {{#roll1}}<span data-i18n="#1">#1</span>{{/roll1}}
                    </div>
                    {{roll}}
                    <div class="spacer"></div>
                    {{#rollWasCrit() roll}}
                        <span class="symbol">t</span>
                        {{critconfirm}}
                        <div class="blacklabel med right yellow">
                            <span data-i18n="crit-confirm">Crit confirm</span>
                        </div>
                    {{/rollWasCrit() roll}}
                </div>
                {{#rolldmg1}}
                    <div class="vtop">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage">Damage</span>
                        </div>
                        {{rolldmg1}}
                        {{#rolldmg1crit}}{{#rollWasCrit() roll}}
                            <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{rolldmg1crit}}
                        {{/rollWasCrit() roll}}{{/rolldmg1crit}}
                        <span class="notes inl">{{rolldmg1type}}</span>
                    </div>
                {{/rolldmg1}}
                {{#rolldmg2}}
                    <div class="vtop">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage2">Damage2</span>
                        </div>
                        {{rolldmg2}}
                        {{#rolldmg2crit}}{{#rollWasCrit() roll}}
                            <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{rolldmg2crit}}
                        {{/rollWasCrit() roll}}{{/rolldmg2crit}}
                        <span class="notes inl">{{rolldmg2type}}</span>
                    </div>
                {{/rolldmg2}}
            {{/roll}}
            {{#roll1}}
                <div class="flexatk">
                    <div class="blacklabel med">
                        <span data-i18n="attack">Attack</span>
                        <span data-i18n="#2">#2</span>
                    </div>
                    {{roll1}}
                    <div class="spacer"></div>
                    {{#rollWasCrit() roll1}}
                        <span class="symbol">t</span>
                        {{critconfirm1}}
                        <div class="blacklabel med right yellow">
                            <span data-i18n="crit-confirm">Crit confirm</span>
                        </div>
                    {{/rollWasCrit() roll1}}
                </div>
                {{#roll1dmg1}}
                    <div class="vtop">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage">Damage</span>
                        </div>
                        {{roll1dmg1}}
                        {{#roll1dmg1crit}}{{#rollWasCrit() roll1}}
                            <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{roll1dmg1crit}}
                        {{/rollWasCrit() roll1}}{{/roll1dmg1crit}}
                        <span class="notes inl">{{roll1dmg1type}}</span>
                    </div>
                {{/roll1dmg1}}
                {{#roll1dmg2}}
                    <div class="vtop">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage2">Damage2</span>
                        </div>
                        {{roll1dmg2}}
                        {{#roll1dmg2crit}}{{#rollWasCrit() roll1}}
                            <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{roll1dmg2crit}}
                        {{/rollWasCrit() roll1}}{{/roll1dmg2crit}}
                        <span class="notes inl">{{roll1dmg2type}}</span>
                    </div>
                {{/roll1dmg2}}
            {{/roll1}}
            {{#roll2}}
                <div class="flexatk">
                    <div class="blacklabel med">
                        <span data-i18n="attack">Attack</span>
                        <span data-i18n="#3">#3</span>
                    </div>
                    {{roll2}}
                    <div class="spacer"></div>
                    {{#rollWasCrit() roll2}}
                        <span class="symbol">t</span>
                        {{critconfirm2}}
                        <div class="blacklabel med right yellow">
                            <span data-i18n="crit-confirm">Crit confirm</span>
                        </div>
                    {{/rollWasCrit() roll2}}
                </div>
                {{#roll2dmg1}}
                    <div class="vtop">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage">Damage</span>
                        </div>
                        {{roll2dmg1}}
                        {{#roll2dmg1crit}}{{#rollWasCrit() roll2}}
                            <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{roll2dmg1crit}}
                        {{/rollWasCrit() roll2}}{{/roll2dmg1crit}}
                        <span class="notes inl">{{roll2dmg1type}}</span>
                    </div>
                {{/roll2dmg1}}
                {{#roll2dmg2}}
                    <div class="vtop">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage2">Damage2</span>
                        </div>
                        {{roll2dmg2}}
                        {{#roll2dmg2crit}}{{#rollWasCrit() roll2}}
                            <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{roll2dmg2crit}}
                        {{/rollWasCrit() roll2}}{{/roll2dmg2crit}}
                        <span class="notes inl">{{roll2dmg2type}}</span>
                    </div>
                {{/roll2dmg2}}
            {{/roll2}}
            {{#roll3}}
                <div class="flexatk">
                    <div class="blacklabel med">
                        <span data-i18n="attack">Attack</span>
                        <span data-i18n="#4">#4</span>
                    </div>
                    {{roll3}}
                    <div class="spacer"></div>
                    {{#rollWasCrit() roll3}}
                        <span class="symbol">t</span>
                        {{critconfirm3}}
                        <div class="blacklabel med right yellow">
                            <span data-i18n="crit-confirm">Crit confirm</span>
                        </div>
                    {{/rollWasCrit() roll3}}
                </div>
                {{#roll3dmg1}}
                    <div class="vtop">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage">Damage</span>
                        </div>
                        {{roll3dmg1}}
                        {{#roll3dmg1crit}}{{#rollWasCrit() roll3}}
                            <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{roll3dmg1crit}}
                        {{/rollWasCrit() roll3}}{{/roll3dmg1crit}}
                        <span class="notes inl">{{roll3dmg1type}}</span>
                    </div>
                {{/roll3dmg1}}
                {{#roll3dmg2}}
                    <div class="vtop">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage2">Damage2</span>
                        </div>
                        {{roll3dmg2}}
                        {{#roll3dmg2crit}}{{#rollWasCrit() roll3}}
                            <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{roll3dmg2crit}}
                        {{/rollWasCrit() roll3}}{{/roll3dmg2crit}}
                        <span class="notes inl">{{roll3dmg2type}}</span>
                    </div>
                {{/roll3dmg2}}
            {{/roll3}}
            {{#roll4}}
                <div class="flexatk">
                    <div class="blacklabel med">
                        <span data-i18n="attack">Attack</span>
                        <span data-i18n="#5">#5</span>
                    </div>
                    {{roll4}}
                    <div class="spacer"></div>
                    {{#rollWasCrit() roll4}}
                        <span class="symbol">t</span>
                        {{critconfirm3}}
                        <div class="blacklabel med right yellow">
                            <span data-i18n="crit-confirm">Crit confirm</span>
                        </div>
                    {{/rollWasCrit() roll4}}
                </div>
                {{#roll4dmg1}}
                    <div class="vtop">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage">Damage</span>
                        </div>
                        {{roll4dmg1}}
                        {{#roll4dmg1crit}}{{#rollWasCrit() roll4}}
                            <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{roll4dmg1crit}}
                        {{/rollWasCrit() roll4}}{{/roll4dmg1crit}}
                        <span class="notes inl">{{roll4dmg1type}}</span>
                    </div>
                {{/roll4dmg1}}
                {{#roll4dmg2}}
                    <div class="vtop">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage2">Damage2</span>
                        </div>
                        {{roll4dmg2}}
                        {{#roll4dmg2crit}}{{#rollWasCrit() roll4}}
                            <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{roll4dmg2crit}}
                        {{/rollWasCrit() roll4}}{{/roll4dmg2crit}}
                        <span class="notes inl">{{roll4dmg2type}}</span>
                    </div>
                {{/roll4dmg2}}
            {{/roll4}}
            {{#roll5}}
                <div class="flexatk">
                    <div class="blacklabel med">
                        <span data-i18n="attack">Attack</span>
                        <span data-i18n="#6">#6</span>
                    </div>
                    {{roll5}}
                    <div class="spacer"></div>
                    {{#rollWasCrit() roll5}}
                        <span class="symbol">t</span>
                        {{critconfirm3}}
                        <div class="blacklabel med right yellow">
                            <span data-i18n="crit-confirm">Crit confirm</span>
                        </div>
                    {{/rollWasCrit() roll5}}
                </div>
                {{#roll5dmg1}}
                    <div class="vtop">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage">Damage</span>
                        </div>
                        {{roll5dmg1}}
                        {{#roll5dmg1crit}}{{#rollWasCrit() roll5}}
                            <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{roll5dmg1crit}}
                        {{/rollWasCrit() roll5}}{{/roll5dmg1crit}}
                        <span class="notes inl">{{roll5dmg1type}}</span>
                    </div>
                {{/roll5dmg1}}
                {{#roll5dmg2}}
                    <div class="vtop">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage2">Damage2</span>
                        </div>
                        {{roll5dmg2}}
                        {{#roll5dmg2crit}}{{#rollWasCrit() roll5}}
                            <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{roll5dmg2crit}}
                        {{/rollWasCrit() roll5}}{{/roll5dmg2crit}}
                        <span class="notes inl">{{roll5dmg2type}}</span>
                    </div>
                {{/roll5dmg2}}
            {{/roll5}}
            {{#roll6}}
                <div class="flexatk">
                    <div class="blacklabel med">
                        <span data-i18n="attack">Attack</span>
                        <span data-i18n="#7">#7</span>
                    </div>
                    {{roll6}}
                    <div class="spacer"></div>
                    {{#rollWasCrit() roll6}}
                        <span class="symbol">t</span>
                        {{critconfirm3}}
                        <div class="blacklabel med right yellow">
                            <span data-i18n="crit-confirm">Crit confirm</span>
                        </div>
                    {{/rollWasCrit() roll6}}
                </div>
                {{#roll6dmg1}}
                    <div class="vtop">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage">Damage</span>
                        </div>
                        {{roll6dmg1}}
                        {{#roll6dmg1crit}}{{#rollWasCrit() roll6}}
                            <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{roll6dmg1crit}}
                        {{/rollWasCrit() roll6}}{{/roll6dmg1crit}}
                        <span class="notes inl">{{roll6dmg1type}}</span>
                    </div>
                {{/roll6dmg1}}
                {{#roll6dmg2}}
                    <div class="vtop">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage2">Damage2</span>
                        </div>
                        {{roll6dmg2}}
                        {{#roll6dmg2crit}}{{#rollWasCrit() roll6}}
                            <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{roll6dmg2crit}}
                        {{/rollWasCrit() roll6}}{{/roll6dmg2crit}}
                        <span class="notes inl">{{roll6dmg2type}}</span>
                    </div>
                {{/roll6dmg2}}
            {{/roll6}}
            {{#roll7}}
                <div class="flexatk">
                    <div class="blacklabel med">
                        <span data-i18n="attack">Attack</span>
                        <span data-i18n="#8">#8</span>
                    </div>
                    {{roll7}}
                    <div class="spacer"></div>
                    {{#rollWasCrit() roll7}}
                        <span class="symbol">t</span>
                        {{critconfirm3}}
                        <div class="blacklabel med right yellow">
                            <span data-i18n="crit-confirm">Crit confirm</span>
                        </div>
                    {{/rollWasCrit() roll7}}
                </div>
                {{#roll7dmg1}}
                    <div class="vtop">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage">Damage</span>
                        </div>
                        {{roll7dmg1}}
                        {{#roll7dmg1crit}}{{#rollWasCrit() roll7}}
                            <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{roll7dmg1crit}}
                        {{/rollWasCrit() roll7}}{{/roll7dmg1crit}}
                        <span class="notes inl">{{roll7dmg1type}}</span>
                    </div>
                {{/roll7dmg1}}
                {{#roll7dmg2}}
                    <div class="vtop">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage2">Damage2</span>
                        </div>
                        {{roll7dmg2}}
                        {{#roll7dmg2crit}}{{#rollWasCrit() roll7}}
                            <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{roll7dmg2crit}}
                        {{/rollWasCrit() roll7}}{{/roll7dmg2crit}}
                        <span class="notes inl">{{roll7dmg2type}}</span>
                    </div>
                {{/roll7dmg2}}
            {{/roll7}}
            {{#roll8}}
                <div class="flexatk">
                    <div class="blacklabel med">
                        <span data-i18n="attack">Attack</span>
                        <span data-i18n="#9">#9</span>
                    </div>
                    {{roll8}}
                    <div class="spacer"></div>
                    {{#rollWasCrit() roll8}}
                        <span class="symbol">t</span>
                        {{critconfirm3}}
                        <div class="blacklabel med right yellow">
                            <span data-i18n="crit-confirm">Crit confirm</span>
                        </div>
                    {{/rollWasCrit() roll8}}
                </div>
                {{#roll8dmg1}}
                    <div class="vtop">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage">Damage</span>
                        </div>
                        {{roll8dmg1}}
                        {{#roll8dmg1crit}}{{#rollWasCrit() roll8}}
                            <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{roll8dmg1crit}}
                        {{/rollWasCrit() roll8}}{{/roll8dmg1crit}}
                        <span class="notes inl">{{roll8dmg1type}}</span>
                    </div>
                {{/roll8dmg1}}
                {{#roll8dmg2}}
                    <div class="vtop">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage2">Damage2</span>
                        </div>
                        {{roll8dmg2}}
                        {{#roll8dmg2crit}}{{#rollWasCrit() roll8}}
                            <span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{roll8dmg2crit}}
                        {{/rollWasCrit() roll8}}{{/roll8dmg2crit}}
                        <span class="notes inl">{{roll8dmg2type}}</span>
                    </div>
                {{/roll8dmg2}}
            {{/roll8}}
        {{/attack}}
        {{#attack}}
            {{#damage}}
                {{#dmg1flag}}
                    <div class="vtop">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage">Damage</span>
                        </div>
                        {{dmg1}}
                        {{#dmg1crit}}<span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{dmg1crit}}{{/dmg1crit}}
                        <span class="notes inl">{{dmg1type}}</span>
                    </div>
                {{/dmg1flag}}
                {{#dmg2flag}}
                    <div class="vtop">
                        <div class="blacklabel med yellow">
                            <span data-i18n="damage2">Damage2</span>
                        </div>
                        {{dmg2}}
                        {{#dmg2crit}}<span class="symbol" data-i18n-title="critical-damage" title="Critical damage">t</span> {{dmg2crit}}{{/dmg2crit}}
                        <span class="notes inl">{{dmg2type}}</span>
                    </div>
                {{/dmg2flag}}
            {{/damage}}
        {{/attack}}
        {{#sr}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="spell-resistance:">Spell Resistance:</span>
                <span class="notes inl">{{spellresistance}}</span>
            </div>
        {{/sr}}
        {{#save}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="saving-throw:">Saving Throw:</span>
                <span class="notes inl">{{saveeffect}}</span>
                <span class="lbl bold" data-i18n="dc-u">DC</span>
                {{savedc}}
            </div>
        {{/save}}
        {{#school}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="school:">School:</span>
                <span class="notes inl">{{school}}</span>
            </div>
        {{/school}}
        {{#castingtime}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="casting-time:">Casting time:</span>
                <span class="notes inl">{{castingtime}}</span>
            </div>
        {{/castingtime}}
        {{#component}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="components:">Components:</span>
                <span class="notes inl">{{component}}</span>
            </div>
        {{/component}}
        {{#range}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="range:">Range:</span>
                <span class="notes inl">{{range}}</span>
            </div>
        {{/range}}
        {{#area}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="area:">Area:</span>
                <span class="notes inl">{{area}}</span>
            </div>
        {{/area}}
        {{#targets}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="targets:">Targets:</span>
                <span class="notes inl">{{targets}}</span>
            </div>
        {{/targets}}
        {{#effect}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="effect:">Effect:</span>
                <span class="notes inl">{{effect}}</span>
            </div>
        {{/effect}}
        {{#duration}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="duration:">Duration:</span>
                <span class="notes inl">{{duration}}</span>
            </div>
        {{/duration}}
        {{#prerequisites}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="prerequisites:">Prerequisites:</span>
                <span class="notes inl">{{prerequisites}}</span>
            </div>
        {{/prerequisites}}
        {{#benefits}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="benefits:">Benefits:</span>
                <span class="notes inl">{{benefits}}</span>
            </div>
        {{/benefits}}
        {{#normal}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="normal:">Normal:</span>
                <span class="notes inl">{{normal}}</span>
            </div>
        {{/normal}}
        {{#special}}
            <div class="myrow">
                <span class="lbl bold" data-i18n="special:">Special:</span>
                <span class="notes inl">{{special}}</span>
            </div>
        {{/special}}

    </div>
    {{#descflag}}
        {{#desc}}
            <div class="desc">
                <span class="notes inl ital">{{desc}}</span>
            </div>
        {{/desc}}
    {{/descflag}}
    {{#rollTotal() shownotes 1}}
        {{#notes}}
            <div class="notes">
                <span class="lbl bold" data-i18n="notes">Notes</span>
                <span class="notes inl ital">{{notes}}</span>
            </div>
        {{/notes}}
    {{/rollTotal() shownotes 1}}
</rolltemplate>

<!-- WORKERS -->
<script type="text/worker">
    /* === GLOBAL VARIABLES === */
    var pfoglobals_i18n_obj = {};
    var pfoglobals_ispc = 1;

    /* === EVENTS === */

    // === Version handling
    on("sheet:opened", function() {
        getAttrs(["npc"], function(v) {
            if(v.npc == "1") {pfoglobals_ispc = 0;}
        });
        loadi18n();
        versioning();
    });

    // === Generals
    on("change:npc", function(e) {
        pfoglobals_ispc = (e.newValue == "1") ? 0 : 1;
    });

    // === Abilities
    on("change:strength_base change:strength_bonus", function() {
        update_attr("strength");
    });
    on("change:strength", function() {
        update_mod("strength");
        if(pfoglobals_ispc) {
            update_encumbrance_load();
        }
    });
    on("change:dexterity_base change:dexterity_bonus", function() {
        update_attr("dexterity");
    });
    on("change:dexterity", function() {
        update_mod("dexterity");
    });
    on("change:constitution_base change:constitution_bonus", function() {
        update_attr("constitution");
    });
    on("change:constitution", function() {
        update_mod("constitution");
    });
    on("change:intelligence_base change:intelligence_bonus", function() {
        update_attr("intelligence");
    });
    on("change:intelligence", function() {
        update_mod("intelligence");
    });
    on("change:wisdom_base change:wisdom_bonus", function() {
        update_attr("wisdom");
    });
    on("change:wisdom", function() {
        update_mod("wisdom");
    });
    on("change:charisma_base change:charisma_bonus", function() {
        update_attr("charisma");
    });
    on("change:charisma", function() {
        update_mod("charisma");
    });

    // === Size
    on("change:size", function(e){
        if(pfoglobals_ispc) {
            update_size(e.newValue);
        } else {
            var update = {};
            update["size_display"] = getTranslationByKey(e.newValue);
            setAttrs(update);
        }
    });
    on("change:encumbrance_size", function() {
        if(pfoglobals_ispc) {
            update_encumbrance_load();
        }
    });

    // === Mods
    on("change:strength_mod", function() {
        if(pfoglobals_ispc) {
            update_cmd();
            update_ability_mod("strength");
        }
    });
    on("change:dexterity_mod", function() {
        if(pfoglobals_ispc) {
            update_cmd();
            update_ability_mod("dexterity");
            update_initiative();
        }
    });
    on("change:constitution_mod", function() {
        if(pfoglobals_ispc) {
            update_ability_mod("constitution");
        }
    });
    on("change:intelligence_mod", function() {
        if(pfoglobals_ispc) {
            update_ability_mod("intelligence");
        }
    });
    on("change:wisdom_mod", function() {
        if(pfoglobals_ispc) {
            update_ability_mod("wisdom");
        }
   });
    on("change:charisma_mod", function() {
        if(pfoglobals_ispc) {
            update_ability_mod("charisma");
        }
    });

    // === HP
    on("change:hp", function(e) {
        if (pfoglobals_ispc == 0) {
            if((parseInt(e.newValue) || 0) > 0) {
                getAttrs(["hp_max"], function(v) {
                    if((parseInt(v.hp_max) || 0) < (parseInt(e.newValue) || 0)) {
                        setAttrs({"hp_max":e.newValue},{silent:true});
                    }
                });
            }
        }
    });

    // === Initiative
    on("change:initiative_misc change:initiative_bonus", function() {
        if(pfoglobals_ispc) {
            update_initiative();
        }
    });

    // === AC
    on("change:ac_ability_maximum change:encumbrance_ability_maximum change:ac_ability_primary change:ac_ability_secondary", function(e){
        if(pfoglobals_ispc) {
            update_ac_ability(e.sourceAttribute);
        }
    });
    on("change:ac_bonus change:ac_armor change:ac_shield change:ac_ability_mod change:ac_size change:ac_natural change:ac_deflection change:ac_misc change:ac_dodge change:ac_touch_bonus change:ac_flatfooted_bonus change:ac_noflatflooted change:ac_touchshield", function(){
        if(pfoglobals_ispc) {
            update_ac();
            update_cmd();
        }
    });
    // AC Items
    on("remove:repeating_acitems change:repeating_acitems:equipped change:repeating_acitems:ac_bonus change:repeating_acitems:flatfooted_bonus change:repeating_acitems:touch_bonus change:repeating_acitems:type change:repeating_acitems:check_penalty change:repeating_acitems:max_dex_bonus change:repeating_acitems:spell_failure change:repeating_acitems:speed20 change:repeating_acitems:speed30 change:repeating_acitems:run_factor", function(){
        update_ac_items();
    });
    // -- Compendium drop adjustments
    on("change:repeating_acitems:compendium_ac_bonus change:repeating_acitems:compendium_check_penalty change:repeating_acitems:compendium_max_dex_bonus change:repeating_acitems:compendium_spell_failure", function(e){
        var update = {};
        var attr = e.sourceAttribute.replace("_compendium","");
        var val = parseInt(e.newValue.replace(/[^\d-]+/, "")) || 0;
        update[attr] = val;
        setAttrs(update,{silent:false});
    });
    on("change:repeating_acitems:compendium_armor_category", function(e) {
        var update = {};
        var val = "misc";
        var runfactor = 4;
        var typattr = e.sourceAttribute.replace("_compendium_armor_category","_type");
        var runattr =  e.sourceAttribute.replace("_compendium_armor_category","_run_factor");
        if(e.newValue.toLowerCase().includes("shield")) {val = "shield";}
        else if(e.newValue.toLowerCase().includes("light")) {val = "light";}
        else if(e.newValue.toLowerCase().includes("medium")) {val = "medium";}
        else if(e.newValue.toLowerCase().includes("heavy")) {
            val = "heavy";
            runfactor = 3;
        }
        update[typattr] = val;
        update[runattr] = runfactor;
        setAttrs(update,{silent:false});
    });

    // === SAVES
    on("change:fortitude_ability change:reflex_ability change:will_ability", function(e){
        update_flex_ability(e.newValue,e.sourceAttribute);
    });
    on("change:fortitude_base change:fortitude_ability_mod change:fortitude_misc change:fortitude_bonus", function(){
        update_save("fortitude");
    });
    on("change:reflex_base change:reflex_ability_mod change:reflex_misc change:reflex_bonus", function(){
        update_save("reflex");
    });
    on("change:will_base change:will_ability_mod change:will_misc change:will_bonus", function(){
        update_save("will");
    });

    // === BAB / ATTACK MODS / DEFENSE
    on("change:bab", function(e){
        if(pfoglobals_ispc) {
            update_babs_all(e.newValue);
        }
    });
    on("change:cmb_ability change:melee_ability change:ranged_ability", function(e){
        update_flex_ability(e.newValue,e.sourceAttribute);
    });
    on("change:cmb_ability_mod change:cmb_misc change:cmb_bonus", function(){
        update_babs("cmb");
    });
    on("change:melee_ability_mod change:melee_misc change:melee_bonus", function(){
        update_babs("melee");
    });
    on("change:ranged_ability_mod change:ranged_misc change:ranged_bonus", function(){
        update_babs("ranged");
    });
    on("change:cmd_misc change:cmd_bonus", function() {
        update_cmd();
    });
    on("change:cmb_mod", function(){
        if(pfoglobals_ispc) {
            update_attacks("cmb");
        }
    });
    on("change:melee_mod", function(){
        if(pfoglobals_ispc) {
            update_attacks("melee");
        }
    });
    on("change:ranged_mod", function(){
        if(pfoglobals_ispc) {
            update_attacks("ranged");
        }
    });

    // === GEAR - ENCUMBRANCE
    // -- Compendium drop adjustments
    on("change:repeating_gear:compendium_weight", function (e) {
        var update = {};
        var attr = e.sourceAttribute.replace("_compendium_weight","_weight");
        var wght = parseInt(e.newValue.replace(/\D+/g, "")) || 2;
        update[attr] = wght;
        setAttrs(update,{silent:false});
    });
    // -- Gear weight
    on("change:repeating_gear:weight change:repeating_gear:quantity", function (e) {
        var id = e.sourceAttribute.substring(15, 35);
        update_gear_weight(id);
    });
    on("change:repeating_gear:weight_total remove:repeating_gear", function() {
        update_gear_weight_total();
    });
    // -- Encumbrance
    on("change:encumbrance_load_bonus change:encumbrance_load_multiplier", function() {
        update_encumbrance_load();
    });
    // -- Overload
    on("change:encumbrance_gear_weight change:encumbrance_load_heavy", function() {
        check_encumbrance();
    });

    // === SPEED
    on("change:speed_race", function() {
        update_speed_base(1);
    });
    on("change:speed_notmodified change:speed_encumbrance change:speed_armor", function() {
        update_speed_base(0);
    });
    on("change:armor_run_factor change:encumbrance_run_factor", function() {
        update_run_factor();
    });
    on("change:speed_base change:speed_bonus change:speed_run_factor", function() {
        update_speed();
    });

    // === WEAPONS / ATTACKS
    // -- Display and roll calculation
    on("change:repeating_attacks:atkname change:repeating_attacks:atkflag change:repeating_attacks:atktype change:repeating_attacks:atktype2 change:repeating_attacks:atkmod change:repeating_attacks:atkcritrange change:repeating_attacks:atkrange change:repeating_attacks:dmgflag change:repeating_attacks:dmgbase change:repeating_attacks:dmgattr change:repeating_attacks:dmgmod change:repeating_attacks:dmgcritmulti change:repeating_attacks:dmgtype change:repeating_attacks:dmg2flag change:repeating_attacks:dmg2base change:repeating_attacks:dmg2attr change:repeating_attacks:dmg2mod change:repeating_attacks:dmg2critmulti change:repeating_attacks:dmg2type change:repeating_attacks:descflag change:repeating_attacks:atkdesc change:repeating_attacks:notes", function(e) {
        var attackid = e.sourceAttribute.substring(18, 38);
        update_attacks(attackid);
    });
    // -- Compendium drop adjustments
    on("change:repeating_attacks:category", function(e) {
        var typ = "";
        var dmg = "";
        var attr = e.sourceAttribute.replace("_compendium_critical_range","_atkcritrange");
        if (e.newValue.toLowerCase().includes("ranged")) {
            typ = "ranged";
            dmg = "0";
        }
        else if (e.newValue.toLowerCase().includes("melee")) {
            typ = "melee";
            if(e.newValue.toLowerCase().includes("two-handed")) {
                dmg = "strength_oneandahalf";
            } else {
                dmg = "strength";
            }
        }
        if (typ != "") {
            var update = {};
            var attratk = e.sourceAttribute.replace("_category","_atktype");
            var attrdmg = e.sourceAttribute.replace("_category","_dmgattr");
            update[attratk] = typ;
            update[attrdmg] = dmg;
            setAttrs(update,{silent:false});
        }
    });
    on("change:repeating_attacks:compendium_dmg_medium", function(e) {
        getAttrs(["size"], function(v) {
            if(["medium","large","huge","gargantuan","colossal"].includes(v.size)) {
                var update = {};
                var attr = e.sourceAttribute.replace("_compendium_dmg_medium","_dmgbase");
                update[attr] = e.newValue;
                setAttrs(update,{silent:false});
            }
        });
    });
    on("change:repeating_attacks:compendium_dmg_small", function(e) {
        getAttrs(["size"], function(v) {
            if(["fine","diminutive","tiny","small"].includes(v.size)) {
                var update = {};
                var attr = e.sourceAttribute.replace("_compendium_dmg_small","_dmgbase");
                update[attr] = e.newValue;
                setAttrs(update,{silent:false});
            }
        });
    });
    on("change:repeating_attacks:compendium_critical_range", function(e) {
        var update = {};
        var attr = e.sourceAttribute.replace("_compendium_critical_range","_atkcritrange");
        var crit = parseInt(e.newValue.substr(0,2)) || 2;
        update[attr] = crit;
        setAttrs(update,{silent:false});
    });
    on("change:repeating_attacks:compendium_critical_damage", function(e) {
        var update = {};
        var attr = e.sourceAttribute.replace("_compendium_critical_damage","_dmgcritmulti");
        var crit = parseInt(e.newValue.replace(/\D+/g, "")) || 2;
        update[attr] = crit;
        setAttrs(update,{silent:false});
    });

    // === SKILLS
    on("change:armor_check_penalty change:encumbrance_check_penalty", function() {
        getAttrs(["armor_check_penalty","encumbrance_check_penalty","skill_check_penalty"], function(v) {
            var newval = Math.min((parseInt(v.armor_check_penalty) || 0),(parseInt(v.encumbrance_check_penalty) || 0));
            if(newval != (parseInt(v.skill_check_penalty) || 0)) {
                setAttrs({"skill_check_penalty":newval},{silent: false});
            }
        });
    });
    on("change:acrobatics_ability change:appraise_ability change:bluff_ability change:climb_ability change:craft_ability change:diplomacy_ability change:disable_device_ability change:disguise_ability change:escape_artist_ability change:fly_ability change:handle_animal_ability change:heal_ability change:intimidate_ability change:knowledge_arcana_ability change:knowledge_dungeoneering_ability change:knowledge_engineering_ability change:knowledge_geography_ability change:knowledge_history_ability change:knowledge_local_ability change:knowledge_nature_ability change:knowledge_nobility_ability change:knowledge_planes_ability change:knowledge_religion_ability change:linguistics_ability change:perception_ability change:perform_ability change:profession_ability change:ride_ability change:sense_motive_ability change:sleight_of_hand_ability change:spellcraft_ability change:stealth_ability change:survival_ability change:swim_ability change:use_magic_device_ability change:repeating_skillcraft:ability change:repeating_skillknowledge:ability change:repeating_skillperform:ability change:repeating_skillprofession:ability change:repeating_skillcustom:ability", function(e){
        update_flex_ability(e.newValue,e.sourceAttribute);
    });
    on("change:acrobatics_classkill change:acrobatics_ability_mod change:acrobatics_ranks change:acrobatics_misc change:acrobatics_bonus change:acrobatics_armor_penalty", function(e) {update_skill("acrobatics",e.sourceAttribute);});
    on("change:appraise_classkill change:appraise_ability_mod change:appraise_ranks change:appraise_misc change:appraise_bonus change:appraise_armor_penalty", function(e) {
        update_skill("appraise",e.sourceAttribute);
    });
    on("change:bluff_classkill change:bluff_ability_mod change:bluff_ranks change:bluff_misc change:bluff_bonus change:bluff_armor_penalty", function(e) {update_skill("bluff",e.sourceAttribute);});
    on("change:climb_classkill change:climb_ability_mod change:climb_ranks change:climb_misc change:climb_bonus change:climb_armor_penalty", function(e) {update_skill("climb",e.sourceAttribute);});
    on("change:craft_classkill change:craft_ability_mod change:craft_ranks change:craft_misc change:craft_bonus change:craft_armor_penalty", function(e) {update_skill("craft",e.sourceAttribute);});
    on("change:repeating_skillcraft:classkill change:repeating_skillcraft:name change:repeating_skillcraft:ability_mod change:repeating_skillcraft:ranks change:repeating_skillcraft:misc change:repeating_skillcraft:bonus change:repeating_skillcraft:armor_penalty", function(e) {
        var skillid = e.sourceAttribute.substring(0, 41);
        update_skill(skillid,e.sourceAttribute);
    });
    on("change:diplomacy_classkill change:diplomacy_ability_mod change:diplomacy_ranks change:diplomacy_misc change:diplomacy_bonus change:diplomacy_armor_penalty", function(e) {update_skill("diplomacy",e.sourceAttribute);});
    on("change:disable_device_classkill change:disable_device_ability_mod change:disable_device_ranks change:disable_device_misc change:disable_device_bonus change:disable_device_armor_penalty", function(e) {update_skill("disable_device",e.sourceAttribute);});
    on("change:disguise_classkill change:disguise_ability_mod change:disguise_ranks change:disguise_misc change:disguise_bonus change:disguise_armor_penalty", function(e) {update_skill("disguise",e.sourceAttribute);});
    on("change:escape_artist_classkill change:escape_artist_ability_mod change:escape_artist_ranks change:escape_artist_misc change:escape_artist_bonus change:escape_artist_armor_penalty", function(e) {update_skill("escape_artist",e.sourceAttribute);});
    on("change:fly_classkill change:fly_ability_mod change:fly_ranks change:fly_misc change:fly_bonus change:fly_armor_penalty", function(e) {update_skill("fly",e.sourceAttribute);});
    on("change:handle_animal_classkill change:handle_animal_ability_mod change:handle_animal_ranks change:handle_animal_misc change:handle_animal_bonus change:handle_animal_armor_penalty", function(e) {update_skill("handle_animal",e.sourceAttribute);});
    on("change:heal_classkill change:heal_ability_mod change:heal_ranks change:heal_misc change:heal_bonus change:heal_armor_penalty", function(e) {update_skill("heal",e.sourceAttribute);});
    on("change:intimidate_classkill change:intimidate_ability_mod change:intimidate_ranks change:intimidate_misc change:intimidate_bonus change:intimidate_armor_penalty", function(e) {update_skill("intimidate",e.sourceAttribute);});
    on("change:knowledge_arcana_classkill change:knowledge_arcana_ability_mod change:knowledge_arcana_ranks change:knowledge_arcana_misc change:knowledge_arcana_bonus change:knowledge_arcana_armor_penalty", function(e) {update_skill("knowledge_arcana",e.sourceAttribute);});
    on("change:knowledge_dungeoneering_classkill change:knowledge_dungeoneering_ability_mod change:knowledge_dungeoneering_ranks change:knowledge_dungeoneering_misc change:knowledge_dungeoneering_bonus change:knowledge_dungeoneering_armor_penalty", function(e) {update_skill("knowledge_dungeoneering",e.sourceAttribute);});
    on("change:knowledge_engineering_classkill change:knowledge_engineering_ability_mod change:knowledge_engineering_ranks change:knowledge_engineering_misc change:knowledge_engineering_bonus change:knowledge_engineering_armor_penalty", function(e) {update_skill("knowledge_engineering",e.sourceAttribute);});
    on("change:knowledge_geography_classkill change:knowledge_geography_ability_mod change:knowledge_geography_ranks change:knowledge_geography_misc change:knowledge_geography_bonus change:knowledge_geography_armor_penalty", function(e) {update_skill("knowledge_geography",e.sourceAttribute);});
    on("change:knowledge_history_classkill change:knowledge_history_ability_mod change:knowledge_history_ranks change:knowledge_history_misc change:knowledge_history_bonus change:knowledge_history_armor_penalty", function(e) {update_skill("knowledge_history",e.sourceAttribute);});
    on("change:knowledge_local_classkill change:knowledge_local_ability_mod change:knowledge_local_ranks change:knowledge_local_misc change:knowledge_local_bonus change:knowledge_local_armor_penalty", function(e) {update_skill("knowledge_local",e.sourceAttribute);});
    on("change:knowledge_nature_classkill change:knowledge_nature_ability_mod change:knowledge_nature_ranks change:knowledge_nature_misc change:knowledge_nature_bonus change:knowledge_nature_armor_penalty", function(e) {update_skill("knowledge_nature",e.sourceAttribute);});
    on("change:knowledge_nobility_classkill change:knowledge_nobility_ability_mod change:knowledge_nobility_ranks change:knowledge_nobility_misc change:knowledge_nobility_bonus change:knowledge_nobility_armor_penalty", function(e) {update_skill("knowledge_nobility",e.sourceAttribute);});
    on("change:knowledge_planes_classkill change:knowledge_planes_ability_mod change:knowledge_planes_ranks change:knowledge_planes_misc change:knowledge_planes_bonus change:knowledge_planes_armor_penalty", function(e) {update_skill("knowledge_planes",e.sourceAttribute);});
    on("change:knowledge_religion_classkill change:knowledge_religion_ability_mod change:knowledge_religion_ranks change:knowledge_religion_misc change:knowledge_religion_bonus change:knowledge_religion_armor_penalty", function(e) {update_skill("knowledge_religion",e.sourceAttribute);});
    on("change:repeating_skillknowledge:classkill change:repeating_skillknowledge:name change:repeating_skillknowledge:ability_mod change:repeating_skillknowledge:ranks change:repeating_skillknowledge:misc change:repeating_skillknowledge:bonus change:repeating_skillknowledge:armor_penalty", function(e) {
        var skillid = e.sourceAttribute.substring(0, 45);
        update_skill(skillid,e.sourceAttribute);
    });
    on("change:linguistics_classkill change:linguistics_ability_mod change:linguistics_ranks change:linguistics_misc change:linguistics_bonus change:linguistics_armor_penalty", function(e) {update_skill("linguistics",e.sourceAttribute);});
    on("change:perception_classkill change:perception_ability_mod change:perception_ranks change:perception_misc change:perception_bonus change:perception_armor_penalty", function(e) {update_skill("perception",e.sourceAttribute);});
    on("change:perform_classkill change:perform_ability_mod change:perform_ranks change:perform_misc change:perform_bonus change:perform_armor_penalty", function(e) {update_skill("perform",e.sourceAttribute);});
    on("change:repeating_skillperform:classkill change:repeating_skillperform:name change:repeating_skillperform:ability_mod change:repeating_skillperform:ranks change:repeating_skillperform:misc change:repeating_skillperform:bonus change:repeating_skillperform:armor_penalty", function(e) {
        var skillid = e.sourceAttribute.substring(0, 43);
        update_skill(skillid,e.sourceAttribute);
    });
    on("change:profession_classkill change:profession_ability_mod change:profession_ranks change:profession_misc change:profession_bonus change:profession_armor_penalty", function(e) {update_skill("profession",e.sourceAttribute);});
    on("change:repeating_skillprofession:classkill change:repeating_skillprofession:name change:repeating_skillprofession:ability_mod change:repeating_skillprofession:ranks change:repeating_skillprofession:misc change:repeating_skillprofession:bonus change:repeating_skillprofession:armor_penalty", function(e) {
        var skillid = e.sourceAttribute.substring(0, 46);
        update_skill(skillid,e.sourceAttribute);
    });
    on("change:ride_classkill change:ride_ability_mod change:ride_ranks change:ride_misc change:ride_bonus change:ride_armor_penalty", function(e) {update_skill("ride",e.sourceAttribute);});
    on("change:sense_motive_classkill change:sense_motive_ability_mod change:sense_motive_ranks change:sense_motive_misc change:sense_motive_bonus change:sense_motive_armor_penalty", function(e) {update_skill("sense_motive",e.sourceAttribute);});
    on("change:sleight_of_hand_classkill change:sleight_of_hand_ability_mod change:sleight_of_hand_ranks change:sleight_of_hand_misc change:sleight_of_hand_bonus change:sleight_of_hand_armor_penalty", function(e) {update_skill("sleight_of_hand",e.sourceAttribute);});
    on("change:spellcraft_classkill change:spellcraft_ability_mod change:spellcraft_ranks change:spellcraft_misc change:spellcraft_bonus change:spellcraft_armor_penalty", function(e) {update_skill("spellcraft",e.sourceAttribute);});
    on("change:stealth_classkill change:stealth_ability_mod change:stealth_ranks change:stealth_misc change:stealth_bonus change:stealth_armor_penalty", function(e) {update_skill("stealth",e.sourceAttribute);});
    on("change:survival_classkill change:survival_ability_mod change:survival_ranks change:survival_misc change:survival_bonus change:survival_armor_penalty", function(e) {update_skill("survival",e.sourceAttribute);});
    on("change:swim_classkill change:swim_ability_mod change:swim_ranks change:swim_misc change:swim_bonus change:swim_armor_penalty", function(e) {update_skill("swim",e.sourceAttribute);});
    on("change:use_magic_device_classkill change:use_magic_device_ability_mod change:use_magic_device_ranks change:use_magic_device_misc change:use_magic_device_bonus change:use_magic_device_armor_penalty", function(e) {update_skill("use_magic_device",e.sourceAttribute);});
    on("change:repeating_skillcustom:classkill change:repeating_skillcustom:name change:repeating_skillcustom:ability_mod change:repeating_skillcustom:ranks change:repeating_skillcustom:misc change:repeating_skillcustom:bonus change:repeating_skillcustom:armor_penalty", function(e) {
        var skillid = e.sourceAttribute.substring(0, 42);
        update_skill(skillid,e.sourceAttribute);
    });
    on("change:skillfixed_ranks change:skillcraft_ranks change:skillknowledge_ranks change:skillperform_ranks change:skillprofession_ranks change:skillcustom_ranks", function() {sum_allskills_ranks();});

    on("remove:repeating_skillcraft remove:repeating_skillknowledge remove:repeating_skillperform remove:repeating_skillprofession remove:repeating_skillcustom", function(e) {sum_someskills_ranks(e.sourceAttribute + "_ranks")});
    // -- NPC skills display
    on("change:acrobatics change:acrobatics_notes change:appraise change:appraise_notes change:bluff change:bluff_notes change:climb change:climb_notes change:craft change:craft_notes change:diplomacy change:diplomacy_notes change:disable_device change:disable_device_notes change:disguise change:disguise_notes change:escape_artist change:escape_artist_notes change:fly change:fly_notes change:handle_animal change:handle_animal_notes change:heal change:heal_notes change:intimidate change:intimidate_notes change:knowledge_arcana change:knowledge_arcana_notes change:knowledge_dungeoneering change:knowledge_dungeoneering_notes change:knowledge_engineering change:knowledge_engineering_notes change:knowledge_geography change:knowledge_geography_notes change:knowledge_history change:knowledge_history_notes change:knowledge_local change:knowledge_local_notes change:knowledge_nature change:knowledge_nature_notes change:knowledge_nobility change:knowledge_nobility_notes change:knowledge_planes change:knowledge_planes_notes change:knowledge_religion change:knowledge_religion_notes change:linguistics change:linguistics_notes change:perception change:perception_notes change:perform change:perform_notes change:profession change:profession_notes change:ride change:ride_notes change:sense_motive change:sense_motive_notes change:sleight_of_hand change:sleight_of_hand_notes change:spellcraft change:spellcraft_notes change:stealth change:stealth_notes change:survival change:survival_notes change:swim change:swim_notes change:use_magic_device change:use_magic_device_notes", function(e) {
        if(pfoglobals_ispc != 1) {
            var skill = "";
            if (e.sourceAttribute.slice(-6) == "_notes") {
                skill = e.sourceAttribute.substring(0, e.sourceAttribute.indexOf("_notes"));
            } else {
                skill = e.sourceAttribute;
            }
            var fields = [skill, skill + "_notes"];
            getAttrs(fields, function(v) {
                var update = {};
                var display = "";
                var flag = 0;
                if ((parseInt(v[skill]) || 0) != 0 ) {
                    display += v[skill];
                    flag = 1;
                }
                if(v[skill + "_notes"] && (v[skill + "_notes"].length > 0)) {
                    if(display.length === 0) {
                        display += "0";
                    }
                    display += " (" + v[skill + "_notes"] + ")";
                    flag = 1;
                }
                update[skill + "_display"] = display;
                update[skill + "_flag"] = flag;
                setAttrs(update,{silent: true});
            });
        }
    });

    // SPELLS - SPELLCASTING
    // -- Armor spell failure
    on("change:armor_spell_failure change:caster1_spell_failure change:caster2_spell_failure", function() {
        getAttrs(["armor_spell_failure","caster1_spell_failure","caster2_flag","caster2_spell_failure"], function(v) {
            if( (v.armor_spell_failure != "0") && ((v.caster1_spell_failure == "1") || ((v.caster2_flag == "1") && (v.caster2_spell_failure == "1"))) ) {
                update_all_spells("all");
            }
        });
    });
    // -- Musticasting
    on("change:caster1_class change:caster2_flag change:caster2_class", function(){
       update_all_spells("all");
    });
    // -- Concentration & DCs
    on("change:caster1_ability change:caster2_ability", function(e) {update_flex_ability(e.newValue,e.sourceAttribute);});
    on("change:caster1_ability_mod change:caster2_ability_mod", function(e) {
        update_concentration(e.sourceAttribute);
        update_spellsdc(e.sourceAttribute);
    });
    on("change:caster1_level change:caster2_level", function(e) {
        if(pfoglobals_ispc) {
           update_concentration(e.sourceAttribute);
        }
    });
    on("change:caster1_concentration_misc change:caster1_concentration_bonus change:caster2_concentration_misc change:caster2_concentration_bonus", function(e) {
        update_concentration(e.sourceAttribute);
    });
    on("change:caster1_dc_misc change:caster1_dcbonus_level_0 change:caster1_dcbonus_level_1 change:caster1_dcbonus_level_2 change:caster1_dcbonus_level_3 change:caster1_dcbonus_level_4 change:caster1_dcbonus_level_5 change:caster1_dcbonus_level_6 change:caster1_dcbonus_level_7 change:caster1_dcbonus_level_8 change:caster1_dcbonus_level_9 change:caster2_dc_misc change:caster2_dcbonus_level_0 change:caster2_dcbonus_level_1 change:caster2_dcbonus_level_2 change:caster2_dcbonus_level_3 change:caster2_dcbonus_level_4 change:caster2_dcbonus_level_5 change:caster2_dcbonus_level_6 change:caster2_dcbonus_level_7 change:caster2_dcbonus_level_8 change:caster2_dcbonus_level_9", function(e) {
        update_spellsdc(e.sourceAttribute);
    });
    // -- Prepared / Total
    on("change:caster1_spells_perday_level_0 change:caster1_spells_perday_level_1 change:caster1_spells_perday_level_2 change:caster1_spells_perday_level_3 change:caster1_spells_perday_level_4 change:caster1_spells_perday_level_5 change:caster1_spells_perday_level_6 change:caster1_spells_perday_level_7 change:caster1_spells_perday_level_8 change:caster1_spells_perday_level_9 change:caster1_spells_bonus_level_0 change:caster1_spells_bonus_level_1 change:caster1_spells_bonus_level_2 change:caster1_spells_bonus_level_3 change:caster1_spells_bonus_level_4 change:caster1_spells_bonus_level_5 change:caster1_spells_bonus_level_6 change:caster1_spells_bonus_level_7 change:caster1_spells_bonus_level_8 change:caster1_spells_bonus_level_9", function(e) {
        update_spells_totals(e.sourceAttribute.charAt(e.sourceAttribute.length - 1),1);
    });
    on("change:caster2_spells_perday_level_0 change:caster2_spells_perday_level_1 change:caster2_spells_perday_level_2 change:caster2_spells_perday_level_3 change:caster2_spells_perday_level_4 change:caster2_spells_perday_level_5 change:caster2_spells_perday_level_6 change:caster2_spells_perday_level_7 change:caster2_spells_perday_level_8 change:caster2_spells_perday_level_9 change:caster2_spells_bonus_level_0 change:caster2_spells_bonus_level_1 change:caster2_spells_bonus_level_2 change:caster2_spells_bonus_level_3 change:caster2_spells_bonus_level_4 change:caster2_spells_bonus_level_5 change:caster2_spells_bonus_level_6 change:caster2_spells_bonus_level_7 change:caster2_spells_bonus_level_8 change:caster2_spells_bonus_level_9", function(e) {
        update_spells_totals(e.sourceAttribute.charAt(e.sourceAttribute.length - 1),2);
    });
    on("change:repeating_spell-0:spellprepared change:repeating_spell-1:spellprepared change:repeating_spell-2:spellprepared change:repeating_spell-3:spellprepared change:repeating_spell-4:spellprepared change:repeating_spell-5:spellprepared change:repeating_spell-6:spellprepared change:repeating_spell-7:spellprepared change:repeating_spell-8:spellprepared change:repeating_spell-9:spellprepared", function(e) {
        update_spells_prepared(e.sourceAttribute,e.newValue);
    });
    // -- Removing
    on("remove:repeating_spell-0 remove:repeating_spell-1 remove:repeating_spell-2 remove:repeating_spell-3 remove:repeating_spell-4 remove:repeating_spell-5 remove:repeating_spell-6 remove:repeating_spell-7 remove:repeating_spell-8 remove:repeating_spell-9", function(e) {
        update_spells_prepared(e.sourceAttribute,"");
    });
    // -- Rolls / Display
    on("change:caster1_dc_level_0 change:caster1_dc_level_1 change:caster1_dc_level_2 change:caster1_dc_level_3 change:caster1_dc_level_4 change:caster1_dc_level_5 change:caster1_dc_level_6 change:caster1_dc_level_7 change:caster1_dc_level_8 change:caster1_dc_level_9 change:caster2_dc_level_0 change:caster2_dc_level_1 change:caster2_dc_level_2 change:caster2_dc_level_3 change:caster2_dc_level_4 change:caster2_dc_level_5 change:caster2_dc_level_6 change:caster2_dc_level_7 change:caster2_dc_level_8 change:caster2_dc_level_9", function(e){
        update_spells(e.sourceAttribute.charAt(e.sourceAttribute.length - 1),"all");
    });
    on("change:repeating_spell-0:spellcaster change:repeating_spell-0:spellname change:repeating_spell-0:spellschool change:repeating_spell-0:spellclasslevel change:repeating_spell-0:spellcastingtime change:repeating_spell-0:spellcomponent change:repeating_spell-0:spellrange change:repeating_spell-0:spellarea change:repeating_spell-0:spelltargets change:repeating_spell-0:spelleffect change:repeating_spell-0:spellduration change:repeating_spell-0:spellsaveflag change:repeating_spell-0:spellsave change:repeating_spell-0:spelldc_mod change:repeating_spell-0:spellresistanceflag change:repeating_spell-0:spellresistance change:repeating_spell-0:spellatkflag change:repeating_spell-0:spellatktype change:repeating_spell-0:spellatkmod change:repeating_spell-0:spellatkcritrange change:repeating_spell-0:spelldmgcritmulti change:repeating_spell-0:spelldmgflag change:repeating_spell-0:spelldmg change:repeating_spell-0:spelldmgtype change:repeating_spell-0:spelldmg2flag change:repeating_spell-0:spelldmg2 change:repeating_spell-0:spelldmg2type change:repeating_spell-0:spelldescflag change:repeating_spell-0:spelldesc change:repeating_spell-0:notes", function(e) {
        var spellid = e.sourceAttribute.substring(18, 38);
        update_spells(0,spellid);
    });
    on("change:repeating_spell-1:spellcaster change:repeating_spell-1:spellname change:repeating_spell-1:spellschool change:repeating_spell-1:spellclasslevel change:repeating_spell-1:spellcastingtime change:repeating_spell-1:spellcomponent change:repeating_spell-1:spellrange change:repeating_spell-1:spellarea change:repeating_spell-1:spelltargets change:repeating_spell-1:spelleffect change:repeating_spell-1:spellduration change:repeating_spell-1:spellsaveflag change:repeating_spell-1:spellsave change:repeating_spell-1:spelldc_mod change:repeating_spell-1:spellresistanceflag change:repeating_spell-1:spellresistance change:repeating_spell-1:spellatkflag change:repeating_spell-1:spellatktype change:repeating_spell-1:spellatkmod change:repeating_spell-1:spellatkcritrange change:repeating_spell-1:spelldmgcritmulti change:repeating_spell-1:spelldmgflag change:repeating_spell-1:spelldmg change:repeating_spell-1:spelldmgtype change:repeating_spell-1:spelldmg2flag change:repeating_spell-1:spelldmg2 change:repeating_spell-1:spelldmg2type change:repeating_spell-1:spelldescflag change:repeating_spell-1:spelldesc change:repeating_spell-1:notes", function(e) {
        var spellid = e.sourceAttribute.substring(18, 38);
        update_spells(1,spellid);
    });
    on("change:repeating_spell-2:spellcaster change:repeating_spell-2:spellname change:repeating_spell-2:spellschool change:repeating_spell-2:spellclasslevel change:repeating_spell-2:spellcastingtime change:repeating_spell-2:spellcomponent change:repeating_spell-2:spellrange change:repeating_spell-2:spellarea change:repeating_spell-2:spelltargets change:repeating_spell-2:spelleffect change:repeating_spell-2:spellduration change:repeating_spell-2:spellsaveflag change:repeating_spell-2:spellsave change:repeating_spell-2:spelldc_mod change:repeating_spell-2:spellresistanceflag change:repeating_spell-2:spellresistance change:repeating_spell-2:spellatkflag change:repeating_spell-2:spellatktype change:repeating_spell-2:spellatkmod change:repeating_spell-2:spellatkcritrange change:repeating_spell-2:spelldmgcritmulti change:repeating_spell-2:spelldmgflag change:repeating_spell-2:spelldmg change:repeating_spell-2:spelldmgtype change:repeating_spell-2:spelldmg2flag change:repeating_spell-2:spelldmg2 change:repeating_spell-2:spelldmg2type change:repeating_spell-2:spelldescflag change:repeating_spell-2:spelldesc change:repeating_spell-2:notes", function(e) {
        var spellid = e.sourceAttribute.substring(18, 38);
        update_spells(2,spellid);
    });
    on("change:repeating_spell-3:spellcaster change:repeating_spell-3:spellname change:repeating_spell-3:spellschool change:repeating_spell-3:spellclasslevel change:repeating_spell-3:spellcastingtime change:repeating_spell-3:spellcomponent change:repeating_spell-3:spellrange change:repeating_spell-3:spellarea change:repeating_spell-3:spelltargets change:repeating_spell-3:spelleffect change:repeating_spell-3:spellduration change:repeating_spell-3:spellsaveflag change:repeating_spell-3:spellsave change:repeating_spell-3:spelldc_mod change:repeating_spell-3:spellresistanceflag change:repeating_spell-3:spellresistance change:repeating_spell-3:spellatkflag change:repeating_spell-3:spellatktype change:repeating_spell-3:spellatkmod change:repeating_spell-3:spellatkcritrange change:repeating_spell-3:spelldmgcritmulti change:repeating_spell-3:spelldmgflag change:repeating_spell-3:spelldmg change:repeating_spell-3:spelldmgtype change:repeating_spell-3:spelldmg2flag change:repeating_spell-3:spelldmg2 change:repeating_spell-3:spelldmg2type change:repeating_spell-3:spelldescflag change:repeating_spell-3:spelldesc change:repeating_spell-3:notes", function(e) {
        var spellid = e.sourceAttribute.substring(18, 38);
        update_spells(3,spellid);
    });
    on("change:repeating_spell-4:spellcaster change:repeating_spell-4:spellname change:repeating_spell-4:spellschool change:repeating_spell-4:spellclasslevel change:repeating_spell-4:spellcastingtime change:repeating_spell-4:spellcomponent change:repeating_spell-4:spellrange change:repeating_spell-4:spellarea change:repeating_spell-4:spelltargets change:repeating_spell-4:spelleffect change:repeating_spell-4:spellduration change:repeating_spell-4:spellsaveflag change:repeating_spell-4:spellsave change:repeating_spell-4:spelldc_mod change:repeating_spell-4:spellresistanceflag change:repeating_spell-4:spellresistance change:repeating_spell-4:spellatkflag change:repeating_spell-4:spellatktype change:repeating_spell-4:spellatkmod change:repeating_spell-4:spellatkcritrange change:repeating_spell-4:spelldmgcritmulti change:repeating_spell-4:spelldmgflag change:repeating_spell-4:spelldmg change:repeating_spell-4:spelldmgtype change:repeating_spell-4:spelldmg2flag change:repeating_spell-4:spelldmg2 change:repeating_spell-4:spelldmg2type change:repeating_spell-4:spelldescflag change:repeating_spell-4:spelldesc change:repeating_spell-4:notes", function(e) {
        var spellid = e.sourceAttribute.substring(18, 38);
        update_spells(4,spellid);
    });
    on("change:repeating_spell-5:spellcaster change:repeating_spell-5:spellname change:repeating_spell-5:spellschool change:repeating_spell-5:spellclasslevel change:repeating_spell-5:spellcastingtime change:repeating_spell-5:spellcomponent change:repeating_spell-5:spellrange change:repeating_spell-5:spellarea change:repeating_spell-5:spelltargets change:repeating_spell-5:spelleffect change:repeating_spell-5:spellduration change:repeating_spell-5:spellsaveflag change:repeating_spell-5:spellsave change:repeating_spell-5:spelldc_mod change:repeating_spell-5:spellresistanceflag change:repeating_spell-5:spellresistance change:repeating_spell-5:spellatkflag change:repeating_spell-5:spellatktype change:repeating_spell-5:spellatkmod change:repeating_spell-5:spellatkcritrange change:repeating_spell-5:spelldmgcritmulti change:repeating_spell-5:spelldmgflag change:repeating_spell-5:spelldmg change:repeating_spell-5:spelldmgtype change:repeating_spell-5:spelldmg2flag change:repeating_spell-5:spelldmg2 change:repeating_spell-5:spelldmg2type change:repeating_spell-5:spelldescflag change:repeating_spell-5:spelldesc change:repeating_spell-5:notes", function(e) {
        var spellid = e.sourceAttribute.substring(18, 38);
        update_spells(5,spellid);
    });
    on("change:repeating_spell-6:spellcaster change:repeating_spell-6:spellname change:repeating_spell-6:spellschool change:repeating_spell-6:spellclasslevel change:repeating_spell-6:spellcastingtime change:repeating_spell-6:spellcomponent change:repeating_spell-6:spellrange change:repeating_spell-6:spellarea change:repeating_spell-6:spelltargets change:repeating_spell-6:spelleffect change:repeating_spell-6:spellduration change:repeating_spell-6:spellsaveflag change:repeating_spell-6:spellsave change:repeating_spell-6:spelldc_mod change:repeating_spell-6:spellresistanceflag change:repeating_spell-6:spellresistance change:repeating_spell-6:spellatkflag change:repeating_spell-6:spellatktype change:repeating_spell-6:spellatkmod change:repeating_spell-6:spellatkcritrange change:repeating_spell-6:spelldmgcritmulti change:repeating_spell-6:spelldmgflag change:repeating_spell-6:spelldmg change:repeating_spell-6:spelldmgtype change:repeating_spell-6:spelldmg2flag change:repeating_spell-6:spelldmg2 change:repeating_spell-6:spelldmg2type change:repeating_spell-6:spelldescflag change:repeating_spell-6:spelldesc change:repeating_spell-6:notes", function(e) {
        var spellid = e.sourceAttribute.substring(18, 38);
        update_spells(6,spellid);
    });
    on("change:repeating_spell-7:spellcaster change:repeating_spell-7:spellname change:repeating_spell-7:spellschool change:repeating_spell-7:spellclasslevel change:repeating_spell-7:spellcastingtime change:repeating_spell-7:spellcomponent change:repeating_spell-7:spellrange change:repeating_spell-7:spellarea change:repeating_spell-7:spelltargets change:repeating_spell-7:spelleffect change:repeating_spell-7:spellduration change:repeating_spell-7:spellsaveflag change:repeating_spell-7:spellsave change:repeating_spell-7:spelldc_mod change:repeating_spell-7:spellresistanceflag change:repeating_spell-7:spellresistance change:repeating_spell-7:spellatkflag change:repeating_spell-7:spellatktype change:repeating_spell-7:spellatkmod change:repeating_spell-7:spellatkcritrange change:repeating_spell-7:spelldmgcritmulti change:repeating_spell-7:spelldmgflag change:repeating_spell-7:spelldmg change:repeating_spell-7:spelldmgtype change:repeating_spell-7:spelldmg2flag change:repeating_spell-7:spelldmg2 change:repeating_spell-7:spelldmg2type change:repeating_spell-7:spelldescflag change:repeating_spell-7:spelldesc change:repeating_spell-7:notes", function(e) {
        var spellid = e.sourceAttribute.substring(18, 38);
        update_spells(7,spellid);
    });
    on("change:repeating_spell-8:spellcaster change:repeating_spell-8:spellname change:repeating_spell-8:spellschool change:repeating_spell-8:spellclasslevel change:repeating_spell-8:spellcastingtime change:repeating_spell-8:spellcomponent change:repeating_spell-8:spellrange change:repeating_spell-8:spellarea change:repeating_spell-8:spelltargets change:repeating_spell-8:spelleffect change:repeating_spell-8:spellduration change:repeating_spell-8:spellsaveflag change:repeating_spell-8:spellsave change:repeating_spell-8:spelldc_mod change:repeating_spell-8:spellresistanceflag change:repeating_spell-8:spellresistance change:repeating_spell-8:spellatkflag change:repeating_spell-8:spellatktype change:repeating_spell-8:spellatkmod change:repeating_spell-8:spellatkcritrange change:repeating_spell-8:spelldmgcritmulti change:repeating_spell-8:spelldmgflag change:repeating_spell-8:spelldmg change:repeating_spell-8:spelldmgtype change:repeating_spell-8:spelldmg2flag change:repeating_spell-8:spelldmg2 change:repeating_spell-8:spelldmg2type change:repeating_spell-8:spelldescflag change:repeating_spell-8:spelldesc change:repeating_spell-8:notes", function(e) {
        var spellid = e.sourceAttribute.substring(18, 38);
        update_spells(8,spellid);
    });
    on("change:repeating_spell-9:spellcaster change:repeating_spell-9:spellname change:repeating_spell-9:spellschool change:repeating_spell-9:spellclasslevel change:repeating_spell-9:spellcastingtime change:repeating_spell-9:spellcomponent change:repeating_spell-9:spellrange change:repeating_spell-9:spellarea change:repeating_spell-9:spelltargets change:repeating_spell-9:spelleffect change:repeating_spell-9:spellduration change:repeating_spell-9:spellsaveflag change:repeating_spell-9:spellsave change:repeating_spell-9:spelldc_mod change:repeating_spell-9:spellresistanceflag change:repeating_spell-9:spellresistance change:repeating_spell-9:spellatkflag change:repeating_spell-9:spellatktype change:repeating_spell-9:spellatkmod change:repeating_spell-9:spellatkcritrange change:repeating_spell-9:spelldmgcritmulti change:repeating_spell-9:spelldmgflag change:repeating_spell-9:spelldmg change:repeating_spell-9:spelldmgtype change:repeating_spell-9:spelldmg2flag change:repeating_spell-9:spelldmg2 change:repeating_spell-9:spelldmg2type change:repeating_spell-9:spelldescflag change:repeating_spell-9:spelldesc change:repeating_spell-9:notes", function(e) {
        var spellid = e.sourceAttribute.substring(18, 38);
        update_spells(9,spellid);
    });
    // --- PC/NPC Spell-like abilities
    on("change:repeating_spell-like:spellname change:repeating_spell-like:spellschool change:repeating_spell-like:spellclasslevel change:repeating_spell-like:spellcastingtime change:repeating_spell-like:spellrange change:repeating_spell-like:spellarea change:repeating_spell-like:spelltargets change:repeating_spell-like:spelleffect change:repeating_spell-like:spellduration change:repeating_spell-like:spellsaveflag change:repeating_spell-like:spellsave change:repeating_spell-like:spelldc_mod change:repeating_spell-like:spellresistanceflag change:repeating_spell-like:spellresistance change:repeating_spell-like:spellatkflag change:repeating_spell-like:spellatktype change:repeating_spell-like:spellatkmod change:repeating_spell-like:spellatkcritrange change:repeating_spell-like:spelldmgcritmulti change:repeating_spell-like:spelldmgflag change:repeating_spell-like:spelldmg change:repeating_spell-like:spelldmgtype change:repeating_spell-like:spelldmg2flag change:repeating_spell-like:spelldmg2 change:repeating_spell-like:spelldmg2type change:repeating_spell-like:spelldescflag change:repeating_spell-like:spelldesc change:repeating_spell-like:notes change:repeating_spell-like:timesperday change:repeating_spell-like:perday_max", function(e) {
        var spellid = e.sourceAttribute.substring(21, 41);
        update_spells("like",spellid);
    });

    // === NPC
    // --- Npc Compendium drop
    on("change:compendium_npc_size", function(e){
        if(["fine","diminutive","tiny","small","medium","large","huge","gargantuan","colossal"].includes(e.newValue.toLowerCase())) {
            setAttrs({"size":e.newValue.toLowerCase()});
        } else {
            setAttrs({"size_display":e.newValue});
        }
    });
    // --- Npc Attacks Display and Roll
    on("change:repeating_npcatk-melee:atkname change:repeating_npcatk-melee:atkmod change:repeating_npcatk-melee:multipleatk_flag change:repeating_npcatk-melee:atkmod2 change:repeating_npcatk-melee:atkmod3 change:repeating_npcatk-melee:atkmod4 change:repeating_npcatk-melee:atkmod5 change:repeating_npcatk-melee:atkmod6 change:repeating_npcatk-melee:atkmod7 change:repeating_npcatk-melee:atkmod8 change:repeating_npcatk-melee:atkmod9 change:repeating_npcatk-melee:atkcritrange change:repeating_npcatk-melee:dmgflag change:repeating_npcatk-melee:dmgbase change:repeating_npcatk-melee:dmgtype change:repeating_npcatk-melee:dmgcritmulti change:repeating_npcatk-melee:dmg2flag change:repeating_npcatk-melee:dmg2base change:repeating_npcatk-melee:dmg2type change:repeating_npcatk-melee:dmg2critmulti", function(e) {
            var atkid = e.sourceAttribute.substring(23, 43);
            update_npc_attack("melee",atkid);
    });
    on("change:repeating_npcatk-ranged:atkname change:repeating_npcatk-ranged:atkmod change:repeating_npcatk-ranged:multipleatk_flag change:repeating_npcatk-ranged:atkmod2 change:repeating_npcatk-ranged:atkmod3 change:repeating_npcatk-ranged:atkmod4 change:repeating_npcatk-ranged:atkmod5 change:repeating_npcatk-ranged:atkmod6 change:repeating_npcatk-ranged:atkmod7 change:repeating_npcatk-ranged:atkmod8 change:repeating_npcatk-ranged:atkmod9 change:repeating_npcatk-ranged:atkcritrange change:repeating_npcatk-ranged:atkrange change:repeating_npcatk-ranged:dmgflag change:repeating_npcatk-ranged:dmgbase change:repeating_npcatk-ranged:dmgtype change:repeating_npcatk-ranged:dmgcritmulti change:repeating_npcatk-ranged:dmg2flag change:repeating_npcatk-ranged:dmg2base change:repeating_npcatk-ranged:dmg2type change:repeating_npcatk-ranged:dmg2critmulti", function(e) {
            var atkid = e.sourceAttribute.substring(24, 44);
            update_npc_attack("ranged",atkid);
    });

    // === CONFIGURATION
    on("change:whispertype change:rollshowchar", function(){
       update_attacks("all");
       update_all_spells("all");
    });
    on("change:rollmod_attack change:rollnotes_attack change:rollmod_damage", function(){
       update_attacks("all");
    });

    /* === FUNCTIONS === */

    // === ABILITIES and MODS
    var update_attr = function(attr) {
        var update = {};
        var attr_fields = [attr + "_base",attr + "_bonus"];
        getAttrs(attr_fields, function(v) {
            var base = parseInt(v[attr + "_base"]) || 10;
            var bonus = parseInt(v[attr + "_bonus"]) || 0;
            update[attr + "_flag"] = bonus != 0 ? 1 : 0;
            update[attr] = base + bonus;
            setAttrs(update);
        });
    };
    var update_mod = function(attr) {
        getAttrs([attr], function(v) {
            var update = {};
            var mod = Math.floor(((parseInt(v[attr]) || 10) - 10) / 2);
            update[attr + "_mod"] = mod;
            if (attr == "strength") {
                update["strength_half_mod"] = Math.floor(mod*0.5);
                update["strength_oneandahalf_mod"] = Math.floor(mod*1.5);
            }
            setAttrs(update);
        });
    };
    var update_flex_ability = function(attr,ablt) {
        var update = {};
        var modz = [];
        modz.push(attr + "_mod");
        if (String(attr) && String(ablt)) {
            getAttrs(modz, function(v) {
                update[ablt + "_mod"] = v[attr + "_mod"];
                setAttrs(update);
            });
        } else {
            var fields = ["fortitude_ability","reflex_ability","will_ability","cmb_ability","melee_ability","ranged_ability","acrobatics_ability","appraise_ability","bluff_ability","climb_ability","craft_ability","diplomacy_ability","disable_device_ability","disguise_ability","escape_artist_ability","fly_ability","handle_animal_ability","heal_ability","intimidate_ability","knowledge_arcana_ability","knowledge_dungeoneering_ability","knowledge_engineering_ability","knowledge_geography_ability","knowledge_history_ability","knowledge_local_ability","knowledge_nature_ability","knowledge_nobility_ability","knowledge_planes_ability","knowledge_religion_ability","linguistics_ability","perception_ability","perform_ability","profession_ability","ride_ability","sense_motive_ability","sleight_of_hand_ability","spellcraft_ability","stealth_ability","survival_ability","swim_ability","use_magic_device_ability","caster1_ability"];
            var flexes = [];
            getAttrs(fields, function(ablts) {
                _.each(fields, function(field){
                    if(ablts[field] == attr) {
                        flexes.push(field + "_mod");
                    }
                });
                if ( (parseInt(flexes.length) || 0) > 0) {
                    getAttrs(modz, function(v) {
                        _.each(flexes, function(flex) {
                            update[flex] = v[attr + "_mod"];
                        });
                        setAttrs(update);
                    });
                }
            });
        }
    };
    var update_flex_ability_repsection = function (attr,repsec) {
        var fields = [];
        getSectionIDs(repsec, function(idarray){
            if ( (parseInt(idarray.length) || 0) > 0) {
                _.each(idarray, function(id) {
                    fields.push("repeating_" + repsec + "_" + id + "_ability");
                });
                getAttrs(fields, function(ablts) {
                    var flexes = [];
                    _.each(fields, function(field){
                        if(ablts[field] == attr) {
                            flexes.push(field + "_mod");
                        }
                    });
                    if ( (parseInt(flexes.length) || 0) > 0) {
                        var modz = [];
                        modz.push(attr + "_mod");
                        getAttrs(modz, function(v) {
                            var update = {};
                            _.each(flexes, function(flex) {
                                update[flex] = v[attr + "_mod"];
                            });
                            setAttrs(update);
                        });
                    }
                });
            }
        });
    };
    var update_ability_mod = function(attr) {
        update_flex_ability(attr,"");
        update_ac_ability(attr);
        update_attacks(attr);
        update_flex_ability_repsection(attr,"skillcraft");
        update_flex_ability_repsection(attr,"skillknowledge");
        update_flex_ability_repsection(attr,"skillperform");
        update_flex_ability_repsection(attr,"skillprofession");
        update_flex_ability_repsection(attr,"skillcustom");
    };

    // === SIZE
    var update_size = function(psize) {
        var size = psize || "medium";
        var atkac = 0;
        var cmb = 0;
        var fly = 0;
        var stealth = 0;
        var load = 1;
        switch(size) {
            case "fine":
                atkac = 8;
                cmb = -8;
                fly = 8;
                stealth = 16;
                load = 0.125;
                break;
            case "diminutive":
                atkac = 4;
                cmb = -4;
                fly = 6;
                stealth = 12;
                load = 0.25;
                break;
            case "tiny":
                atkac = 2;
                cmb = -2;
                fly = 4;
                stealth = 8;
                load = 0.5;
                break;
            case "small":
                atkac = 1;
                cmb = -1;
                fly = 2;
                stealth = 4;
                load = 0.75;
                break;
            case "medium":
                atkac = 0;
                cmb = 0;
                fly = 0;
                stealth = 0;
                load = 1;
                break;
            case "large":
                atkac = -1;
                cmb = 1;
                fly = -2;
                stealth = -4;
                load = 2;
                break;
            case "huge":
                atkac = -2;
                cmb = 2;
                fly = -4;
                stealth = -8;
                load = 4;
                break;
            case "gargantuan":
                atkac = -4;
                cmb = 4;
                fly = -6;
                stealth = -12;
                load = 8;
                break;
            case "colossal":
                atkac = -8;
                cmb = 8;
                fly = -8;
                stealth = -16;
                load = 16;
                break;
        }
        setAttrs({
            "ac_size": atkac,
            "bab_size": atkac,
            "cmb_size": cmb,
            "fly_size": fly,
            "stealth_size": stealth,
            "encumbrance_size": load
        });
    };

    // === INITIATIVE
    var update_initiative = function () {
        getAttrs(["dexterity_mod","initiative_misc","initiative_bonus"], function(v) {
            var update = {};
            update["initiative"] = (parseInt(v.dexterity_mod) || 0) + (parseInt(v.initiative_misc) || 0) + (parseInt(v.initiative_bonus) || 0);
            setAttrs(update);
        });
    };

    // === AC / DEFENSE
    var update_ac_items = function() {
        var update = {};
        var attrs = ["speed_race"];
        getSectionIDs("repeating_acitems", function(idarray) {
            _.each(idarray, function(itemid) {
                attrs.push("repeating_acitems_" + itemid + "_equipped");
                attrs.push("repeating_acitems_" + itemid + "_ac_bonus");
                attrs.push("repeating_acitems_" + itemid + "_flatfooted_bonus");
                attrs.push("repeating_acitems_" + itemid + "_touch_bonus");
                attrs.push("repeating_acitems_" + itemid + "_type");
                attrs.push("repeating_acitems_" + itemid + "_check_penalty");
                attrs.push("repeating_acitems_" + itemid + "_max_dex_bonus");
                attrs.push("repeating_acitems_" + itemid + "_spell_failure");
                attrs.push("repeating_acitems_" + itemid + "_spell_failure");
                attrs.push("repeating_acitems_" + itemid + "_speed20");
                attrs.push("repeating_acitems_" + itemid + "_speed30");
                attrs.push("repeating_acitems_" + itemid + "_run_factor");
            });
            getAttrs(attrs, function(v) {
                var bonusarmor = 0;
                var bonusshield = 0;
                var bonusff = 0;
                var bonustouch = 0;
                var checkpen = 0;
                var maxdex = 99;
                var spellf = 0;
                var maxab = "-";
                var speedrace = parseInt(v.speed_race) || 30;
                var speedreduced = calc_reduced_speed(speedrace); // heavy and medium armor
                var speed = speedrace;
                var run = 4;
                _.each(idarray, function(itemid) {
                    if ( v["repeating_acitems_" + itemid + "_equipped"] == "1" ) {
                        if (v["repeating_acitems_" + itemid + "_type"] == "shield") {
                            bonusshield += parseInt(v["repeating_acitems_" + itemid + "_ac_bonus"]) || 0;
                        } else {
                            bonusarmor += parseInt(v["repeating_acitems_" + itemid + "_ac_bonus"]) || 0;
                        }
                        bonusff += parseInt(v["repeating_acitems_" + itemid + "_flatfooted_bonus"]) || 0;
                        bonustouch += parseInt(v["repeating_acitems_" + itemid + "_touch_bonus"]) || 0;
                        checkpen += parseInt(v["repeating_acitems_" + itemid + "_check_penalty"]) || 0;
                        if ((parseInt(v["repeating_acitems_" + itemid + "_max_dex_bonus"]) || 99) != 0) {
                            maxdex = Math.min(maxdex, parseInt(v["repeating_acitems_" + itemid + "_max_dex_bonus"]) || 99);
                        }
                        spellf += parseInt(v["repeating_acitems_" + itemid + "_spell_failure"]) || 0;
                        if(["heavy","medium"].includes(v["repeating_acitems_" + itemid + "_type"])) {
                            speed = Math.min(speed,speedrace,speedreduced);
                        }
                        /*
                        if(speedrace <= 20) {
                            speed = Math.min(speed, parseInt(v["repeating_acitems_" + itemid + "_speed20"].replace(/\D+/g, "")) || speedrace);
                        } else {
                            speed = Math.min(speed, parseInt(v["repeating_acitems_" + itemid + "_speed30"].replace(/\D+/g, "")) || speedrace);
                        }
                        */
                        run = Math.min(run, parseInt(v["repeating_acitems_" + itemid + "_run_factor"]) || 4);
                    }
                });
                if (maxdex < 99) {
                    maxab = maxdex;
                }
                setAttrs({
                    "ac_armor": bonusarmor,
                    "ac_shield": bonusshield,
                    "ac_flatfooted_bonus": bonusff,
                    "ac_touch_bonus": bonustouch,
                    "ac_ability_maximum": maxab,
                    "armor_check_penalty": checkpen,
                    "armor_spell_failure": spellf,
                    "speed_armor": speed,
                    "armor_run_factor":run
                });
            });
        });
    };
    var update_ac_ability = function(attr) {
        getAttrs(["ac_ability_primary","ac_ability_secondary"], function(v) {
            if( (attr == "encumbrance_ability_maximum") || (attr == "ac_ability_maximum") || (attr == v.ac_ability_primary) || (attr == v.ac_ability_secondary) ) {
                var attr_fields = [v.ac_ability_primary + "_mod",v.ac_ability_secondary + "_mod","ac_ability_maximum","encumbrance_ability_maximum"];
                getAttrs(attr_fields, function(modz) {
                    var primary = parseInt(modz[v.ac_ability_primary + "_mod"]) || 0;
                    var secondary = parseInt(modz[v.ac_ability_secondary + "_mod"]) || 0;
                    var maxmod = Math.min(parseInt(modz.ac_ability_maximum) || 99, parseInt(modz.encumbrance_ability_maximum) || 99);
                    setAttrs({"ac_ability_mod": Math.min(primary + secondary,maxmod)});
                });
            }
        });
    };
    var update_ac = function() {
        var update = {};
        getAttrs(["ac_bonus","ac_ability_mod","ac_armor","ac_shield","ac_size","ac_natural","ac_deflection","ac_misc","ac_dodge","ac_touch_bonus","ac_flatfooted_bonus","ac_noflatflooted","ac_touchshield"], function(v) {
            var base = 10;
            var ac = 0;
            var actouch = 0;
            var acff = 0;
            var bonus = parseInt(v.ac_bonus) || 0;
            var ability = parseInt(v.ac_ability_mod) || 0;
            var armor = parseInt(v.ac_armor) || 0;
            var shield = parseInt(v.ac_shield) || 0;
            var size = parseInt(v.ac_size) || 0;
            var natural = parseInt(v.ac_natural) || 0;
            var deflection = parseInt(v.ac_deflection) || 0;
            var misc = parseInt(v.ac_misc) || 0;
            var dodge = parseInt(v.ac_dodge) || 0;
            var touch_bonus = parseInt(v.ac_touch_bonus) || 0;
            var flatfooted_bonus = parseInt(v.ac_flatfooted_bonus) || 0;
            var noflatflooted = parseInt(v.ac_noflatflooted) || 0;
            var touchshield = parseInt(v.ac_touchshield) || 0;
            var flag = bonus !=0 ? 1 : 0;
            ac = base + bonus + ability + armor + shield + size + natural + deflection + misc + dodge;
            if (noflatflooted == 1) {acff = ac;}
            else {acff = base + bonus + ( (ability < 0) ? ability : 0 ) + armor + shield + size + natural + deflection + misc;}
            acff += flatfooted_bonus;
            actouch = base + bonus + ability + size + deflection + misc + dodge;
            if (touchshield == 1) {actouch += shield;}
            actouch += touch_bonus;
            setAttrs({
                "ac": ac,
                "ac_touch": actouch,
                "ac_flatfooted": acff
            });
        });
    };
    var update_cmd = function() {
        var fields = ["bab","strength_mod","dexterity_mod","cmb_size","ac_dodge","ac_deflection","cmd_misc","cmd_bonus"];
        getAttrs(fields, function(v) {
            var update = {};
            update["cmd_mod"] = 10
                            + (parseInt(v.bab) || 0)
                            + (parseInt(v.strength_mod) || 0)
                            + (parseInt(v.dexterity_mod) || 0)
                            + (parseInt(v.cmb_size) || 0)
                            + (parseInt(v.ac_dodge) || 0)
                            + (parseInt(v.ac_deflection) || 0)
                            + (parseInt(v.cmd_misc) || 0)
                            + (parseInt(v.cmd_bonus) || 0);
            setAttrs(update);
        });
        return;
    };

    // === SAVES
    var update_save = function(attr) {
        var fields = [attr + "_base",attr + "_ability_mod",attr + "_misc",attr + "_bonus"];
        getAttrs(fields, function(v) {
            var update = {};
            update[attr] = (parseInt(v[attr + "_base"]) || 0) + (parseInt(v[attr + "_ability_mod"]) || 0) + (parseInt(v[attr + "_misc"]) || 0) + (parseInt(v[attr + "_bonus"]) || 0);
            setAttrs(update);
        });
    };

    // === BABS
    var update_babs_all = function(newbab) {
        // babs for multi attack array
        var bab = parseInt(newbab) || 0;
        var update = {};
        var babarray = [];
        var multi = bab;
        do {
            babarray.push(multi);
            multi = multi - 5;
        } while (multi > 0);
        update["bab_multi"] = babarray;
        setAttrs(update, {silent: true}, function() {
            update_attacks("bab");
            update_babs("cmb");
            update_babs("melee");
            update_babs("ranged");
            update_cmd();
        });
    }
    var update_babs = function(attr) {
        var fields = ["bab","bab_multi","bab_size",attr + "_ability_mod",attr + "_misc",attr + "_bonus"];
        getAttrs(fields, function(v) {
            var update = {};
            if (typeof v.bab_multi !== 'undefined') {
                var babarray = JSON.parse("[" + v.bab_multi + "]");
            } else {
                var babarray = [];
            }
            var atkarray = [];
            update[attr + "_mod"] = (parseInt(v.bab) || 0) + (parseInt(v.bab_size) || 0) + (parseInt(v[attr + "_ability_mod"]) || 0) + (parseInt(v[attr + "_misc"]) || 0) + (parseInt(v[attr + "_bonus"]) || 0);
            if (babarray.length) {
                var tmp = 0;
                _.each(babarray, function(babval) {
                    tmp = (parseInt(babval) || 0) + (parseInt(v.bab_size) || 0) + (parseInt(v[attr + "_ability_mod"]) || 0) + (parseInt(v[attr + "_misc"]) || 0) + (parseInt(v[attr + "_bonus"]) || 0);
                    atkarray.push(tmp);
                });
            } else {
                atkarray.push(update[attr + "_mod"]);
            }
            update[attr + "_multi"] = atkarray;
            setAttrs(update,{silent: false});
        });
    };

    // === WEAPONS/ATTACKS
    var update_attacks = function(update_id) {
        console.log("DOING UPDATE_ATTACKS: " + update_id);
        if(update_id.substring(0,1) === "-" && update_id.length === 20) {
            do_update_attack([update_id]);
        }
        else if(["strength","dexterity","constitution","intelligence","wisdom","charisma","melee","ranged","cmb","bab","all"].includes(update_id)) {
            getSectionIDs("repeating_attacks", function(idarray) {
                if(update_id === "all") {
                    do_update_attack(idarray);
                } else {
                    var attack_attribs = [];
                    _.each(idarray, function(id) {
                        attack_attribs.push("repeating_attacks_" + id + "_atktype");
                        attack_attribs.push("repeating_attacks_" + id + "_atktype2");
                        attack_attribs.push("repeating_attacks_" + id + "_dmgattr");
                        attack_attribs.push("repeating_attacks_" + id + "_dmg2attr");
                    });
                    getAttrs(attack_attribs, function(v) {
                        var attr_attack_ids = [];
                        _.each(idarray, function(id) {
                            if( (v["repeating_attacks_" + id + "_atktype"] && v["repeating_attacks_" + id + "_atktype"].includes(update_id)) ||
                                (v["repeating_attacks_" + id + "_atktype2"] && v["repeating_attacks_" + id + "_atktype2"].includes(update_id)) ||
                                (v["repeating_attacks_" + id + "_dmgattr"] && v["repeating_attacks_" + id + "_dmgattr"].includes(update_id)) ||
                                (v["repeating_attacks_" + id + "_dmg2attr"] && v["repeating_attacks_" + id + "_dmg2attr"].includes(update_id))) {
                                attr_attack_ids.push(id);
                            }
                        });
                        if(attr_attack_ids.length > 0) {
                            do_update_attack(attr_attack_ids);
                        }
                    });
                };
            });
        };
    };
    var do_update_attack = function(attack_array) {
        var attack_attribs = ["strength_mod","strength_oneandahalf_mod","strength_half_mod","dexterity_mod","constitution_mod","intelligence_mod","wisdom_mod","charisma_mod","melee_mod","ranged_mod","cmb_mod","bab","rollmod_attack","rollnotes_attack","rollmod_damage","whispertype","rollshowchar","bab_multi","melee_multi","ranged_multi","cmb_multi"];
        _.each(attack_array, function(attackid) {
            attack_attribs.push("repeating_attacks_" + attackid + "_atkname");
            attack_attribs.push("repeating_attacks_" + attackid + "_atkflag");
            attack_attribs.push("repeating_attacks_" + attackid + "_atktype");
            attack_attribs.push("repeating_attacks_" + attackid + "_atktype2");
            attack_attribs.push("repeating_attacks_" + attackid + "_atkmod");
            attack_attribs.push("repeating_attacks_" + attackid + "_atkvs");
            attack_attribs.push("repeating_attacks_" + attackid + "_atkcritrange");
            attack_attribs.push("repeating_attacks_" + attackid + "_atkrange");
            attack_attribs.push("repeating_attacks_" + attackid + "_dmgflag");
            attack_attribs.push("repeating_attacks_" + attackid + "_dmgbase");
            attack_attribs.push("repeating_attacks_" + attackid + "_dmgattr");
            attack_attribs.push("repeating_attacks_" + attackid + "_dmgmod");
            attack_attribs.push("repeating_attacks_" + attackid + "_dmgcritmulti");
            attack_attribs.push("repeating_attacks_" + attackid + "_dmgtype");
            attack_attribs.push("repeating_attacks_" + attackid + "_dmg2flag");
            attack_attribs.push("repeating_attacks_" + attackid + "_dmg2base");
            attack_attribs.push("repeating_attacks_" + attackid + "_dmg2attr");
            attack_attribs.push("repeating_attacks_" + attackid + "_dmg2mod");
            attack_attribs.push("repeating_attacks_" + attackid + "_dmg2critmulti");
            attack_attribs.push("repeating_attacks_" + attackid + "_dmg2type");
            attack_attribs.push("repeating_attacks_" + attackid + "_descflag");
            attack_attribs.push("repeating_attacks_" + attackid + "_atkdesc");
            attack_attribs.push("repeating_attacks_" + attackid + "_notes");
        });
        getAttrs(attack_attribs, function(v) {
            _.each(attack_array, function(attackid) {
                console.log("UPDATING ATTACK: " + attackid);
                var update = {};
                var i = 0;
                var tmpint = 0;
                var stemp = "";
                var atkbonus = 0;
                var atkbonusdisplay = "-";
                var atkbonusdisplay1 = " ";
                var atkbonusdisplay2 = " ";
                var atkbonusdisplay3 = " ";
                var atkdmg = "";
                var atkdmgbonus = 0;
                var atkdmg2bonus = 0;
                var atkdmgdisplay = "-";
                var atkdmg2display = "-";
                var atkdisplay = " ";
                var rollbase = "";
                var rollatk = " ";
                var rollatk1 = " ";
                var rollatk2 = " ";
                var rollatk3 = " ";
                var rolldmg = "";
                var rolldmgonly = "";
                var rolltype = "";
                var rollnotes = "";
                var atkname = v["repeating_attacks_" + attackid + "_atkname"];
                var atkflag = v["repeating_attacks_" + attackid + "_atkflag"];
                var atktype = 0;
                if (v["repeating_attacks_" + attackid + "_atktype"] == "bab") {
                    atktype = parseInt(v.bab) || 0;
                } else {
                    atktype = parseInt(v[v["repeating_attacks_" + attackid + "_atktype"] + "_mod"]) || 0;
                }
                var atktype2 = parseInt(v[v["repeating_attacks_" + attackid + "_atktype2"] + "_mod"]) || 0;
                var atktypearray = [];
                var atkmod = v["repeating_attacks_" + attackid + "_atkmod"];
                var atkvs = v["repeating_attacks_" + attackid + "_atkvs"];
                var atkcritrange = parseInt(v["repeating_attacks_" + attackid + "_atkcritrange"]) || 20;
                var atkrange = v["repeating_attacks_" + attackid + "_atkrange"];
                var dmgflag = v["repeating_attacks_" + attackid + "_dmgflag"];
                var dmgbase = v["repeating_attacks_" + attackid + "_dmgbase"];
                var dmgattr = parseInt(v[v["repeating_attacks_" + attackid + "_dmgattr"] + "_mod"]) || 0;
                var dmgmod = v["repeating_attacks_" + attackid + "_dmgmod"];
                var dmgcritmulti = parseInt(v["repeating_attacks_" + attackid + "_dmgcritmulti"]) || 1;
                var dmgtype = v["repeating_attacks_" + attackid + "_dmgtype"];
                var dmg2flag = v["repeating_attacks_" + attackid + "_dmg2flag"];
                var dmg2base = v["repeating_attacks_" + attackid + "_dmg2base"];
                var dmg2attr = parseInt(v[v["repeating_attacks_" + attackid + "_dmg2attr"] + "_mod"]) || 0;
                var dmg2mod = v["repeating_attacks_" + attackid + "_dmg2mod"];
                var dmg2critmulti = parseInt(v["repeating_attacks_" + attackid + "_dmg2critmulti"]) || 1;
                var dmg2type = v["repeating_attacks_" + attackid + "_dmg2type"];
                var descflag = v["repeating_attacks_" + attackid + "_descflag"];
                var atkdesc = v["repeating_attacks_" + attackid + "_atkdesc"];
                var atknotes = v["repeating_attacks_" + attackid + "_notes"];
                // Handling empty values
                if (atkmod.length == 0) {atkmod = "0";}
                if (dmgmod.length == 0) {dmgmod = "0";}
                if (dmg2mod.length == 0) {dmg2mod = "0";}
                // Multi attack base handling
                if (["bab","melee","ranged","cmb"].includes(v["repeating_attacks_" + attackid + "_atktype"])) {
                    atktypearray = JSON.parse("[" + v[v["repeating_attacks_" + attackid + "_atktype"] + "_multi"] + "]");
                }
                // == Display handling
                atkbonus = atktype + atktype2 + (parseInt(atkmod) || 0);
                atkdmgbonus = dmgattr + (parseInt(dmgmod) || 0);
                atkdmg2bonus = dmg2attr + (parseInt(dmg2mod) || 0);
                if(atkflag != "0") {
                    atkdisplay ="";
                    if (v["repeating_attacks_" + attackid + "_atktype"] != "0") {
                        atkdisplay += pfoglobals_i18n_obj[v["repeating_attacks_" + attackid + "_atktype"]];
                    }
                    if (v["repeating_attacks_" + attackid + "_atktype2"] != "0") {
                        if (atkdisplay.trim().length >0) {atkdisplay += "+";}
                        atkdisplay += pfoglobals_i18n_obj[v["repeating_attacks_" + attackid + "_atktype2"]];
                    }
                    atkdisplay = "(" + atkdisplay + " " + pfoglobals_i18n_obj["vs"] + " " + pfoglobals_i18n_obj[atkvs] + ")";
                    atkbonusdisplay = "" + (atkbonus < 0 ? "" : "+") + atkbonus;
                    if (atktypearray.length > 1) {
                        tmpint = (parseInt(atktypearray[1]) || 0) + atktype2 + (parseInt(atkmod) || 0);
                        atkbonusdisplay1 = "/" + (tmpint < 0 ? "" : "+") + tmpint;
                    }
                    if (atktypearray.length > 2) {
                        tmpint = (parseInt(atktypearray[2]) || 0) + atktype2 + (parseInt(atkmod) || 0);
                        atkbonusdisplay2 = "/" + (tmpint < 0 ? "" : "+") + tmpint;
                    }
                    if (atktypearray.length > 3) {
                        tmpint = (parseInt(atktypearray[3]) || 0) + atktype2 + (parseInt(atkmod) || 0);
                        atkbonusdisplay3 = "/" + (tmpint < 0 ? "" : "+") + tmpint;
                    }
                }
                if(dmgflag != "0") {atkdmgdisplay = "" + dmgbase + (atkdmgbonus < 0 ? "" : "+") + atkdmgbonus;}
                if(dmg2flag != "0") {atkdmg2display = "" + dmg2base + (atkdmg2bonus < 0 ? "" : "+") + atkdmg2bonus;}
                update["repeating_attacks_" + attackid + "_atkdisplay"] = atkdisplay;
                update["repeating_attacks_" + attackid + "_atkbonusdisplay"] = atkbonusdisplay;
                update["repeating_attacks_" + attackid + "_atkbonusdisplay1"] = atkbonusdisplay1;
                update["repeating_attacks_" + attackid + "_atkbonusdisplay2"] = atkbonusdisplay2;
                update["repeating_attacks_" + attackid + "_atkbonusdisplay3"] = atkbonusdisplay3;
                update["repeating_attacks_" + attackid + "_atkdmgdisplay"] = atkdmgdisplay;
                update["repeating_attacks_" + attackid + "_atkdmgdisplay2"] = atkdmg2display;
                // == Rolls handling
                // desc
                if(descflag != "0") {
                    atkdesc = "{{descflag=[[1]]}}{{desc=" + atkdesc + "}}";
                }
                // notes
                if(v["rollnotes_attack"] != "0") {
                    rollnotes = "{{shownotes=[[1]]}}{{notes=" + atknotes + "}}";
                }
                // range
                if(atkrange.length != 0) {
                    atkrange = "{{range=" + atkrange + "}}";
                }
                // roll attack
                if(atkflag != "0") {
                    stemp = atktype + "[" + pfoglobals_i18n_obj[v["repeating_attacks_" + attackid + "_atktype"]] + "]+"
                            + atktype2 + "[" + pfoglobals_i18n_obj[v["repeating_attacks_" + attackid + "_atktype2"]] + "]+"
                            + atkmod + "[MOD]+@{rollmod_attack}[BONUS]]]}}";
                    rollatk = "{{roll=[[1d20cs>" + atkcritrange + "+" + stemp + "{{atkvs=" + atkdisplay + "}}";
                    rollatk += "{{critconfirm=[[1d20cs20+" + stemp;
                    if (atktypearray.length > 1) {
                        stemp = atktypearray[1] + "[" + pfoglobals_i18n_obj[v["repeating_attacks_" + attackid + "_atktype"]] + "]+"
                                + atktype2 + "[" + pfoglobals_i18n_obj[v["repeating_attacks_" + attackid + "_atktype2"]] + "]+"
                                + atkmod + "[MOD]+@{rollmod_attack}[BONUS]]]}}";
                        rollatk1 = "{{roll1=[[1d20cs>" + atkcritrange + "+" + stemp;
                        rollatk1 += "{{critconfirm1=[[1d20cs20+" + stemp;
                    }
                    if (atktypearray.length > 2) {
                        stemp = atktypearray[2] + "[" + pfoglobals_i18n_obj[v["repeating_attacks_" + attackid + "_atktype"]] + "]+"
                                + atktype2 + "[" + pfoglobals_i18n_obj[v["repeating_attacks_" + attackid + "_atktype2"]] + "]+"
                                + atkmod + "[MOD]+@{rollmod_attack}[BONUS]]]}}";
                        rollatk2 = "{{roll2=[[1d20cs>" + atkcritrange + "+" + stemp;
                        rollatk2 += "{{critconfirm2=[[1d20cs20+" + stemp;
                    }
                    if (atktypearray.length > 3) {
                        stemp = atktypearray[3] + "[" + pfoglobals_i18n_obj[v["repeating_attacks_" + attackid + "_atktype"]] + "]+"
                                + atktype2 + "[" + pfoglobals_i18n_obj[v["repeating_attacks_" + attackid + "_atktype2"]] + "]+"
                                + atkmod + "[MOD]+@{rollmod_attack}[BONUS]]]}}";
                        rollatk3 = "{{roll3=[[1d20cs>" + atkcritrange + "+" + stemp;
                        rollatk3 += "{{critconfirm3=[[1d20cs20+" + stemp;
                    }
                    rolltype += "attack";
                    rollbase += atkflag + atkrange + rollatk + rollatk1 + rollatk2 + rollatk3;
                    // desc
                    if(descflag != "0") {
                        rollatk += atkdesc;
                        rollbase += atkdesc;
                    }
                    // notes
                    if(v["rollnotes_attack"] != "0") {
                        rollatk += rollnotes;
                        rollbase += rollnotes;
                    }
                }
                // roll damage
                if( (dmgflag != "0") || (dmg2flag != "0") ) {
                    rolltype += "damage";
                    if(dmgflag != "0") {
                        stemp = dmgbase + "+" + dmgattr + "[" + pfoglobals_i18n_obj[v["repeating_attacks_" + attackid + "_dmgattr"]] + "]+" + dmgmod + "[MOD]+@{rollmod_damage}[BONUS]";
                        if ( (atkflag != "0") && (atktypearray.length > 1) ) {
                            // One damage roll per attack
                            rolldmg += "{{rolldmg1=[[" + stemp + "]]}}{{rolldmg1type=" + dmgtype +"}}";
                            if (atktypearray.length > 1) {rolldmg += "{{roll1dmg1=[[" + stemp + "]]}}{{roll1dmg1type=" + dmgtype +"}}";}
                            if (atktypearray.length > 2) {rolldmg += "{{roll2dmg1=[[" + stemp + "]]}}{{roll2dmg1type=" + dmgtype +"}}";}
                            if (atktypearray.length > 3) {rolldmg += "{{roll3dmg1=[[" + stemp + "]]}}{{roll3dmg1type=" + dmgtype +"}}";}
                        } else {
                            // No attack (damage only) or just one attack
                            rolldmg += dmgflag + "{{dmg1=[[" + stemp + "]]}}{{dmg1type=" + dmgtype +"}}";
                        }
                        rolldmgonly += dmgflag + "{{dmg1=[[" + stemp + "]]}}{{dmg1type=" + dmgtype +"}}";
                        if (dmgcritmulti > 1) {
                            // Critical damage
                            stemp = "";
                            for (i=1; i <= dmgcritmulti; i++) {
                                stemp += ((stemp.length > 0) ? "+" : "") + dmgbase;
                            }
                            stemp = "[[((" + stemp + ")+(" + dmgattr + "[" + pfoglobals_i18n_obj[v["repeating_attacks_" + attackid + "_dmgattr"]] + "]+" + dmgmod + "[MOD]+@{rollmod_damage}[BONUS])*" + dmgcritmulti + ")]]";
                            if ( (atkflag != "0") && (atktypearray.length > 1) ) {
                                // One crit damage roll per attack
                                rolldmg += "{{rolldmg1crit=" + stemp + "}}";
                                if (atktypearray.length > 1) {rolldmg += "{{roll1dmg1crit=" + stemp + "}}";}
                                if (atktypearray.length > 2) {rolldmg += "{{roll2dmg1crit=" + stemp + "}}";}
                                if (atktypearray.length > 3) {rolldmg += "{{roll3dmg1crit=" + stemp + "}}";}
                            } else {
                                // No attack (damage only) or just one attack
                                rolldmg += "{{dmg1crit=" + stemp + "}}";
                            }
                            rolldmgonly += "{{dmg1crit=" + stemp + "}}";
                        }
                    }
                    if(dmg2flag != "0") {
                        stemp = dmg2base + "+" + dmg2attr + "[" + pfoglobals_i18n_obj[v["repeating_attacks_" + attackid + "_dmg2attr"]] + "]+" + dmg2mod + "[MOD]+@{rollmod_damage}[BONUS]";
                        if ( (atkflag != "0") && (atktypearray.length > 1) ) {
                            // One damage roll per attack
                            rolldmg += "{{rolldmg2=[[" + stemp + "]]}}{{rolldmg2type=" + dmg2type +"}}";
                            if (atktypearray.length > 1) {rolldmg += "{{roll1dmg2=[[" + stemp + "]]}}{{roll1dmg2type=" + dmg2type +"}}";}
                            if (atktypearray.length > 2) {rolldmg += "{{roll2dmg2=[[" + stemp + "]]}}{{roll2dmg2type=" + dmg2type +"}}";}
                            if (atktypearray.length > 3) {rolldmg += "{{roll3dmg2=[[" + stemp + "]]}}{{roll3dmg2type=" + dmg2type +"}}";}
                        } else {
                            // No attack (damage only) or just one attack
                            rolldmg += dmg2flag + "{{dmg2=[[" + stemp + "]]}}{{dmg2type=" + dmg2type +"}}";
                        }
                        rolldmgonly += dmg2flag + "{{dmg2=[[" + stemp + "]]}}{{dmg2type=" + dmg2type +"}}";
                        if (dmg2critmulti > 1) {
                            // Critical damage
                            stemp = "";
                            for (i=1; i <= dmg2critmulti; i++) {
                                stemp += ((stemp.length > 0) ? "+" : "") + dmg2base;
                            }
                            stemp = "[[((" + stemp + ")+(" + dmg2attr + "[" + pfoglobals_i18n_obj[v["repeating_attacks_" + attackid + "_dmg2attr"]] + "]+" + dmg2mod + "[MOD]+@{rollmod_damage}[BONUS])*" + dmg2critmulti + ")]]";
                            if ( (atkflag != "0") && (atktypearray.length > 1) ) {
                                // One crit damage roll per attack
                                rolldmg += "{{rolldmg2crit=" + stemp + "}}";
                                if (atktypearray.length > 1) {rolldmg += "{{roll1dmg2crit=" + stemp + "}}";}
                                if (atktypearray.length > 2) {rolldmg += "{{roll2dmg2crit=" + stemp + "}}";}
                                if (atktypearray.length > 3) {rolldmg += "{{roll3dmg2crit=" + stemp + "}}";}
                            } else {
                                // No attack (damage only) or just one attack
                                rolldmg += "{{dmg2crit=" + stemp + "}}";
                            }
                            rolldmgonly += "{{dmg2crit=" + stemp + "}}";
                        }
                    }
                    // desc
                    if((descflag != "0") && (atkflag == "0")) {
                        rolldmg += atkdesc;
                        rolldmgonly += atkdesc;
                    }
                    // notes
                    if((v["rollnotes_attack"] != "0") && (atkflag == "0")) {
                        rolldmg += rollnotes;
                        rolldmgonly += rollnotes;
                    }
                    rollbase += rolldmg;
                }
                // final rolls values
                if (rollbase.trim().length > 0) {
                    rollbase = "@{whispertype} &{template:pc" + "}{{name=" + atkname + "}}{{type=" + rolltype + "}}{{showchar=@{rollshowchar}}}{{charname=@{character_name}}}" + rollbase;
                }
                if (rollatk.trim().length > 0) {
                    rollatk = "@{whispertype} &{template:pc" + "}{{name=" + atkname + "}}{{type=attack}}{{showchar=@{rollshowchar}}}{{charname=@{character_name}}}" + atkflag + atkrange + rollatk;
                }
                if (rollatk1.trim().length > 0) {
                    rollatk1 = "@{whispertype} &{template:pc" + "}{{smallname=" + atkname + "}}{{type=attack}}{{showchar=@{rollshowchar}}}{{charname=@{character_name}}}" + atkflag + rollatk1;
                }
                if (rollatk2.trim().length > 0) {
                    rollatk2 = "@{whispertype} &{template:pc" + "}{{smallname=" + atkname + "}}{{type=attack}}{{showchar=@{rollshowchar}}}{{charname=@{character_name}}}" + atkflag + rollatk2;
                }
                if (rollatk3.trim().length > 0) {
                    rollatk3 = "@{whispertype} &{template:pc" + "}{{smallname=" + atkname + "}}{{type=attack}}{{showchar=@{rollshowchar}}}{{charname=@{character_name}}}" + atkflag + rollatk3;
                }
                if (rolldmg.trim().length > 0) {
                    rolldmgonly = "@{whispertype} &{template:pc" + "}{{smallname=" + atkname + "}}{{type=damage}}{{showchar=@{rollshowchar}}}{{charname=@{character_name}}}" + rolldmgonly;
                }
                update["repeating_attacks_" + attackid + "_rollbase"] = rollbase;
                update["repeating_attacks_" + attackid + "_rollbase_atk"] = rollatk;
                update["repeating_attacks_" + attackid + "_rollbase_atk1"] = rollatk1;
                update["repeating_attacks_" + attackid + "_rollbase_atk2"] = rollatk2;
                update["repeating_attacks_" + attackid + "_rollbase_atk3"] = rollatk3;
                update["repeating_attacks_" + attackid + "_rollbase_dmg"] = rolldmgonly;
                // == update
                setAttrs(update, {silent: true});
            });
        });
    };
    // --- NPC attacks
    var update_npc_attacks_all = function() {
        getSectionIDs("repeating_npcatk-melee", function(idarray) {
            _.each(idarray, function(id) {
                update_npc_attack("melee",id);
            });
        });
        getSectionIDs("repeating_npcatk-ranged", function(idarray) {
            _.each(idarray, function(id) {
                update_npc_attack("ranged",id);
            });
        });
    };
    var update_npc_attack = function (type,id) {
        // type = "melee" / "ranged"
        var update = {};
        var i=0;
        var display = "";
        var multi = "";
        var sdmg1 = "";
        var sdmg2 = "";
        var scrit1 = "";
        var scrit2 = "";
        var base = "repeating_npcatk-" + type + "_" + id + "_";
        var fields = [base + "atkname",base + "atkflag",base + "atkmod",base + "multipleatk_flag",base + "atkmod2",base + "atkmod3",base + "atkmod4",base + "atkmod5",base + "atkmod6",base + "atkmod7",base + "atkmod8",base + "atkmod9",base + "atkcritrange",base + "dmgflag",base + "dmgbase",base + "dmgtype",base + "dmgcritmulti",base + "dmg2flag",base + "dmg2base",base + "dmg2type",base + "dmg2critmulti"];
        if(type == "ranged") {fields.push(base + "atkrange");}
        getAttrs(fields, function(v){
            display = v[base + "atkname"];
            display += " " + (((parseInt(v[base  + "atkmod"]) || 0) > 0) ? "+" : "") + v[base  + "atkmod"];
            var dmgcritmulti = parseInt(v[base + "dmgcritmulti"]) || 1;
            var dmg2critmulti = parseInt(v[base + "dmg2critmulti"]) || 1;
            // First attack
            multi = "{{roll=[[1d20cs>@{atkcritrange}+@{atkmod}[MOD]+@{rollmod_attack}[BONUS]]]}}";
            multi += "{{critconfirm=[[1d20cs20+@{atkmod}[MOD]+@{rollmod_attack}[BONUS]]]}}";
            // Damage
            if( (v[base + "dmgflag"] != "0") && (v[base + "dmgbase"].length > 0) ){
                sdmg1 = "[[" + v[base + "dmgbase"] + "+@{rollmod_damage}[BONUS]]]";
                multi += "{{rolldmg1=" + sdmg1 + "}}{{rolldmg1type=@{dmgtype}}}";
                if(dmgcritmulti > 1) {
                    scrit1 = "";
                    for (i=1; i <= dmgcritmulti; i++) {
                        scrit1 += ((scrit1.length > 0) ? "+" : "") + v[base + "dmgbase"];
                    }
                    scrit1 = "[[(" + scrit1 + ")+(@{rollmod_damage}[BONUS]*" + dmgcritmulti + ")]]";
                    multi += "{{rolldmg1crit=" + scrit1 + "}}";
                }
            }
            if( (v[base + "dmg2flag"] != "0") && (v[base + "dmg2base"].length > 0) ){
                sdmg2 = "[[" + v[base + "dmg2base"] + "+@{rollmod_damage}[BONUS]]]";
                multi += "{{rolldmg2=" + sdmg2 + "}}{{rolldmg2type=@{dmg2type}}}";
                if(dmg2critmulti > 1) {
                    scrit2 = "";
                    for (i=1; i <= dmg2critmulti; i++) {
                        scrit2 += ((scrit2.length > 0) ? "+" : "") + v[base + "dmg2base"];
                    }
                    scrit2 = "[[(" + scrit2 + ")+(@{rollmod_damage}[BONUS]*" + dmg2critmulti + ")]]";
                    multi += "{{rolldmg2crit=" + scrit2 + "}}";
                }
            }
            // Multi attack
            if(v[base + "multipleatk_flag"] == "1"){
                for (var i = 2; i < 10; i++) {
                    if (v[base  + "atkmod" + i] != "") {
                        display += "/" + (((parseInt(v[base  + "atkmod" + i]) || 0) > 0) ? "+" : "") + v[base  + "atkmod" + i];
                        multi += "{{roll" + (i-1) + "=[[1d20cs>@{atkcritrange}+@{atkmod" + i + "}[MOD]+@{rollmod_attack}[BONUS]]]}}{{critconfirm" + (i-1) + "=[[1d20cs20+@{atkmod" + i + "}[MOD]+@{rollmod_attack}[BONUS]]]}}";
                        if(sdmg1.length) {
                            multi += "{{roll" + (i-1) + "dmg1=" + sdmg1 + "}}{{roll" + (i-1) + "dmg1type=" + v[base + "dmgtype"] +"}}";
                            if(dmgcritmulti > 1) {
                                multi += "{{roll" + (i-1) + "dmg1crit=" + scrit1 + "}}";
                            }
                        }
                        if(v[base + "dmg2flag"] == "1") {
                            multi += "{{roll" + (i-1) + "dmg2=" + sdmg2 + "}}{{roll" + (i-1) + "dmg2type=" + v[base + "dmg2type"] +"}}";
                            if(dmg2critmulti > 1) {
                                multi += "{{roll" + (i-1) + "dmg2crit=" + scrit2 + "}}";
                            }
                        }
                    }
                }
            }
            if((type == "ranged") && (v[base + "atkrange"] != "")) {
                display += " " + v[base + "atkrange"];
            }
            if ((v[base  + "dmgflag"] != "0")||(v[base  + "dmg2flag"] != "0")) {
                var dmg = "";
                var dmg1 = "";
                var dmg2 = "";
                if(v[base  + "dmgflag"] != "0") {
                    dmg1 += v[base + "dmgbase"];
                    if((parseInt(v[base + "atkcritrange"]) || 20) < 20) {dmg1 += "/" + v[base + "atkcritrange"] + "-20";}
                    if((parseInt(v[base + "dmgcritmulti"]) || 2) != 2) {dmg1 += "/x" + v[base + "dmgcritmulti"];}
                    if(v[base + "dmgtype"] != "") {dmg1 += " " + v[base + "dmgtype"];}
                }
                if (v[base  + "dmg2flag"] != "0") {
                    if(v[base + "dmg2base"].trim() != "0") {dmg2 += v[base + "dmg2base"];}
                    if(v[base + "dmg2type"] != "") {dmg2 += " " + v[base + "dmg2type"];}
                    if((parseInt(v[base + "dmg2critmulti"]) || 1) != 1) {dmg2 += "/x" + v[base + "dmg2critmulti"];}
                }
                dmg = dmg1 + ((dmg2.length >0) ? ", " : "") + dmg2;
                if (dmg.length >0) {
                    display += " (" + dmg + ")";
                }
            }
            update[base + "atkdisplay"] = display;
            update[base + "multipleatk"] = multi;
            setAttrs(update,{silent:true});
        });
    };

    // === SKILLS
    var update_skill = function(attr,source) {
        var fields = [attr + "_classkill",attr + "_ability", attr + "_ability_mod",attr + "_ranks",attr + "_misc",attr + "_bonus",attr + "_armor_penalty","skill_check_penalty","strength_mod","dexterity_mod","constitution_mod","intelligence_mod","wisdom_mod","charisma_mod"];
        getAttrs(fields, function(v) {
            var update = {};
            var cls = parseInt(v[attr + "_classkill"]) || 0;
            var ranks = parseInt(v[attr + "_ranks"]) || 0;
            var penlt = 0;
            if (["strength","dexterity"].includes(v[attr + "_ability"])) {
                penlt = v[attr + "_armor_penalty"] != "0" ? (parseInt(v.skill_check_penalty) || 0) : 0;
            } else {
                update[attr + "_armor_penalty"] = "0";
            }
            var clsbonus = (cls * ranks) != 0 ? 3 : 0;
            var flag = (penlt != 0 ? 1 : 0) + (((parseInt(v[attr + "_bonus"]) || 0) != 0 ? 1 : 0) * 2);
            update[attr + "_penalty_flag"] = flag;
            var abltmod = 0;
            if (String(v[attr + "_ability_mod"] || "")) {
                abltmod  = parseInt(v[attr + "_ability_mod"]) || 0;
            } else {
                abltmod = parseInt(v[v[attr + "_ability"] + "_mod"]) || 0;
                update[attr + "_ability_mod"] = abltmod;
            }
            var skill = clsbonus + ranks + penlt + abltmod + (parseInt(v[attr + "_misc"]) || 0) + (parseInt(v[attr + "_bonus"]) || 0);
            if (attr.substr(0, 15) == "repeating_skill") {update[attr + "_skill"] = skill;}
            else {update[attr] = skill;}
            setAttrs(update, {silent: true}, sum_someskills_ranks(source));
        });
    };
    var sum_someskills_ranks = function(source) {
        if (source.slice(-5) == "ranks") {
            var fields = [];
            var ranks = 0;
            var update = {};
            if (source.includes("repeating_skill")) {
                var repsec = "";
                if (source.includes("skillcraft")) {repsec = "skillcraft";}
                else if (source.includes("skillknowledge")) {repsec = "skillknowledge";}
                else if (source.includes("skillperform")) {repsec = "skillperform";}
                else if (source.includes("skillprofession")) {repsec = "skillprofession";}
                else if (source.includes("skillcustom")) {repsec = "skillcustom";}
                if (repsec.length > 0 ){
                    getSectionIDs("repeating_" + repsec, function(idarray) {
                        _.each(idarray, function(id) {
                            fields.push("repeating_" + repsec + "_" + id + "_ranks");
                        });
                        getAttrs(fields, function(v){
                            _.each(fields, function(fld){
                                ranks += parseInt(v[fld]) || 0;
                            });
                            update[repsec + "_ranks"] = ranks;
                            setAttrs(update,{silent:false});
                        });
                    });
                }
            } else {
                fields = ["acrobatics_ranks","appraise_ranks","bluff_ranks","climb_ranks","craft_ranks","diplomacy_ranks","disable_device_ranks","disguise_ranks","escape_artist_ranks","fly_ranks","handle_animal_ranks","heal_ranks","intimidate_ranks","knowledge_arcana_ranks","knowledge_dungeoneering_ranks","knowledge_engineering_ranks","knowledge_geography_ranks","knowledge_history_ranks","knowledge_local_ranks","knowledge_nature_ranks","knowledge_nobility_ranks","knowledge_planes_ranks","knowledge_religion_ranks","linguistics_ranks","perception_ranks","perform_ranks","profession_ranks","ride_ranks","sense_motive_ranks","sleight_of_hand_ranks","spellcraft_ranks","stealth_ranks","survival_ranks","swim_ranks","use_magic_device_ranks"];
                getAttrs(fields, function(v){
                    _.each(fields, function(fld){
                        ranks += parseInt(v[fld]) || 0;
                    });
                    update["skillfixed_ranks"] = ranks;
                    setAttrs(update,{silent:false});
                });
            }
        }
    };
    var sum_allskills_ranks = function() {
        var fields = ["skillfixed_ranks","skillcraft_ranks","skillknowledge_ranks","skillperform_ranks","skillprofession_ranks","skillcustom_ranks"];
        getAttrs(fields, function(v){
            var ranks = 0;
            _.each(fields, function(fld){
                ranks += parseInt(v[fld]) || 0;
            });
            setAttrs({"skills_ranks_total":ranks},{silent:true});
        });
    };

    // === SPEED
    var update_speed_base = function(recalc) {
        if (recalc == "1") {
            // Force recalculation of speed_encumbrance and speed_armor
            var fields = ["speed_race","encumbrance"];
            getAttrs(fields, function(v) {
                var update = {};
                var speedrace = parseInt(v.speed_race) || 30;
                var speed = speedrace;
                if (["medium","heavy"].includes(v.encumbrance)) {
                    speed = calc_reduced_speed(speedrace);
                } else if (v.encumbrance == "over") {
                    speed = 5;
                }
                update["speed_encumbrance"] = speed;
                setAttrs(update,{silent: false},function() {update_ac_items();});
            });
        } else {
            var fields = ["speed_race","speed_notmodified","speed_encumbrance","speed_armor"];
            getAttrs(fields, function(v) {
                var update = {};
                var speed = parseInt(v.speed_race) || 30;
                if (v.speed_notmodified != "1") {
                    speed = Math.min(speed, parseInt(v.speed_encumbrance) || 30, parseInt(v.speed_armor) || 30);
                }
                update["speed_base"] = speed;
                setAttrs(update, {silent: false});
            });
        }
    };
    var update_run_factor = function() {
        var fields = ["encumbrance_run_factor","armor_run_factor"];
        getAttrs(fields, function(v) {
            var update = {};
            var runfac = Math.min((parseInt(v.encumbrance_run_factor) || 4),(parseInt(v.armor_run_factor) || 4));
            update["speed_run_factor"] = runfac;
            setAttrs(update, {silent: false});
        });
    };
    var update_speed = function() {
        var fields = ["speed_base","speed_bonus","speed_run_factor"];
        getAttrs(fields, function(v) {
            var update = {};
            var runfac = parseInt(v.speed_run_factor) || 4;
            var speed = (parseInt(v.speed_base) || 30) + (parseInt(v.speed_bonus) || 0);
            var fourth = calc_round_speed(speed/4);
            update["speed"] = speed;
            update["speed_run"] = (speed * runfac);
            update["speed_swim"] = fourth;
            update["speed_climb"] = fourth;
            setAttrs(update, {silent: true});
        });
    };
    var calc_reduced_speed = function(basespeed) {
        var base = parseInt(basespeed) || 30;
        var speed = Math.ceil((((base/5)/3)*2))*5;
        return speed;
    };
    var calc_round_speed = function(rawspeed) {
        var base = parseFloat(rawspeed) || 0.0;
        var speed = Math.floor(base/5)*5;
        speed = (speed < 5) ? 5 : speed;
        return speed;
    };

    // === GEAR / ENCUMBRANCE
    var update_gear_weight = function(id) {
        var fields = ["repeating_gear_" + id + "_weight","repeating_gear_" + id + "_quantity"];
        getAttrs(fields, function(v) {
            var update = {};
            var weight = (parseFloat(v["repeating_gear_" + id + "_weight"]) || 0.0) * (parseFloat(v["repeating_gear_" + id + "_quantity"]) || 0.0);
            if ((weight - parseInt(weight)) > 0) {
                weight = weight.toFixed(1);
            }
            update["repeating_gear_" + id + "_weight_total"] = weight;
            setAttrs(update, {silent: false});
        });
    };
    var update_gear_weight_total = function() {
        getSectionIDs("repeating_gear", function(idarray) {
            var attribs = [];
            _.each(idarray, function(id) {
                attribs.push("repeating_gear_" + id + "_weight_total");
            });
            getAttrs(attribs, function(v) {
                var total = 0;
                var update = {}
                _.each(idarray, function(id) {
                    total += parseFloat(v["repeating_gear_" + id + "_weight_total"]) || 0.0;
                });
                if ((total - parseInt(total)) > 0) {
                    total = total.toFixed(1);
                }
                update["encumbrance_gear_weight"] = total;
                setAttrs(update, {silent: false});
            });
        });
    };
    // Encumbrance
    var update_encumbrance_load = function() {
        getAttrs(["encumbrance_load_bonus","encumbrance_load_multiplier","strength","encumbrance_size"], function(v) {
            var bonus = parseInt(v.encumbrance_load_bonus) || 0;
            var str = (parseInt(v.strength) || 10) + bonus;
            var multi = parseInt(v.encumbrance_load_multiplier) || 1;
            var size = parseFloat(v.encumbrance_size) || 1.0;
            var heavy = (calc_max_load(str) * size) * multi;
            var medium = Math.floor((heavy / 3) * 2);
            var light = Math.floor(heavy / 3);
            var update = {};
            update["encumbrance_load_light"] = light;
            update["encumbrance_load_medium"] = medium;
            update["encumbrance_load_heavy"] = heavy;
            update["encumbrance_lift_head"] = heavy;
            update["encumbrance_lift_ground"] = heavy * 2;
            update["encumbrance_drag_push"] = heavy * 5;
            setAttrs(update, {silent: false});
        });
    };
    var calc_max_load = function(str) {
        if((str >= 0) && (str <= 10)) {
            return (str * 10);
        } else if (str > 14) {
            return (2 * calc_max_load(str - 5));
        } else {
            return ([115, 130, 150, 175][str - 11]);
        }
    };
    var check_encumbrance = function() {
        var fields = ["encumbrance_gear_weight","encumbrance_load_light","encumbrance_load_medium","encumbrance_load_heavy","speed_race","encumbrance","encumbrance_display"];
        getAttrs(fields, function(v) {
            var update = {};
            var checkpen = 0;
            var speedrace = parseInt(v.speed_race) || 30;
            var speed = speedrace;
            var dexmax = 99;
            var maxab = "-";
            var runfactor = 4;
            var display = "";
            var weight = parseInt(v.encumbrance_gear_weight) || 0;
            var light = parseInt(v.encumbrance_load_light) || 1;
            var medium = parseInt(v.encumbrance_load_medium) || 2;
            var heavy = parseInt(v.encumbrance_load_heavy) || 3;
            var prevenc = v.encumbrance; // light / medium / heavy / over
            var newenc = prevenc;
            if (typeof v.encumbrance_display !== 'undefined') {display = v.encumbrance_display;}
            if((weight > light) && (weight <= medium)) {
                newenc = "medium";
                checkpen = -3;
                speed = calc_reduced_speed(speedrace);
                dexmax = 3;
                runfactor = 4;
            } else if ((weight > medium) && (weight <= heavy)) {
                newenc = "heavy";
                checkpen = -6;
                speed = calc_reduced_speed(speedrace);
                dexmax = 1;
                runfactor = 3;
            } else if (weight > heavy) {
                newenc = "over";
                checkpen = -6;
                speed = 5;
                dexmax = 1;
                runfactor = 3;
            } else {
                newenc = "light";
            }
            if((prevenc != newenc) || (display == "")) {
                if (dexmax < 99) {
                    maxab = dexmax;
                }
                update["encumbrance"] = newenc;
                update["encumbrance_display"] = getTranslationByKey(newenc + "-load");
                update["encumbrance_check_penalty"] = checkpen;
                update["speed_encumbrance"] = speed;
                update["encumbrance_ability_maximum"] = maxab;
                update["encumbrance_run_factor"] = runfactor;
                setAttrs(update,{silent: false});
            }
        });
    };

    // === SPELLS / SPELLCASTING
    var update_concentration = function(srcattr) {
        var cster = srcattr.substr(0,7).slice(-1);
        var fields = ["caster" + cster + "_level","caster" + cster + "_ability_mod","caster" + cster + "_concentration_misc","caster" + cster + "_concentration_bonus"];
        getAttrs(fields, function(v) {
            var update = {};
            update["caster" + cster + "_concentration"] = (parseInt(v["caster" + cster + "_level"]) || 0) + (parseInt(v["caster" + cster + "_ability_mod"]) || 0) + (parseInt(v["caster" + cster + "_concentration_misc"]) || 0) + (parseInt(v["caster" + cster + "_concentration_bonus"]) || 0);
            setAttrs(update, {silent: true});
        });
    };
    var update_spellsdc = function (attr) {
        var cster = attr.substr(0,7).slice(-1);
        var fields = ["caster" + cster + "_ability_mod","caster" + cster + "_dc_misc"];
        var minlvl = 0;
        var maxlvl = 0;
        if (fields.includes(attr)) {
            maxlvl = 10;
            fields = fields.concat(["caster" + cster + "_dcbonus_level_0","caster" + cster + "_dcbonus_level_1","caster" + cster + "_dcbonus_level_2","caster" + cster + "_dcbonus_level_3","caster" + cster + "_dcbonus_level_4","caster" + cster + "_dcbonus_level_5","caster" + cster + "_dcbonus_level_6","caster" + cster + "_dcbonus_level_7","caster" + cster + "_dcbonus_level_8","caster" + cster + "_dcbonus_level_9"]);
        } else {
            minlvl = parseInt(attr.charAt(attr.length - 1));
            maxlvl = 1 + minlvl;
            fields.push("caster" + cster + "_dcbonus_level_" + minlvl);
        }
        if ((minlvl >= 0) && (maxlvl <= 10)) {
            getAttrs(fields, function(v) {
                var update = {};
                var i = 0;
                for (i = minlvl; i < maxlvl; i++) {
                    update["caster" + cster + "_dc_level_" + i] = 10 + i + (parseInt(v["caster" + cster + "_ability_mod"]) || 0) + (parseInt(v["caster" + cster + "_dc_misc"]) || 0) + (parseInt(v["caster" + cster + "_dcbonus_level_" + i]) || 0);
                }
                setAttrs(update, {silent: false});
            });
        }
    };
    var update_spells_totals = function(level,cster) {
        var fields = ["caster" + cster + "_spells_perday_level_" + level,"caster" + cster + "_spells_bonus_level_" + level];
        getAttrs(fields, function(v) {
            var update = {};
            update["caster" + cster + "_spells_total_level_" + level] = (parseInt(v["caster" + cster + "_spells_perday_level_" + level]) || 0) + (parseInt(v["caster" + cster + "_spells_bonus_level_" + level]) || 0);
            setAttrs(update, {silent: true});
        });
    };
    var update_spells_prepared = function (src,val) {
        var update = {};
        var repsec = src.substr(0,17);
        var level = repsec.charAt(repsec.length - 1);
        getSectionIDs("repeating_spell-" + level, function(idarray) {
            var spell_attribs = ["caster1_spells_total_level_" + level,"caster2_spells_total_level_" + level];
            _.each(idarray, function(spellid) {
                spell_attribs.push("repeating_spell-" + level + "_" + spellid + "_spellprepared");
                spell_attribs.push("repeating_spell-" + level + "_" + spellid + "_spellcaster");
            });
            getAttrs(spell_attribs, function(v) {
                var total1 = 0;
                var total2 = 0;
                _.each(idarray, function(id) {
                    if (v["repeating_spell-" + level + "_" + id + "_spellcaster"] == "2") {
                        total2 += parseInt(v["repeating_spell-" + level + "_" + id + "_spellprepared"]) || 0;
                    } else {
                        total1 += parseInt(v["repeating_spell-" + level + "_" + id + "_spellprepared"]) || 0;
                    }
                });
                update["caster1_spells_prepared_level_" + level] = total1;
                update["caster1_spells_prepared_flag_" + level] = (total1 > (parseInt(v["caster1_spells_total_level_" + level]) || 0)) ? 1 : 0;
                update["caster2_spells_prepared_level_" + level] = total2;
                update["caster2_spells_prepared_flag_" + level] = (total2 > (parseInt(v["caster2_spells_total_level_" + level]) || 0)) ? 1 : 0;
                setAttrs(update, {silent: true});
            });
        });
    };
    var update_all_spells = function(update_id) {
        update_spells(0,update_id);
        update_spells(1,update_id);
        update_spells(2,update_id);
        update_spells(3,update_id);
        update_spells(4,update_id);
        update_spells(5,update_id);
        update_spells(6,update_id);
        update_spells(7,update_id);
        update_spells(8,update_id);
        update_spells(9,update_id);
        update_spells("like",update_id);
    };
    var update_spells = function(level,update_id) {
        console.log("DOING UPDATE_SPELLS: " + level + " / " + update_id);
        if(update_id.substring(0,1) === "-" && update_id.length === 20) {
            do_update_spell(level,[update_id]);
        }
        else if(["strength","dexterity","constitution","intelligence","wisdom","charisma","melee","ranged","cmb","all"].includes(update_id)) {
            getSectionIDs("repeating_spell-" + level, function(idarray) {
                if(update_id === "all") {
                    do_update_spell(level,idarray);
                } else {
                    var spell_attribs = [];
                    _.each(idarray, function(spellid) {
                        spell_attribs.push("repeating_spell-" + level + "_" + spellid + "_spellatktype");
                    });
                    getAttrs(spell_attribs, function(v) {
                        var attr_spell_ids = [];
                        _.each(idarray, function(id) {
                            if(v["repeating_spell-" + level + "_" + id + "_spellatktype"] && v["repeating_spell-" + level + "_" + id + "_spellatktype"].includes(update_id)) {attr_spell_ids.push(id);}
                        });
                        if(attr_spell_ids.length > 0) {do_update_spell(level,attr_spell_ids);}
                    });
                }
            });
        }
    };
    var do_update_spell = function(spell_level,spell_array) {
        var spell_attribs = ["strength_mod","dexterity_mod","constitution_mod","intelligence_mod","wisdom_mod","charisma_mod","melee_mod","ranged_mod","cmb_mod","rollmod_attack","rollnotes_spell","rollmod_damage","whispertype","rollshowchar","caster1_level", "caster1_dc_level_" + spell_level,"caster2_level","caster2_dc_level_" + spell_level,"caster2_flag","caster1_class","caster2_class","armor_spell_failure","caster1_spell_failure","caster2_spell_failure","npc"]; // "caster3_dc_level_" + spell_level, "caster3_class"
        _.each(spell_array, function(spellid) {
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spelllevel");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spellcaster");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spellname");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spellschool");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spellclasslevel");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spellcastingtime");
            if (spell_level != "like") {
                spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spellcomponent");
            }
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spellrange");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spellarea");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spelltargets");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spelleffect");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spellduration");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spellsaveflag");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spellsave");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spelldc_mod");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spellresistanceflag");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spellresistance");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spellatkflag");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spellatktype");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spellatkmod");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spellatkcritrange");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spelldmgcritmulti");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spelldmgflag");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spelldmg");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spelldmgtype");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spelldmg2flag");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spelldmg2");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spelldmg2type");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spelldescflag");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_spelldesc");
            spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_notes");
            if(spell_level == "like") {
                spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_timesperday");
                spell_attribs.push("repeating_spell-" + spell_level + "_" + spellid + "_perday_max");
            }
        });
        getAttrs(spell_attribs, function(v) {
            _.each(spell_array, function(spellid) {
                console.log("UPDATING SPELL: " + spell_level + " / " + spellid);
                var update = {};
                var stemp = "";
                var rollbase = "";
                var rollbasetemplate = "pc";
                if (v.npc == "1") {
                    rollbasetemplate = "npc";
                }
                var atkflag = v["repeating_spell-" + spell_level + "_" + spellid + "_spellatkflag"];
                //var atktype = parseInt(v[v["repeating_spell-" + spell_level + "_" + spellid + "_spellatktype"] + "_mod"]) || 0;
                var atktype = v["repeating_spell-" + spell_level + "_" + spellid + "_spellatktype"];
                var atkmod = v["repeating_spell-" + spell_level + "_" + spellid + "_spellatkmod"];
                var atkcritrange = parseInt(v["repeating_spell-" + spell_level + "_" + spellid + "_spellatkcritrange"]) || 20;
                var dmgflag = v["repeating_spell-" + spell_level + "_" + spellid + "_spelldmgflag"];
                var dmgbase = v["repeating_spell-" + spell_level + "_" + spellid + "_spelldmg"];
                var dmgcritmulti = parseInt(v["repeating_spell-" + spell_level + "_" + spellid + "_spelldmgcritmulti"]) || 1;
                var dmgtype = v["repeating_spell-" + spell_level + "_" + spellid + "_spelldmgtype"];
                var dmg2flag = v["repeating_spell-" + spell_level + "_" + spellid + "_spelldmg2flag"];
                var dmg2base = v["repeating_spell-" + spell_level + "_" + spellid + "_spelldmg2"];
                var dmg2type = v["repeating_spell-" + spell_level + "_" + spellid + "_spelldmg2type"];
                var cster = v["repeating_spell-" + spell_level + "_" + spellid + "_spellcaster"];
                // == Display handling
                if (spell_level == "like") {
                    update["repeating_spell-" + spell_level + "_" + spellid + "_spelldisplay"] = v["repeating_spell-" + spell_level + "_" + spellid + "_spellname"] + " — " + pfoglobals_i18n_obj[v["repeating_spell-" + spell_level + "_" + spellid + "_timesperday"]];
                    update["repeating_spell-" + spell_level + "_" + spellid + "_spellprepared"] = (v["repeating_spell-" + spell_level + "_" + spellid + "_timesperday"] == "per-day") ? 1 : 0;
                } else {
                    update["repeating_spell-" + spell_level + "_" + spellid + "_spelldisplay"] = v["repeating_spell-" + spell_level + "_" + spellid + "_spellname"];
                    // Multicasting
                    update["repeating_spell-" + spell_level + "_" + spellid + "_spellcaster1_class"] = (v.caster1_class.length > 0) ? v.caster1_class : " ";
                    if (v.caster2_flag == "1") {
                        update["repeating_spell-" + spell_level + "_" + spellid + "_spellmulticasters-flag"] = 1;
                        update["repeating_spell-" + spell_level + "_" + spellid + "_spellcaster2_class"] = (v.caster2_class.length > 0) ? v.caster2_class : " ";
                    } else {
                        update["repeating_spell-" + spell_level + "_" + spellid + "_spellcaster"] = 1;
                        update["repeating_spell-" + spell_level + "_" + spellid + "_spellmulticasters-flag"] = 0;
                        update["repeating_spell-" + spell_level + "_" + spellid + "_spellcaster2_class"] = " ";
                    }
                }
                // == Save DC
                var savedc = 0 + (parseInt(v["caster" + cster + "_dc_level_" + spell_level]) || 0) + (parseInt(v["repeating_spell-" + spell_level + "_" + spellid + "_spelldc_mod"]) || 0);
                // == Rolls handling
                // base
                rollbase = "@{whispertype} &{template:" + rollbasetemplate + "}{{name=" + v["repeating_spell-" + spell_level + "_" + spellid + "_spellname"] + "}}{{type=spell}}{{showchar=@{rollshowchar}}}{{charname=@{character_name}}}";
                // spell level
                if (spell_level == "like") {
                    if (v.npc == "1") {
                        rollbase += "{{level=" + v.caster2_level + "}}";
                    }
                } else {
                    rollbase += "{{level=" + spell_level + "}}";
                }
                // caster class
                if ((v.npc == "0") && (v.caster2_flag == "1")) {
                    rollbase += "{{casterclass=" + ((v["repeating_spell-" + spell_level + "_" + spellid + "_spellcaster"] == "1") ? v.caster1_class : v.caster2_class) + "}}";
                }
                // school
                if(v["repeating_spell-" + spell_level + "_" + spellid + "_spellschool"].length != 0) {rollbase += "{{school=" + v["repeating_spell-" + spell_level + "_" + spellid + "_spellschool"] + "}}";}
                // casting time
                if(v["repeating_spell-" + spell_level + "_" + spellid + "_spellcastingtime"].length != 0) {rollbase += "{{castingtime=" + v["repeating_spell-" + spell_level + "_" + spellid + "_spellcastingtime"] + "}}";}
                // component
                if (spell_level != "like") {
                    if(v["repeating_spell-" + spell_level + "_" + spellid + "_spellcomponent"].length != 0) {rollbase += "{{component=" + v["repeating_spell-" + spell_level + "_" + spellid + "_spellcomponent"] + "}}";}
                }
                // range
                if(v["repeating_spell-" + spell_level + "_" + spellid + "_spellrange"].length != 0) {rollbase += "{{range=" + v["repeating_spell-" + spell_level + "_" + spellid + "_spellrange"] + "}}";}
                // area
                if(v["repeating_spell-" + spell_level + "_" + spellid + "_spellarea"].length != 0) {rollbase += "{{area=" + v["repeating_spell-" + spell_level + "_" + spellid + "_spellarea"] + "}}";}
                // targets
                if(v["repeating_spell-" + spell_level + "_" + spellid + "_spelltargets"].length != 0) {rollbase += "{{targets=" + v["repeating_spell-" + spell_level + "_" + spellid + "_spelltargets"] + "}}";}
                // effect
                if(v["repeating_spell-" + spell_level + "_" + spellid + "_spelleffect"].length != 0) {rollbase += "{{effect=" + v["repeating_spell-" + spell_level + "_" + spellid + "_spelleffect"] + "}}";}
                // duration
                if(v["repeating_spell-" + spell_level + "_" + spellid + "_spellduration"].length != 0) {rollbase += "{{duration=" + v["repeating_spell-" + spell_level + "_" + spellid + "_spellduration"] + "}}";}
                // saving throw
                if(v["repeating_spell-" + spell_level + "_" + spellid + "_spellsaveflag"] != "0") {rollbase += "{{save=1}}{{savedc=[[" + savedc + "]]}}{{saveeffect=" + v["repeating_spell-" + spell_level + "_" + spellid + "_spellsave"] + "}}";}
                // spell resistance
                if(v["repeating_spell-" + spell_level + "_" + spellid + "_spellresistanceflag"] != "0") {rollbase += "{{sr=1}}{{spellresistance=" + v["repeating_spell-" + spell_level + "_" + spellid + "_spellresistance"] + "}}";}
                // desc
                if(v["repeating_spell-" + spell_level + "_" + spellid + "_spelldescflag"] != "0") {rollbase += "{{descflag=[[1]]}}{{desc=" + v["repeating_spell-" + spell_level + "_" + spellid + "_spelldesc"] + "}}";}
                // roll attack
                if(atkflag != "0") {
                    if (atktype != "0") {atktype = "@{" + atktype + "_mod}";}
                    if (atkmod.length == 0) {atkmod = "0";}
                    rollbase += atkflag + "{{roll=[[1d20cs>" + atkcritrange + "+" + atktype + "[" + pfoglobals_i18n_obj[v["repeating_spell-" + spell_level + "_" + spellid + "_spellatktype"]] + "]+" + atkmod + "[MOD]+@{rollmod_attack}[BONUS]]]}}";
                    rollbase += "{{critconfirm=[[1d20cs20+" + atktype + "[" + pfoglobals_i18n_obj[v["repeating_spell-" + spell_level + "_" + spellid + "_spellatktype"]] + "]+" + atkmod + "[MOD]+@{rollmod_attack}[BONUS]]]}}";
                }
                // roll damage
                if((dmgflag != "0") || (dmg2flag != "0")) {
                    if(dmgflag != "0") {
                        stemp = "" + dmgbase + "+@{rollmod_damage}[BONUS]";
                        rollbase += dmgflag + "{{dmg1=[[" + stemp + "]]}}{{dmg1type=" + dmgtype +"}}";
                        if( (atkflag != "0") && (dmgcritmulti >1) ) {
                            // Critical damage
                            stemp = "";
                            for (i=1; i <= dmgcritmulti; i++) {
                                stemp += ((stemp.length > 0) ? "+" : "") + dmgbase;
                            }
                            rollbase += "{{dmg1crit=[[(" + stemp +")+(@{rollmod_damage}*" + dmgcritmulti + ")[BONUS]]]}}";
                        }
                    }
                    if(dmg2flag != "0") {
                        stemp = "" + dmg2base + "+@{rollmod_damage}[BONUS]";
                        rollbase += dmg2flag + "{{dmg2=[[" + stemp +"]]}}{{dmg2type=" + dmg2type + "}}";
                        if( (atkflag != "0") && (dmgcritmulti >1) ) {
                            // Critical damage
                            stemp = "";
                            for (i=1; i <= dmgcritmulti; i++) {
                                stemp += ((stemp.length > 0) ? "+" : "") + dmg2base;
                            }
                            rollbase += "{{dmg2crit=[[(" + stemp +")+(@{rollmod_damage}*" + dmgcritmulti + ")[BONUS]]]}}";
                        }
                    }
                }
                // spell failure
                if ((v.npc == "0") && (spell_level != "like")) {
                    if( (v.armor_spell_failure != "0") && ( ((v.caster1_spell_failure == "1") && (v["repeating_spell-" + spell_level + "_" + spellid + "_spellcaster"] == "1")) || ((v["repeating_spell-" + spell_level + "_" + spellid + "_spellcaster"] == "2") && (v.caster2_spell_failure == "1"))) ) {
                        rollbase += "{{spellfailureroll=[[1d100]]}}";
                        rollbase += "{{spellfailure=[[" + v.armor_spell_failure + "]]}}";
                    }
                }
                // notes
                if(v["rollnotes_spell"] != "0") {rollbase += "{{shownotes=[[1]]}}{{notes=" + v["repeating_spell-" + spell_level + "_" + spellid + "_notes"] + "}}";}
                // == update
                update["repeating_spell-" + spell_level + "_" + spellid + "_spelldc"] = savedc;
                update["repeating_spell-" + spell_level + "_" + spellid + "_rollcontent"] = rollbase;
                setAttrs(update, {silent: true});
            });
        });
    };

    // === Multi Lingual handling
    var loadi18n = function() {
        pfoglobals_i18n_obj["strength"] = getTranslationByKey("str-u");
        pfoglobals_i18n_obj["dexterity"] = getTranslationByKey("dex-u");
        pfoglobals_i18n_obj["constitution"] = getTranslationByKey("con-u");
        pfoglobals_i18n_obj["intelligence"] = getTranslationByKey("int-u");
        pfoglobals_i18n_obj["wisdom"] = getTranslationByKey("wis-u");
        pfoglobals_i18n_obj["charisma"] = getTranslationByKey("cha-u");
        pfoglobals_i18n_obj["bab"] = getTranslationByKey("bab-u");
        pfoglobals_i18n_obj["melee"] = getTranslationByKey("melee");
        pfoglobals_i18n_obj["ranged"] = getTranslationByKey("ranged");
        pfoglobals_i18n_obj["cmb"] = getTranslationByKey("cmb-u");
        pfoglobals_i18n_obj["cmd"] = getTranslationByKey("cmd-u");
        pfoglobals_i18n_obj["ac"] = getTranslationByKey("ac-u");
        pfoglobals_i18n_obj["touch"] = getTranslationByKey("touch");
        pfoglobals_i18n_obj["flatfooted"] = getTranslationByKey("flat-footed");
        pfoglobals_i18n_obj["fftouch"] = getTranslationByKey("ff-touch");
        pfoglobals_i18n_obj["other"] = getTranslationByKey("other");
        pfoglobals_i18n_obj["fortitude"] = getTranslationByKey("fort-u");
        pfoglobals_i18n_obj["reflex"] = getTranslationByKey("ref-u");
        pfoglobals_i18n_obj["will"] = getTranslationByKey("will-u");
        pfoglobals_i18n_obj["vs"] = getTranslationByKey("vs");
        pfoglobals_i18n_obj["0"] = "";
        pfoglobals_i18n_obj["constant"] = getTranslationByKey("constant");
        pfoglobals_i18n_obj["at-will"] = getTranslationByKey("at-will");
        pfoglobals_i18n_obj["per-day"] = getTranslationByKey("per-day");
    };

    // === Version and updating
    var initializeChar = function(doneupdating) {
        getAttrs(["character_name"], function(v) {
            console.log("Initializing character " + v.character_name);
            var update = {};
            update["strength_mod"] = 0;
            update["dexterity_mod"] = 0;
            update["constitution_mod"] = 0;
            update["intelligence_mod"] = 0;
            update["wisdom_mod"] = 0;
            update["charisma_mod"] = 0;
            update["initiative"] = 0;
            // Size
            update["ac_size"] = 0;
            update["bab_size"] = 0;
            update["cmb_size"] = 0;
            update["fly_size"] = 0;
            update["stealth_size"] = 0;
            update["encumbrance_size"] = 1;
            // AC
            update["ac_armor"] = 0;
            update["ac_shield"] = 0;
            update["ac_flatfooted_bonus"] = 0;
            update["ac_touch_bonus"] = 0;
            update["ac_ability_maximum"] = "-";
            update["armor_check_penalty"] = 0;
            update["armor_spell_failure"] = 0;
            update["armor_run_factor"] = 4;
            update["ac"] = 10;
            update["ac_touch"] = 0;
            update["ac_flatfooted"] = 0;
            // Saves
            update["fortitude_ability_mod"] = 0;
            update["reflex_ability_mod"] = 0;
            update["will_ability_mod"] = 0;
            update["cmb_ability_mod"] = 0;
            update["melee_ability_mod"] = 0;
            update["ranged_ability_mod"] = 0;
            update["fortitude"] = 0;
            update["reflex"] = 0;
            update["will"] = 0;
            // BABs
            update["cmb_mod"] = 0;
            update["melee_mod"] = 0;
            update["ranged_mod"] = 0;
            update["cmd_mod"] = 10;
            // Speed
            update["speed"] = 30;
            update["speed_base"] = 30;
            update["speed_encumbrance"] = 30;
            update["speed_armor"] = 30;
            update["speed_run_factor"] = 4;
            update["speed_run"] = 120;
            update["speed_swim"] = 7.5;
            update["speed_climb"] = 7.5;
            // Encumbrance
            update["encumbrance_load_light"] = 33;
            update["encumbrance_load_medium"] = 66;
            update["encumbrance_load_heavy"] = 100;
            update["encumbrance_lift_head"] = 100;
            update["encumbrance_lift_ground"] = 200;
            update["encumbrance_drag_push"] = 500;
            update["encumbrance_check_penalty"] = 0;
            update["encumbrance_ability_maximum"] = "-";
            update["encumbrance_run_factor"] = 4;
            // Skills
            update["acrobatics_ability_mod"] = 0;
            update["appraise_ability_mod"] = 0;
            update["bluff_ability_mod"] = 0;
            update["climb_ability_mod"] = 0;
            update["craft_ability_mod"] = 0;
            update["diplomacy_ability_mod"] = 0;
            update["disable_device_ability_mod"] = 0;
            update["disguise_ability_mod"] = 0;
            update["escape_artist_ability_mod"] = 0;
            update["fly_ability_mod"] = 0;
            update["handle_animal_ability_mod"] = 0;
            update["heal_ability_mod"] = 0;
            update["intimidate_ability_mod"] = 0;
            update["knowledge_arcana_ability_mod"] = 0;
            update["knowledge_dungeoneering_ability_mod"] = 0;
            update["knowledge_engineering_ability_mod"] = 0;
            update["knowledge_geography_ability_mod"] = 0;
            update["knowledge_history_ability_mod"] = 0;
            update["knowledge_local_ability_mod"] = 0;
            update["knowledge_nature_ability_mod"] = 0;
            update["knowledge_nobility_ability_mod"] = 0;
            update["knowledge_planes_ability_mod"] = 0;
            update["knowledge_religion_ability_mod"] = 0;
            update["linguistics_ability_mod"] = 0;
            update["perception_ability_mod"] = 0;
            update["perform_ability_mod"] = 0;
            update["profession_ability_mod"] = 0;
            update["ride_ability_mod"] = 0;
            update["sense_motive_ability_mod"] = 0;
            update["sleight_of_hand_ability_mod"] = 0;
            update["spellcraft_ability_mod"] = 0;
            update["stealth_ability_mod"] = 0;
            update["survival_ability_mod"] = 0;
            update["swim_ability_mod"] = 0;
            update["use_magic_device_ability_mod"] = 0;
            update["acrobatics"] = 0;
            update["appraise"] = 0;
            update["bluff"] = 0;
            update["climb"] = 0;
            update["craft"] = 0;
            update["diplomacy"] = 0;
            update["disable_device"] = 0;
            update["disguise"] = 0;
            update["escape_artist"] = 0;
            update["fly"] = 0;
            update["handle_animal"] = 0;
            update["heal"] = 0;
            update["intimidate"] = 0;
            update["knowledge_arcana"] = 0;
            update["knowledge_dungeoneering"] = 0;
            update["knowledge_engineering"] = 0;
            update["knowledge_geography"] = 0;
            update["knowledge_history"] = 0;
            update["knowledge_local"] = 0;
            update["knowledge_nature"] = 0;
            update["knowledge_nobility"] = 0;
            update["knowledge_planes"] = 0;
            update["knowledge_religion"] = 0;
            update["linguistics"] = 0;
            update["perception"] = 0;
            update["perform"] = 0;
            update["profession"] = 0;
            update["ride"] = 0;
            update["sense_motive"] = 0;
            update["sleight_of_hand"] = 0;
            update["spellcraft"] = 0;
            update["stealth"] = 0;
            update["survival"] = 0;
            update["swim"] = 0;
            update["use_magic_device"] = 0;
            update["acrobatics_ability"] = "dexterity";
            update["acrobatics_armor_penalty"] = "@{skill_check_penalty}";
            update["climb_ability"] = "strength";
            update["climb_armor_penalty"] = "@{skill_check_penalty}";
            update["disable_device_ability"] = "dexterity";
            update["disable_device_armor_penalty"] = "@{skill_check_penalty}";
            update["escape_artist_ability"] = "dexterity";
            update["escape_artist_armor_penalty"] = "@{skill_check_penalty}";
            update["fly_ability"] = "dexterity";
            update["fly_armor_penalty"] = "@{skill_check_penalty}";
            update["ride_ability"] = "dexterity";
            update["ride_armor_penalty"] = "@{skill_check_penalty}";
            update["sleight_of_hand_ability"] = "dexterity";
            update["sleight_of_hand_armor_penalty"] = "@{skill_check_penalty}";
            update["stealth_ability"] = "dexterity";
            update["stealth_armor_penalty"] = "@{skill_check_penalty}";
            update["swim_ability"] = "strength";
            update["swim_armor_penalty"] = "@{skill_check_penalty}";
            update["skill_check_penalty"] = 0;
            // Spells / spellcasting
            update["caster1_ability_mod"] = 0;
            update["caster1_concentration"] = 0;
            update["caster1_dc_level_0"] = 0;
            update["caster1_dc_level_1"] = 0;
            update["caster1_dc_level_2"] = 0;
            update["caster1_dc_level_3"] = 0;
            update["caster1_dc_level_4"] = 0;
            update["caster1_dc_level_5"] = 0;
            update["caster1_dc_level_6"] = 0;
            update["caster1_dc_level_7"] = 0;
            update["caster1_dc_level_8"] = 0;
            update["caster1_dc_level_9"] = 0;
            update["caster2_ability_mod"] = 0;
            update["caster2_concentration"] = 0;
            update["caster2_dc_level_0"] = 0;
            update["caster2_dc_level_1"] = 0;
            update["caster2_dc_level_2"] = 0;
            update["caster2_dc_level_3"] = 0;
            update["caster2_dc_level_4"] = 0;
            update["caster2_dc_level_5"] = 0;
            update["caster2_dc_level_6"] = 0;
            update["caster2_dc_level_7"] = 0;
            update["caster2_dc_level_8"] = 0;
            update["caster2_dc_level_9"] = 0;
            // UPDATE
            setAttrs(update
                    ,{silent: true}
                    ,function() {
                        doneupdating();
                    });
        });
    };
    var update_to_1_01 = function(doneupdating) {
        update_npc_attacks_all();
        update_attacks("all");
        update_all_spells("all");
        doneupdating();
    };
    var update_to_1_02 = function(doneupdating) {
        /* TODO :
            repeating_npcatk-melee:dmgflag ,
            repeating_npcatk-ranged:dmgflag :
                1 = {{damage=1}} {{dmg1flag=1}}{{dmg1=[[@{dmgbase}[MOD]+@{rollmod_damage}[BONUS]]]}}{{dmg1type=@{dmgtype}}}{{dmg1crit=[[(@{dmgbase}[MOD]+@{rollmod_damage}[BONUS])*@{dmgcritmulti}]]}}
                1 = {{damage=1}} {{dmg1flag=1}}{{dmg1=[[@{dmgbase}[MOD]+@{rollmod_damage}[BONUS]]]}}{{dmg1type=@{dmgtype}}}{{dmg1crit=[[(@{dmgbase}[MOD]+@{rollmod_damage}[BONUS])*@{dmgcritmulti}]]}}
            repeating_npcatk-melee:dmg2flag ,
            repeating_npcatk-ranged:dmg2flag :
                1 = {{damage=1}} {{dmg2flag=1}}{{dmg2=[[@{dmg2base}[MOD]+@{rollmod_damage}[BONUS]]]}}{{dmg2type=@{dmg2type}}}{{dmg2crit=[[(@{dmg2base}[MOD]+@{rollmod_damage}[BONUS])*@{dmg2critmulti}]]}}
                1 = {{damage=1}} {{dmg2flag=1}}{{dmg2=[[@{dmg2base}[MOD]+@{rollmod_damage}[BONUS]]]}}{{dmg2type=@{dmg2type}}}{{dmg2crit=[[(@{dmg2base}[MOD]+@{rollmod_damage}[BONUS])*@{dmg2critmulti}]]}}
            silent setAttrs and on return :
                update_npc_attacks_all();
                update_attacks("all");
                update_all_spells("all");
        */
        doneupdating();
    };
    var versioning = function() {
        getAttrs(["version"], function(v) {
            var vrs = parseFloat(v["version"]) || 0.0;
            if (vrs === 1.01) {
                console.log("Pathfinder by Roll20 v" + vrs);
                return;
            } else if (vrs < 1.0) {
                initializeChar(function () {
                    setAttrs({"version": "1.0"});
                    versioning();
                });
            } else if (vrs < 1.01) {
                update_to_1_01(function () {
                    setAttrs({"version": "1.01"});
                    versioning();
                });
            } else if (vrs < 1.02) {
                /*
                update_to_1_02(function () {
                    setAttrs({"version": "1.02"});
                    versioning();
                });
                */
            }
        });
    };
</script>
